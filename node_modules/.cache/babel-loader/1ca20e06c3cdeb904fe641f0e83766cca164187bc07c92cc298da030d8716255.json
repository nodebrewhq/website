{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, prepend, createElement, extend, EventHandler, closest, addClass } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setStyleAttribute, remove } from '@syncfusion/ej2-base';\nimport { EventBase } from './event-base';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nvar EVENT_GAP = 0;\n/**\n * Month view events render\n */\nvar MonthEvent = /** @class */function (_super) {\n  __extends(MonthEvent, _super);\n  function MonthEvent(parent) {\n    var _this = _super.call(this, parent) || this;\n    _this.renderedEvents = [];\n    _this.monthHeaderHeight = 0;\n    _this.moreIndicatorHeight = 19;\n    _this.renderType = 'day';\n    _this.element = _this.parent.activeView.getPanel();\n    _this.fields = _this.parent.eventFields;\n    _this.maxHeight = _this.parent.eventSettings.enableMaxHeight && !_this.parent.eventSettings.enableIndicator && !_this.parent.rowAutoHeight;\n    _this.withIndicator = _this.parent.eventSettings.enableMaxHeight && _this.parent.eventSettings.enableIndicator && !_this.parent.rowAutoHeight;\n    _this.maxOrIndicator = _this.maxHeight || _this.withIndicator;\n    _this.moreIndicatorHeight = _this.parent.rowAutoHeight && _this.parent.eventSettings.ignoreWhitespace ? 0 : _this.moreIndicatorHeight;\n    _this.addEventListener();\n    return _this;\n  }\n  MonthEvent.prototype.removeEventWrapper = function (appElement) {\n    if (appElement.length > 0) {\n      appElement = this.parent.currentView === 'Month' || !this.parent.activeView.isTimelineView() && !this.parent.activeViewOptions.timeScale.enable ? appElement : [appElement[0]];\n      for (var _i = 0, appElement_1 = appElement; _i < appElement_1.length; _i++) {\n        var wrap = appElement_1[_i];\n        if (wrap.parentElement && wrap.parentElement.parentNode) {\n          remove(wrap.parentElement);\n        }\n      }\n    }\n  };\n  MonthEvent.prototype.renderAppointments = function () {\n    if (this.parent.dragAndDropModule) {\n      this.parent.dragAndDropModule.setDragArea();\n    }\n    this.isResourceEventTemplate = this.parent.isSpecificResourceEvents();\n    var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    if (this.parent.rowAutoHeight) {\n      this.parent.uiStateValues.top = conWrap.scrollTop;\n      this.parent.uiStateValues.left = conWrap.scrollLeft;\n    }\n    var appointmentWrapper = [].slice.call(this.element.querySelectorAll('.' + cls.APPOINTMENT_WRAPPER_CLASS));\n    if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n      for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n        var appElement = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper ' + '[data-group-index=\"' + this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex + '\"]'));\n        this.removeEventWrapper(appElement);\n        if (this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)] && this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex !== this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex) {\n          var ele = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper ' + '[data-group-index=\"' + this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex + '\"]'));\n          this.removeEventWrapper(ele);\n        }\n      }\n    } else {\n      for (var _i = 0, appointmentWrapper_1 = appointmentWrapper; _i < appointmentWrapper_1.length; _i++) {\n        var wrap = appointmentWrapper_1[_i];\n        remove(wrap);\n      }\n    }\n    this.removeHeightProperty(cls.CONTENT_TABLE_CLASS);\n    if (!this.element.querySelector('.' + cls.WORK_CELLS_CLASS)) {\n      return;\n    }\n    if (this.parent.currentView === 'Month') {\n      var wrapper = createElement('div', {\n        className: cls.APPOINTMENT_WRAPPER_CLASS\n      });\n      var cellTd = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n      cellTd.appendChild(wrapper);\n      this.monthHeaderHeight = wrapper.offsetTop - cellTd.offsetTop;\n      cellTd.removeChild(wrapper);\n    }\n    this.eventHeight = util.getElementHeightFromClass(this.element, cls.APPOINTMENT_CLASS);\n    var selector = '.' + cls.CONTENT_TABLE_CLASS + ' tbody tr';\n    this.addCellHeight(selector, this.eventHeight, this.parent.currentView === 'Month' ? EVENT_GAP : 2, this.monthHeaderHeight, this.moreIndicatorHeight);\n    var scrollTop = conWrap.scrollTop;\n    if (this.parent.rowAutoHeight && this.parent.virtualScrollModule && !this.parent.virtualScrollModule.isHorizontalScroll && !isNullOrUndefined(this.parent.currentAction)) {\n      conWrap.scrollTop = conWrap.scrollTop - 1;\n    }\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      this.renderResourceEvents();\n      if (this.parent.virtualScrollModule) {\n        this.parent.virtualScrollModule.updateFocusedWorkCell();\n      }\n    } else {\n      this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays);\n    }\n    if (this.parent.rowAutoHeight) {\n      this.updateBlockElements();\n      var data = {\n        cssProperties: this.parent.getCssProperties(),\n        module: this.parent.getModuleName(),\n        isPreventScrollUpdate: true,\n        scrollPosition: {\n          left: this.parent.uiStateValues.left,\n          top: this.parent.uiStateValues.top\n        }\n      };\n      if (this.parent.virtualScrollModule && !this.parent.virtualScrollModule.isHorizontalScroll) {\n        if (this.parent.currentAction) {\n          conWrap.scrollTop = scrollTop;\n          this.parent.currentAction = null;\n        } else {\n          this.parent.virtualScrollModule.updateVirtualScrollHeight();\n        }\n      }\n      if (!this.parent.enablePersistence) {\n        this.parent.notify(events.contentReady, {});\n      }\n      this.parent.notify(events.scrollUiUpdate, data);\n      if (this.parent.currentView === 'Month' && this.parent.showWeekNumber) {\n        var totalCells_1 = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap table tr td:first-child'));\n        var weekNumberCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WEEK_NUMBER_CLASS));\n        weekNumberCells.forEach(function (cell, i) {\n          var height = totalCells_1[parseInt(i.toString(), 10)].offsetHeight;\n          setStyleAttribute(cell, {\n            'height': height + 'px'\n          });\n        });\n        this.parent.element.querySelector('.' + cls.WEEK_NUMBER_WRAPPER_CLASS).scrollTop = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS).scrollTop;\n      }\n    }\n    this.parent.renderTemplates();\n  };\n  MonthEvent.prototype.renderEventsHandler = function (dateRender, workDays, resData) {\n    this.renderedEvents = [];\n    var eventsList;\n    var blockList;\n    var resIndex = 0;\n    if (resData) {\n      resIndex = resData.groupIndex;\n      this.cssClass = resData.cssClass;\n      this.groupOrder = resData.groupOrder;\n      eventsList = this.parent.eventBase.filterEventsByResource(resData, this.parent.eventsProcessed);\n      blockList = this.parent.eventBase.filterEventsByResource(resData, this.parent.blockProcessed);\n      this.workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS + '[data-group-index=\"' + resIndex + '\"]'));\n    } else {\n      eventsList = this.parent.eventsProcessed;\n      blockList = this.parent.blockProcessed;\n      this.workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n    }\n    this.sortByDateTime(eventsList);\n    this.sortByDateTime(blockList);\n    if (this.parent.currentView === 'Month' && this.parent.rowAutoHeight && this.parent.activeViewOptions.group.resources.length === 0) {\n      var totalCells = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap table tr td:first-child'));\n      var height_1 = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS).clientHeight / totalCells.length;\n      totalCells.forEach(function (cell) {\n        setStyleAttribute(cell, {\n          'height': height_1 + 'px'\n        });\n      });\n    }\n    var cellDetail = this.workCells[this.parent.activeView.isTimelineView() ? 0 : this.workCells.length - 1];\n    this.cellWidth = util.getElementWidth(cellDetail);\n    this.cellHeight = util.getElementHeight(cellDetail);\n    this.dateRender = dateRender;\n    var filteredDates = this.getRenderedDates(dateRender);\n    this.getSlotDates(workDays || this.parent.activeViewOptions.workDays);\n    this.processBlockEvents(blockList, resIndex, resData);\n    var events = [];\n    for (var _i = 0, eventsList_1 = eventsList; _i < eventsList_1.length; _i++) {\n      var event_1 = eventsList_1[_i];\n      if (this.parent.resourceBase && !resData) {\n        this.cssClass = this.parent.resourceBase.getCssClass(event_1);\n      }\n      events = events.concat(this.splitEvent(event_1, filteredDates || this.dateRender));\n    }\n    for (var level = 0; level < this.slots.length; level++) {\n      this.renderedEvents = [];\n      var slot = this.slots[parseInt(level.toString(), 10)];\n      var endDate = util.addDays(new Date(slot[slot.length - 1]), 1);\n      var spannedEvents = this.filterEvents(new Date(slot[0]), endDate, events);\n      for (var _a = 0, spannedEvents_1 = spannedEvents; _a < spannedEvents_1.length; _a++) {\n        var event_2 = spannedEvents_1[_a];\n        if (this.maxHeight) {\n          var sDate = this.parent.currentView === 'Month' ? event_2[this.fields.startTime] : this.getStartTime(event_2, event_2.data);\n          if (this.getIndex(sDate) > 0) {\n            continue;\n          }\n        }\n        this.updateIndicatorIcon(event_2);\n        this.renderEvents(event_2, resIndex, eventsList);\n      }\n    }\n    this.cssClass = null;\n    this.groupOrder = null;\n  };\n  MonthEvent.prototype.processBlockEvents = function (blockEvents, resIndex, resData) {\n    for (var _i = 0, blockEvents_1 = blockEvents; _i < blockEvents_1.length; _i++) {\n      var event_3 = blockEvents_1[_i];\n      if (this.parent.resourceBase && !resData) {\n        this.cssClass = this.parent.resourceBase.getCssClass(event_3);\n      }\n      var blockSpannedList = [];\n      if (this.renderType === 'day' && !event_3[this.fields.isAllDay]) {\n        var temp = extend({}, event_3, null, true);\n        var isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n        temp.isBlockIcon = isSameDate;\n        if (!isSameDate && util.getDateInMs(temp[this.fields.startTime]) > 0) {\n          var e = extend({}, event_3, null, true);\n          e[this.fields.endTime] = util.addDays(util.resetTime(new Date(event_3[this.fields.startTime] + '')), 1);\n          e.isBlockIcon = true;\n          temp[this.fields.startTime] = e[this.fields.endTime];\n          blockSpannedList.push(e);\n        }\n        isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n        if (!isSameDate && util.getDateInMs(temp[this.fields.endTime]) > 0) {\n          var e = extend({}, event_3, null, true);\n          e[this.fields.startTime] = util.resetTime(new Date(event_3[this.fields.endTime] + ''));\n          e.isBlockIcon = true;\n          blockSpannedList.push(e);\n          temp[this.fields.endTime] = e[this.fields.startTime];\n        }\n        blockSpannedList.push(temp);\n      } else {\n        blockSpannedList.push(event_3);\n      }\n      for (var _a = 0, blockSpannedList_1 = blockSpannedList; _a < blockSpannedList_1.length; _a++) {\n        var blockEvent = blockSpannedList_1[_a];\n        var spannedEvents = this.splitEvent(blockEvent, this.dateRender);\n        for (var _b = 0, spannedEvents_2 = spannedEvents; _b < spannedEvents_2.length; _b++) {\n          var event_4 = spannedEvents_2[_b];\n          this.renderBlockEvents(event_4, resIndex, !!blockEvent.isBlockIcon);\n        }\n      }\n    }\n  };\n  MonthEvent.prototype.isSameDate = function (start, end) {\n    return new Date(+start).setHours(0, 0, 0, 0) === new Date(+end).setHours(0, 0, 0, 0);\n  };\n  MonthEvent.prototype.renderBlockEvents = function (event, resIndex, isIcon) {\n    var eventData = event.data;\n    var startTime = this.getStartTime(event, eventData);\n    var endTime = this.getEndTime(event, eventData);\n    var day = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime())));\n    if (day < 0 || startTime > endTime) {\n      return;\n    }\n    var cellTd = this.getCellTd(day);\n    var position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], day);\n    if (!isIcon) {\n      var diffInDays = eventData.count;\n      var appWidth = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);\n      appWidth = appWidth <= 0 ? this.cellWidth : appWidth;\n      var appLeft = this.parent.enableRtl ? 0 : position;\n      var appRight = this.parent.enableRtl ? position : 0;\n      var appHeight = this.cellHeight - this.monthHeaderHeight;\n      var appTop = this.getRowTop(resIndex);\n      var blockElement = this.createBlockAppointmentElement(event, resIndex, this.isResourceEventTemplate);\n      setStyleAttribute(blockElement, {\n        'width': appWidth + 'px',\n        'height': appHeight + 'px',\n        'left': appLeft + 'px',\n        'right': appRight + 'px',\n        'top': appTop + 'px'\n      });\n      this.renderEventElement(event, blockElement, cellTd);\n    } else {\n      this.renderBlockIndicator(cellTd, position, resIndex);\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  MonthEvent.prototype.renderBlockIndicator = function (cellTd, position, resIndex) {\n    var blockIndicator = createElement('div', {\n      className: 'e-icons ' + cls.BLOCK_INDICATOR_CLASS\n    });\n    if (isNullOrUndefined(cellTd.querySelector('.' + cls.BLOCK_INDICATOR_CLASS))) {\n      cellTd.appendChild(blockIndicator);\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  MonthEvent.prototype.getStartTime = function (event, eventData) {\n    return event[this.fields.startTime];\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  MonthEvent.prototype.getEndTime = function (event, eventData) {\n    return event[this.fields.endTime];\n  };\n  MonthEvent.prototype.getCellTd = function (day) {\n    return this.workCells[parseInt(day.toString(), 10)];\n  };\n  MonthEvent.prototype.getEventWidth = function (startDate, endDate, isAllDay, count) {\n    return count * this.cellWidth - 1;\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  MonthEvent.prototype.getPosition = function (startTime, endTime, isAllDay, day) {\n    return 0;\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  MonthEvent.prototype.getRowTop = function (resIndex) {\n    return 0;\n  };\n  MonthEvent.prototype.updateIndicatorIcon = function (event) {\n    if (this.parent.currentView.indexOf('Timeline') === -1 || this.parent.currentView === 'TimelineMonth' || event[this.fields.isAllDay]) {\n      return;\n    }\n    var cloneData = event.data;\n    var start = this.parent.activeView.getStartHour();\n    var end = this.parent.activeView.getEndHour();\n    var startHour = util.getStartEndHours(event[this.fields.startTime], start, end);\n    var endHour = util.getStartEndHours(event[this.fields.endTime], start, end);\n    var actualStartTime = cloneData[this.fields.startTime];\n    var actualEndTime = cloneData[this.fields.endTime];\n    cloneData.isLeft = cloneData.isLeft || actualStartTime.getTime() < startHour.startHour.getTime();\n    cloneData.isRight = cloneData.isRight || actualEndTime.getTime() > endHour.endHour.getTime();\n    if (util.resetTime(actualStartTime).getTime() !== util.resetTime(actualEndTime).getTime()) {\n      var actualStartHour = startHour.startHour;\n      var actualEndHour = endHour.endHour;\n      var startTime = new Date(util.resetTime(actualStartTime));\n      startTime.setHours(actualEndHour.getHours(), actualEndHour.getMinutes(), actualEndHour.getSeconds());\n      cloneData.isLeft = cloneData.isLeft || actualStartTime.getTime() >= (actualStartHour.getDate() === startHour.endHour.getDate() ? startTime.getTime() : util.addDays(startTime, 1).getTime());\n      if (actualEndTime.getTime() !== util.resetTime(actualEndTime).getTime()) {\n        var endTime = new Date(util.resetTime(actualEndTime));\n        cloneData.isRight = cloneData.isRight || actualEndTime.getTime() <= endTime.setHours(actualStartHour.getHours(), actualStartHour.getMinutes(), actualStartHour.getSeconds());\n      }\n    }\n  };\n  MonthEvent.prototype.renderResourceEvents = function () {\n    var resources = this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.renderedResources;\n    if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n      for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n        var sourceRes = this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)];\n        this.renderEventsHandler(sourceRes.renderDates, sourceRes.workDays, sourceRes);\n        if (this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex !== this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex) {\n          var target = this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)];\n          this.renderEventsHandler(target.renderDates, target.workDays, target);\n        }\n      }\n      this.parent.crudModule.crudObj.isCrudAction = false;\n    } else {\n      for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\n        var slotData = resources_1[_i];\n        this.renderEventsHandler(slotData.renderDates, slotData.workDays, slotData);\n      }\n    }\n  };\n  MonthEvent.prototype.getSlotDates = function (workDays) {\n    this.slots = [];\n    var dates = this.dateRender.map(function (date) {\n      return +date;\n    });\n    var noOfDays = !this.parent.activeViewOptions.showWeekend || this.parent.activeViewOptions.group.byDate && this.parent.activeViewOptions.group.hideNonWorkingDays ? workDays.length : util.WEEK_LENGTH;\n    while (dates.length > 0) {\n      this.slots.push(dates.splice(0, noOfDays));\n    }\n  };\n  MonthEvent.prototype.createAppointmentElement = function (record, resIndex, isCloneElement) {\n    if (isCloneElement === void 0) {\n      isCloneElement = false;\n    }\n    var eventSubject = record[this.fields.subject] || this.parent.eventSettings.fields.subject.default || this.parent.localeObj.getConstant('addTitle');\n    var newRecord = extend({}, record, record.data, true);\n    var attrs = {\n      'data-id': 'Appointment_' + record[this.fields.id],\n      'role': 'button',\n      'tabindex': '0',\n      'aria-disabled': this.parent.eventBase.getReadonlyAttribute(record),\n      'aria-label': this.parent.getAnnouncementString(newRecord, eventSubject)\n    };\n    if (!isCloneElement) {\n      attrs['data-guid'] = record.Guid;\n    }\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      attrs['data-group-index'] = resIndex.toString();\n    }\n    var appointmentWrapper = createElement('div', {\n      className: cls.APPOINTMENT_CLASS,\n      attrs: attrs\n    });\n    if (!isNullOrUndefined(this.cssClass)) {\n      addClass([appointmentWrapper], this.cssClass);\n    }\n    if (record[this.fields.isReadonly]) {\n      addClass([appointmentWrapper], 'e-read-only');\n    }\n    var appointmentDetails = createElement('div', {\n      className: cls.APPOINTMENT_DETAILS\n    });\n    appointmentWrapper.appendChild(appointmentDetails);\n    var templateElement;\n    var eventData = record.data;\n    var eventObj = this.getEventData(record);\n    if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n      var scheduleId = this.parent.element.id + '_';\n      var viewName = this.parent.activeViewOptions.eventTemplateName;\n      var templateId = scheduleId + viewName + 'eventTemplate';\n      var eventTemplate = this.isResourceEventTemplate ? this.parent.getEventTemplateName(resIndex) : 'eventTemplate';\n      templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, eventTemplate, templateId, false, undefined, undefined, this.parent.root);\n    } else {\n      var eventLocation = record[this.fields.location] || this.parent.eventSettings.fields.location.default || '';\n      var appointmentSubject = createElement('div', {\n        className: cls.SUBJECT_CLASS\n      });\n      this.parent.sanitize(eventSubject + (eventLocation ? '; ' + eventLocation : ''), appointmentSubject);\n      var appointmentStartTime = createElement('div', {\n        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n        innerHTML: this.parent.getTimeString(eventData[this.fields.startTime])\n      });\n      var appointmentEndTime = createElement('div', {\n        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n        innerHTML: this.parent.getTimeString(eventData[this.fields.endTime])\n      });\n      if (this.parent.currentView === 'Month') {\n        if (record[this.fields.isAllDay]) {\n          templateElement = [appointmentSubject];\n          addClass([appointmentSubject], 'e-text-center');\n        } else if (eventData.count <= 1 && !eventData.isLeft && !eventData.isRight) {\n          templateElement = [appointmentStartTime, appointmentSubject];\n        } else {\n          templateElement = [];\n          addClass([appointmentSubject], 'e-text-center');\n          if (!eventData.isLeft) {\n            templateElement.push(appointmentStartTime);\n          }\n          templateElement.push(appointmentSubject);\n          if (!eventData.isRight) {\n            templateElement.push(appointmentEndTime);\n          }\n        }\n      } else {\n        var innerElement = void 0;\n        if (record[this.fields.isAllDay]) {\n          var allDayString = createElement('div', {\n            className: cls.APPOINTMENT_TIME,\n            innerHTML: this.parent.localeObj.getConstant('allDay')\n          });\n          innerElement = [appointmentSubject, allDayString];\n        } else {\n          var timeString = this.parent.getTimeString(eventData[this.fields.startTime]) + ' - ' + this.parent.getTimeString(eventData[this.fields.endTime]);\n          var appTime = createElement('div', {\n            className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n            innerHTML: timeString\n          });\n          var appLocation = createElement('div', {\n            className: cls.LOCATION_CLASS\n          });\n          this.parent.sanitize(eventLocation, appLocation);\n          innerElement = [appointmentSubject, appTime, appLocation];\n        }\n        var wrap = createElement('div', {\n          className: 'e-inner-wrap'\n        });\n        append(innerElement, wrap);\n        templateElement = [wrap];\n      }\n    }\n    append(templateElement, appointmentDetails);\n    this.appendEventIcons(record, appointmentDetails);\n    this.renderResizeHandler(appointmentWrapper, record.data, record[this.fields.isReadonly]);\n    return appointmentWrapper;\n  };\n  MonthEvent.prototype.appendEventIcons = function (record, appointmentDetails) {\n    var eventData = record.data;\n    if (!isNullOrUndefined(record[this.fields.recurrenceRule]) || !isNullOrUndefined(record[this.fields.recurrenceID])) {\n      var iconClass = record[this.fields.id] === record[this.fields.recurrenceID] ? cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n      appointmentDetails.appendChild(createElement('div', {\n        className: cls.ICON + ' ' + iconClass + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : '')\n      }));\n    }\n    if (eventData.isLeft) {\n      var iconLeft = createElement('div', {\n        className: cls.EVENT_INDICATOR_CLASS + ' ' + cls.ICON + ' ' + cls.EVENT_ICON_LEFT_CLASS\n      });\n      prepend([iconLeft], appointmentDetails);\n    }\n    if (eventData.isRight) {\n      var iconRight = createElement('div', {\n        className: cls.EVENT_INDICATOR_CLASS + ' ' + cls.ICON + ' ' + cls.EVENT_ICON_RIGHT_CLASS\n      });\n      append([iconRight], appointmentDetails);\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  MonthEvent.prototype.renderEvents = function (event, resIndex, eventsList) {\n    var startTime = event[this.fields.startTime];\n    var endTime = event[this.fields.endTime];\n    var day = this.parent.getIndexOfDate(this.dateRender, util.resetTime(startTime));\n    if (day < 0 || startTime.getTime() < this.parent.minDate.getTime() || endTime.getTime() > this.parent.maxDate.getTime()) {\n      return;\n    }\n    var eventsPerRow = this.parent.rowAutoHeight ? 1 : this.parent.activeViewOptions.maxEventsPerRow;\n    var overlapCount = this.getIndex(startTime);\n    event.Index = overlapCount;\n    var diffInDays = event.data.count;\n    if (startTime.getTime() <= endTime.getTime()) {\n      var appWidth = diffInDays * this.cellWidth - 5;\n      var cellTd = this.workCells[parseInt(day.toString(), 10)];\n      var appTop = overlapCount * (this.eventHeight + EVENT_GAP);\n      var height = this.monthHeaderHeight + (overlapCount + 1) * (this.eventHeight + EVENT_GAP) + this.moreIndicatorHeight;\n      var enableAppRender = this.parent.activeViewOptions.maxEventsPerRow && !this.parent.rowAutoHeight && !this.parent.eventSettings.enableIndicator ? overlapCount < eventsPerRow : this.maxOrIndicator ? overlapCount < 1 ? true : false : this.cellHeight > height;\n      if (this.parent.rowAutoHeight || enableAppRender) {\n        this.renderedEvents.push(extend({}, event, null, true));\n        var appointmentElement = void 0;\n        if (this.inlineValue) {\n          appointmentElement = this.parent.inlineModule.createInlineAppointmentElement();\n        } else {\n          appointmentElement = this.createAppointmentElement(event, resIndex);\n        }\n        this.applyResourceColor(appointmentElement, event, 'backgroundColor', this.groupOrder);\n        this.wireAppointmentEvents(appointmentElement, event);\n        setStyleAttribute(appointmentElement, {\n          'width': appWidth + 'px',\n          'top': appTop + 'px'\n        });\n        this.renderEventElement(event, appointmentElement, cellTd);\n        if (this.parent.rowAutoHeight) {\n          var firstChild = cellTd.parentElement.firstElementChild;\n          this.updateCellHeight(firstChild, height);\n        }\n      } else {\n        for (var i = 0; i < diffInDays; i++) {\n          if (this.workCells[day + i]) {\n            var indicator = this.workCells[day + i].querySelector('.' + cls.MORE_INDICATOR_CLASS);\n            if (indicator) {\n              var count = parseInt(indicator.getAttribute('data-count'), 10) + 1;\n              indicator.setAttribute('data-count', count.toString());\n              indicator.setAttribute('aria-label', count + ' ' + this.parent.localeObj.getConstant('moreEvents'));\n              indicator.innerHTML = this.getMoreIndicatorText(count);\n            } else {\n              var startDate = new Date(this.dateRender[day + i].getTime());\n              var endDate = util.addDays(this.dateRender[day + i], 1);\n              var groupIndex = this.workCells[day + i].getAttribute('data-group-index');\n              var moreIndicatorElement = this.getMoreIndicatorElement(1, startDate, endDate);\n              if (!isNullOrUndefined(groupIndex)) {\n                moreIndicatorElement.setAttribute('data-group-index', groupIndex);\n              }\n              moreIndicatorElement.style.top = this.cellHeight - this.monthHeaderHeight - this.moreIndicatorHeight + 'px';\n              moreIndicatorElement.style.width = this.cellWidth - 2 + 'px';\n              this.renderElement(this.workCells[day + i], moreIndicatorElement);\n              EventHandler.add(moreIndicatorElement, 'click', this.moreIndicatorClick, this);\n            }\n          }\n        }\n      }\n    }\n  };\n  MonthEvent.prototype.updateCellHeight = function (cell, height) {\n    if (height > cell.offsetHeight) {\n      setStyleAttribute(cell, {\n        'height': height + 'px'\n      });\n    }\n  };\n  MonthEvent.prototype.updateBlockElements = function () {\n    var blockElement = [].slice.call(this.element.querySelectorAll('.' + cls.BLOCK_APPOINTMENT_CLASS));\n    for (var _i = 0, blockElement_1 = blockElement; _i < blockElement_1.length; _i++) {\n      var element = blockElement_1[_i];\n      var target = closest(element, 'tr');\n      this.monthHeaderHeight = element.offsetParent.offsetTop - target.offsetTop;\n      element.style.height = target.offsetHeight - 1 - this.monthHeaderHeight + 'px';\n      var firstChild = target.firstElementChild;\n      var width = Math.round(element.offsetWidth / firstChild.offsetWidth);\n      element.style.width = firstChild.offsetWidth * width + 'px';\n    }\n  };\n  // eslint-disable-next-line max-len\n  MonthEvent.prototype.getFilteredEvents = function (startDate, endDate, groupIndex, eventsList) {\n    var filteredEvents;\n    if (isNullOrUndefined(groupIndex)) {\n      filteredEvents = this.filterEvents(startDate, endDate);\n    } else {\n      var data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n      filteredEvents = this.filterEvents(startDate, endDate, isNullOrUndefined(eventsList) ? undefined : eventsList, data);\n    }\n    return filteredEvents;\n  };\n  MonthEvent.prototype.getOverlapEvents = function (date, appointments) {\n    var appointmentsList = [];\n    var dateTime = util.resetTime(date).getTime();\n    for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n      var app = appointments_1[_i];\n      if (util.resetTime(app[this.fields.startTime]).getTime() <= dateTime && util.resetTime(app[this.fields.endTime]).getTime() >= dateTime) {\n        appointmentsList.push(app);\n      }\n    }\n    return appointmentsList;\n  };\n  MonthEvent.prototype.getIndex = function (date) {\n    var appIndex = -1;\n    var appointments = this.renderedEvents;\n    if (appointments.length > 0) {\n      var appointmentsList = this.getOverlapEvents(date, appointments);\n      var appLevel = appointmentsList.map(function (obj) {\n        return obj.Index;\n      });\n      appIndex = appLevel.length > 0 ? this.getSmallestMissingNumber(appLevel) : 0;\n    }\n    return appIndex === -1 ? 0 : appIndex;\n  };\n  MonthEvent.prototype.moreIndicatorClick = function (event) {\n    var _this = this;\n    var target = closest(event.target, '.' + cls.MORE_INDICATOR_CLASS);\n    var startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n    var endDate = new Date(parseInt(target.getAttribute('data-end-date'), 10));\n    var groupIndex = target.getAttribute('data-group-index');\n    var moreArgs = {\n      cancel: false,\n      event: event,\n      element: target,\n      isPopupOpen: true,\n      startTime: startDate,\n      endTime: endDate,\n      viewName: this.parent.getNavigateView()\n    };\n    if (groupIndex) {\n      moreArgs.groupIndex = parseInt(groupIndex, 10);\n    }\n    this.parent.trigger(events.moreEventsClick, moreArgs, function (clickArgs) {\n      if (!clickArgs.cancel) {\n        if (clickArgs.isPopupOpen) {\n          var filteredEvents = _this.getFilteredEvents(startDate, endDate, groupIndex);\n          var moreArgs_1 = {\n            date: startDate,\n            event: filteredEvents,\n            element: event.target\n          };\n          _this.parent.quickPopup.moreEventClick(moreArgs_1, endDate, groupIndex);\n        } else {\n          _this.parent.setProperties({\n            selectedDate: startDate\n          }, true);\n          _this.parent.changeView(clickArgs.viewName, event);\n        }\n      }\n    });\n  };\n  MonthEvent.prototype.renderEventElement = function (event, appointmentElement, cellTd) {\n    var _this = this;\n    var eventType = appointmentElement.classList.contains(cls.BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n    var isAppointment = appointmentElement.classList.contains(cls.APPOINTMENT_CLASS);\n    var eventObj = this.getEventData(event);\n    var args = {\n      data: eventObj,\n      element: appointmentElement,\n      cancel: false,\n      type: eventType\n    };\n    this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n      if (eventArgs.cancel) {\n        _this.renderedEvents.pop();\n      } else {\n        _this.renderElement(cellTd, appointmentElement, isAppointment);\n      }\n    });\n  };\n  MonthEvent.prototype.getEventData = function (event) {\n    var eventObj = extend({}, event, null, true);\n    eventObj[this.fields.startTime] = event.data[this.fields.startTime];\n    eventObj[this.fields.endTime] = event.data[this.fields.endTime];\n    return eventObj;\n  };\n  MonthEvent.prototype.renderElement = function (cellTd, element, isAppointment) {\n    if (isAppointment === void 0) {\n      isAppointment = false;\n    }\n    if (this.maxOrIndicator && isAppointment) {\n      this.setMaxEventHeight(element, cellTd);\n    }\n    var wrapperEle = cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n    if (wrapperEle) {\n      wrapperEle.appendChild(element);\n    } else {\n      var wrapper = createElement('div', {\n        className: cls.APPOINTMENT_WRAPPER_CLASS\n      });\n      wrapper.appendChild(element);\n      cellTd.appendChild(wrapper);\n    }\n  };\n  MonthEvent.prototype.getMoreIndicatorElement = function (count, startDate, endDate) {\n    var moreIndicatorElement = createElement('div', {\n      className: cls.MORE_INDICATOR_CLASS,\n      innerHTML: this.getMoreIndicatorText(count),\n      attrs: {\n        'role': 'button',\n        'tabindex': '0',\n        'aria-label': this.parent.globalize.formatNumber(count) + ' ' + this.parent.localeObj.getConstant('moreEvents'),\n        'data-count': count.toString(),\n        'data-start-date': startDate.getTime().toString(),\n        'data-end-date': endDate.getTime().toString()\n      }\n    });\n    return moreIndicatorElement;\n  };\n  MonthEvent.prototype.getMoreIndicatorText = function (count) {\n    return '+' + this.parent.globalize.formatNumber(count) + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'));\n  };\n  MonthEvent.prototype.removeHeightProperty = function (selector) {\n    var rows = [].slice.call(this.element.querySelectorAll('.' + selector + ' tbody tr'));\n    for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n      var row = rows_1[_i];\n      row.firstElementChild.style.height = '';\n    }\n  };\n  MonthEvent.prototype.setMaxEventHeight = function (event, cell) {\n    var headerHeight = util.getOuterHeight(cell.querySelector('.' + cls.DATE_HEADER_CLASS));\n    var height = cell.offsetHeight - headerHeight - (this.maxHeight ? 0 : this.moreIndicatorHeight);\n    setStyleAttribute(event, {\n      'height': height + 'px',\n      'align-items': 'center'\n    });\n  };\n  MonthEvent.prototype.destroy = function () {\n    this.element = null;\n    this.fields = null;\n    this.maxHeight = null;\n    this.withIndicator = null;\n    this.maxOrIndicator = null;\n    this.moreIndicatorHeight = null;\n    this.removeEventListener();\n    _super.prototype.destroy.call(this);\n  };\n  return MonthEvent;\n}(EventBase);\nexport { MonthEvent };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","append","prepend","createElement","extend","EventHandler","closest","addClass","isNullOrUndefined","setStyleAttribute","remove","EventBase","cls","events","util","EVENT_GAP","MonthEvent","_super","parent","_this","call","renderedEvents","monthHeaderHeight","moreIndicatorHeight","renderType","element","activeView","getPanel","fields","eventFields","maxHeight","eventSettings","enableMaxHeight","enableIndicator","rowAutoHeight","withIndicator","maxOrIndicator","ignoreWhitespace","addEventListener","removeEventWrapper","appElement","length","currentView","isTimelineView","activeViewOptions","timeScale","enable","_i","appElement_1","wrap","parentElement","parentNode","renderAppointments","dragAndDropModule","setDragArea","isResourceEventTemplate","isSpecificResourceEvents","conWrap","querySelector","CONTENT_WRAP_CLASS","uiStateValues","top","scrollTop","left","scrollLeft","appointmentWrapper","slice","querySelectorAll","APPOINTMENT_WRAPPER_CLASS","crudModule","crudObj","isCrudAction","i","len","sourceEvent","parseInt","toString","groupIndex","targetEvent","ele","appointmentWrapper_1","removeHeightProperty","CONTENT_TABLE_CLASS","WORK_CELLS_CLASS","wrapper","className","cellTd","appendChild","offsetTop","removeChild","eventHeight","getElementHeightFromClass","APPOINTMENT_CLASS","selector","addCellHeight","virtualScrollModule","isHorizontalScroll","currentAction","group","resources","renderResourceEvents","updateFocusedWorkCell","renderEventsHandler","renderDates","workDays","updateBlockElements","data","cssProperties","getCssProperties","module","getModuleName","isPreventScrollUpdate","scrollPosition","updateVirtualScrollHeight","enablePersistence","notify","contentReady","scrollUiUpdate","showWeekNumber","totalCells_1","weekNumberCells","WEEK_NUMBER_CLASS","forEach","cell","height","offsetHeight","WEEK_NUMBER_WRAPPER_CLASS","renderTemplates","dateRender","resData","eventsList","blockList","resIndex","cssClass","groupOrder","eventBase","filterEventsByResource","eventsProcessed","blockProcessed","workCells","sortByDateTime","totalCells","height_1","clientHeight","cellDetail","cellWidth","getElementWidth","cellHeight","getElementHeight","filteredDates","getRenderedDates","getSlotDates","processBlockEvents","eventsList_1","event_1","resourceBase","getCssClass","concat","splitEvent","level","slots","slot","endDate","addDays","Date","spannedEvents","filterEvents","_a","spannedEvents_1","event_2","sDate","startTime","getStartTime","getIndex","updateIndicatorIcon","renderEvents","blockEvents","blockEvents_1","event_3","blockSpannedList","isAllDay","temp","isSameDate","endTime","isBlockIcon","getDateInMs","e","resetTime","push","blockSpannedList_1","blockEvent","_b","spannedEvents_2","event_4","renderBlockEvents","start","end","setHours","event","isIcon","eventData","getEndTime","day","getIndexOfDate","getTime","getCellTd","position","getPosition","diffInDays","count","appWidth","getEventWidth","appLeft","enableRtl","appRight","appHeight","appTop","getRowTop","blockElement","createBlockAppointmentElement","renderEventElement","renderBlockIndicator","blockIndicator","BLOCK_INDICATOR_CLASS","startDate","indexOf","cloneData","getStartHour","getEndHour","startHour","getStartEndHours","endHour","actualStartTime","actualEndTime","isLeft","isRight","actualStartHour","actualEndHour","getHours","getMinutes","getSeconds","getDate","isGroupAdaptive","lastResourceLevel","renderedResources","sourceRes","target","resources_1","slotData","dates","map","date","noOfDays","showWeekend","byDate","hideNonWorkingDays","WEEK_LENGTH","splice","createAppointmentElement","record","isCloneElement","eventSubject","subject","default","localeObj","getConstant","newRecord","attrs","id","getReadonlyAttribute","getAnnouncementString","Guid","isReadonly","appointmentDetails","APPOINTMENT_DETAILS","templateElement","eventObj","getEventData","eventTemplate","scheduleId","viewName","eventTemplateName","templateId","getEventTemplateName","getAppointmentTemplate","undefined","root","eventLocation","location","appointmentSubject","SUBJECT_CLASS","sanitize","appointmentStartTime","APPOINTMENT_TIME","isAdaptive","DISABLE_CLASS","innerHTML","getTimeString","appointmentEndTime","innerElement","allDayString","timeString","appTime","appLocation","LOCATION_CLASS","appendEventIcons","renderResizeHandler","recurrenceRule","recurrenceID","iconClass","EVENT_RECURRENCE_ICON_CLASS","EVENT_RECURRENCE_EDIT_ICON_CLASS","ICON","iconLeft","EVENT_INDICATOR_CLASS","EVENT_ICON_LEFT_CLASS","iconRight","EVENT_ICON_RIGHT_CLASS","minDate","maxDate","eventsPerRow","maxEventsPerRow","overlapCount","Index","enableAppRender","appointmentElement","inlineValue","inlineModule","createInlineAppointmentElement","applyResourceColor","wireAppointmentEvents","firstChild","firstElementChild","updateCellHeight","indicator","MORE_INDICATOR_CLASS","getAttribute","setAttribute","getMoreIndicatorText","moreIndicatorElement","getMoreIndicatorElement","style","width","renderElement","add","moreIndicatorClick","BLOCK_APPOINTMENT_CLASS","blockElement_1","offsetParent","Math","round","offsetWidth","getFilteredEvents","filteredEvents","getOverlapEvents","appointments","appointmentsList","dateTime","appointments_1","app","appIndex","appLevel","obj","getSmallestMissingNumber","moreArgs","cancel","isPopupOpen","getNavigateView","trigger","moreEventsClick","clickArgs","moreArgs_1","quickPopup","moreEventClick","setProperties","selectedDate","changeView","eventType","classList","contains","isAppointment","args","type","eventRendered","eventArgs","pop","setMaxEventHeight","wrapperEle","globalize","formatNumber","rows","rows_1","row","headerHeight","getOuterHeight","DATE_HEADER_CLASS","destroy","removeEventListener"],"sources":["/Users/anjalichaturvedi/GitHub/brew-bridge-dashboard/website/node_modules/@syncfusion/ej2-schedule/src/schedule/event-renderer/month.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, prepend, createElement, extend, EventHandler, closest, addClass } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setStyleAttribute, remove } from '@syncfusion/ej2-base';\nimport { EventBase } from './event-base';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nvar EVENT_GAP = 0;\n/**\n * Month view events render\n */\nvar MonthEvent = /** @class */ (function (_super) {\n    __extends(MonthEvent, _super);\n    function MonthEvent(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.renderedEvents = [];\n        _this.monthHeaderHeight = 0;\n        _this.moreIndicatorHeight = 19;\n        _this.renderType = 'day';\n        _this.element = _this.parent.activeView.getPanel();\n        _this.fields = _this.parent.eventFields;\n        _this.maxHeight = _this.parent.eventSettings.enableMaxHeight && !_this.parent.eventSettings.enableIndicator\n            && !_this.parent.rowAutoHeight;\n        _this.withIndicator = _this.parent.eventSettings.enableMaxHeight && _this.parent.eventSettings.enableIndicator\n            && !_this.parent.rowAutoHeight;\n        _this.maxOrIndicator = (_this.maxHeight || _this.withIndicator);\n        _this.moreIndicatorHeight =\n            (_this.parent.rowAutoHeight && _this.parent.eventSettings.ignoreWhitespace) ? 0 : _this.moreIndicatorHeight;\n        _this.addEventListener();\n        return _this;\n    }\n    MonthEvent.prototype.removeEventWrapper = function (appElement) {\n        if (appElement.length > 0) {\n            appElement = (this.parent.currentView === 'Month' || (!this.parent.activeView.isTimelineView() &&\n                !this.parent.activeViewOptions.timeScale.enable)) ? appElement : [appElement[0]];\n            for (var _i = 0, appElement_1 = appElement; _i < appElement_1.length; _i++) {\n                var wrap = appElement_1[_i];\n                if (wrap.parentElement && wrap.parentElement.parentNode) {\n                    remove(wrap.parentElement);\n                }\n            }\n        }\n    };\n    MonthEvent.prototype.renderAppointments = function () {\n        if (this.parent.dragAndDropModule) {\n            this.parent.dragAndDropModule.setDragArea();\n        }\n        this.isResourceEventTemplate = this.parent.isSpecificResourceEvents();\n        var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (this.parent.rowAutoHeight) {\n            this.parent.uiStateValues.top = conWrap.scrollTop;\n            this.parent.uiStateValues.left = conWrap.scrollLeft;\n        }\n        var appointmentWrapper = [].slice.call(this.element.querySelectorAll('.' + cls.APPOINTMENT_WRAPPER_CLASS));\n        if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n            for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n                var appElement = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper ' + '[data-group-index=\"' +\n                    this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex + '\"]'));\n                this.removeEventWrapper(appElement);\n                if (this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)] &&\n                    this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex !==\n                        this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex) {\n                    var ele = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper ' + '[data-group-index=\"' +\n                        this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex + '\"]'));\n                    this.removeEventWrapper(ele);\n                }\n            }\n        }\n        else {\n            for (var _i = 0, appointmentWrapper_1 = appointmentWrapper; _i < appointmentWrapper_1.length; _i++) {\n                var wrap = appointmentWrapper_1[_i];\n                remove(wrap);\n            }\n        }\n        this.removeHeightProperty(cls.CONTENT_TABLE_CLASS);\n        if (!this.element.querySelector('.' + cls.WORK_CELLS_CLASS)) {\n            return;\n        }\n        if (this.parent.currentView === 'Month') {\n            var wrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            var cellTd = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n            cellTd.appendChild(wrapper);\n            this.monthHeaderHeight = wrapper.offsetTop - cellTd.offsetTop;\n            cellTd.removeChild(wrapper);\n        }\n        this.eventHeight = util.getElementHeightFromClass(this.element, cls.APPOINTMENT_CLASS);\n        var selector = '.' + cls.CONTENT_TABLE_CLASS + ' tbody tr';\n        this.addCellHeight(selector, this.eventHeight, (this.parent.currentView === 'Month' ? EVENT_GAP : 2), this.monthHeaderHeight, this.moreIndicatorHeight);\n        var scrollTop = conWrap.scrollTop;\n        if (this.parent.rowAutoHeight && this.parent.virtualScrollModule && !this.parent.virtualScrollModule.isHorizontalScroll\n            && !isNullOrUndefined(this.parent.currentAction)) {\n            conWrap.scrollTop = conWrap.scrollTop - 1;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.renderResourceEvents();\n            if (this.parent.virtualScrollModule) {\n                this.parent.virtualScrollModule.updateFocusedWorkCell();\n            }\n        }\n        else {\n            this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays);\n        }\n        if (this.parent.rowAutoHeight) {\n            this.updateBlockElements();\n            var data = {\n                cssProperties: this.parent.getCssProperties(),\n                module: this.parent.getModuleName(),\n                isPreventScrollUpdate: true,\n                scrollPosition: { left: this.parent.uiStateValues.left, top: this.parent.uiStateValues.top }\n            };\n            if (this.parent.virtualScrollModule && !this.parent.virtualScrollModule.isHorizontalScroll) {\n                if (this.parent.currentAction) {\n                    conWrap.scrollTop = scrollTop;\n                    this.parent.currentAction = null;\n                }\n                else {\n                    this.parent.virtualScrollModule.updateVirtualScrollHeight();\n                }\n            }\n            if (!this.parent.enablePersistence) {\n                this.parent.notify(events.contentReady, {});\n            }\n            this.parent.notify(events.scrollUiUpdate, data);\n            if (this.parent.currentView === 'Month' && this.parent.showWeekNumber) {\n                var totalCells_1 = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap table tr td:first-child'));\n                var weekNumberCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WEEK_NUMBER_CLASS));\n                weekNumberCells.forEach(function (cell, i) {\n                    var height = totalCells_1[parseInt(i.toString(), 10)].offsetHeight;\n                    setStyleAttribute(cell, { 'height': height + 'px' });\n                });\n                this.parent.element.querySelector('.' + cls.WEEK_NUMBER_WRAPPER_CLASS).scrollTop =\n                    this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS).scrollTop;\n            }\n        }\n        this.parent.renderTemplates();\n    };\n    MonthEvent.prototype.renderEventsHandler = function (dateRender, workDays, resData) {\n        this.renderedEvents = [];\n        var eventsList;\n        var blockList;\n        var resIndex = 0;\n        if (resData) {\n            resIndex = resData.groupIndex;\n            this.cssClass = resData.cssClass;\n            this.groupOrder = resData.groupOrder;\n            eventsList = this.parent.eventBase.filterEventsByResource(resData, this.parent.eventsProcessed);\n            blockList = this.parent.eventBase.filterEventsByResource(resData, this.parent.blockProcessed);\n            this.workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS + '[data-group-index=\"' + resIndex + '\"]'));\n        }\n        else {\n            eventsList = this.parent.eventsProcessed;\n            blockList = this.parent.blockProcessed;\n            this.workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n        }\n        this.sortByDateTime(eventsList);\n        this.sortByDateTime(blockList);\n        if (this.parent.currentView === 'Month' && this.parent.rowAutoHeight && this.parent.activeViewOptions.group.resources.length === 0) {\n            var totalCells = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap table tr td:first-child'));\n            var height_1 = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS).clientHeight / totalCells.length;\n            totalCells.forEach(function (cell) {\n                setStyleAttribute(cell, { 'height': height_1 + 'px' });\n            });\n        }\n        var cellDetail = this.workCells[this.parent.activeView.isTimelineView() ? 0 : this.workCells.length - 1];\n        this.cellWidth = util.getElementWidth(cellDetail);\n        this.cellHeight = util.getElementHeight(cellDetail);\n        this.dateRender = dateRender;\n        var filteredDates = this.getRenderedDates(dateRender);\n        this.getSlotDates(workDays || this.parent.activeViewOptions.workDays);\n        this.processBlockEvents(blockList, resIndex, resData);\n        var events = [];\n        for (var _i = 0, eventsList_1 = eventsList; _i < eventsList_1.length; _i++) {\n            var event_1 = eventsList_1[_i];\n            if (this.parent.resourceBase && !resData) {\n                this.cssClass = this.parent.resourceBase.getCssClass(event_1);\n            }\n            events = events.concat(this.splitEvent(event_1, filteredDates || this.dateRender));\n        }\n        for (var level = 0; level < this.slots.length; level++) {\n            this.renderedEvents = [];\n            var slot = this.slots[parseInt(level.toString(), 10)];\n            var endDate = util.addDays(new Date(slot[slot.length - 1]), 1);\n            var spannedEvents = this.filterEvents(new Date(slot[0]), endDate, events);\n            for (var _a = 0, spannedEvents_1 = spannedEvents; _a < spannedEvents_1.length; _a++) {\n                var event_2 = spannedEvents_1[_a];\n                if (this.maxHeight) {\n                    var sDate = this.parent.currentView === 'Month' ? event_2[this.fields.startTime] :\n                        this.getStartTime(event_2, event_2.data);\n                    if (this.getIndex(sDate) > 0) {\n                        continue;\n                    }\n                }\n                this.updateIndicatorIcon(event_2);\n                this.renderEvents(event_2, resIndex, eventsList);\n            }\n        }\n        this.cssClass = null;\n        this.groupOrder = null;\n    };\n    MonthEvent.prototype.processBlockEvents = function (blockEvents, resIndex, resData) {\n        for (var _i = 0, blockEvents_1 = blockEvents; _i < blockEvents_1.length; _i++) {\n            var event_3 = blockEvents_1[_i];\n            if (this.parent.resourceBase && !resData) {\n                this.cssClass = this.parent.resourceBase.getCssClass(event_3);\n            }\n            var blockSpannedList = [];\n            if (this.renderType === 'day' && !event_3[this.fields.isAllDay]) {\n                var temp = extend({}, event_3, null, true);\n                var isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n                temp.isBlockIcon = isSameDate;\n                if (!isSameDate && util.getDateInMs(temp[this.fields.startTime]) > 0) {\n                    var e = extend({}, event_3, null, true);\n                    e[this.fields.endTime] = util.addDays(util.resetTime(new Date(event_3[this.fields.startTime] + '')), 1);\n                    e.isBlockIcon = true;\n                    temp[this.fields.startTime] = e[this.fields.endTime];\n                    blockSpannedList.push(e);\n                }\n                isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n                if (!isSameDate && util.getDateInMs(temp[this.fields.endTime]) > 0) {\n                    var e = extend({}, event_3, null, true);\n                    e[this.fields.startTime] = util.resetTime(new Date(event_3[this.fields.endTime] + ''));\n                    e.isBlockIcon = true;\n                    blockSpannedList.push(e);\n                    temp[this.fields.endTime] = e[this.fields.startTime];\n                }\n                blockSpannedList.push(temp);\n            }\n            else {\n                blockSpannedList.push(event_3);\n            }\n            for (var _a = 0, blockSpannedList_1 = blockSpannedList; _a < blockSpannedList_1.length; _a++) {\n                var blockEvent = blockSpannedList_1[_a];\n                var spannedEvents = this.splitEvent(blockEvent, this.dateRender);\n                for (var _b = 0, spannedEvents_2 = spannedEvents; _b < spannedEvents_2.length; _b++) {\n                    var event_4 = spannedEvents_2[_b];\n                    this.renderBlockEvents(event_4, resIndex, !!blockEvent.isBlockIcon);\n                }\n            }\n        }\n    };\n    MonthEvent.prototype.isSameDate = function (start, end) {\n        return new Date(+start).setHours(0, 0, 0, 0) === new Date(+end).setHours(0, 0, 0, 0);\n    };\n    MonthEvent.prototype.renderBlockEvents = function (event, resIndex, isIcon) {\n        var eventData = event.data;\n        var startTime = this.getStartTime(event, eventData);\n        var endTime = this.getEndTime(event, eventData);\n        var day = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime())));\n        if (day < 0 || startTime > endTime) {\n            return;\n        }\n        var cellTd = this.getCellTd(day);\n        var position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], day);\n        if (!isIcon) {\n            var diffInDays = eventData.count;\n            var appWidth = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);\n            appWidth = (appWidth <= 0) ? this.cellWidth : appWidth;\n            var appLeft = (this.parent.enableRtl) ? 0 : position;\n            var appRight = (this.parent.enableRtl) ? position : 0;\n            var appHeight = this.cellHeight - this.monthHeaderHeight;\n            var appTop = this.getRowTop(resIndex);\n            var blockElement = this.createBlockAppointmentElement(event, resIndex, this.isResourceEventTemplate);\n            setStyleAttribute(blockElement, {\n                'width': appWidth + 'px', 'height': appHeight + 'px', 'left': appLeft + 'px',\n                'right': appRight + 'px', 'top': appTop + 'px'\n            });\n            this.renderEventElement(event, blockElement, cellTd);\n        }\n        else {\n            this.renderBlockIndicator(cellTd, position, resIndex);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.renderBlockIndicator = function (cellTd, position, resIndex) {\n        var blockIndicator = createElement('div', { className: 'e-icons ' + cls.BLOCK_INDICATOR_CLASS });\n        if (isNullOrUndefined(cellTd.querySelector('.' + cls.BLOCK_INDICATOR_CLASS))) {\n            cellTd.appendChild(blockIndicator);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.getStartTime = function (event, eventData) {\n        return event[this.fields.startTime];\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.getEndTime = function (event, eventData) {\n        return event[this.fields.endTime];\n    };\n    MonthEvent.prototype.getCellTd = function (day) {\n        return this.workCells[parseInt(day.toString(), 10)];\n    };\n    MonthEvent.prototype.getEventWidth = function (startDate, endDate, isAllDay, count) {\n        return count * this.cellWidth - 1;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.getPosition = function (startTime, endTime, isAllDay, day) {\n        return 0;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.getRowTop = function (resIndex) {\n        return 0;\n    };\n    MonthEvent.prototype.updateIndicatorIcon = function (event) {\n        if (this.parent.currentView.indexOf('Timeline') === -1 || this.parent.currentView === 'TimelineMonth'\n            || event[this.fields.isAllDay]) {\n            return;\n        }\n        var cloneData = event.data;\n        var start = this.parent.activeView.getStartHour();\n        var end = this.parent.activeView.getEndHour();\n        var startHour = util.getStartEndHours(event[this.fields.startTime], start, end);\n        var endHour = util.getStartEndHours(event[this.fields.endTime], start, end);\n        var actualStartTime = cloneData[this.fields.startTime];\n        var actualEndTime = cloneData[this.fields.endTime];\n        cloneData.isLeft = cloneData.isLeft || actualStartTime.getTime() < startHour.startHour.getTime();\n        cloneData.isRight = cloneData.isRight || actualEndTime.getTime() > endHour.endHour.getTime();\n        if (util.resetTime(actualStartTime).getTime() !== util.resetTime(actualEndTime).getTime()) {\n            var actualStartHour = startHour.startHour;\n            var actualEndHour = endHour.endHour;\n            var startTime = new Date(util.resetTime(actualStartTime));\n            startTime.setHours(actualEndHour.getHours(), actualEndHour.getMinutes(), actualEndHour.getSeconds());\n            cloneData.isLeft = cloneData.isLeft || actualStartTime.getTime() >= (actualStartHour.getDate() === startHour.endHour.getDate() ?\n                startTime.getTime() : util.addDays(startTime, 1).getTime());\n            if (actualEndTime.getTime() !== util.resetTime(actualEndTime).getTime()) {\n                var endTime = new Date(util.resetTime(actualEndTime));\n                cloneData.isRight = cloneData.isRight || actualEndTime.getTime() <=\n                    endTime.setHours(actualStartHour.getHours(), actualStartHour.getMinutes(), actualStartHour.getSeconds());\n            }\n        }\n    };\n    MonthEvent.prototype.renderResourceEvents = function () {\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.renderedResources;\n        if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n            for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n                var sourceRes = this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)];\n                this.renderEventsHandler(sourceRes.renderDates, sourceRes.workDays, sourceRes);\n                if (this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex !==\n                    this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex) {\n                    var target = this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)];\n                    this.renderEventsHandler(target.renderDates, target.workDays, target);\n                }\n            }\n            this.parent.crudModule.crudObj.isCrudAction = false;\n        }\n        else {\n            for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\n                var slotData = resources_1[_i];\n                this.renderEventsHandler(slotData.renderDates, slotData.workDays, slotData);\n            }\n        }\n    };\n    MonthEvent.prototype.getSlotDates = function (workDays) {\n        this.slots = [];\n        var dates = this.dateRender.map(function (date) { return +date; });\n        var noOfDays = !this.parent.activeViewOptions.showWeekend || (this.parent.activeViewOptions.group.byDate &&\n            this.parent.activeViewOptions.group.hideNonWorkingDays) ? workDays.length : util.WEEK_LENGTH;\n        while (dates.length > 0) {\n            this.slots.push(dates.splice(0, noOfDays));\n        }\n    };\n    MonthEvent.prototype.createAppointmentElement = function (record, resIndex, isCloneElement) {\n        if (isCloneElement === void 0) { isCloneElement = false; }\n        var eventSubject = (record[this.fields.subject] || this.parent.eventSettings.fields.subject.default ||\n            this.parent.localeObj.getConstant('addTitle'));\n        var newRecord = extend({}, record, record.data, true);\n        var attrs = {\n            'data-id': 'Appointment_' + record[this.fields.id],\n            'role': 'button', 'tabindex': '0',\n            'aria-disabled': this.parent.eventBase.getReadonlyAttribute(record),\n            'aria-label': this.parent.getAnnouncementString(newRecord, eventSubject)\n        };\n        if (!isCloneElement) {\n            attrs['data-guid'] = record.Guid;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            attrs['data-group-index'] = resIndex.toString();\n        }\n        var appointmentWrapper = createElement('div', { className: cls.APPOINTMENT_CLASS, attrs: attrs });\n        if (!isNullOrUndefined(this.cssClass)) {\n            addClass([appointmentWrapper], this.cssClass);\n        }\n        if (record[this.fields.isReadonly]) {\n            addClass([appointmentWrapper], 'e-read-only');\n        }\n        var appointmentDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        appointmentWrapper.appendChild(appointmentDetails);\n        var templateElement;\n        var eventData = record.data;\n        var eventObj = this.getEventData(record);\n        if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.eventTemplateName;\n            var templateId = scheduleId + viewName + 'eventTemplate';\n            var eventTemplate = this.isResourceEventTemplate ? this.parent.getEventTemplateName(resIndex) : 'eventTemplate';\n            templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, eventTemplate, templateId, false, undefined, undefined, this.parent.root);\n        }\n        else {\n            var eventLocation = (record[this.fields.location] || this.parent.eventSettings.fields.location.default || '');\n            var appointmentSubject = createElement('div', { className: cls.SUBJECT_CLASS });\n            this.parent.sanitize((eventSubject + (eventLocation ? '; ' + eventLocation : '')), appointmentSubject);\n            var appointmentStartTime = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventData[this.fields.startTime])\n            });\n            var appointmentEndTime = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventData[this.fields.endTime])\n            });\n            if (this.parent.currentView === 'Month') {\n                if (record[this.fields.isAllDay]) {\n                    templateElement = [appointmentSubject];\n                    addClass([appointmentSubject], 'e-text-center');\n                }\n                else if (eventData.count <= 1 && !eventData.isLeft && !eventData.isRight) {\n                    templateElement = [appointmentStartTime, appointmentSubject];\n                }\n                else {\n                    templateElement = [];\n                    addClass([appointmentSubject], 'e-text-center');\n                    if (!eventData.isLeft) {\n                        templateElement.push(appointmentStartTime);\n                    }\n                    templateElement.push(appointmentSubject);\n                    if (!eventData.isRight) {\n                        templateElement.push(appointmentEndTime);\n                    }\n                }\n            }\n            else {\n                var innerElement = void 0;\n                if (record[this.fields.isAllDay]) {\n                    var allDayString = createElement('div', {\n                        className: cls.APPOINTMENT_TIME, innerHTML: this.parent.localeObj.getConstant('allDay')\n                    });\n                    innerElement = [appointmentSubject, allDayString];\n                }\n                else {\n                    var timeString = this.parent.getTimeString(eventData[this.fields.startTime])\n                        + ' - ' + this.parent.getTimeString(eventData[this.fields.endTime]);\n                    var appTime = createElement('div', {\n                        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''), innerHTML: timeString\n                    });\n                    var appLocation = createElement('div', { className: cls.LOCATION_CLASS });\n                    this.parent.sanitize(eventLocation, appLocation);\n                    innerElement = [appointmentSubject, appTime, appLocation];\n                }\n                var wrap = createElement('div', { className: 'e-inner-wrap' });\n                append(innerElement, wrap);\n                templateElement = [wrap];\n            }\n        }\n        append(templateElement, appointmentDetails);\n        this.appendEventIcons(record, appointmentDetails);\n        this.renderResizeHandler(appointmentWrapper, record.data, record[this.fields.isReadonly]);\n        return appointmentWrapper;\n    };\n    MonthEvent.prototype.appendEventIcons = function (record, appointmentDetails) {\n        var eventData = record.data;\n        if (!isNullOrUndefined(record[this.fields.recurrenceRule]) || !isNullOrUndefined(record[this.fields.recurrenceID])) {\n            var iconClass = (record[this.fields.id] === record[this.fields.recurrenceID]) ?\n                cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            appointmentDetails.appendChild(createElement('div', {\n                className: cls.ICON + ' ' + iconClass + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : '')\n            }));\n        }\n        if (eventData.isLeft) {\n            var iconLeft = createElement('div', {\n                className: cls.EVENT_INDICATOR_CLASS + ' ' + cls.ICON + ' ' + cls.EVENT_ICON_LEFT_CLASS\n            });\n            prepend([iconLeft], appointmentDetails);\n        }\n        if (eventData.isRight) {\n            var iconRight = createElement('div', {\n                className: cls.EVENT_INDICATOR_CLASS + ' ' + cls.ICON + ' ' + cls.EVENT_ICON_RIGHT_CLASS\n            });\n            append([iconRight], appointmentDetails);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.renderEvents = function (event, resIndex, eventsList) {\n        var startTime = event[this.fields.startTime];\n        var endTime = event[this.fields.endTime];\n        var day = this.parent.getIndexOfDate(this.dateRender, util.resetTime(startTime));\n        if ((day < 0) || (startTime.getTime() < this.parent.minDate.getTime()) || (endTime.getTime() > this.parent.maxDate.getTime())) {\n            return;\n        }\n        var eventsPerRow = this.parent.rowAutoHeight ? 1 : this.parent.activeViewOptions.maxEventsPerRow;\n        var overlapCount = this.getIndex(startTime);\n        event.Index = overlapCount;\n        var diffInDays = event.data.count;\n        if (startTime.getTime() <= endTime.getTime()) {\n            var appWidth = (diffInDays * this.cellWidth) - 5;\n            var cellTd = this.workCells[parseInt(day.toString(), 10)];\n            var appTop = (overlapCount * (this.eventHeight + EVENT_GAP));\n            var height = this.monthHeaderHeight + ((overlapCount + 1) * (this.eventHeight + EVENT_GAP)) + this.moreIndicatorHeight;\n            var enableAppRender = this.parent.activeViewOptions.maxEventsPerRow && !this.parent.rowAutoHeight &&\n                !this.parent.eventSettings.enableIndicator ? overlapCount < eventsPerRow : this.maxOrIndicator ? overlapCount < 1\n                ? true : false : this.cellHeight > height;\n            if (this.parent.rowAutoHeight || enableAppRender) {\n                this.renderedEvents.push(extend({}, event, null, true));\n                var appointmentElement = void 0;\n                if (this.inlineValue) {\n                    appointmentElement = this.parent.inlineModule.createInlineAppointmentElement();\n                }\n                else {\n                    appointmentElement = this.createAppointmentElement(event, resIndex);\n                }\n                this.applyResourceColor(appointmentElement, event, 'backgroundColor', this.groupOrder);\n                this.wireAppointmentEvents(appointmentElement, event);\n                setStyleAttribute(appointmentElement, { 'width': appWidth + 'px', 'top': appTop + 'px' });\n                this.renderEventElement(event, appointmentElement, cellTd);\n                if (this.parent.rowAutoHeight) {\n                    var firstChild = cellTd.parentElement.firstElementChild;\n                    this.updateCellHeight(firstChild, height);\n                }\n            }\n            else {\n                for (var i = 0; i < diffInDays; i++) {\n                    if (this.workCells[day + i]) {\n                        var indicator = this.workCells[day + i].querySelector('.' + cls.MORE_INDICATOR_CLASS);\n                        if (indicator) {\n                            var count = parseInt(indicator.getAttribute('data-count'), 10) + 1;\n                            indicator.setAttribute('data-count', count.toString());\n                            indicator.setAttribute('aria-label', count + ' ' + this.parent.localeObj.getConstant('moreEvents'));\n                            indicator.innerHTML = this.getMoreIndicatorText(count);\n                        }\n                        else {\n                            var startDate = new Date(this.dateRender[day + i].getTime());\n                            var endDate = util.addDays(this.dateRender[day + i], 1);\n                            var groupIndex = this.workCells[day + i].getAttribute('data-group-index');\n                            var moreIndicatorElement = this.getMoreIndicatorElement(1, startDate, endDate);\n                            if (!isNullOrUndefined(groupIndex)) {\n                                moreIndicatorElement.setAttribute('data-group-index', groupIndex);\n                            }\n                            moreIndicatorElement.style.top = (this.cellHeight - this.monthHeaderHeight - this.moreIndicatorHeight) + 'px';\n                            moreIndicatorElement.style.width = this.cellWidth - 2 + 'px';\n                            this.renderElement(this.workCells[day + i], moreIndicatorElement);\n                            EventHandler.add(moreIndicatorElement, 'click', this.moreIndicatorClick, this);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    MonthEvent.prototype.updateCellHeight = function (cell, height) {\n        if ((height > cell.offsetHeight)) {\n            setStyleAttribute(cell, { 'height': height + 'px' });\n        }\n    };\n    MonthEvent.prototype.updateBlockElements = function () {\n        var blockElement = [].slice.call(this.element.querySelectorAll('.' + cls.BLOCK_APPOINTMENT_CLASS));\n        for (var _i = 0, blockElement_1 = blockElement; _i < blockElement_1.length; _i++) {\n            var element = blockElement_1[_i];\n            var target = closest(element, 'tr');\n            this.monthHeaderHeight = element.offsetParent.offsetTop - target.offsetTop;\n            element.style.height = ((target.offsetHeight - 1) - this.monthHeaderHeight) + 'px';\n            var firstChild = target.firstElementChild;\n            var width = Math.round(element.offsetWidth / firstChild.offsetWidth);\n            element.style.width = (firstChild.offsetWidth * width) + 'px';\n        }\n    };\n    // eslint-disable-next-line max-len\n    MonthEvent.prototype.getFilteredEvents = function (startDate, endDate, groupIndex, eventsList) {\n        var filteredEvents;\n        if (isNullOrUndefined(groupIndex)) {\n            filteredEvents = this.filterEvents(startDate, endDate);\n        }\n        else {\n            var data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n            filteredEvents = this.filterEvents(startDate, endDate, isNullOrUndefined(eventsList) ? undefined : eventsList, data);\n        }\n        return filteredEvents;\n    };\n    MonthEvent.prototype.getOverlapEvents = function (date, appointments) {\n        var appointmentsList = [];\n        var dateTime = util.resetTime(date).getTime();\n        for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n            var app = appointments_1[_i];\n            if ((util.resetTime(app[this.fields.startTime]).getTime() <= dateTime) &&\n                (util.resetTime(app[this.fields.endTime]).getTime() >= dateTime)) {\n                appointmentsList.push(app);\n            }\n        }\n        return appointmentsList;\n    };\n    MonthEvent.prototype.getIndex = function (date) {\n        var appIndex = -1;\n        var appointments = this.renderedEvents;\n        if (appointments.length > 0) {\n            var appointmentsList = this.getOverlapEvents(date, appointments);\n            var appLevel = appointmentsList.map(function (obj) { return obj.Index; });\n            appIndex = (appLevel.length > 0) ? this.getSmallestMissingNumber(appLevel) : 0;\n        }\n        return (appIndex === -1) ? 0 : appIndex;\n    };\n    MonthEvent.prototype.moreIndicatorClick = function (event) {\n        var _this = this;\n        var target = closest(event.target, '.' + cls.MORE_INDICATOR_CLASS);\n        var startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n        var endDate = new Date(parseInt(target.getAttribute('data-end-date'), 10));\n        var groupIndex = target.getAttribute('data-group-index');\n        var moreArgs = {\n            cancel: false, event: event, element: target, isPopupOpen: true,\n            startTime: startDate, endTime: endDate, viewName: this.parent.getNavigateView()\n        };\n        if (groupIndex) {\n            moreArgs.groupIndex = parseInt(groupIndex, 10);\n        }\n        this.parent.trigger(events.moreEventsClick, moreArgs, function (clickArgs) {\n            if (!clickArgs.cancel) {\n                if (clickArgs.isPopupOpen) {\n                    var filteredEvents = _this.getFilteredEvents(startDate, endDate, groupIndex);\n                    var moreArgs_1 = { date: startDate, event: filteredEvents, element: event.target };\n                    _this.parent.quickPopup.moreEventClick(moreArgs_1, endDate, groupIndex);\n                }\n                else {\n                    _this.parent.setProperties({ selectedDate: startDate }, true);\n                    _this.parent.changeView(clickArgs.viewName, event);\n                }\n            }\n        });\n    };\n    MonthEvent.prototype.renderEventElement = function (event, appointmentElement, cellTd) {\n        var _this = this;\n        var eventType = appointmentElement.classList.contains(cls.BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n        var isAppointment = appointmentElement.classList.contains(cls.APPOINTMENT_CLASS);\n        var eventObj = this.getEventData(event);\n        var args = { data: eventObj, element: appointmentElement, cancel: false, type: eventType };\n        this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n            if (eventArgs.cancel) {\n                _this.renderedEvents.pop();\n            }\n            else {\n                _this.renderElement(cellTd, appointmentElement, isAppointment);\n            }\n        });\n    };\n    MonthEvent.prototype.getEventData = function (event) {\n        var eventObj = extend({}, event, null, true);\n        eventObj[this.fields.startTime] = event.data[this.fields.startTime];\n        eventObj[this.fields.endTime] = event.data[this.fields.endTime];\n        return eventObj;\n    };\n    MonthEvent.prototype.renderElement = function (cellTd, element, isAppointment) {\n        if (isAppointment === void 0) { isAppointment = false; }\n        if (this.maxOrIndicator && isAppointment) {\n            this.setMaxEventHeight(element, cellTd);\n        }\n        var wrapperEle = cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n        if (wrapperEle) {\n            wrapperEle.appendChild(element);\n        }\n        else {\n            var wrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(element);\n            cellTd.appendChild(wrapper);\n        }\n    };\n    MonthEvent.prototype.getMoreIndicatorElement = function (count, startDate, endDate) {\n        var moreIndicatorElement = createElement('div', {\n            className: cls.MORE_INDICATOR_CLASS,\n            innerHTML: this.getMoreIndicatorText(count),\n            attrs: {\n                'role': 'button',\n                'tabindex': '0',\n                'aria-label': this.parent.globalize.formatNumber(count) + ' ' + this.parent.localeObj.getConstant('moreEvents'),\n                'data-count': count.toString(),\n                'data-start-date': startDate.getTime().toString(),\n                'data-end-date': endDate.getTime().toString()\n            }\n        });\n        return moreIndicatorElement;\n    };\n    MonthEvent.prototype.getMoreIndicatorText = function (count) {\n        return '+' + this.parent.globalize.formatNumber(count) + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'));\n    };\n    MonthEvent.prototype.removeHeightProperty = function (selector) {\n        var rows = [].slice.call(this.element.querySelectorAll('.' + selector + ' tbody tr'));\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            row.firstElementChild.style.height = '';\n        }\n    };\n    MonthEvent.prototype.setMaxEventHeight = function (event, cell) {\n        var headerHeight = util.getOuterHeight(cell.querySelector('.' + cls.DATE_HEADER_CLASS));\n        var height = (cell.offsetHeight - headerHeight) - (this.maxHeight ? 0 : this.moreIndicatorHeight);\n        setStyleAttribute(event, { 'height': height + 'px', 'align-items': 'center' });\n    };\n    MonthEvent.prototype.destroy = function () {\n        this.element = null;\n        this.fields = null;\n        this.maxHeight = null;\n        this.withIndicator = null;\n        this.maxOrIndicator = null;\n        this.moreIndicatorHeight = null;\n        this.removeEventListener();\n        _super.prototype.destroy.call(this);\n    };\n    return MonthEvent;\n}(EventBase));\nexport { MonthEvent };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
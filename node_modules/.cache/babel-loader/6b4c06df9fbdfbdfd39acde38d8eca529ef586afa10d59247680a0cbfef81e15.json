{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable prefer-spread */\nimport { Component, Event, NotifyPropertyChanges, Property } from '@syncfusion/ej2-base';\nimport { Browser, closest, detach, EventHandler, getInstance, select, selectAll, formatUnit } from '@syncfusion/ej2-base';\nimport { addClass, attributes, classList, isNullOrUndefined, L10n } from '@syncfusion/ej2-base';\nimport { remove, removeClass, rippleEffect } from '@syncfusion/ej2-base';\nimport { SplitButton, getModel } from '@syncfusion/ej2-splitbuttons';\nimport { Deferred } from '@syncfusion/ej2-splitbuttons';\nimport { Tooltip, getZindexPartial, Popup, isCollide } from '@syncfusion/ej2-popups';\nimport { Input } from './../input/index';\nimport { NumericTextBox } from './../numerictextbox/index';\nimport { Slider } from './../slider/slider';\nvar APPLY = 'e-apply';\nvar CANCEL = 'e-cancel';\nvar CURRENT = 'e-current';\nvar CONTAINER = 'e-container';\nvar CTRLBTN = 'e-ctrl-btn';\nvar CTRLSWITCH = 'e-switch-ctrl-btn';\nvar DISABLED = 'e-disabled';\nvar FORMATSWITCH = 'e-value-switch-btn';\nvar HANDLER = 'e-handler';\nvar HEX = 'e-hex';\nvar HIDEHEX = 'e-hide-hex-value';\nvar HIDEOPACITY = 'e-hide-opacity';\nvar HIDERGBA = 'e-hide-switchable-value';\nvar HIDEVALUE = 'e-hide-value';\nvar HIDEVALUESWITCH = 'e-hide-valueswitcher';\nvar HSVAREA = 'e-hsv-color';\nvar HSVCONTAINER = 'e-hsv-container';\nvar INPUTWRAPPER = 'e-selected-value';\nvar MODESWITCH = 'e-mode-switch-btn';\nvar NOCOLOR = 'e-nocolor-item';\nvar OPACITY = 'e-opacity-value';\nvar PALETTES = 'e-palette';\nvar PALETTECONTENT = 'e-color-palette';\nvar PICKERCONTENT = 'e-color-picker';\nvar PREVIEW = 'e-preview-container';\nvar PREVIOUS = 'e-previous';\nvar RTL = 'e-rtl';\nvar SHOWVALUE = 'e-show-value';\nvar SELECT = 'e-selected';\nvar SPLITPREVIEW = 'e-split-preview';\nvar TILE = 'e-tile';\nvar presets = {\n  default: ['#000000', '#f44336', '#e91e63', '#9c27b0', '#673ab7', '#2196f3', '#03a9f4', '#00bcd4', '#009688', '#ffeb3b', '#ffffff', '#ffebee', '#fce4ec', '#f3e5f5', '#ede7f6', '#e3f2fd', '#e1f5fe', '#e0f7fa', '#e0f2f1', '#fffde7', '#f2f2f2', '#ffcdd2', '#f8bbd0', '#e1bee7', '#d1c4e9', '#bbdefb', '#b3e5fc', '#b2ebf2', '#b2dfdb', '#fff9c4', '#e6e6e6', '#ef9a9a', '#f48fb1', '#ce93d8', '#b39ddb', '#90caf9', '#81d4fa', '#80deea', '#80cbc4', '#fff59d', '#cccccc', '#e57373', '#f06292', '#ba68c8', '#9575cd', '#64b5f6', '#4fc3f7', '#4dd0e1', '#4db6ac', '#fff176', '#b3b3b3', '#ef5350', '#ec407a', '#ab47bc', '#7e57c2', '#42a5f5', '#29b6f6', '#26c6da', '#26a69a', '#ffee58', '#999999', '#e53935', '#d81b60', '#8e24aa', '#5e35b1', '#1e88e5', '#039be5', '#00acc1', '#00897b', '#fdd835', '#808080', '#d32f2f', '#c2185b', '#7b1fa2', '#512da8', '#1976d2', '#0288d1', '#0097a7', '#00796b', '#fbc02d', '#666666', '#c62828', '#ad1457', '#6a1b9a', '#4527a0', '#1565c0', '#0277bd', '#00838f', '#00695c', '#f9a825', '#4d4d4d', '#b71c1c', '#880e4f', '#4a148c', '#311b92', '#0d47a1', '#01579b', '#006064', '#004d40', '#f57f17']\n};\n/**\n * ColorPicker component is a user interface to select and adjust color values. It provides supports for various\n * color specification like Red Green Blue, Hue Saturation Value and Hex codes.\n * ```html\n * <input type=\"color\" id=\"color-picker\">\n * ```\n * ```typescript\n * <script>\n *   let colorPickerObj: ColorPicker = new ColorPicker(null , \"#color-picker\");\n * </script>\n * ```\n */\nvar ColorPicker = /** @class */function (_super) {\n  __extends(ColorPicker, _super);\n  function ColorPicker(options, element) {\n    return _super.call(this, options, element) || this;\n  }\n  ColorPicker.prototype.preRender = function () {\n    var ele = this.element;\n    this.formElement = closest(this.element, 'form');\n    if (this.formElement) {\n      EventHandler.add(this.formElement, 'reset', this.formResetHandler, this);\n    }\n    var localeText = {\n      Apply: 'Apply',\n      Cancel: 'Cancel',\n      ModeSwitcher: 'Switch Mode'\n    };\n    this.l10n = new L10n('colorpicker', localeText, this.locale);\n    if (ele.getAttribute('ejs-for') && !ele.getAttribute('name')) {\n      ele.setAttribute('name', ele.id);\n    }\n  };\n  /**\n   * To Initialize the component rendering\n   *\n   * @private\n   * @returns {void}\n   */\n  ColorPicker.prototype.render = function () {\n    this.initWrapper();\n    if (this.inline) {\n      this.createWidget();\n    } else {\n      this.createSplitBtn();\n    }\n    if (!this.enableOpacity) {\n      addClass([this.container.parentElement], HIDEOPACITY);\n    }\n    this.renderComplete();\n  };\n  ColorPicker.prototype.initWrapper = function () {\n    var wrapper = this.createElement('div', {\n      className: 'e-' + this.getModuleName() + '-wrapper'\n    });\n    this.element.parentNode.insertBefore(wrapper, this.element);\n    wrapper.appendChild(this.element);\n    attributes(this.element, {\n      'tabindex': '-1',\n      'spellcheck': 'false',\n      'aria-label': 'colorpicker'\n    });\n    this.container = this.createElement('div', {\n      className: CONTAINER\n    });\n    this.getWrapper().appendChild(this.container);\n    var value = this.value ? this.roundValue(this.value).toLowerCase() : '#008000ff';\n    if (this.noColor && this.mode === 'Palette' && this.value === '') {\n      value = '';\n    }\n    var slicedValue = value.slice(0, 7);\n    if (isNullOrUndefined(this.initialInputValue)) {\n      this.initialInputValue = slicedValue;\n    }\n    this.element.value = slicedValue;\n    if (this.enableOpacity) {\n      this.setProperties({\n        'value': value\n      }, true);\n    } else {\n      this.setProperties({\n        'value': slicedValue\n      }, true);\n    }\n    if (this.enableRtl) {\n      wrapper.classList.add(RTL);\n    }\n    if (this.cssClass) {\n      addClass([wrapper], this.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n    }\n    this.tileRipple = rippleEffect(this.container, {\n      selector: '.' + TILE\n    });\n    this.ctrlBtnRipple = rippleEffect(this.container, {\n      selector: '.e-btn'\n    });\n  };\n  ColorPicker.prototype.getWrapper = function () {\n    return this.element.parentElement;\n  };\n  ColorPicker.prototype.createWidget = function () {\n    if (this.mode === 'Palette') {\n      this.createPalette();\n      if (!this.inline) {\n        this.firstPaletteFocus();\n      }\n    } else {\n      this.createPicker();\n      if (!this.inline) {\n        this.getDragHandler().focus();\n      }\n    }\n    this.isRgb = true;\n    this.createInput();\n    this.createCtrlBtn();\n    if (!this.disabled) {\n      this.wireEvents();\n    }\n    if (this.inline && this.disabled) {\n      this.toggleDisabled(true);\n    }\n    if (Browser.isDevice) {\n      this.refreshPopupPos();\n    }\n  };\n  ColorPicker.prototype.createSplitBtn = function () {\n    var _this = this;\n    var splitButton = this.createElement('button', {\n      className: 'e-split-colorpicker'\n    });\n    this.getWrapper().appendChild(splitButton);\n    this.splitBtn = new SplitButton({\n      iconCss: 'e-selected-color',\n      target: this.container,\n      disabled: this.disabled,\n      enableRtl: this.enableRtl,\n      createPopupOnClick: this.createPopupOnClick,\n      open: this.onOpen.bind(this),\n      click: function () {\n        var ev = new MouseEvent('click', {\n          bubbles: true,\n          cancelable: false\n        });\n        _this.trigger('change', {\n          currentValue: {\n            hex: _this.value.slice(0, 7),\n            rgba: _this.convertToRgbString(_this.hexToRgb(_this.value))\n          },\n          previousValue: {\n            hex: null,\n            rgba: null\n          },\n          value: _this.value,\n          event: ev\n        });\n      }\n    });\n    this.splitBtn.createElement = this.createElement;\n    this.splitBtn.appendTo(splitButton);\n    var preview = this.createElement('span', {\n      className: SPLITPREVIEW\n    });\n    select('.e-selected-color', splitButton).appendChild(preview);\n    preview.style.backgroundColor = this.convertToRgbString(this.hexToRgb(this.value));\n    var popupEle = this.getPopupEle();\n    addClass([popupEle], 'e-colorpicker-popup');\n    if (this.cssClass) {\n      addClass([popupEle], this.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n    }\n    if (Browser.isDevice && !this.createPopupOnClick) {\n      var popupInst = this.getPopupInst();\n      popupInst.relateTo = document.body;\n      popupInst.position = {\n        X: 'center',\n        Y: 'center'\n      };\n      popupInst.targetType = 'container';\n      popupInst.collision = {\n        X: 'fit',\n        Y: 'fit'\n      };\n      popupInst.offsetY = 4;\n      popupEle.style.zIndex = getZindexPartial(this.splitBtn.element).toString();\n    }\n    this.bindCallBackEvent();\n  };\n  ColorPicker.prototype.onOpen = function () {\n    this.trigger('open', {\n      element: this.container\n    });\n    if (!Browser.isDevice) {\n      var popupInst = this.getPopupInst();\n      var collision = isCollide(popupInst.element);\n      if (collision.length > 0) {\n        popupInst.collision = {\n          X: 'flip',\n          Y: 'fit'\n        };\n        popupInst.position = {\n          X: 'right',\n          Y: 'bottom'\n        };\n        popupInst.targetType = 'container';\n      }\n    }\n  };\n  ColorPicker.prototype.getPopupInst = function () {\n    return getInstance(this.getPopupEle(), Popup);\n  };\n  ColorPicker.prototype.bindCallBackEvent = function () {\n    var _this = this;\n    this.splitBtn.beforeOpen = function (args) {\n      var callBackPromise = new Deferred();\n      _this.trigger('beforeOpen', args, function (observeOpenArgs) {\n        if (!observeOpenArgs.cancel) {\n          var popupEle = _this.getPopupEle();\n          popupEle.style.top = formatUnit(0 + pageYOffset);\n          popupEle.style.left = formatUnit(0 + pageXOffset);\n          popupEle.style.display = 'block';\n          _this.createWidget();\n          popupEle.style.display = '';\n          if (Browser.isDevice) {\n            if (_this.createPopupOnClick) {\n              var popupInst = _this.getPopupInst();\n              popupInst.relateTo = document.body;\n              popupInst.position = {\n                X: 'center',\n                Y: 'center'\n              };\n              popupInst.targetType = 'container';\n              popupInst.collision = {\n                X: 'fit',\n                Y: 'fit'\n              };\n              popupInst.offsetY = 4;\n              popupEle.style.zIndex = getZindexPartial(_this.splitBtn.element).toString();\n            }\n            _this.modal = _this.createElement('div');\n            _this.modal.className = 'e-' + _this.getModuleName() + ' e-modal';\n            _this.modal.style.display = 'none';\n            document.body.insertBefore(_this.modal, popupEle);\n            document.body.className += ' e-colorpicker-overflow';\n            _this.modal.style.display = 'block';\n            _this.modal.style.zIndex = (Number(popupEle.style.zIndex) - 1).toString();\n          }\n        }\n        args.cancel = observeOpenArgs.cancel;\n        callBackPromise.resolve(observeOpenArgs);\n      });\n      return callBackPromise;\n    };\n    this.splitBtn.beforeClose = function (args) {\n      var callBackPromise = new Deferred();\n      if (!isNullOrUndefined(args.event)) {\n        var beforeCloseArgs = {\n          element: _this.container,\n          event: args.event,\n          cancel: false\n        };\n        _this.trigger('beforeClose', beforeCloseArgs, function (observedCloseArgs) {\n          if (Browser.isDevice && args.event.target === _this.modal) {\n            observedCloseArgs.cancel = true;\n          }\n          if (!observedCloseArgs.cancel) {\n            _this.onPopupClose();\n          }\n          args.cancel = observedCloseArgs.cancel;\n          callBackPromise.resolve(observedCloseArgs);\n        });\n      } else {\n        callBackPromise.resolve(args);\n      }\n      return callBackPromise;\n    };\n  };\n  ColorPicker.prototype.onPopupClose = function () {\n    this.unWireEvents();\n    this.destroyOtherComp();\n    this.container.style.width = '';\n    select('.' + SPLITPREVIEW, this.splitBtn.element).style.backgroundColor = this.convertToRgbString(this.hexToRgb(this.value));\n    this.container.innerHTML = '';\n    removeClass([this.container], [PICKERCONTENT, PALETTECONTENT]);\n    if (Browser.isDevice && this.modal) {\n      removeClass([document.body], 'e-colorpicker-overflow');\n      this.modal.style.display = 'none';\n      this.modal.outerHTML = '';\n      this.modal = null;\n    }\n  };\n  ColorPicker.prototype.createPalette = function () {\n    classList(this.container, [PALETTECONTENT], [PICKERCONTENT]);\n    if (this.presetColors) {\n      var paletteGroup = this.createElement('div', {\n        className: 'e-custom-palette'\n      });\n      this.appendElement(paletteGroup);\n      var keys = Object.keys(this.presetColors);\n      if (keys.length === 1) {\n        this.appendPalette(this.presetColors[keys[0]], keys[0], paletteGroup);\n      } else {\n        for (var i = 0, len = keys.length; i < len; i++) {\n          this.appendPalette(this.presetColors[keys[i]], keys[i], paletteGroup);\n        }\n      }\n      if (selectAll('.e-row', paletteGroup).length > 10) {\n        addClass([paletteGroup], 'e-palette-group');\n      }\n    } else {\n      this.appendPalette(presets.default, 'default');\n    }\n    if (this.mode === 'Palette' && !this.modeSwitcher && this.noColor) {\n      this.setNoColor();\n    }\n    var width = parseInt(getComputedStyle(this.container).borderBottomWidth, 10);\n    this.container.style.width = formatUnit(this.container.children[0].offsetWidth + width + width);\n    this.rgb = this.hexToRgb(this.roundValue(this.value));\n    this.hsv = this.rgbToHsv.apply(this, this.rgb);\n  };\n  ColorPicker.prototype.firstPaletteFocus = function () {\n    if (!select('.' + SELECT, this.container.children[0])) {\n      selectAll('.' + PALETTES, this.container)[0].focus();\n    }\n  };\n  ColorPicker.prototype.appendPalette = function (colors, key, refEle) {\n    var palette = this.createElement('div', {\n      className: PALETTES,\n      attrs: {\n        'tabindex': '0',\n        'role': 'grid'\n      }\n    });\n    if (refEle) {\n      refEle.appendChild(palette);\n    } else {\n      this.appendElement(palette);\n    }\n    var row;\n    var tile;\n    var roundedColor;\n    for (var i = 0, len = colors.length; i < len; i++) {\n      if (i === 0 || i % this.columns === 0) {\n        row = this.createElement('div', {\n          className: 'e-row',\n          attrs: {\n            'role': 'row'\n          }\n        });\n        palette.appendChild(row);\n      }\n      roundedColor = this.roundValue(colors[i]).toLowerCase();\n      tile = this.createElement('span', {\n        className: TILE,\n        attrs: {\n          'role': 'gridcell',\n          'aria-label': roundedColor,\n          'aria-selected': 'false',\n          'tabindex': '0'\n        }\n      });\n      this.trigger('beforeTileRender', {\n        element: tile,\n        presetName: key,\n        value: colors[i]\n      });\n      row.appendChild(tile);\n      if (this.value === roundedColor) {\n        this.addTileSelection(tile);\n        palette.focus();\n      }\n      tile.style.backgroundColor = this.convertToRgbString(this.hexToRgb(roundedColor));\n    }\n  };\n  ColorPicker.prototype.setNoColor = function () {\n    var noColorEle = this.container.querySelector('.e-row').children[0];\n    noColorEle.classList.add(NOCOLOR);\n    if (!this.value) {\n      noColorEle.classList.add(SELECT);\n      closest(noColorEle, '.' + PALETTES).focus();\n    }\n    ['aria-selected', 'aria-label'].forEach(function (attr) {\n      noColorEle.removeAttribute(attr);\n    });\n    noColorEle.style.backgroundColor = '';\n  };\n  ColorPicker.prototype.appendElement = function (ele, insertPos) {\n    if (insertPos === void 0) {\n      insertPos = 0;\n    }\n    var refEle = this.container.children[insertPos];\n    if (refEle) {\n      this.container.insertBefore(ele, refEle);\n    } else {\n      this.container.appendChild(ele);\n    }\n  };\n  ColorPicker.prototype.addTileSelection = function (ele) {\n    ele.classList.add(SELECT);\n    ele.setAttribute('aria-selected', 'true');\n  };\n  ColorPicker.prototype.createPicker = function () {\n    classList(this.container, [PICKERCONTENT], [PALETTECONTENT]);\n    var hsvContainer = this.createElement('div', {\n      className: HSVCONTAINER\n    });\n    this.appendElement(hsvContainer);\n    hsvContainer.appendChild(this.createElement('div', {\n      className: HSVAREA\n    }));\n    var dragHandler = this.createElement('span', {\n      className: HANDLER,\n      attrs: {\n        'tabindex': '0'\n      }\n    });\n    hsvContainer.appendChild(dragHandler);\n    if (this.value === null || this.value === '') {\n      this.value = '#008000ff';\n    }\n    this.rgb = this.hexToRgb(this.value);\n    this.hsv = this.rgbToHsv.apply(this, this.rgb);\n    this.setHsvContainerBg();\n    this.setHandlerPosition();\n    this.createSlider();\n    this.createDragTooltip();\n  };\n  ColorPicker.prototype.setHsvContainerBg = function (h) {\n    if (h === void 0) {\n      h = this.hsv[0];\n    }\n    this.getHsvContainer().style.backgroundColor = this.convertToRgbString(this.hsvToRgb(h, 100, 100, 1));\n  };\n  ColorPicker.prototype.getHsvContainer = function () {\n    return select('.' + HSVCONTAINER, this.container);\n  };\n  ColorPicker.prototype.setHandlerPosition = function () {\n    var dragHandler = this.getDragHandler();\n    var hsvArea = select('.' + HSVAREA, this.container);\n    if (this.enableRtl) {\n      dragHandler.style.left = formatUnit(hsvArea.offsetWidth * Math.abs(100 - this.hsv[1]) / 100);\n    } else {\n      dragHandler.style.left = formatUnit(hsvArea.offsetWidth * this.hsv[1] / 100);\n    }\n    dragHandler.style.top = formatUnit(hsvArea.offsetHeight * (100 - this.hsv[2]) / 100);\n  };\n  ColorPicker.prototype.createSlider = function () {\n    var sliderPreviewWrapper = this.createElement('div', {\n      className: 'e-slider-preview'\n    });\n    this.appendElement(sliderPreviewWrapper, 1);\n    this.createPreview(sliderPreviewWrapper);\n    var sliderWrapper = this.createElement('div', {\n      className: 'e-colorpicker-slider'\n    });\n    sliderPreviewWrapper.insertBefore(sliderWrapper, sliderPreviewWrapper.children[0]);\n    var slider = this.createElement('div', {\n      className: 'e-hue-slider'\n    });\n    sliderWrapper.appendChild(slider);\n    this.hueSlider = new Slider({\n      value: this.hsv[0],\n      min: 0,\n      max: 359,\n      enableRtl: this.enableRtl,\n      enabled: !this.disabled,\n      change: this.hueChange.bind(this)\n    });\n    this.hueSlider.createElement = this.createElement;\n    this.hueSlider.appendTo(slider);\n    if (this.enableOpacity) {\n      slider = this.createElement('div', {\n        className: 'e-opacity-slider'\n      });\n      sliderWrapper.appendChild(slider);\n      this.createOpacitySlider(slider);\n    }\n  };\n  ColorPicker.prototype.createOpacitySlider = function (slider) {\n    this.opacitySlider = new Slider({\n      value: this.rgb[3] * 100,\n      min: 0,\n      max: 100,\n      enableRtl: this.enableRtl,\n      enabled: !this.disabled,\n      change: this.opacityChange.bind(this)\n    });\n    this.opacitySlider.createElement = this.createElement;\n    this.opacitySlider.appendTo(slider);\n    var opacityBgTrack = this.createElement('div', {\n      className: 'e-opacity-empty-track'\n    });\n    slider.appendChild(opacityBgTrack);\n    this.updateOpacitySliderBg();\n  };\n  ColorPicker.prototype.updateOpacitySliderBg = function () {\n    var direction = this.enableRtl ? 'to left' : 'to right';\n    var opacityEle = select('.e-opacity-empty-track', this.opacitySlider.element);\n    if (opacityEle) {\n      opacityEle.style.background = 'linear-gradient(' + direction + ', rgba(' + this.rgb.slice(0, 3) + ', 0) 0%, ' + this.convertToRgbString(this.rgb.slice(0, 3)) + ' 100%)';\n    }\n  };\n  ColorPicker.prototype.hueChange = function (args) {\n    this.hsv[0] = args.value;\n    this.setHsvContainerBg();\n    this.convertToOtherFormat();\n  };\n  ColorPicker.prototype.opacityChange = function (args) {\n    var value = args.value;\n    var pValue = this.rgbToHex(this.rgb);\n    this.hsv[3] = value / 100;\n    this.rgb[3] = value / 100;\n    var cValue = this.rgbToHex(this.rgb);\n    this.updateOpacityInput(value);\n    var rgb = this.convertToRgbString(this.rgb);\n    this.updatePreview(rgb);\n    this.triggerEvent(cValue, pValue, rgb);\n  };\n  ColorPicker.prototype.updateOpacityInput = function (value) {\n    if (this.enableOpacity && !this.getWrapper().classList.contains(HIDEVALUE)) {\n      var opacityTextBoxInst = getInstance(select('.' + OPACITY, this.container), NumericTextBox);\n      opacityTextBoxInst.value = value;\n      opacityTextBoxInst.dataBind();\n    }\n  };\n  ColorPicker.prototype.createPreview = function (parentEle) {\n    var previewContainer = this.createElement('div', {\n      className: PREVIEW\n    });\n    parentEle.appendChild(previewContainer);\n    var preview = this.createElement('span', {\n      className: 'e-preview ' + CURRENT\n    });\n    previewContainer.appendChild(preview);\n    var colorValue = this.convertToRgbString(this.rgb);\n    preview.style.backgroundColor = colorValue;\n    preview = this.createElement('span', {\n      className: 'e-preview ' + PREVIOUS\n    });\n    previewContainer.appendChild(preview);\n    preview.style.backgroundColor = colorValue;\n  };\n  ColorPicker.prototype.isPicker = function () {\n    return !this.container.classList.contains(PALETTECONTENT);\n  };\n  ColorPicker.prototype.getPopupEle = function () {\n    return this.container.parentElement;\n  };\n  ColorPicker.prototype.createNumericInput = function (element, value, label, max) {\n    var _this = this;\n    var numericInput = new NumericTextBox({\n      value: value,\n      placeholder: label,\n      min: 0,\n      max: max,\n      format: '###.##',\n      showSpinButton: false,\n      floatLabelType: 'Always',\n      enableRtl: this.enableRtl,\n      enabled: !this.disabled,\n      readonly: this.isPicker() ? false : true,\n      change: function (args) {\n        if (args.event) {\n          _this.inputHandler(args.event);\n        }\n      }\n    });\n    numericInput.createElement = this.createElement;\n    numericInput.appendTo(element);\n  };\n  ColorPicker.prototype.createInput = function () {\n    var isPicker = this.isPicker();\n    var wrapper = this.getWrapper();\n    if (isPicker && !wrapper.classList.contains(HIDEVALUE) || !isPicker && wrapper.classList.contains(SHOWVALUE)) {\n      var inputWrap = this.createElement('div', {\n        className: INPUTWRAPPER\n      });\n      if (isPicker) {\n        this.appendElement(inputWrap, 2);\n      } else {\n        this.appendElement(inputWrap, 1);\n      }\n      var container = this.createElement('div', {\n        className: 'e-input-container'\n      });\n      inputWrap.appendChild(container);\n      if (!wrapper.classList.contains(HIDEVALUESWITCH)) {\n        this.appendValueSwitchBtn(inputWrap);\n      }\n      if (!wrapper.classList.contains(HIDEHEX)) {\n        var hexInput = this.createElement('input', {\n          className: HEX,\n          attrs: {\n            'maxlength': '7',\n            'spellcheck': 'false',\n            'aria-label': 'HEX'\n          }\n        });\n        container.appendChild(hexInput);\n        Input.createInput({\n          element: hexInput,\n          floatLabelType: 'Always',\n          properties: {\n            placeholder: 'HEX',\n            enableRtl: this.enableRtl,\n            enabled: !this.disabled,\n            readonly: this.isPicker() ? false : true\n          }\n        }, this.createElement);\n        Input.setValue(this.value.slice(0, 7), hexInput);\n        hexInput.addEventListener('input', this.inputHandler.bind(this));\n      }\n      if (!wrapper.classList.contains(HIDERGBA)) {\n        var label = void 0;\n        var value = void 0;\n        if (this.isRgb) {\n          label = 'RGB';\n          value = this.rgb;\n        } else {\n          label = 'HSV';\n          value = this.hsv;\n        }\n        var clsName = ['rh', 'gs', 'bv'];\n        for (var i = 0; i < 3; i++) {\n          this.createNumericInput(container.appendChild(this.createElement('input', {\n            className: 'e-' + clsName[i] + '-value'\n          })), value[i], label[i], 255);\n        }\n        if (this.enableOpacity) {\n          this.appendOpacityValue(container);\n        }\n      }\n    }\n  };\n  ColorPicker.prototype.appendOpacityValue = function (container) {\n    this.createNumericInput(container.appendChild(this.createElement('input', {\n      className: OPACITY\n    })), this.rgb[3] * 100, 'A', 100);\n  };\n  ColorPicker.prototype.appendValueSwitchBtn = function (targetEle) {\n    var valueSwitchBtn = this.createElement('button', {\n      className: 'e-icons e-css e-btn e-flat e-icon-btn ' + FORMATSWITCH,\n      attrs: {\n        'title': 'Toggle format'\n      }\n    });\n    targetEle.appendChild(valueSwitchBtn);\n    if (this.isPicker() && !this.getWrapper().classList.contains(HIDERGBA)) {\n      valueSwitchBtn.addEventListener('click', this.formatSwitchHandler.bind(this));\n    }\n  };\n  ColorPicker.prototype.createCtrlBtn = function () {\n    if (this.modeSwitcher || this.showButtons) {\n      this.l10n.setLocale(this.locale);\n      var btnWrapper = this.createElement('div', {\n        className: CTRLSWITCH\n      });\n      this.container.appendChild(btnWrapper);\n      if (this.showButtons) {\n        var controlBtnWrapper = this.createElement('div', {\n          className: CTRLBTN\n        });\n        btnWrapper.appendChild(controlBtnWrapper);\n        var apply = this.l10n.getConstant('Apply');\n        controlBtnWrapper.appendChild(this.createElement('button', {\n          innerHTML: apply,\n          className: 'e-btn e-css e-flat e-primary e-small ' + APPLY,\n          attrs: {\n            'title': apply\n          }\n        }));\n        var cancel = this.l10n.getConstant('Cancel');\n        controlBtnWrapper.appendChild(this.createElement('button', {\n          innerHTML: cancel,\n          className: 'e-btn e-css e-flat e-small ' + CANCEL,\n          attrs: {\n            'title': cancel\n          }\n        }));\n      }\n      if (this.modeSwitcher) {\n        this.appendModeSwitchBtn();\n      }\n    }\n  };\n  ColorPicker.prototype.appendModeSwitchBtn = function () {\n    var modeSwitcher = this.createElement('button', {\n      className: 'e-icons e-btn e-flat e-icon-btn ' + MODESWITCH,\n      attrs: {\n        title: this.l10n.getConstant('ModeSwitcher')\n      }\n    });\n    select('.' + CTRLSWITCH, this.container).insertBefore(modeSwitcher, select('.' + CTRLBTN, this.container));\n  };\n  ColorPicker.prototype.createDragTooltip = function () {\n    var _this = this;\n    var tooltip = new Tooltip({\n      opensOn: 'Custom',\n      showTipPointer: false,\n      cssClass: 'e-color-picker-tooltip',\n      htmlAttributes: {\n        title: 'tooltip'\n      },\n      beforeOpen: function (args) {\n        _this.tooltipEle = args.element;\n      },\n      animation: {\n        open: {\n          effect: 'None'\n        },\n        close: {\n          effect: 'None'\n        }\n      }\n    });\n    tooltip.createElement = this.createElement;\n    tooltip.appendTo(this.container);\n    tooltip.open(this.container);\n    this.tooltipEle.style.zIndex = getZindexPartial(this.tooltipEle).toString();\n    this.tooltipEle.setAttribute('aria-label', 'colorpicker-tooltip');\n    select('.e-tip-content', this.tooltipEle).appendChild(this.createElement('div', {\n      className: 'e-tip-transparent'\n    }));\n  };\n  ColorPicker.prototype.getTooltipInst = function () {\n    return getInstance(this.container, Tooltip);\n  };\n  ColorPicker.prototype.setTooltipOffset = function (value) {\n    this.getTooltipInst().offsetY = value;\n  };\n  ColorPicker.prototype.toggleDisabled = function (enable) {\n    if (enable) {\n      this.getWrapper().classList.add(DISABLED);\n    } else {\n      this.getWrapper().classList.remove(DISABLED);\n    }\n    if (this.showButtons) {\n      [].slice.call(selectAll('.e-btn', this.container)).forEach(function (ele) {\n        if (enable) {\n          attributes(ele, {\n            'disabled': ''\n          });\n        } else {\n          ele.removeAttribute('disabled');\n        }\n      });\n    }\n  };\n  ColorPicker.prototype.convertToRgbString = function (rgb) {\n    return rgb.length ? rgb.length === 4 ? 'rgba(' + rgb.join() + ')' : 'rgb(' + rgb.join() + ')' : '';\n  };\n  ColorPicker.prototype.convertToHsvString = function (hsv) {\n    return hsv.length === 4 ? 'hsva(' + hsv.join() + ')' : 'hsv(' + hsv.join() + ')';\n  };\n  ColorPicker.prototype.updateHsv = function () {\n    this.hsv[1] = this.hsv[1] > 100 ? 100 : this.hsv[1];\n    this.hsv[2] = this.hsv[2] > 100 ? 100 : this.hsv[2];\n    this.setHandlerPosition();\n  };\n  ColorPicker.prototype.convertToOtherFormat = function (isKey, e) {\n    if (isKey === void 0) {\n      isKey = false;\n    }\n    var pValue = this.rgbToHex(this.rgb);\n    this.rgb = this.hsvToRgb.apply(this, this.hsv);\n    var cValue = this.rgbToHex(this.rgb);\n    var rgba = this.convertToRgbString(this.rgb);\n    this.updatePreview(rgba);\n    this.updateInput(cValue);\n    this.triggerEvent(cValue, pValue, rgba, isKey, e);\n  };\n  ColorPicker.prototype.updateInput = function (value) {\n    var wrapper = this.getWrapper();\n    if (!wrapper.classList.contains(HIDEVALUE)) {\n      if (!wrapper.classList.contains(HIDEHEX)) {\n        Input.setValue(value.substr(0, 7), select('.' + HEX, this.container));\n      }\n      if (!wrapper.classList.contains(HIDERGBA)) {\n        if (this.isRgb) {\n          this.updateValue(this.rgb, false);\n        } else {\n          this.updateValue(this.hsv, false);\n        }\n      }\n    }\n  };\n  ColorPicker.prototype.updatePreview = function (value) {\n    if (this.enableOpacity) {\n      this.updateOpacitySliderBg();\n    }\n    select('.e-tip-transparent', this.tooltipEle).style.backgroundColor = value;\n    select('.' + PREVIEW + ' .' + CURRENT, this.container).style.backgroundColor = value;\n    select('.' + PREVIEW + ' .' + PREVIOUS, this.container).style.backgroundColor = this.convertToRgbString(this.hexToRgb(this.value));\n  };\n  ColorPicker.prototype.getDragHandler = function () {\n    return select('.' + HANDLER, this.container);\n  };\n  ColorPicker.prototype.removeTileSelection = function () {\n    var selectedEle = [].slice.call(selectAll('.' + SELECT, this.container.children[0]));\n    selectedEle.forEach(function (ele) {\n      ele.classList.remove(SELECT);\n      ele.setAttribute('aria-selected', 'false');\n    });\n  };\n  ColorPicker.prototype.convertRgbToNumberArray = function (value) {\n    return value.slice(value.indexOf('(') + 1, value.indexOf(')')).split(',').map(function (n, i) {\n      return i !== 3 ? parseInt(n, 10) : parseFloat(n);\n    });\n  };\n  /**\n   * To get color value in specified type.\n   *\n   * @param {string} value - Specify the color value.\n   * @param {string} type - Specify the type to which the specified color needs to be converted.\n   * @method getValue\n   * @returns {string} - Color value\n   */\n  ColorPicker.prototype.getValue = function (value, type) {\n    if (!value) {\n      value = this.value;\n    }\n    type = !type ? 'hex' : type.toLowerCase();\n    if (value[0] === 'r') {\n      var cValue = this.convertRgbToNumberArray(value);\n      if (type === 'hex' || type === 'hexa') {\n        var hex = this.rgbToHex(cValue);\n        return type === 'hex' ? hex.slice(0, 7) : hex;\n      } else {\n        if (type === 'hsv') {\n          return this.convertToHsvString(this.rgbToHsv.apply(this, cValue.slice(0, 3)));\n        } else {\n          if (type === 'hsva') {\n            return this.convertToHsvString(this.rgbToHsv.apply(this, cValue));\n          } else {\n            return 'null';\n          }\n        }\n      }\n    } else {\n      if (value[0] === 'h') {\n        var cValue = this.hsvToRgb.apply(this, this.convertRgbToNumberArray(value));\n        if (type === 'rgba') {\n          return this.convertToRgbString(cValue);\n        } else {\n          if (type === 'hex' || type === 'hexa') {\n            var hex = this.rgbToHex(cValue);\n            return type === 'hex' ? hex.slice(0, 7) : hex;\n          } else {\n            if (type === 'rgb') {\n              return this.convertToRgbString(cValue.slice(0, 3));\n            } else {\n              return 'null';\n            }\n          }\n        }\n      } else {\n        value = this.roundValue(value);\n        var rgb = this.hexToRgb(value);\n        if (type === 'rgb' || type === 'hsv') {\n          rgb = rgb.slice(0, 3);\n        }\n        if (type === 'rgba' || type === 'rgb') {\n          return this.convertToRgbString(rgb);\n        } else {\n          if (type === 'hsva' || type === 'hsv') {\n            return this.convertToHsvString(this.rgbToHsv.apply(this, rgb));\n          } else {\n            if (type === 'hex') {\n              return value.slice(0, 7);\n            } else {\n              if (type === 'a') {\n                return rgb[3].toString();\n              } else {\n                return 'null';\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  /**\n   * To show/hide ColorPicker popup based on current state of the SplitButton.\n   *\n   * @method toggle\n   * @returns {void}\n   */\n  ColorPicker.prototype.toggle = function () {\n    if (this.container.parentElement.classList.contains('e-popup-close')) {\n      this.splitBtn.toggle();\n    } else {\n      this.closePopup(null);\n    }\n  };\n  /**\n   * Get component name.\n   *\n   * @returns {string} - Module Name\n   * @private\n   */\n  ColorPicker.prototype.getModuleName = function () {\n    return 'colorpicker';\n  };\n  /**\n   * Gets the properties to be maintained in the persisted state.\n   *\n   * @returns {string} - Persist data\n   */\n  ColorPicker.prototype.getPersistData = function () {\n    return this.addOnPersist(['value']);\n  };\n  ColorPicker.prototype.wireEvents = function () {\n    if (this.isPicker()) {\n      var dragHandler = this.getDragHandler();\n      EventHandler.add(dragHandler, 'keydown', this.pickerKeyDown, this);\n      var ctrlBtn = select('.' + CTRLBTN, this.container);\n      if (ctrlBtn) {\n        EventHandler.add(ctrlBtn, 'keydown', this.ctrlBtnKeyDown, this);\n      }\n      EventHandler.add(this.getHsvContainer(), 'mousedown touchstart', this.handlerDown, this);\n      if (this.modeSwitcher || this.showButtons) {\n        this.addCtrlSwitchEvent();\n      }\n      EventHandler.add(select('.' + PREVIOUS, this.container), 'click', this.previewHandler, this);\n    } else {\n      EventHandler.add(this.container, 'click', this.paletteClickHandler, this);\n      EventHandler.add(this.container, 'keydown', this.paletteKeyDown, this);\n    }\n  };\n  ColorPicker.prototype.formResetHandler = function () {\n    this.value = this.initialInputValue;\n    attributes(this.element, {\n      'value': this.initialInputValue\n    });\n  };\n  ColorPicker.prototype.addCtrlSwitchEvent = function () {\n    var ctrlSwitchBtn = select('.' + CTRLSWITCH, this.container);\n    if (ctrlSwitchBtn) {\n      EventHandler.add(ctrlSwitchBtn, 'click', this.btnClickHandler, this);\n    }\n  };\n  ColorPicker.prototype.ctrlBtnKeyDown = function (e) {\n    if (e.keyCode === 13) {\n      var applyBtn = select('.' + APPLY, this.container);\n      if (applyBtn) {\n        var cValue = this.rgbToHex(this.rgb);\n        this.triggerChangeEvent(cValue);\n      }\n      this.splitBtn.element.focus();\n    }\n  };\n  ColorPicker.prototype.pickerKeyDown = function (e) {\n    switch (e.keyCode) {\n      case 39:\n        this.handlerDragPosition(1, this.enableRtl ? -1 : 1, e);\n        break;\n      case 37:\n        this.handlerDragPosition(1, this.enableRtl ? 1 : -1, e);\n        break;\n      case 38:\n        this.handlerDragPosition(2, 1, e);\n        break;\n      case 40:\n        this.handlerDragPosition(2, -1, e);\n        break;\n      case 13:\n        {\n          e.preventDefault();\n          var cValue = this.rgbToHex(this.rgb);\n          this.enterKeyHandler(cValue, e);\n        }\n    }\n  };\n  ColorPicker.prototype.enterKeyHandler = function (value, e) {\n    this.triggerChangeEvent(value);\n    if (!this.inline) {\n      this.splitBtn.element.focus();\n    }\n  };\n  ColorPicker.prototype.closePopup = function (e) {\n    var _this = this;\n    var beforeCloseArgs = {\n      element: this.container,\n      event: e,\n      cancel: false\n    };\n    this.trigger('beforeClose', beforeCloseArgs, function (observedcloseArgs) {\n      if (!observedcloseArgs.cancel) {\n        _this.splitBtn.toggle();\n        _this.onPopupClose();\n      }\n    });\n  };\n  ColorPicker.prototype.triggerChangeEvent = function (value, e) {\n    var hex = value.slice(0, 7);\n    this.trigger('change', {\n      currentValue: {\n        hex: hex,\n        rgba: this.convertToRgbString(this.rgb)\n      },\n      event: e,\n      previousValue: {\n        hex: this.value.slice(0, 7),\n        rgba: this.convertToRgbString(this.hexToRgb(this.value))\n      },\n      value: this.enableOpacity ? value : hex\n    });\n    if (this.enableOpacity) {\n      this.setProperties({\n        'value': value\n      }, true);\n    } else {\n      this.setProperties({\n        'value': hex\n      }, true);\n    }\n    this.element.value = hex ? hex : '#000000';\n  };\n  ColorPicker.prototype.handlerDragPosition = function (prob, value, e) {\n    e.preventDefault();\n    this.hsv[prob] += value * (e.ctrlKey ? 1 : 3);\n    if (this.hsv[prob] < 0) {\n      this.hsv[prob] = 0;\n    }\n    this.updateHsv();\n    this.convertToOtherFormat(true, e);\n  };\n  ColorPicker.prototype.handlerDown = function (e) {\n    e.preventDefault();\n    if (e.type === 'mousedown') {\n      this.clientX = Math.abs(e.pageX - pageXOffset);\n      this.clientY = Math.abs(e.pageY - pageYOffset);\n      this.setTooltipOffset(8);\n    } else {\n      this.clientX = Math.abs(e.changedTouches[0].pageX - pageXOffset);\n      this.clientY = Math.abs(e.changedTouches[0].pageY - pageYOffset);\n      this.setTooltipOffset(-8);\n    }\n    this.setHsv(this.clientX, this.clientY);\n    this.getDragHandler().style.transition = 'left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)';\n    this.updateHsv();\n    this.convertToOtherFormat(false, e);\n    this.getDragHandler().focus();\n    EventHandler.add(document, 'mousemove touchmove', this.handlerMove, this);\n    EventHandler.add(document, 'mouseup touchend', this.handlerEnd, this);\n  };\n  ColorPicker.prototype.handlerMove = function (e) {\n    if (e.type !== 'touchmove') {\n      e.preventDefault();\n    }\n    var x;\n    var y;\n    if (e.type === 'mousemove') {\n      x = Math.abs(e.pageX - pageXOffset);\n      y = Math.abs(e.pageY - pageYOffset);\n    } else {\n      x = Math.abs(e.changedTouches[0].pageX - pageXOffset);\n      y = Math.abs(e.changedTouches[0].pageY - pageYOffset);\n    }\n    this.setHsv(x, y);\n    var dragHandler = this.getDragHandler();\n    this.updateHsv();\n    this.convertToOtherFormat(false, e);\n    this.getTooltipInst().refresh(dragHandler);\n    if (!this.tooltipEle.style.transform) {\n      if (Math.abs(this.clientX - x) > 8 || Math.abs(this.clientY - y) > 8) {\n        select('.' + HSVAREA, this.container).style.cursor = 'pointer';\n        dragHandler.style.transition = 'none';\n        if (!this.inline) {\n          this.tooltipEle.style.zIndex = (parseInt(this.getPopupEle().style.zIndex, 10) + 1).toString();\n        }\n        this.tooltipEle.style.transform = 'rotate(45deg)';\n        dragHandler.classList.add('e-hide-handler');\n      }\n    }\n  };\n  ColorPicker.prototype.setHsv = function (clientX, clientY) {\n    var ele = select('.' + HSVAREA, this.container);\n    var position = ele.getBoundingClientRect();\n    if (this.enableRtl) {\n      clientX = clientX > position.right ? 0 : Math.abs(clientX - position.right);\n    } else {\n      clientX = clientX > position.left ? Math.abs(clientX - position.left) : 0;\n    }\n    clientY = clientY > position.top ? Math.abs(clientY - position.top) : 0;\n    this.hsv[2] = Math.round(Number(100 * (ele.offsetHeight - Math.max(0, Math.min(ele.offsetHeight, clientY - ele.offsetTop))) / ele.offsetHeight) * 10) / 10;\n    this.hsv[1] = Math.round(Number(100 * Math.max(0, Math.min(ele.offsetWidth, clientX - ele.offsetLeft)) / ele.offsetWidth) * 10) / 10;\n  };\n  ColorPicker.prototype.handlerEnd = function (e) {\n    if (e.type !== 'touchend') {\n      e.preventDefault();\n    }\n    EventHandler.remove(document, 'mousemove touchmove', this.handlerMove);\n    EventHandler.remove(document, 'mouseup touchend', this.handlerEnd);\n    var dragHandler = this.getDragHandler();\n    select('.' + HSVAREA, this.container).style.cursor = '';\n    if (this.tooltipEle.style.transform) {\n      this.tooltipEle.style.transform = '';\n      dragHandler.classList.remove('e-hide-handler');\n    }\n    if (!this.inline && !this.showButtons) {\n      this.closePopup(e);\n    }\n  };\n  ColorPicker.prototype.btnClickHandler = function (e) {\n    var target = e.target;\n    if (closest(target, '.' + MODESWITCH)) {\n      e.stopPropagation();\n      this.switchToPalette();\n    } else {\n      if (target.classList.contains(APPLY) || target.classList.contains(CANCEL)) {\n        this.ctrlBtnClick(target, e);\n      }\n    }\n  };\n  ColorPicker.prototype.switchToPalette = function () {\n    this.trigger('beforeModeSwitch', {\n      element: this.container,\n      mode: 'Palette'\n    });\n    this.unWireEvents();\n    this.destroyOtherComp();\n    detach(select('.e-slider-preview', this.container));\n    if (!this.getWrapper().classList.contains(HIDEVALUE)) {\n      remove(select('.' + INPUTWRAPPER, this.container));\n    }\n    detach(this.getHsvContainer());\n    this.createPalette();\n    this.firstPaletteFocus();\n    this.createInput();\n    this.refreshPopupPos();\n    //for image editor popup position refreshing\n    if (this.element.parentElement && this.element.parentElement.parentElement && this.element.parentElement.parentElement.classList.contains('e-ie-ddb-popup')) {\n      this.refreshImageEditorPopupPos();\n    }\n    ;\n    this.wireEvents();\n    this.trigger('onModeSwitch', {\n      element: this.container,\n      mode: 'Palette'\n    });\n  };\n  //for image editor popup position refreshing\n  ColorPicker.prototype.refreshImageEditorPopupPos = function () {\n    if (Browser.isDevice) {\n      var popupEle = this.getPopupEle();\n      popupEle.style.left = formatUnit(0 + pageXOffset);\n      popupEle.style.top = formatUnit(0 + pageYOffset);\n      var btnElem = document.querySelector(\"#\" + this.element.parentElement.parentElement.id.split('-popup')[0]);\n      if (btnElem) {\n        popupEle.parentElement.ej2_instances[0].refreshPosition(btnElem);\n      }\n    }\n  };\n  ColorPicker.prototype.refreshPopupPos = function () {\n    if (!this.inline) {\n      var popupEle = this.getPopupEle();\n      popupEle.style.left = formatUnit(0 + pageXOffset);\n      popupEle.style.top = formatUnit(0 + pageYOffset);\n      this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement);\n    }\n  };\n  ColorPicker.prototype.formatSwitchHandler = function () {\n    if (this.isRgb) {\n      this.updateValue(this.hsv, true, 3, [360, 100, 100]);\n      this.isRgb = false;\n    } else {\n      this.updateValue(this.rgb, true, 2);\n      this.isRgb = true;\n    }\n  };\n  ColorPicker.prototype.updateValue = function (value, format, idx, max) {\n    var clsName = ['e-rh-value', 'e-gs-value', 'e-bv-value'];\n    var inst;\n    for (var i = 0, len = clsName.length; i < len; i++) {\n      inst = getInstance(select('.' + clsName[i], this.container), NumericTextBox);\n      inst.value = Math.round(value[i]);\n      if (format) {\n        inst.placeholder = clsName[i].substr(idx, 1).toUpperCase();\n        inst.max = max ? max[i] : 255;\n      }\n      inst.dataBind();\n    }\n  };\n  ColorPicker.prototype.previewHandler = function (e) {\n    var target = e.target;\n    var pValue = this.rgbToHex(this.rgb);\n    this.rgb = this.convertRgbToNumberArray(target.style.backgroundColor);\n    if (!this.rgb[3]) {\n      this.rgb[3] = 1;\n    }\n    var cValue = this.rgbToHex(this.rgb);\n    var hsv = this.rgbToHsv.apply(this, this.rgb);\n    if (hsv[0] !== this.hsv[0]) {\n      this.hueSlider.setProperties({\n        'value': hsv[0]\n      }, true);\n      this.hueSlider.refresh();\n    }\n    this.setHsvContainerBg(hsv[0]);\n    if (this.enableOpacity && hsv[3] !== this.hsv[3]) {\n      this.opacitySlider.setProperties({\n        'value': hsv[3] * 100\n      }, true);\n      this.opacitySlider.refresh();\n      this.updateOpacitySliderBg();\n    }\n    this.hsv = hsv;\n    this.setHandlerPosition();\n    this.updateInput(cValue);\n    select('.' + PREVIEW + ' .' + CURRENT, this.container).style.backgroundColor = this.convertToRgbString(this.rgb);\n    this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb), false, e);\n  };\n  ColorPicker.prototype.paletteClickHandler = function (e) {\n    e.preventDefault();\n    var target = e.target;\n    if (target.classList.contains(TILE)) {\n      this.removeTileSelection();\n      this.addTileSelection(target);\n      if (target.classList.contains(NOCOLOR)) {\n        this.noColorTile();\n      } else {\n        var cValue = target.getAttribute('aria-label');\n        var pValue = this.rgbToHex(this.rgb);\n        this.rgb = this.hexToRgb(this.roundValue(cValue));\n        this.hsv = this.rgbToHsv.apply(this, this.rgb);\n        if (this.getWrapper().classList.contains(SHOWVALUE)) {\n          this.updateInput(cValue);\n        }\n        this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb), false, e);\n      }\n      if (!this.inline && !this.showButtons) {\n        this.closePopup(e);\n      }\n    } else {\n      if (closest(target, '.' + MODESWITCH)) {\n        this.switchToPicker();\n      } else {\n        if (target.classList.contains(APPLY) || target.classList.contains(CANCEL)) {\n          this.ctrlBtnClick(target, e);\n        } else {\n          if (this.getWrapper().classList.contains(SHOWVALUE) && closest(target, '.' + FORMATSWITCH)) {\n            this.formatSwitchHandler();\n          }\n        }\n      }\n    }\n  };\n  ColorPicker.prototype.noColorTile = function (isKey) {\n    if (isKey === void 0) {\n      isKey = false;\n    }\n    var pValue = this.rgbToHex(this.rgb);\n    this.rgb = [];\n    this.hsv = [];\n    this.triggerEvent('', pValue, '', isKey);\n  };\n  ColorPicker.prototype.switchToPicker = function () {\n    var wrapper = this.getWrapper();\n    this.trigger('beforeModeSwitch', {\n      element: this.container,\n      mode: 'Picker'\n    });\n    this.unWireEvents();\n    [].slice.call(selectAll('.' + PALETTES, this.container)).forEach(function (ele) {\n      detach(ele);\n    });\n    if (wrapper.classList.contains(SHOWVALUE)) {\n      detach(select('.' + INPUTWRAPPER, this.container));\n    }\n    this.container.style.width = '';\n    var grpEle = select('.e-custom-palette', this.container);\n    if (this.presetColors) {\n      remove(grpEle);\n    }\n    this.createPicker();\n    this.getDragHandler().focus();\n    this.createInput();\n    this.refreshPopupPos();\n    //for image editor popup position refreshing\n    if (this.element.parentElement && this.element.parentElement.parentElement && this.element.parentElement.parentElement.classList.contains('e-ie-ddb-popup')) {\n      this.refreshImageEditorPopupPos();\n    }\n    ;\n    this.wireEvents();\n    this.trigger('onModeSwitch', {\n      element: this.container,\n      mode: 'Picker'\n    });\n  };\n  ColorPicker.prototype.ctrlBtnClick = function (ele, e) {\n    if (ele.classList.contains(APPLY)) {\n      var cValue = this.rgbToHex(this.rgb);\n      this.triggerChangeEvent(cValue, e);\n    }\n    if (!this.inline) {\n      this.closePopup(e);\n      this.splitBtn.element.focus();\n    } else if (ele.classList.contains(CANCEL)) {\n      var beforeCloseArgs = {\n        element: this.container,\n        event: e,\n        cancel: false\n      };\n      this.trigger('beforeClose', beforeCloseArgs);\n    }\n  };\n  ColorPicker.prototype.paletteKeyDown = function (e) {\n    var target = e.target;\n    if (!target.classList.contains(PALETTES)) {\n      return;\n    }\n    var selectedEle;\n    var idx;\n    var tiles = [].slice.call(selectAll('.' + TILE, target));\n    var prevSelectedEle = tiles.filter(function (tile) {\n      return tile.classList.contains('e-selected');\n    }).pop();\n    switch (!e.altKey && e.keyCode) {\n      case 39:\n        e.preventDefault();\n        selectedEle = prevSelectedEle ? tiles[this.tilePosition(tiles, prevSelectedEle, this.enableRtl ? -1 : 1)] : tiles[this.enableRtl ? tiles.length - 1 : 0];\n        this.keySelectionChanges(selectedEle);\n        break;\n      case 37:\n        e.preventDefault();\n        selectedEle = prevSelectedEle ? tiles[this.tilePosition(tiles, prevSelectedEle, this.enableRtl ? 1 : -1)] : tiles[this.enableRtl ? 0 : tiles.length - 1];\n        this.keySelectionChanges(selectedEle);\n        break;\n      case 38:\n        e.preventDefault();\n        idx = prevSelectedEle ? this.tilePosition(tiles, prevSelectedEle, -this.columns) : 0;\n        selectedEle = tiles[idx] ? tiles[idx] : tiles[idx - this.columns];\n        this.keySelectionChanges(selectedEle);\n        break;\n      case 40:\n        e.preventDefault();\n        idx = prevSelectedEle ? this.tilePosition(tiles, prevSelectedEle, this.columns) : tiles.length - 1;\n        if (tiles[idx]) {\n          selectedEle = tiles[idx];\n        } else {\n          idx %= tiles.length;\n          idx += tiles[tiles.length - 1].parentElement.childElementCount;\n          selectedEle = tiles[idx];\n        }\n        this.keySelectionChanges(selectedEle);\n        break;\n      case 13:\n        e.preventDefault();\n        if (prevSelectedEle) {\n          var cValue = prevSelectedEle.getAttribute('aria-label');\n          this.enterKeyHandler(cValue ? cValue : '', e);\n        }\n    }\n  };\n  ColorPicker.prototype.keySelectionChanges = function (newEle) {\n    this.removeTileSelection();\n    this.addTileSelection(newEle);\n    if (newEle.classList.contains(NOCOLOR)) {\n      this.noColorTile(true);\n    } else {\n      var cValue = newEle.getAttribute('aria-label');\n      var pValue = this.rgbToHex(this.rgb);\n      this.rgb = this.hexToRgb(cValue);\n      this.hsv = this.rgbToHsv.apply(this, this.rgb);\n      if (this.getWrapper().classList.contains(SHOWVALUE)) {\n        this.updateInput(cValue);\n      }\n      this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb), true);\n    }\n  };\n  ColorPicker.prototype.tilePosition = function (items, element, cIdx) {\n    items = Array.prototype.slice.call(items);\n    var n = items.length;\n    var emptyCount = this.columns - items[n - 1].parentElement.childElementCount;\n    var idx = items.indexOf(element);\n    idx += cIdx;\n    if (idx < 0) {\n      idx += n + emptyCount;\n    } else {\n      idx %= n + emptyCount;\n    }\n    return idx;\n  };\n  ColorPicker.prototype.inputHandler = function (e) {\n    var target = e.target;\n    if (!target.value.length) {\n      return;\n    }\n    var hsv;\n    var pValue;\n    var label = select('.e-float-text', target.parentElement).textContent;\n    switch (label) {\n      case 'HEX':\n        {\n          var value = '';\n          if (target.value[0] === '#' && target.value.length !== 5 || target.value[0] !== '#' && target.value.length !== 4) {\n            value = this.roundValue(target.value);\n          }\n          if (value.length === 9) {\n            pValue = this.rgbToHex(this.rgb);\n            this.rgb = this.hexToRgb(value + value.substr(-2));\n            this.inputValueChange(this.rgbToHsv.apply(this, this.rgb), pValue, target.value, e);\n          } else {\n            return;\n          }\n          break;\n        }\n      case 'R':\n        if (this.rgb[0] !== Number(target.value)) {\n          pValue = this.rgbToHex(this.rgb);\n          this.rgb[0] = Number(target.value);\n          hsv = this.rgbToHsv.apply(this, this.rgb);\n          this.inputValueChange(hsv, pValue, null, e);\n        }\n        break;\n      case 'G':\n        if (this.rgb[1] !== Number(target.value)) {\n          pValue = this.rgbToHex(this.rgb);\n          this.rgb[1] = Number(target.value);\n          hsv = this.rgbToHsv.apply(this, this.rgb);\n          this.inputValueChange(hsv, pValue, null, e);\n        }\n        break;\n      case 'B':\n        if (this.rgb[2] !== Number(target.value)) {\n          pValue = this.rgbToHex(this.rgb);\n          this.rgb[2] = Number(target.value);\n          hsv = this.rgbToHsv.apply(this, this.rgb);\n          this.inputValueChange(hsv, pValue, null, e);\n        }\n        break;\n      case 'H':\n        this.hueSlider.value = Number(target.value);\n        break;\n      case 'S':\n        if (this.hsv[1] !== Number(target.value)) {\n          this.hsv[1] = Number(target.value);\n          this.updateHsv();\n          this.convertToOtherFormat(false, e);\n        }\n        break;\n      case 'V':\n        if (this.hsv[2] !== Number(target.value)) {\n          this.hsv[2] = Number(target.value);\n          this.updateHsv();\n          this.convertToOtherFormat(false, e);\n        }\n        break;\n      case 'A':\n        this.opacitySlider.value = Number(target.value);\n        break;\n    }\n  };\n  ColorPicker.prototype.inputValueChange = function (hsv, pValue, value, e) {\n    if (hsv[0] !== this.hsv[0]) {\n      this.hueSlider.setProperties({\n        'value': hsv[0]\n      }, true);\n      this.hueSlider.refresh();\n      this.setHsvContainerBg(hsv[0]);\n    }\n    this.hsv = hsv;\n    var cValue = this.rgbToHex(this.rgb);\n    this.setHandlerPosition();\n    this.updateInput(value ? value : cValue);\n    var rgba = this.convertToRgbString(this.rgb);\n    this.updatePreview(rgba);\n    this.triggerEvent(cValue, pValue, rgba, false, e);\n  };\n  ColorPicker.prototype.triggerEvent = function (cValue, pValue, rgba, isKey, e) {\n    if (isKey === void 0) {\n      isKey = false;\n    }\n    var hex = cValue.slice(0, 7);\n    if (isNullOrUndefined(e)) {\n      e = new MouseEvent('click', {\n        bubbles: true,\n        cancelable: false\n      });\n    }\n    if (!this.showButtons && !isKey) {\n      this.trigger('change', {\n        currentValue: {\n          hex: hex,\n          rgba: rgba\n        },\n        event: e,\n        previousValue: {\n          hex: this.value.slice(0, 7),\n          rgba: this.convertToRgbString(this.hexToRgb(this.value))\n        },\n        value: cValue\n      });\n      if (this.enableOpacity) {\n        this.setProperties({\n          'value': cValue\n        }, true);\n      } else {\n        this.setProperties({\n          'value': hex\n        }, true);\n      }\n      this.element.value = hex ? hex : '#000000';\n    } else {\n      this.trigger('select', {\n        currentValue: {\n          hex: hex,\n          rgba: rgba\n        },\n        event: e,\n        previousValue: {\n          hex: pValue.slice(0, 7),\n          rgba: this.convertToRgbString(this.hexToRgb(pValue))\n        }\n      });\n    }\n  };\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers.\n   * Also it maintains the initial input element from the DOM.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n  ColorPicker.prototype.destroy = function () {\n    var _this = this;\n    var wrapper = this.getWrapper();\n    _super.prototype.destroy.call(this);\n    ['tabindex', 'spellcheck'].forEach(function (attr) {\n      _this.element.removeAttribute(attr);\n    });\n    if (this.inline) {\n      this.unWireEvents();\n      this.destroyOtherComp();\n    } else {\n      if (this.isPopupOpen()) {\n        this.unWireEvents();\n        this.destroyOtherComp();\n      }\n      this.splitBtn.destroy();\n      this.splitBtn = null;\n    }\n    this.tileRipple();\n    this.tileRipple = null;\n    this.ctrlBtnRipple();\n    this.ctrlBtnRipple = null;\n    if (this.element.nextElementSibling) {\n      detach(this.element.nextElementSibling);\n    }\n    if (wrapper) {\n      wrapper.parentElement.insertBefore(this.element, wrapper);\n      detach(wrapper);\n    }\n    this.container = null;\n    if (this.formElement) {\n      EventHandler.remove(this.formElement, 'reset', this.formResetHandler);\n    }\n  };\n  ColorPicker.prototype.destroyOtherComp = function () {\n    if (this.isPicker()) {\n      var popup = closest(this.hueSlider.element, '.e-color-picker');\n      var numericElemColl = popup.querySelectorAll('.e-numerictextbox');\n      for (var i = 0; i < numericElemColl.length; i++) {\n        getInstance(numericElemColl[i], NumericTextBox).destroy();\n      }\n      this.hueSlider.destroy();\n      if (this.enableOpacity) {\n        this.opacitySlider.destroy();\n        this.opacitySlider = null;\n      }\n      this.hueSlider = null;\n      var tooltipInst = this.getTooltipInst();\n      tooltipInst.close();\n      tooltipInst.destroy();\n      this.tooltipEle = null;\n    }\n  };\n  ColorPicker.prototype.isPopupOpen = function () {\n    return this.getPopupEle().classList.contains('e-popup-open');\n  };\n  ColorPicker.prototype.unWireEvents = function () {\n    if (this.isPicker()) {\n      var dragHandler = this.getDragHandler();\n      EventHandler.remove(dragHandler, 'keydown', this.pickerKeyDown);\n      var ctrlBtn = select('.' + CTRLBTN, this.container);\n      if (ctrlBtn) {\n        EventHandler.remove(ctrlBtn, 'keydown', this.ctrlBtnKeyDown);\n      }\n      EventHandler.remove(this.getHsvContainer(), 'mousedown touchstart', this.handlerDown);\n      if (this.modeSwitcher || this.showButtons) {\n        EventHandler.remove(select('.' + CTRLSWITCH, this.container), 'click', this.btnClickHandler);\n      }\n      EventHandler.remove(select('.' + PREVIOUS, this.container), 'click', this.previewHandler);\n    } else {\n      EventHandler.remove(this.container, 'click', this.paletteClickHandler);\n      EventHandler.remove(this.container, 'keydown', this.paletteKeyDown);\n    }\n  };\n  ColorPicker.prototype.roundValue = function (value) {\n    if (!value) {\n      return '';\n    }\n    if (value[0] !== '#') {\n      value = '#' + value;\n    }\n    var len = value.length;\n    if (len === 4) {\n      value += 'f';\n      len = 5;\n    }\n    if (len === 5) {\n      var tempValue = '';\n      for (var i = 1, len_1 = value.length; i < len_1; i++) {\n        tempValue += value.charAt(i) + value.charAt(i);\n      }\n      value = '#' + tempValue;\n      len = 9;\n    }\n    if (len === 7) {\n      value += 'ff';\n    }\n    return value;\n  };\n  ColorPicker.prototype.hexToRgb = function (hex) {\n    if (!hex) {\n      return [];\n    }\n    hex = hex.trim();\n    if (hex.length !== 9) {\n      hex = this.roundValue(hex);\n    }\n    var opacity = Number((parseInt(hex.slice(-2), 16) / 255).toFixed(2));\n    hex = hex.slice(1, 7);\n    var bigInt = parseInt(hex, 16);\n    var h = [];\n    h.push(bigInt >> 16 & 255);\n    h.push(bigInt >> 8 & 255);\n    h.push(bigInt & 255);\n    h.push(opacity);\n    return h;\n  };\n  ColorPicker.prototype.rgbToHsv = function (r, g, b, opacity) {\n    if (this.rgb && !this.rgb.length) {\n      return [];\n    }\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    var max = Math.max(r, g, b);\n    var min = Math.min(r, g, b);\n    var h;\n    var v = max;\n    var d = max - min;\n    var s = max === 0 ? 0 : d / max;\n    if (max === min) {\n      h = 0;\n    } else {\n      switch (max) {\n        case r:\n          h = (g - b) / d + (g < b ? 6 : 0);\n          break;\n        case g:\n          h = (b - r) / d + 2;\n          break;\n        case b:\n          h = (r - g) / d + 4;\n          break;\n      }\n      h /= 6;\n    }\n    var hsv = [Math.round(h * 360), Math.round(s * 1000) / 10, Math.round(v * 1000) / 10];\n    if (!isNullOrUndefined(opacity)) {\n      hsv.push(opacity);\n    }\n    return hsv;\n  };\n  ColorPicker.prototype.hsvToRgb = function (h, s, v, opacity) {\n    var r;\n    var g;\n    var b;\n    s /= 100;\n    v /= 100;\n    if (s === 0) {\n      r = g = b = v;\n      return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255), opacity];\n    }\n    h /= 60;\n    var i = Math.floor(h);\n    var f = h - i;\n    var p = v * (1 - s);\n    var q = v * (1 - s * f);\n    var t = v * (1 - s * (1 - f));\n    switch (i) {\n      case 0:\n        r = v;\n        g = t;\n        b = p;\n        break;\n      case 1:\n        r = q;\n        g = v;\n        b = p;\n        break;\n      case 2:\n        r = p;\n        g = v;\n        b = t;\n        break;\n      case 3:\n        r = p;\n        g = q;\n        b = v;\n        break;\n      case 4:\n        r = t;\n        g = p;\n        b = v;\n        break;\n      default:\n        r = v;\n        g = p;\n        b = q;\n    }\n    var rgb = [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n    if (!isNullOrUndefined(opacity)) {\n      rgb.push(opacity);\n    }\n    return rgb;\n  };\n  ColorPicker.prototype.rgbToHex = function (rgb) {\n    return rgb.length ? '#' + this.hex(rgb[0]) + this.hex(rgb[1]) + this.hex(rgb[2]) + (!isNullOrUndefined(rgb[3]) ? rgb[3] !== 0 ? (Math.round(rgb[3] * 255) + 0x10000).toString(16).substr(-2) : '00' : '') : '';\n  };\n  ColorPicker.prototype.hex = function (x) {\n    return ('0' + x.toString(16)).slice(-2);\n  };\n  ColorPicker.prototype.changeModeSwitcherProp = function (prop) {\n    var ctrlSwitchWrapper = select('.' + CTRLSWITCH, this.container);\n    if (prop) {\n      if (ctrlSwitchWrapper) {\n        this.appendModeSwitchBtn();\n      } else {\n        this.createCtrlBtn();\n        if (this.isPicker() && !this.disabled) {\n          this.addCtrlSwitchEvent();\n        }\n      }\n    } else {\n      if (ctrlSwitchWrapper) {\n        if (this.showButtons) {\n          detach(select('.' + MODESWITCH, ctrlSwitchWrapper));\n        } else {\n          remove(ctrlSwitchWrapper);\n        }\n      }\n    }\n  };\n  ColorPicker.prototype.changeShowBtnProps = function (prop) {\n    var ctrlBtnWrapper = select('.' + CTRLSWITCH, this.container);\n    if (prop) {\n      if (ctrlBtnWrapper) {\n        remove(ctrlBtnWrapper);\n      }\n      this.createCtrlBtn();\n      if (this.isPicker() && !this.disabled) {\n        this.addCtrlSwitchEvent();\n      }\n    } else {\n      if (this.modeSwitcher) {\n        detach(select('.' + CTRLBTN, ctrlBtnWrapper));\n      } else {\n        remove(ctrlBtnWrapper);\n      }\n    }\n  };\n  ColorPicker.prototype.changeValueProp = function (newProp) {\n    if (this.isPicker()) {\n      this.rgb = this.hexToRgb(newProp);\n      this.hsv = this.rgbToHsv.apply(this, this.rgb);\n      this.setHandlerPosition();\n      detach(closest(this.hueSlider.element, '.e-slider-preview'));\n      this.createSlider();\n      this.setHsvContainerBg();\n      this.updateInput(newProp);\n      if (this.rgb.length === 4) {\n        this.updateOpacityInput(this.rgb[3] * 100);\n      }\n    } else {\n      this.removeTileSelection();\n      var ele = this.container.querySelector('span[aria-label=\"' + this.roundValue(newProp) + '\"]');\n      if (ele) {\n        this.addTileSelection(ele);\n      }\n    }\n  };\n  ColorPicker.prototype.setInputEleProps = function () {\n    remove(select('.' + INPUTWRAPPER, this.container));\n    this.createInput();\n  };\n  ColorPicker.prototype.changeDisabledProp = function (newProp) {\n    if (this.isPicker()) {\n      this.hueSlider.enabled = !newProp;\n      this.opacitySlider.enabled = !newProp;\n      this.setInputEleProps();\n    }\n    if (newProp) {\n      this.toggleDisabled(true);\n      this.unWireEvents();\n    } else {\n      this.toggleDisabled(false);\n      this.wireEvents();\n    }\n  };\n  ColorPicker.prototype.changeCssClassProps = function (newProp, oldProp) {\n    var wrapper = this.getWrapper();\n    var popupWrapper = this.getPopupEle();\n    if (oldProp) {\n      removeClass([wrapper, popupWrapper], oldProp.split(' '));\n    }\n    if (newProp) {\n      addClass([wrapper, popupWrapper], newProp.replace(/\\s+/g, ' ').trim().split(' '));\n    }\n  };\n  ColorPicker.prototype.changeRtlProps = function (newProp) {\n    if (newProp) {\n      addClass([this.getWrapper()], 'e-rtl');\n    } else {\n      removeClass([this.getWrapper()], 'e-rtl');\n    }\n  };\n  ColorPicker.prototype.changePaletteProps = function () {\n    detach(this.container.children[0]);\n    this.container.style.width = '';\n    this.createPalette();\n  };\n  ColorPicker.prototype.changeOpacityProps = function (newProp) {\n    var wrapper = this.getWrapper();\n    if (newProp) {\n      removeClass([this.container.parentElement], HIDEOPACITY);\n      this.createOpacitySlider(select('.e-colorpicker-slider', this.container).appendChild(this.createElement('div', {\n        className: 'e-opacity-slider'\n      })));\n      if (!wrapper.classList.contains(HIDEVALUE) && !wrapper.classList.contains(HIDERGBA)) {\n        this.appendOpacityValue(select('.e-input-container', this.container));\n      }\n    } else {\n      addClass([this.container.parentElement], HIDEOPACITY);\n      this.opacitySlider.destroy();\n      remove(this.opacitySlider.element);\n      this.opacitySlider = null;\n      if (!wrapper.classList.contains(HIDEVALUE) && !wrapper.classList.contains(HIDERGBA)) {\n        remove(select('.' + OPACITY, this.container).parentElement);\n      }\n    }\n  };\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param  {ColorPickerModel} newProp - Specifies new properties\n   * @param  {ColorPickerModel} oldProp - Specifies old properties\n   * @returns {void}\n   * @private\n   */\n  ColorPicker.prototype.onPropertyChanged = function (newProp, oldProp) {\n    var _this = this;\n    if (!isNullOrUndefined(newProp.value)) {\n      var value = this.roundValue(newProp.value);\n      if (value.length === 9) {\n        this.element.value = this.roundValue(value).slice(0, 7);\n        var preview = this.splitBtn && select('.' + SPLITPREVIEW, this.splitBtn.element);\n        if (preview) {\n          preview.style.backgroundColor = this.convertToRgbString(this.hexToRgb(newProp.value));\n        }\n      } else if (this.noColor && this.mode === 'Palette' && this.value === '') {\n        var preview = this.splitBtn && select('.' + SPLITPREVIEW, this.splitBtn.element);\n        preview.style.backgroundColor = '';\n      } else {\n        this.value = oldProp.value;\n      }\n    }\n    if (!this.inline && isNullOrUndefined(newProp.inline)) {\n      var otherCompModel = ['disabled', 'enableRtl'];\n      this.splitBtn.setProperties(getModel(newProp, otherCompModel));\n      if (!this.isPopupOpen()) {\n        this.changeCssClassProps(newProp.cssClass, oldProp.cssClass);\n        this.changeRtlProps(newProp.enableRtl);\n        return;\n      }\n    }\n    var _loop_1 = function (prop) {\n      switch (prop) {\n        case 'inline':\n          if (newProp.inline) {\n            this_1.getWrapper().appendChild(this_1.container);\n            this_1.splitBtn.destroy();\n            detach(this_1.element.nextElementSibling);\n            if (!this_1.container.children.length) {\n              this_1.createWidget();\n            }\n          } else {\n            this_1.destroyOtherComp();\n            this_1.unWireEvents();\n            this_1.container.innerHTML = '';\n            this_1.createSplitBtn();\n          }\n          break;\n        case 'cssClass':\n          {\n            this_1.changeCssClassProps(newProp.cssClass, oldProp.cssClass);\n            var props = newProp.cssClass.split(' ').concat(oldProp.cssClass.split(' '));\n            props = props.reduce(function (a, b) {\n              if (a.indexOf(b) < 0) {\n                a.push(b);\n              }\n              return a;\n            }, []);\n            var count_1 = 0;\n            props.forEach(function (cls) {\n              if (count_1 === 0 && (cls === HIDEVALUE || cls === HIDEVALUESWITCH || cls === SHOWVALUE || cls === HIDEHEX || cls === HIDERGBA)) {\n                var inputWrap = select('.' + INPUTWRAPPER, _this.container);\n                if (inputWrap) {\n                  remove(select('.' + INPUTWRAPPER, _this.container));\n                }\n                _this.createInput();\n                count_1++;\n              }\n            });\n            break;\n          }\n        case 'enableRtl':\n          if (this_1.isPicker()) {\n            this_1.hueSlider.enableRtl = newProp.enableRtl;\n            if (this_1.enableOpacity) {\n              this_1.opacitySlider.enableRtl = newProp.enableRtl;\n            }\n            this_1.setInputEleProps();\n          }\n          this_1.changeRtlProps(newProp.enableRtl);\n          break;\n        case 'disabled':\n          this_1.changeDisabledProp(newProp.disabled);\n          break;\n        case 'value':\n          if (this_1.value !== oldProp.value) {\n            this_1.changeValueProp(newProp.value);\n          }\n          break;\n        case 'showButtons':\n          this_1.changeShowBtnProps(newProp.showButtons);\n          break;\n        case 'mode':\n          if (newProp.mode === 'Picker') {\n            this_1.switchToPicker();\n          } else {\n            this_1.switchToPalette();\n          }\n          break;\n        case 'modeSwitcher':\n          this_1.changeModeSwitcherProp(newProp.modeSwitcher);\n          break;\n        case 'columns':\n        case 'presetColors':\n          if (!this_1.isPicker()) {\n            this_1.changePaletteProps();\n          }\n          break;\n        case 'noColor':\n          if (newProp.noColor) {\n            if (this_1.mode === 'Palette' && !this_1.modeSwitcher) {\n              this_1.setNoColor();\n            }\n          } else {\n            this_1.changePaletteProps();\n          }\n          break;\n        case 'enableOpacity':\n          this_1.changeOpacityProps(newProp.enableOpacity);\n          break;\n      }\n    };\n    var this_1 = this;\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      _loop_1(prop);\n    }\n  };\n  /**\n   * Sets the focus to Colorpicker\n   * its native method\n   *\n   * @public\n   * @returns {void}\n   */\n  ColorPicker.prototype.focusIn = function () {\n    this.element.parentElement.focus();\n  };\n  __decorate([Property('#008000ff')], ColorPicker.prototype, \"value\", void 0);\n  __decorate([Property('')], ColorPicker.prototype, \"cssClass\", void 0);\n  __decorate([Property(false)], ColorPicker.prototype, \"disabled\", void 0);\n  __decorate([Property('Picker')], ColorPicker.prototype, \"mode\", void 0);\n  __decorate([Property(true)], ColorPicker.prototype, \"modeSwitcher\", void 0);\n  __decorate([Property(null)], ColorPicker.prototype, \"presetColors\", void 0);\n  __decorate([Property(true)], ColorPicker.prototype, \"showButtons\", void 0);\n  __decorate([Property(10)], ColorPicker.prototype, \"columns\", void 0);\n  __decorate([Property(false)], ColorPicker.prototype, \"inline\", void 0);\n  __decorate([Property(false)], ColorPicker.prototype, \"noColor\", void 0);\n  __decorate([Property(false)], ColorPicker.prototype, \"enablePersistence\", void 0);\n  __decorate([Property(true)], ColorPicker.prototype, \"enableOpacity\", void 0);\n  __decorate([Property(false)], ColorPicker.prototype, \"createPopupOnClick\", void 0);\n  __decorate([Event()], ColorPicker.prototype, \"select\", void 0);\n  __decorate([Event()], ColorPicker.prototype, \"change\", void 0);\n  __decorate([Event()], ColorPicker.prototype, \"beforeTileRender\", void 0);\n  __decorate([Event()], ColorPicker.prototype, \"beforeOpen\", void 0);\n  __decorate([Event()], ColorPicker.prototype, \"open\", void 0);\n  __decorate([Event()], ColorPicker.prototype, \"beforeClose\", void 0);\n  __decorate([Event()], ColorPicker.prototype, \"beforeModeSwitch\", void 0);\n  __decorate([Event()], ColorPicker.prototype, \"onModeSwitch\", void 0);\n  __decorate([Event()], ColorPicker.prototype, \"created\", void 0);\n  ColorPicker = __decorate([NotifyPropertyChanges], ColorPicker);\n  return ColorPicker;\n}(Component);\nexport { ColorPicker };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Component","Event","NotifyPropertyChanges","Property","Browser","closest","detach","EventHandler","getInstance","select","selectAll","formatUnit","addClass","attributes","classList","isNullOrUndefined","L10n","remove","removeClass","rippleEffect","SplitButton","getModel","Deferred","Tooltip","getZindexPartial","Popup","isCollide","Input","NumericTextBox","Slider","APPLY","CANCEL","CURRENT","CONTAINER","CTRLBTN","CTRLSWITCH","DISABLED","FORMATSWITCH","HANDLER","HEX","HIDEHEX","HIDEOPACITY","HIDERGBA","HIDEVALUE","HIDEVALUESWITCH","HSVAREA","HSVCONTAINER","INPUTWRAPPER","MODESWITCH","NOCOLOR","OPACITY","PALETTES","PALETTECONTENT","PICKERCONTENT","PREVIEW","PREVIOUS","RTL","SHOWVALUE","SELECT","SPLITPREVIEW","TILE","presets","default","ColorPicker","_super","options","element","call","preRender","ele","formElement","add","formResetHandler","localeText","Apply","Cancel","ModeSwitcher","l10n","locale","getAttribute","setAttribute","id","render","initWrapper","inline","createWidget","createSplitBtn","enableOpacity","container","parentElement","renderComplete","wrapper","createElement","className","getModuleName","parentNode","insertBefore","appendChild","getWrapper","value","roundValue","toLowerCase","noColor","mode","slicedValue","slice","initialInputValue","setProperties","enableRtl","cssClass","replace","trim","split","tileRipple","selector","ctrlBtnRipple","createPalette","firstPaletteFocus","createPicker","getDragHandler","focus","isRgb","createInput","createCtrlBtn","disabled","wireEvents","toggleDisabled","isDevice","refreshPopupPos","_this","splitButton","splitBtn","iconCss","createPopupOnClick","open","onOpen","bind","click","ev","MouseEvent","bubbles","cancelable","trigger","currentValue","hex","rgba","convertToRgbString","hexToRgb","previousValue","event","appendTo","preview","style","backgroundColor","popupEle","getPopupEle","popupInst","getPopupInst","relateTo","document","body","position","X","Y","targetType","collision","offsetY","zIndex","toString","bindCallBackEvent","beforeOpen","args","callBackPromise","observeOpenArgs","cancel","top","pageYOffset","left","pageXOffset","display","modal","Number","resolve","beforeClose","beforeCloseArgs","observedCloseArgs","onPopupClose","unWireEvents","destroyOtherComp","width","innerHTML","outerHTML","presetColors","paletteGroup","appendElement","keys","appendPalette","len","modeSwitcher","setNoColor","parseInt","getComputedStyle","borderBottomWidth","children","offsetWidth","rgb","hsv","rgbToHsv","apply","colors","refEle","palette","attrs","row","tile","roundedColor","columns","presetName","addTileSelection","noColorEle","querySelector","forEach","attr","removeAttribute","insertPos","hsvContainer","dragHandler","setHsvContainerBg","setHandlerPosition","createSlider","createDragTooltip","h","getHsvContainer","hsvToRgb","hsvArea","Math","abs","offsetHeight","sliderPreviewWrapper","createPreview","sliderWrapper","slider","hueSlider","min","max","enabled","change","hueChange","createOpacitySlider","opacitySlider","opacityChange","opacityBgTrack","updateOpacitySliderBg","direction","opacityEle","background","convertToOtherFormat","pValue","rgbToHex","cValue","updateOpacityInput","updatePreview","triggerEvent","contains","opacityTextBoxInst","dataBind","parentEle","previewContainer","colorValue","isPicker","createNumericInput","label","numericInput","placeholder","format","showSpinButton","floatLabelType","readonly","inputHandler","inputWrap","appendValueSwitchBtn","hexInput","properties","setValue","addEventListener","clsName","appendOpacityValue","targetEle","valueSwitchBtn","formatSwitchHandler","showButtons","setLocale","btnWrapper","controlBtnWrapper","getConstant","appendModeSwitchBtn","title","tooltip","opensOn","showTipPointer","htmlAttributes","tooltipEle","animation","effect","close","getTooltipInst","setTooltipOffset","enable","join","convertToHsvString","updateHsv","isKey","e","updateInput","substr","updateValue","removeTileSelection","selectedEle","convertRgbToNumberArray","indexOf","map","n","parseFloat","getValue","type","toggle","closePopup","getPersistData","addOnPersist","pickerKeyDown","ctrlBtn","ctrlBtnKeyDown","handlerDown","addCtrlSwitchEvent","previewHandler","paletteClickHandler","paletteKeyDown","ctrlSwitchBtn","btnClickHandler","keyCode","applyBtn","triggerChangeEvent","handlerDragPosition","preventDefault","enterKeyHandler","observedcloseArgs","prob","ctrlKey","clientX","pageX","clientY","pageY","changedTouches","setHsv","transition","handlerMove","handlerEnd","x","y","refresh","transform","cursor","getBoundingClientRect","right","round","offsetTop","offsetLeft","stopPropagation","switchToPalette","ctrlBtnClick","refreshImageEditorPopupPos","btnElem","ej2_instances","refreshPosition","idx","inst","toUpperCase","noColorTile","switchToPicker","grpEle","tiles","prevSelectedEle","filter","pop","altKey","tilePosition","keySelectionChanges","childElementCount","newEle","items","cIdx","emptyCount","textContent","inputValueChange","destroy","isPopupOpen","nextElementSibling","popup","numericElemColl","querySelectorAll","tooltipInst","tempValue","len_1","charAt","opacity","toFixed","bigInt","push","g","v","s","floor","f","q","t","changeModeSwitcherProp","prop","ctrlSwitchWrapper","changeShowBtnProps","ctrlBtnWrapper","changeValueProp","newProp","setInputEleProps","changeDisabledProp","changeCssClassProps","oldProp","popupWrapper","changeRtlProps","changePaletteProps","changeOpacityProps","onPropertyChanged","otherCompModel","_loop_1","this_1","props","concat","reduce","a","count_1","cls","_i","_a","focusIn"],"sources":["/Users/anjalichaturvedi/GitHub/brew-bridge-dashboard/website/node_modules/@syncfusion/ej2-inputs/src/color-picker/color-picker.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable prefer-spread */\nimport { Component, Event, NotifyPropertyChanges, Property } from '@syncfusion/ej2-base';\nimport { Browser, closest, detach, EventHandler, getInstance, select, selectAll, formatUnit } from '@syncfusion/ej2-base';\nimport { addClass, attributes, classList, isNullOrUndefined, L10n } from '@syncfusion/ej2-base';\nimport { remove, removeClass, rippleEffect } from '@syncfusion/ej2-base';\nimport { SplitButton, getModel } from '@syncfusion/ej2-splitbuttons';\nimport { Deferred } from '@syncfusion/ej2-splitbuttons';\nimport { Tooltip, getZindexPartial, Popup, isCollide } from '@syncfusion/ej2-popups';\nimport { Input } from './../input/index';\nimport { NumericTextBox } from './../numerictextbox/index';\nimport { Slider } from './../slider/slider';\nvar APPLY = 'e-apply';\nvar CANCEL = 'e-cancel';\nvar CURRENT = 'e-current';\nvar CONTAINER = 'e-container';\nvar CTRLBTN = 'e-ctrl-btn';\nvar CTRLSWITCH = 'e-switch-ctrl-btn';\nvar DISABLED = 'e-disabled';\nvar FORMATSWITCH = 'e-value-switch-btn';\nvar HANDLER = 'e-handler';\nvar HEX = 'e-hex';\nvar HIDEHEX = 'e-hide-hex-value';\nvar HIDEOPACITY = 'e-hide-opacity';\nvar HIDERGBA = 'e-hide-switchable-value';\nvar HIDEVALUE = 'e-hide-value';\nvar HIDEVALUESWITCH = 'e-hide-valueswitcher';\nvar HSVAREA = 'e-hsv-color';\nvar HSVCONTAINER = 'e-hsv-container';\nvar INPUTWRAPPER = 'e-selected-value';\nvar MODESWITCH = 'e-mode-switch-btn';\nvar NOCOLOR = 'e-nocolor-item';\nvar OPACITY = 'e-opacity-value';\nvar PALETTES = 'e-palette';\nvar PALETTECONTENT = 'e-color-palette';\nvar PICKERCONTENT = 'e-color-picker';\nvar PREVIEW = 'e-preview-container';\nvar PREVIOUS = 'e-previous';\nvar RTL = 'e-rtl';\nvar SHOWVALUE = 'e-show-value';\nvar SELECT = 'e-selected';\nvar SPLITPREVIEW = 'e-split-preview';\nvar TILE = 'e-tile';\nvar presets = {\n    default: ['#000000', '#f44336', '#e91e63', '#9c27b0', '#673ab7', '#2196f3', '#03a9f4', '#00bcd4', '#009688', '#ffeb3b',\n        '#ffffff', '#ffebee', '#fce4ec', '#f3e5f5', '#ede7f6', '#e3f2fd', '#e1f5fe', '#e0f7fa', '#e0f2f1', '#fffde7',\n        '#f2f2f2', '#ffcdd2', '#f8bbd0', '#e1bee7', '#d1c4e9', '#bbdefb', '#b3e5fc', '#b2ebf2', '#b2dfdb', '#fff9c4',\n        '#e6e6e6', '#ef9a9a', '#f48fb1', '#ce93d8', '#b39ddb', '#90caf9', '#81d4fa', '#80deea', '#80cbc4', '#fff59d',\n        '#cccccc', '#e57373', '#f06292', '#ba68c8', '#9575cd', '#64b5f6', '#4fc3f7', '#4dd0e1', '#4db6ac', '#fff176',\n        '#b3b3b3', '#ef5350', '#ec407a', '#ab47bc', '#7e57c2', '#42a5f5', '#29b6f6', '#26c6da', '#26a69a', '#ffee58',\n        '#999999', '#e53935', '#d81b60', '#8e24aa', '#5e35b1', '#1e88e5', '#039be5', '#00acc1', '#00897b', '#fdd835',\n        '#808080', '#d32f2f', '#c2185b', '#7b1fa2', '#512da8', '#1976d2', '#0288d1', '#0097a7', '#00796b', '#fbc02d',\n        '#666666', '#c62828', '#ad1457', '#6a1b9a', '#4527a0', '#1565c0', '#0277bd', '#00838f', '#00695c', '#f9a825',\n        '#4d4d4d', '#b71c1c', '#880e4f', '#4a148c', '#311b92', '#0d47a1', '#01579b', '#006064', '#004d40', '#f57f17']\n};\n/**\n * ColorPicker component is a user interface to select and adjust color values. It provides supports for various\n * color specification like Red Green Blue, Hue Saturation Value and Hex codes.\n * ```html\n * <input type=\"color\" id=\"color-picker\">\n * ```\n * ```typescript\n * <script>\n *   let colorPickerObj: ColorPicker = new ColorPicker(null , \"#color-picker\");\n * </script>\n * ```\n */\nvar ColorPicker = /** @class */ (function (_super) {\n    __extends(ColorPicker, _super);\n    function ColorPicker(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    ColorPicker.prototype.preRender = function () {\n        var ele = this.element;\n        this.formElement = closest(this.element, 'form');\n        if (this.formElement) {\n            EventHandler.add(this.formElement, 'reset', this.formResetHandler, this);\n        }\n        var localeText = { Apply: 'Apply', Cancel: 'Cancel', ModeSwitcher: 'Switch Mode' };\n        this.l10n = new L10n('colorpicker', localeText, this.locale);\n        if (ele.getAttribute('ejs-for') && !ele.getAttribute('name')) {\n            ele.setAttribute('name', ele.id);\n        }\n    };\n    /**\n     * To Initialize the component rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    ColorPicker.prototype.render = function () {\n        this.initWrapper();\n        if (this.inline) {\n            this.createWidget();\n        }\n        else {\n            this.createSplitBtn();\n        }\n        if (!this.enableOpacity) {\n            addClass([this.container.parentElement], HIDEOPACITY);\n        }\n        this.renderComplete();\n    };\n    ColorPicker.prototype.initWrapper = function () {\n        var wrapper = this.createElement('div', { className: 'e-' + this.getModuleName() + '-wrapper' });\n        this.element.parentNode.insertBefore(wrapper, this.element);\n        wrapper.appendChild(this.element);\n        attributes(this.element, { 'tabindex': '-1', 'spellcheck': 'false', 'aria-label': 'colorpicker' });\n        this.container = this.createElement('div', { className: CONTAINER });\n        this.getWrapper().appendChild(this.container);\n        var value = this.value ? this.roundValue(this.value).toLowerCase() : '#008000ff';\n        if (this.noColor && this.mode === 'Palette' && this.value === '') {\n            value = '';\n        }\n        var slicedValue = value.slice(0, 7);\n        if (isNullOrUndefined(this.initialInputValue)) {\n            this.initialInputValue = slicedValue;\n        }\n        this.element.value = slicedValue;\n        if (this.enableOpacity) {\n            this.setProperties({ 'value': value }, true);\n        }\n        else {\n            this.setProperties({ 'value': slicedValue }, true);\n        }\n        if (this.enableRtl) {\n            wrapper.classList.add(RTL);\n        }\n        if (this.cssClass) {\n            addClass([wrapper], this.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n        }\n        this.tileRipple = rippleEffect(this.container, { selector: '.' + TILE });\n        this.ctrlBtnRipple = rippleEffect(this.container, { selector: '.e-btn' });\n    };\n    ColorPicker.prototype.getWrapper = function () {\n        return this.element.parentElement;\n    };\n    ColorPicker.prototype.createWidget = function () {\n        if (this.mode === 'Palette') {\n            this.createPalette();\n            if (!this.inline) {\n                this.firstPaletteFocus();\n            }\n        }\n        else {\n            this.createPicker();\n            if (!this.inline) {\n                this.getDragHandler().focus();\n            }\n        }\n        this.isRgb = true;\n        this.createInput();\n        this.createCtrlBtn();\n        if (!this.disabled) {\n            this.wireEvents();\n        }\n        if (this.inline && this.disabled) {\n            this.toggleDisabled(true);\n        }\n        if (Browser.isDevice) {\n            this.refreshPopupPos();\n        }\n    };\n    ColorPicker.prototype.createSplitBtn = function () {\n        var _this = this;\n        var splitButton = this.createElement('button', { className: 'e-split-colorpicker' });\n        this.getWrapper().appendChild(splitButton);\n        this.splitBtn = new SplitButton({\n            iconCss: 'e-selected-color',\n            target: this.container,\n            disabled: this.disabled,\n            enableRtl: this.enableRtl,\n            createPopupOnClick: this.createPopupOnClick,\n            open: this.onOpen.bind(this),\n            click: function () {\n                var ev = new MouseEvent('click', { bubbles: true, cancelable: false });\n                _this.trigger('change', {\n                    currentValue: { hex: _this.value.slice(0, 7), rgba: _this.convertToRgbString(_this.hexToRgb(_this.value)) },\n                    previousValue: { hex: null, rgba: null }, value: _this.value, event: ev\n                });\n            }\n        });\n        this.splitBtn.createElement = this.createElement;\n        this.splitBtn.appendTo(splitButton);\n        var preview = this.createElement('span', { className: SPLITPREVIEW });\n        select('.e-selected-color', splitButton).appendChild(preview);\n        preview.style.backgroundColor = this.convertToRgbString(this.hexToRgb(this.value));\n        var popupEle = this.getPopupEle();\n        addClass([popupEle], 'e-colorpicker-popup');\n        if (this.cssClass) {\n            addClass([popupEle], this.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n        }\n        if (Browser.isDevice && !this.createPopupOnClick) {\n            var popupInst = this.getPopupInst();\n            popupInst.relateTo = document.body;\n            popupInst.position = { X: 'center', Y: 'center' };\n            popupInst.targetType = 'container';\n            popupInst.collision = { X: 'fit', Y: 'fit' };\n            popupInst.offsetY = 4;\n            popupEle.style.zIndex = getZindexPartial(this.splitBtn.element).toString();\n        }\n        this.bindCallBackEvent();\n    };\n    ColorPicker.prototype.onOpen = function () {\n        this.trigger('open', { element: this.container });\n        if (!Browser.isDevice) {\n            var popupInst = this.getPopupInst();\n            var collision = isCollide(popupInst.element);\n            if (collision.length > 0) {\n                popupInst.collision = { X: 'flip', Y: 'fit' };\n                popupInst.position = { X: 'right', Y: 'bottom' };\n                popupInst.targetType = 'container';\n            }\n        }\n    };\n    ColorPicker.prototype.getPopupInst = function () {\n        return getInstance(this.getPopupEle(), Popup);\n    };\n    ColorPicker.prototype.bindCallBackEvent = function () {\n        var _this = this;\n        this.splitBtn.beforeOpen = function (args) {\n            var callBackPromise = new Deferred();\n            _this.trigger('beforeOpen', args, function (observeOpenArgs) {\n                if (!observeOpenArgs.cancel) {\n                    var popupEle = _this.getPopupEle();\n                    popupEle.style.top = formatUnit(0 + pageYOffset);\n                    popupEle.style.left = formatUnit(0 + pageXOffset);\n                    popupEle.style.display = 'block';\n                    _this.createWidget();\n                    popupEle.style.display = '';\n                    if (Browser.isDevice) {\n                        if (_this.createPopupOnClick) {\n                            var popupInst = _this.getPopupInst();\n                            popupInst.relateTo = document.body;\n                            popupInst.position = { X: 'center', Y: 'center' };\n                            popupInst.targetType = 'container';\n                            popupInst.collision = { X: 'fit', Y: 'fit' };\n                            popupInst.offsetY = 4;\n                            popupEle.style.zIndex = getZindexPartial(_this.splitBtn.element).toString();\n                        }\n                        _this.modal = _this.createElement('div');\n                        _this.modal.className = 'e-' + _this.getModuleName() + ' e-modal';\n                        _this.modal.style.display = 'none';\n                        document.body.insertBefore(_this.modal, popupEle);\n                        document.body.className += ' e-colorpicker-overflow';\n                        _this.modal.style.display = 'block';\n                        _this.modal.style.zIndex = (Number(popupEle.style.zIndex) - 1).toString();\n                    }\n                }\n                args.cancel = observeOpenArgs.cancel;\n                callBackPromise.resolve(observeOpenArgs);\n            });\n            return callBackPromise;\n        };\n        this.splitBtn.beforeClose = function (args) {\n            var callBackPromise = new Deferred();\n            if (!isNullOrUndefined(args.event)) {\n                var beforeCloseArgs = { element: _this.container, event: args.event, cancel: false };\n                _this.trigger('beforeClose', beforeCloseArgs, function (observedCloseArgs) {\n                    if (Browser.isDevice && args.event.target === _this.modal) {\n                        observedCloseArgs.cancel = true;\n                    }\n                    if (!observedCloseArgs.cancel) {\n                        _this.onPopupClose();\n                    }\n                    args.cancel = observedCloseArgs.cancel;\n                    callBackPromise.resolve(observedCloseArgs);\n                });\n            }\n            else {\n                callBackPromise.resolve(args);\n            }\n            return callBackPromise;\n        };\n    };\n    ColorPicker.prototype.onPopupClose = function () {\n        this.unWireEvents();\n        this.destroyOtherComp();\n        this.container.style.width = '';\n        select('.' + SPLITPREVIEW, this.splitBtn.element).style.backgroundColor\n            = this.convertToRgbString(this.hexToRgb(this.value));\n        this.container.innerHTML = '';\n        removeClass([this.container], [PICKERCONTENT, PALETTECONTENT]);\n        if (Browser.isDevice && this.modal) {\n            removeClass([document.body], 'e-colorpicker-overflow');\n            this.modal.style.display = 'none';\n            this.modal.outerHTML = '';\n            this.modal = null;\n        }\n    };\n    ColorPicker.prototype.createPalette = function () {\n        classList(this.container, [PALETTECONTENT], [PICKERCONTENT]);\n        if (this.presetColors) {\n            var paletteGroup = this.createElement('div', { className: 'e-custom-palette' });\n            this.appendElement(paletteGroup);\n            var keys = Object.keys(this.presetColors);\n            if (keys.length === 1) {\n                this.appendPalette(this.presetColors[keys[0]], keys[0], paletteGroup);\n            }\n            else {\n                for (var i = 0, len = keys.length; i < len; i++) {\n                    this.appendPalette(this.presetColors[keys[i]], keys[i], paletteGroup);\n                }\n            }\n            if (selectAll('.e-row', paletteGroup).length > 10) {\n                addClass([paletteGroup], 'e-palette-group');\n            }\n        }\n        else {\n            this.appendPalette(presets.default, 'default');\n        }\n        if (this.mode === 'Palette' && !this.modeSwitcher && this.noColor) {\n            this.setNoColor();\n        }\n        var width = parseInt(getComputedStyle(this.container).borderBottomWidth, 10);\n        this.container.style.width = formatUnit(this.container.children[0].offsetWidth + width + width);\n        this.rgb = this.hexToRgb(this.roundValue(this.value));\n        this.hsv = this.rgbToHsv.apply(this, this.rgb);\n    };\n    ColorPicker.prototype.firstPaletteFocus = function () {\n        if (!select('.' + SELECT, this.container.children[0])) {\n            selectAll('.' + PALETTES, this.container)[0].focus();\n        }\n    };\n    ColorPicker.prototype.appendPalette = function (colors, key, refEle) {\n        var palette = this.createElement('div', { className: PALETTES, attrs: { 'tabindex': '0', 'role': 'grid' } });\n        if (refEle) {\n            refEle.appendChild(palette);\n        }\n        else {\n            this.appendElement(palette);\n        }\n        var row;\n        var tile;\n        var roundedColor;\n        for (var i = 0, len = colors.length; i < len; i++) {\n            if (i === 0 || i % this.columns === 0) {\n                row = this.createElement('div', {\n                    className: 'e-row', attrs: { 'role': 'row' }\n                });\n                palette.appendChild(row);\n            }\n            roundedColor = this.roundValue(colors[i]).toLowerCase();\n            tile = this.createElement('span', {\n                className: TILE, attrs: { 'role': 'gridcell', 'aria-label': roundedColor, 'aria-selected': 'false', 'tabindex': '0' }\n            });\n            this.trigger('beforeTileRender', { element: tile, presetName: key, value: colors[i] });\n            row.appendChild(tile);\n            if (this.value === roundedColor) {\n                this.addTileSelection(tile);\n                palette.focus();\n            }\n            tile.style.backgroundColor = this.convertToRgbString(this.hexToRgb(roundedColor));\n        }\n    };\n    ColorPicker.prototype.setNoColor = function () {\n        var noColorEle = this.container.querySelector('.e-row').children[0];\n        noColorEle.classList.add(NOCOLOR);\n        if (!this.value) {\n            noColorEle.classList.add(SELECT);\n            closest(noColorEle, '.' + PALETTES).focus();\n        }\n        ['aria-selected', 'aria-label'].forEach(function (attr) { noColorEle.removeAttribute(attr); });\n        noColorEle.style.backgroundColor = '';\n    };\n    ColorPicker.prototype.appendElement = function (ele, insertPos) {\n        if (insertPos === void 0) { insertPos = 0; }\n        var refEle = this.container.children[insertPos];\n        if (refEle) {\n            this.container.insertBefore(ele, refEle);\n        }\n        else {\n            this.container.appendChild(ele);\n        }\n    };\n    ColorPicker.prototype.addTileSelection = function (ele) {\n        ele.classList.add(SELECT);\n        ele.setAttribute('aria-selected', 'true');\n    };\n    ColorPicker.prototype.createPicker = function () {\n        classList(this.container, [PICKERCONTENT], [PALETTECONTENT]);\n        var hsvContainer = this.createElement('div', { className: HSVCONTAINER });\n        this.appendElement(hsvContainer);\n        hsvContainer.appendChild(this.createElement('div', { className: HSVAREA }));\n        var dragHandler = this.createElement('span', { className: HANDLER, attrs: { 'tabindex': '0' } });\n        hsvContainer.appendChild(dragHandler);\n        if (this.value === null || this.value === '') {\n            this.value = '#008000ff';\n        }\n        this.rgb = this.hexToRgb(this.value);\n        this.hsv = this.rgbToHsv.apply(this, this.rgb);\n        this.setHsvContainerBg();\n        this.setHandlerPosition();\n        this.createSlider();\n        this.createDragTooltip();\n    };\n    ColorPicker.prototype.setHsvContainerBg = function (h) {\n        if (h === void 0) { h = this.hsv[0]; }\n        this.getHsvContainer().style.backgroundColor = this.convertToRgbString(this.hsvToRgb(h, 100, 100, 1));\n    };\n    ColorPicker.prototype.getHsvContainer = function () {\n        return select('.' + HSVCONTAINER, this.container);\n    };\n    ColorPicker.prototype.setHandlerPosition = function () {\n        var dragHandler = this.getDragHandler();\n        var hsvArea = select('.' + HSVAREA, this.container);\n        if (this.enableRtl) {\n            dragHandler.style.left = formatUnit(hsvArea.offsetWidth * Math.abs(100 - this.hsv[1]) / 100);\n        }\n        else {\n            dragHandler.style.left = formatUnit(hsvArea.offsetWidth * this.hsv[1] / 100);\n        }\n        dragHandler.style.top = formatUnit(hsvArea.offsetHeight * (100 - this.hsv[2]) / 100);\n    };\n    ColorPicker.prototype.createSlider = function () {\n        var sliderPreviewWrapper = this.createElement('div', { className: 'e-slider-preview' });\n        this.appendElement(sliderPreviewWrapper, 1);\n        this.createPreview(sliderPreviewWrapper);\n        var sliderWrapper = this.createElement('div', { className: 'e-colorpicker-slider' });\n        sliderPreviewWrapper.insertBefore(sliderWrapper, sliderPreviewWrapper.children[0]);\n        var slider = this.createElement('div', { className: 'e-hue-slider' });\n        sliderWrapper.appendChild(slider);\n        this.hueSlider = new Slider({\n            value: this.hsv[0],\n            min: 0,\n            max: 359,\n            enableRtl: this.enableRtl,\n            enabled: !this.disabled,\n            change: this.hueChange.bind(this)\n        });\n        this.hueSlider.createElement = this.createElement;\n        this.hueSlider.appendTo(slider);\n        if (this.enableOpacity) {\n            slider = this.createElement('div', { className: 'e-opacity-slider' });\n            sliderWrapper.appendChild(slider);\n            this.createOpacitySlider(slider);\n        }\n    };\n    ColorPicker.prototype.createOpacitySlider = function (slider) {\n        this.opacitySlider = new Slider({\n            value: this.rgb[3] * 100,\n            min: 0,\n            max: 100,\n            enableRtl: this.enableRtl,\n            enabled: !this.disabled,\n            change: this.opacityChange.bind(this)\n        });\n        this.opacitySlider.createElement = this.createElement;\n        this.opacitySlider.appendTo(slider);\n        var opacityBgTrack = this.createElement('div', { className: 'e-opacity-empty-track' });\n        slider.appendChild(opacityBgTrack);\n        this.updateOpacitySliderBg();\n    };\n    ColorPicker.prototype.updateOpacitySliderBg = function () {\n        var direction = this.enableRtl ? 'to left' : 'to right';\n        var opacityEle = select('.e-opacity-empty-track', this.opacitySlider.element);\n        if (opacityEle) {\n            opacityEle.style.background =\n                'linear-gradient(' + direction + ', rgba(' + this.rgb.slice(0, 3) + ', 0) 0%, ' +\n                    this.convertToRgbString(this.rgb.slice(0, 3)) + ' 100%)';\n        }\n    };\n    ColorPicker.prototype.hueChange = function (args) {\n        this.hsv[0] = args.value;\n        this.setHsvContainerBg();\n        this.convertToOtherFormat();\n    };\n    ColorPicker.prototype.opacityChange = function (args) {\n        var value = args.value;\n        var pValue = this.rgbToHex(this.rgb);\n        this.hsv[3] = value / 100;\n        this.rgb[3] = value / 100;\n        var cValue = this.rgbToHex(this.rgb);\n        this.updateOpacityInput(value);\n        var rgb = this.convertToRgbString(this.rgb);\n        this.updatePreview(rgb);\n        this.triggerEvent(cValue, pValue, rgb);\n    };\n    ColorPicker.prototype.updateOpacityInput = function (value) {\n        if (this.enableOpacity && !this.getWrapper().classList.contains(HIDEVALUE)) {\n            var opacityTextBoxInst = getInstance(select('.' + OPACITY, this.container), NumericTextBox);\n            opacityTextBoxInst.value = value;\n            opacityTextBoxInst.dataBind();\n        }\n    };\n    ColorPicker.prototype.createPreview = function (parentEle) {\n        var previewContainer = this.createElement('div', { className: PREVIEW });\n        parentEle.appendChild(previewContainer);\n        var preview = this.createElement('span', { className: 'e-preview ' + CURRENT });\n        previewContainer.appendChild(preview);\n        var colorValue = this.convertToRgbString(this.rgb);\n        preview.style.backgroundColor = colorValue;\n        preview = this.createElement('span', { className: 'e-preview ' + PREVIOUS });\n        previewContainer.appendChild(preview);\n        preview.style.backgroundColor = colorValue;\n    };\n    ColorPicker.prototype.isPicker = function () {\n        return !this.container.classList.contains(PALETTECONTENT);\n    };\n    ColorPicker.prototype.getPopupEle = function () {\n        return this.container.parentElement;\n    };\n    ColorPicker.prototype.createNumericInput = function (element, value, label, max) {\n        var _this = this;\n        var numericInput = new NumericTextBox({\n            value: value,\n            placeholder: label,\n            min: 0,\n            max: max,\n            format: '###.##',\n            showSpinButton: false,\n            floatLabelType: 'Always',\n            enableRtl: this.enableRtl,\n            enabled: !this.disabled,\n            readonly: this.isPicker() ? false : true,\n            change: function (args) {\n                if (args.event) {\n                    _this.inputHandler(args.event);\n                }\n            }\n        });\n        numericInput.createElement = this.createElement;\n        numericInput.appendTo(element);\n    };\n    ColorPicker.prototype.createInput = function () {\n        var isPicker = this.isPicker();\n        var wrapper = this.getWrapper();\n        if ((isPicker && !wrapper.classList.contains(HIDEVALUE)) || (!isPicker && wrapper.classList.contains(SHOWVALUE))) {\n            var inputWrap = this.createElement('div', { className: INPUTWRAPPER });\n            if (isPicker) {\n                this.appendElement(inputWrap, 2);\n            }\n            else {\n                this.appendElement(inputWrap, 1);\n            }\n            var container = this.createElement('div', { className: 'e-input-container' });\n            inputWrap.appendChild(container);\n            if (!wrapper.classList.contains(HIDEVALUESWITCH)) {\n                this.appendValueSwitchBtn(inputWrap);\n            }\n            if (!wrapper.classList.contains(HIDEHEX)) {\n                var hexInput = this.createElement('input', {\n                    className: HEX,\n                    attrs: { 'maxlength': '7', 'spellcheck': 'false', 'aria-label': 'HEX' }\n                });\n                container.appendChild(hexInput);\n                Input.createInput({\n                    element: hexInput,\n                    floatLabelType: 'Always',\n                    properties: {\n                        placeholder: 'HEX',\n                        enableRtl: this.enableRtl,\n                        enabled: !this.disabled,\n                        readonly: this.isPicker() ? false : true\n                    }\n                }, this.createElement);\n                Input.setValue(this.value.slice(0, 7), hexInput);\n                hexInput.addEventListener('input', this.inputHandler.bind(this));\n            }\n            if (!wrapper.classList.contains(HIDERGBA)) {\n                var label = void 0;\n                var value = void 0;\n                if (this.isRgb) {\n                    label = 'RGB';\n                    value = this.rgb;\n                }\n                else {\n                    label = 'HSV';\n                    value = this.hsv;\n                }\n                var clsName = ['rh', 'gs', 'bv'];\n                for (var i = 0; i < 3; i++) {\n                    this.createNumericInput(container.appendChild(this.createElement('input', { className: 'e-' + clsName[i] + '-value' })), value[i], label[i], 255);\n                }\n                if (this.enableOpacity) {\n                    this.appendOpacityValue(container);\n                }\n            }\n        }\n    };\n    ColorPicker.prototype.appendOpacityValue = function (container) {\n        this.createNumericInput(container.appendChild(this.createElement('input', { className: OPACITY })), this.rgb[3] * 100, 'A', 100);\n    };\n    ColorPicker.prototype.appendValueSwitchBtn = function (targetEle) {\n        var valueSwitchBtn = this.createElement('button', {\n            className: 'e-icons e-css e-btn e-flat e-icon-btn ' + FORMATSWITCH,\n            attrs: { 'title': 'Toggle format' }\n        });\n        targetEle.appendChild(valueSwitchBtn);\n        if (this.isPicker() && !this.getWrapper().classList.contains(HIDERGBA)) {\n            valueSwitchBtn.addEventListener('click', this.formatSwitchHandler.bind(this));\n        }\n    };\n    ColorPicker.prototype.createCtrlBtn = function () {\n        if (this.modeSwitcher || this.showButtons) {\n            this.l10n.setLocale(this.locale);\n            var btnWrapper = this.createElement('div', { className: CTRLSWITCH });\n            this.container.appendChild(btnWrapper);\n            if (this.showButtons) {\n                var controlBtnWrapper = this.createElement('div', { className: CTRLBTN });\n                btnWrapper.appendChild(controlBtnWrapper);\n                var apply = this.l10n.getConstant('Apply');\n                controlBtnWrapper.appendChild(this.createElement('button', {\n                    innerHTML: apply,\n                    className: 'e-btn e-css e-flat e-primary e-small ' + APPLY,\n                    attrs: { 'title': apply }\n                }));\n                var cancel = this.l10n.getConstant('Cancel');\n                controlBtnWrapper.appendChild(this.createElement('button', {\n                    innerHTML: cancel,\n                    className: 'e-btn e-css e-flat e-small ' + CANCEL,\n                    attrs: { 'title': cancel }\n                }));\n            }\n            if (this.modeSwitcher) {\n                this.appendModeSwitchBtn();\n            }\n        }\n    };\n    ColorPicker.prototype.appendModeSwitchBtn = function () {\n        var modeSwitcher = this.createElement('button', {\n            className: 'e-icons e-btn e-flat e-icon-btn ' + MODESWITCH, attrs: { title: this.l10n.getConstant('ModeSwitcher') }\n        });\n        select('.' + CTRLSWITCH, this.container).insertBefore(modeSwitcher, select('.' + CTRLBTN, this.container));\n    };\n    ColorPicker.prototype.createDragTooltip = function () {\n        var _this = this;\n        var tooltip = new Tooltip({\n            opensOn: 'Custom',\n            showTipPointer: false,\n            cssClass: 'e-color-picker-tooltip',\n            htmlAttributes: { title: 'tooltip' },\n            beforeOpen: function (args) {\n                _this.tooltipEle = args.element;\n            },\n            animation: { open: { effect: 'None' }, close: { effect: 'None' } }\n        });\n        tooltip.createElement = this.createElement;\n        tooltip.appendTo(this.container);\n        tooltip.open(this.container);\n        this.tooltipEle.style.zIndex = getZindexPartial(this.tooltipEle).toString();\n        this.tooltipEle.setAttribute('aria-label', 'colorpicker-tooltip');\n        select('.e-tip-content', this.tooltipEle).appendChild(this.createElement('div', { className: 'e-tip-transparent' }));\n    };\n    ColorPicker.prototype.getTooltipInst = function () {\n        return getInstance(this.container, Tooltip);\n    };\n    ColorPicker.prototype.setTooltipOffset = function (value) {\n        this.getTooltipInst().offsetY = value;\n    };\n    ColorPicker.prototype.toggleDisabled = function (enable) {\n        if (enable) {\n            this.getWrapper().classList.add(DISABLED);\n        }\n        else {\n            this.getWrapper().classList.remove(DISABLED);\n        }\n        if (this.showButtons) {\n            ([].slice.call(selectAll('.e-btn', this.container))).forEach(function (ele) {\n                if (enable) {\n                    attributes(ele, { 'disabled': '' });\n                }\n                else {\n                    ele.removeAttribute('disabled');\n                }\n            });\n        }\n    };\n    ColorPicker.prototype.convertToRgbString = function (rgb) {\n        return rgb.length ? rgb.length === 4 ? 'rgba(' + rgb.join() + ')' : 'rgb(' + rgb.join() + ')' : '';\n    };\n    ColorPicker.prototype.convertToHsvString = function (hsv) {\n        return hsv.length === 4 ? 'hsva(' + hsv.join() + ')' : 'hsv(' + hsv.join() + ')';\n    };\n    ColorPicker.prototype.updateHsv = function () {\n        this.hsv[1] = this.hsv[1] > 100 ? 100 : this.hsv[1];\n        this.hsv[2] = this.hsv[2] > 100 ? 100 : this.hsv[2];\n        this.setHandlerPosition();\n    };\n    ColorPicker.prototype.convertToOtherFormat = function (isKey, e) {\n        if (isKey === void 0) { isKey = false; }\n        var pValue = this.rgbToHex(this.rgb);\n        this.rgb = this.hsvToRgb.apply(this, this.hsv);\n        var cValue = this.rgbToHex(this.rgb);\n        var rgba = this.convertToRgbString(this.rgb);\n        this.updatePreview(rgba);\n        this.updateInput(cValue);\n        this.triggerEvent(cValue, pValue, rgba, isKey, e);\n    };\n    ColorPicker.prototype.updateInput = function (value) {\n        var wrapper = this.getWrapper();\n        if (!wrapper.classList.contains(HIDEVALUE)) {\n            if (!wrapper.classList.contains(HIDEHEX)) {\n                Input.setValue(value.substr(0, 7), select('.' + HEX, this.container));\n            }\n            if (!wrapper.classList.contains(HIDERGBA)) {\n                if (this.isRgb) {\n                    this.updateValue(this.rgb, false);\n                }\n                else {\n                    this.updateValue(this.hsv, false);\n                }\n            }\n        }\n    };\n    ColorPicker.prototype.updatePreview = function (value) {\n        if (this.enableOpacity) {\n            this.updateOpacitySliderBg();\n        }\n        select('.e-tip-transparent', this.tooltipEle).style.backgroundColor = value;\n        select('.' + PREVIEW + ' .' + CURRENT, this.container).style.backgroundColor = value;\n        select('.' + PREVIEW + ' .' + PREVIOUS, this.container).style.backgroundColor\n            = this.convertToRgbString(this.hexToRgb(this.value));\n    };\n    ColorPicker.prototype.getDragHandler = function () {\n        return select('.' + HANDLER, this.container);\n    };\n    ColorPicker.prototype.removeTileSelection = function () {\n        var selectedEle = [].slice.call(selectAll('.' + SELECT, this.container.children[0]));\n        selectedEle.forEach(function (ele) {\n            ele.classList.remove(SELECT);\n            ele.setAttribute('aria-selected', 'false');\n        });\n    };\n    ColorPicker.prototype.convertRgbToNumberArray = function (value) {\n        return (value.slice(value.indexOf('(') + 1, value.indexOf(')'))).split(',').map(function (n, i) {\n            return (i !== 3) ? parseInt(n, 10) : parseFloat(n);\n        });\n    };\n    /**\n     * To get color value in specified type.\n     *\n     * @param {string} value - Specify the color value.\n     * @param {string} type - Specify the type to which the specified color needs to be converted.\n     * @method getValue\n     * @returns {string} - Color value\n     */\n    ColorPicker.prototype.getValue = function (value, type) {\n        if (!value) {\n            value = this.value;\n        }\n        type = !type ? 'hex' : type.toLowerCase();\n        if (value[0] === 'r') {\n            var cValue = this.convertRgbToNumberArray(value);\n            if (type === 'hex' || type === 'hexa') {\n                var hex = this.rgbToHex(cValue);\n                return type === 'hex' ? hex.slice(0, 7) : hex;\n            }\n            else {\n                if (type === 'hsv') {\n                    return this.convertToHsvString(this.rgbToHsv.apply(this, cValue.slice(0, 3)));\n                }\n                else {\n                    if (type === 'hsva') {\n                        return this.convertToHsvString(this.rgbToHsv.apply(this, cValue));\n                    }\n                    else {\n                        return 'null';\n                    }\n                }\n            }\n        }\n        else {\n            if (value[0] === 'h') {\n                var cValue = this.hsvToRgb.apply(this, this.convertRgbToNumberArray(value));\n                if (type === 'rgba') {\n                    return this.convertToRgbString(cValue);\n                }\n                else {\n                    if (type === 'hex' || type === 'hexa') {\n                        var hex = this.rgbToHex(cValue);\n                        return type === 'hex' ? hex.slice(0, 7) : hex;\n                    }\n                    else {\n                        if (type === 'rgb') {\n                            return this.convertToRgbString(cValue.slice(0, 3));\n                        }\n                        else {\n                            return 'null';\n                        }\n                    }\n                }\n            }\n            else {\n                value = this.roundValue(value);\n                var rgb = this.hexToRgb(value);\n                if (type === 'rgb' || type === 'hsv') {\n                    rgb = rgb.slice(0, 3);\n                }\n                if (type === 'rgba' || type === 'rgb') {\n                    return this.convertToRgbString(rgb);\n                }\n                else {\n                    if (type === 'hsva' || type === 'hsv') {\n                        return this.convertToHsvString(this.rgbToHsv.apply(this, rgb));\n                    }\n                    else {\n                        if (type === 'hex') {\n                            return value.slice(0, 7);\n                        }\n                        else {\n                            if (type === 'a') {\n                                return rgb[3].toString();\n                            }\n                            else {\n                                return 'null';\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * To show/hide ColorPicker popup based on current state of the SplitButton.\n     *\n     * @method toggle\n     * @returns {void}\n     */\n    ColorPicker.prototype.toggle = function () {\n        if (this.container.parentElement.classList.contains('e-popup-close')) {\n            this.splitBtn.toggle();\n        }\n        else {\n            this.closePopup(null);\n        }\n    };\n    /**\n     * Get component name.\n     *\n     * @returns {string} - Module Name\n     * @private\n     */\n    ColorPicker.prototype.getModuleName = function () {\n        return 'colorpicker';\n    };\n    /**\n     * Gets the properties to be maintained in the persisted state.\n     *\n     * @returns {string} - Persist data\n     */\n    ColorPicker.prototype.getPersistData = function () {\n        return this.addOnPersist(['value']);\n    };\n    ColorPicker.prototype.wireEvents = function () {\n        if (this.isPicker()) {\n            var dragHandler = this.getDragHandler();\n            EventHandler.add(dragHandler, 'keydown', this.pickerKeyDown, this);\n            var ctrlBtn = select('.' + CTRLBTN, this.container);\n            if (ctrlBtn) {\n                EventHandler.add(ctrlBtn, 'keydown', this.ctrlBtnKeyDown, this);\n            }\n            EventHandler.add(this.getHsvContainer(), 'mousedown touchstart', this.handlerDown, this);\n            if (this.modeSwitcher || this.showButtons) {\n                this.addCtrlSwitchEvent();\n            }\n            EventHandler.add(select('.' + PREVIOUS, this.container), 'click', this.previewHandler, this);\n        }\n        else {\n            EventHandler.add(this.container, 'click', this.paletteClickHandler, this);\n            EventHandler.add(this.container, 'keydown', this.paletteKeyDown, this);\n        }\n    };\n    ColorPicker.prototype.formResetHandler = function () {\n        this.value = this.initialInputValue;\n        attributes(this.element, { 'value': this.initialInputValue });\n    };\n    ColorPicker.prototype.addCtrlSwitchEvent = function () {\n        var ctrlSwitchBtn = select('.' + CTRLSWITCH, this.container);\n        if (ctrlSwitchBtn) {\n            EventHandler.add(ctrlSwitchBtn, 'click', this.btnClickHandler, this);\n        }\n    };\n    ColorPicker.prototype.ctrlBtnKeyDown = function (e) {\n        if (e.keyCode === 13) {\n            var applyBtn = select('.' + APPLY, this.container);\n            if (applyBtn) {\n                var cValue = this.rgbToHex(this.rgb);\n                this.triggerChangeEvent(cValue);\n            }\n            this.splitBtn.element.focus();\n        }\n    };\n    ColorPicker.prototype.pickerKeyDown = function (e) {\n        switch (e.keyCode) {\n            case 39:\n                this.handlerDragPosition(1, this.enableRtl ? -1 : 1, e);\n                break;\n            case 37:\n                this.handlerDragPosition(1, this.enableRtl ? 1 : -1, e);\n                break;\n            case 38:\n                this.handlerDragPosition(2, 1, e);\n                break;\n            case 40:\n                this.handlerDragPosition(2, -1, e);\n                break;\n            case 13: {\n                e.preventDefault();\n                var cValue = this.rgbToHex(this.rgb);\n                this.enterKeyHandler(cValue, e);\n            }\n        }\n    };\n    ColorPicker.prototype.enterKeyHandler = function (value, e) {\n        this.triggerChangeEvent(value);\n        if (!this.inline) {\n            this.splitBtn.element.focus();\n        }\n    };\n    ColorPicker.prototype.closePopup = function (e) {\n        var _this = this;\n        var beforeCloseArgs = { element: this.container, event: e, cancel: false };\n        this.trigger('beforeClose', beforeCloseArgs, function (observedcloseArgs) {\n            if (!observedcloseArgs.cancel) {\n                _this.splitBtn.toggle();\n                _this.onPopupClose();\n            }\n        });\n    };\n    ColorPicker.prototype.triggerChangeEvent = function (value, e) {\n        var hex = value.slice(0, 7);\n        this.trigger('change', {\n            currentValue: { hex: hex, rgba: this.convertToRgbString(this.rgb) }, event: e,\n            previousValue: { hex: this.value.slice(0, 7), rgba: this.convertToRgbString(this.hexToRgb(this.value)) },\n            value: this.enableOpacity ? value : hex\n        });\n        if (this.enableOpacity) {\n            this.setProperties({ 'value': value }, true);\n        }\n        else {\n            this.setProperties({ 'value': hex }, true);\n        }\n        this.element.value = hex ? hex : '#000000';\n    };\n    ColorPicker.prototype.handlerDragPosition = function (prob, value, e) {\n        e.preventDefault();\n        this.hsv[prob] += value * (e.ctrlKey ? 1 : 3);\n        if (this.hsv[prob] < 0) {\n            this.hsv[prob] = 0;\n        }\n        this.updateHsv();\n        this.convertToOtherFormat(true, e);\n    };\n    ColorPicker.prototype.handlerDown = function (e) {\n        e.preventDefault();\n        if (e.type === 'mousedown') {\n            this.clientX = Math.abs(e.pageX - pageXOffset);\n            this.clientY = Math.abs(e.pageY - pageYOffset);\n            this.setTooltipOffset(8);\n        }\n        else {\n            this.clientX = Math.abs(e.changedTouches[0].pageX - pageXOffset);\n            this.clientY = Math.abs(e.changedTouches[0].pageY - pageYOffset);\n            this.setTooltipOffset(-8);\n        }\n        this.setHsv(this.clientX, this.clientY);\n        this.getDragHandler().style.transition = 'left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)';\n        this.updateHsv();\n        this.convertToOtherFormat(false, e);\n        this.getDragHandler().focus();\n        EventHandler.add(document, 'mousemove touchmove', this.handlerMove, this);\n        EventHandler.add(document, 'mouseup touchend', this.handlerEnd, this);\n    };\n    ColorPicker.prototype.handlerMove = function (e) {\n        if (e.type !== 'touchmove') {\n            e.preventDefault();\n        }\n        var x;\n        var y;\n        if (e.type === 'mousemove') {\n            x = Math.abs(e.pageX - pageXOffset);\n            y = Math.abs(e.pageY - pageYOffset);\n        }\n        else {\n            x = Math.abs(e.changedTouches[0].pageX - pageXOffset);\n            y = Math.abs(e.changedTouches[0].pageY - pageYOffset);\n        }\n        this.setHsv(x, y);\n        var dragHandler = this.getDragHandler();\n        this.updateHsv();\n        this.convertToOtherFormat(false, e);\n        this.getTooltipInst().refresh(dragHandler);\n        if (!this.tooltipEle.style.transform) {\n            if (Math.abs(this.clientX - x) > 8 || Math.abs(this.clientY - y) > 8) {\n                select('.' + HSVAREA, this.container).style.cursor = 'pointer';\n                dragHandler.style.transition = 'none';\n                if (!this.inline) {\n                    this.tooltipEle.style.zIndex = (parseInt(this.getPopupEle().style.zIndex, 10) + 1).toString();\n                }\n                this.tooltipEle.style.transform = 'rotate(45deg)';\n                dragHandler.classList.add('e-hide-handler');\n            }\n        }\n    };\n    ColorPicker.prototype.setHsv = function (clientX, clientY) {\n        var ele = select('.' + HSVAREA, this.container);\n        var position = ele.getBoundingClientRect();\n        if (this.enableRtl) {\n            clientX = clientX > position.right ? 0 : Math.abs(clientX - position.right);\n        }\n        else {\n            clientX = clientX > position.left ? Math.abs(clientX - position.left) : 0;\n        }\n        clientY = clientY > position.top ? Math.abs(clientY - position.top) : 0;\n        this.hsv[2] = Math.round(Number(100 * (ele.offsetHeight -\n            Math.max(0, Math.min(ele.offsetHeight, (clientY - ele.offsetTop)))) / ele.offsetHeight) * 10) / 10;\n        this.hsv[1] =\n            Math.round(Number(100 * (Math.max(0, Math.min(ele.offsetWidth, (clientX - ele.offsetLeft)))) / ele.offsetWidth) * 10) / 10;\n    };\n    ColorPicker.prototype.handlerEnd = function (e) {\n        if (e.type !== 'touchend') {\n            e.preventDefault();\n        }\n        EventHandler.remove(document, 'mousemove touchmove', this.handlerMove);\n        EventHandler.remove(document, 'mouseup touchend', this.handlerEnd);\n        var dragHandler = this.getDragHandler();\n        select('.' + HSVAREA, this.container).style.cursor = '';\n        if (this.tooltipEle.style.transform) {\n            this.tooltipEle.style.transform = '';\n            dragHandler.classList.remove('e-hide-handler');\n        }\n        if (!this.inline && !this.showButtons) {\n            this.closePopup(e);\n        }\n    };\n    ColorPicker.prototype.btnClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.' + MODESWITCH)) {\n            e.stopPropagation();\n            this.switchToPalette();\n        }\n        else {\n            if (target.classList.contains(APPLY) || target.classList.contains(CANCEL)) {\n                this.ctrlBtnClick(target, e);\n            }\n        }\n    };\n    ColorPicker.prototype.switchToPalette = function () {\n        this.trigger('beforeModeSwitch', { element: this.container, mode: 'Palette' });\n        this.unWireEvents();\n        this.destroyOtherComp();\n        detach(select('.e-slider-preview', this.container));\n        if (!this.getWrapper().classList.contains(HIDEVALUE)) {\n            remove(select('.' + INPUTWRAPPER, this.container));\n        }\n        detach(this.getHsvContainer());\n        this.createPalette();\n        this.firstPaletteFocus();\n        this.createInput();\n        this.refreshPopupPos();\n        //for image editor popup position refreshing\n        if (this.element.parentElement && this.element.parentElement.parentElement && this.element.parentElement.parentElement.classList.contains('e-ie-ddb-popup')) {\n            this.refreshImageEditorPopupPos();\n        }\n        ;\n        this.wireEvents();\n        this.trigger('onModeSwitch', { element: this.container, mode: 'Palette' });\n    };\n    //for image editor popup position refreshing\n    ColorPicker.prototype.refreshImageEditorPopupPos = function () {\n        if (Browser.isDevice) {\n            var popupEle = this.getPopupEle();\n            popupEle.style.left = formatUnit(0 + pageXOffset);\n            popupEle.style.top = formatUnit(0 + pageYOffset);\n            var btnElem = document.querySelector(\"#\" + this.element.parentElement.parentElement.id.split('-popup')[0]);\n            if (btnElem) {\n                popupEle.parentElement.ej2_instances[0].refreshPosition(btnElem);\n            }\n        }\n    };\n    ColorPicker.prototype.refreshPopupPos = function () {\n        if (!this.inline) {\n            var popupEle = this.getPopupEle();\n            popupEle.style.left = formatUnit(0 + pageXOffset);\n            popupEle.style.top = formatUnit(0 + pageYOffset);\n            this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement);\n        }\n    };\n    ColorPicker.prototype.formatSwitchHandler = function () {\n        if (this.isRgb) {\n            this.updateValue(this.hsv, true, 3, [360, 100, 100]);\n            this.isRgb = false;\n        }\n        else {\n            this.updateValue(this.rgb, true, 2);\n            this.isRgb = true;\n        }\n    };\n    ColorPicker.prototype.updateValue = function (value, format, idx, max) {\n        var clsName = ['e-rh-value', 'e-gs-value', 'e-bv-value'];\n        var inst;\n        for (var i = 0, len = clsName.length; i < len; i++) {\n            inst = getInstance(select('.' + clsName[i], this.container), NumericTextBox);\n            inst.value = Math.round(value[i]);\n            if (format) {\n                inst.placeholder = clsName[i].substr(idx, 1).toUpperCase();\n                inst.max = max ? max[i] : 255;\n            }\n            inst.dataBind();\n        }\n    };\n    ColorPicker.prototype.previewHandler = function (e) {\n        var target = e.target;\n        var pValue = this.rgbToHex(this.rgb);\n        this.rgb = this.convertRgbToNumberArray(target.style.backgroundColor);\n        if (!this.rgb[3]) {\n            this.rgb[3] = 1;\n        }\n        var cValue = this.rgbToHex(this.rgb);\n        var hsv = this.rgbToHsv.apply(this, this.rgb);\n        if (hsv[0] !== this.hsv[0]) {\n            this.hueSlider.setProperties({ 'value': hsv[0] }, true);\n            this.hueSlider.refresh();\n        }\n        this.setHsvContainerBg(hsv[0]);\n        if (this.enableOpacity && hsv[3] !== this.hsv[3]) {\n            this.opacitySlider.setProperties({ 'value': hsv[3] * 100 }, true);\n            this.opacitySlider.refresh();\n            this.updateOpacitySliderBg();\n        }\n        this.hsv = hsv;\n        this.setHandlerPosition();\n        this.updateInput(cValue);\n        select('.' + PREVIEW + ' .' + CURRENT, this.container).style.backgroundColor = this.convertToRgbString(this.rgb);\n        this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb), false, e);\n    };\n    ColorPicker.prototype.paletteClickHandler = function (e) {\n        e.preventDefault();\n        var target = e.target;\n        if (target.classList.contains(TILE)) {\n            this.removeTileSelection();\n            this.addTileSelection(target);\n            if (target.classList.contains(NOCOLOR)) {\n                this.noColorTile();\n            }\n            else {\n                var cValue = target.getAttribute('aria-label');\n                var pValue = this.rgbToHex(this.rgb);\n                this.rgb = this.hexToRgb(this.roundValue(cValue));\n                this.hsv = this.rgbToHsv.apply(this, this.rgb);\n                if (this.getWrapper().classList.contains(SHOWVALUE)) {\n                    this.updateInput(cValue);\n                }\n                this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb), false, e);\n            }\n            if (!this.inline && !this.showButtons) {\n                this.closePopup(e);\n            }\n        }\n        else {\n            if (closest(target, '.' + MODESWITCH)) {\n                this.switchToPicker();\n            }\n            else {\n                if (target.classList.contains(APPLY) || target.classList.contains(CANCEL)) {\n                    this.ctrlBtnClick(target, e);\n                }\n                else {\n                    if (this.getWrapper().classList.contains(SHOWVALUE) && closest(target, '.' + FORMATSWITCH)) {\n                        this.formatSwitchHandler();\n                    }\n                }\n            }\n        }\n    };\n    ColorPicker.prototype.noColorTile = function (isKey) {\n        if (isKey === void 0) { isKey = false; }\n        var pValue = this.rgbToHex(this.rgb);\n        this.rgb = [];\n        this.hsv = [];\n        this.triggerEvent('', pValue, '', isKey);\n    };\n    ColorPicker.prototype.switchToPicker = function () {\n        var wrapper = this.getWrapper();\n        this.trigger('beforeModeSwitch', { element: this.container, mode: 'Picker' });\n        this.unWireEvents();\n        ([].slice.call(selectAll('.' + PALETTES, this.container))).forEach(function (ele) {\n            detach(ele);\n        });\n        if (wrapper.classList.contains(SHOWVALUE)) {\n            detach(select('.' + INPUTWRAPPER, this.container));\n        }\n        this.container.style.width = '';\n        var grpEle = select('.e-custom-palette', this.container);\n        if (this.presetColors) {\n            remove(grpEle);\n        }\n        this.createPicker();\n        this.getDragHandler().focus();\n        this.createInput();\n        this.refreshPopupPos();\n        //for image editor popup position refreshing\n        if (this.element.parentElement && this.element.parentElement.parentElement && this.element.parentElement.parentElement.classList.contains('e-ie-ddb-popup')) {\n            this.refreshImageEditorPopupPos();\n        }\n        ;\n        this.wireEvents();\n        this.trigger('onModeSwitch', { element: this.container, mode: 'Picker' });\n    };\n    ColorPicker.prototype.ctrlBtnClick = function (ele, e) {\n        if (ele.classList.contains(APPLY)) {\n            var cValue = this.rgbToHex(this.rgb);\n            this.triggerChangeEvent(cValue, e);\n        }\n        if (!this.inline) {\n            this.closePopup(e);\n            this.splitBtn.element.focus();\n        }\n        else if (ele.classList.contains(CANCEL)) {\n            var beforeCloseArgs = { element: this.container, event: e, cancel: false };\n            this.trigger('beforeClose', beforeCloseArgs);\n        }\n    };\n    ColorPicker.prototype.paletteKeyDown = function (e) {\n        var target = e.target;\n        if (!target.classList.contains(PALETTES)) {\n            return;\n        }\n        var selectedEle;\n        var idx;\n        var tiles = [].slice.call(selectAll('.' + TILE, target));\n        var prevSelectedEle = (tiles.filter(function (tile) { return tile.classList.contains('e-selected'); })).pop();\n        switch (!e.altKey && e.keyCode) {\n            case 39:\n                e.preventDefault();\n                selectedEle = prevSelectedEle ? tiles[this.tilePosition(tiles, prevSelectedEle, this.enableRtl ? -1 : 1)]\n                    : tiles[this.enableRtl ? tiles.length - 1 : 0];\n                this.keySelectionChanges(selectedEle);\n                break;\n            case 37:\n                e.preventDefault();\n                selectedEle = prevSelectedEle ? tiles[this.tilePosition(tiles, prevSelectedEle, this.enableRtl ? 1 : -1)]\n                    : tiles[this.enableRtl ? 0 : tiles.length - 1];\n                this.keySelectionChanges(selectedEle);\n                break;\n            case 38:\n                e.preventDefault();\n                idx = prevSelectedEle ? this.tilePosition(tiles, prevSelectedEle, -this.columns) : 0;\n                selectedEle = tiles[idx] ? tiles[idx] : tiles[idx - this.columns];\n                this.keySelectionChanges(selectedEle);\n                break;\n            case 40:\n                e.preventDefault();\n                idx = prevSelectedEle ? this.tilePosition(tiles, prevSelectedEle, this.columns) : tiles.length - 1;\n                if (tiles[idx]) {\n                    selectedEle = tiles[idx];\n                }\n                else {\n                    idx %= tiles.length;\n                    idx += tiles[tiles.length - 1].parentElement.childElementCount;\n                    selectedEle = tiles[idx];\n                }\n                this.keySelectionChanges(selectedEle);\n                break;\n            case 13:\n                e.preventDefault();\n                if (prevSelectedEle) {\n                    var cValue = prevSelectedEle.getAttribute('aria-label');\n                    this.enterKeyHandler(cValue ? cValue : '', e);\n                }\n        }\n    };\n    ColorPicker.prototype.keySelectionChanges = function (newEle) {\n        this.removeTileSelection();\n        this.addTileSelection(newEle);\n        if (newEle.classList.contains(NOCOLOR)) {\n            this.noColorTile(true);\n        }\n        else {\n            var cValue = newEle.getAttribute('aria-label');\n            var pValue = this.rgbToHex(this.rgb);\n            this.rgb = this.hexToRgb(cValue);\n            this.hsv = this.rgbToHsv.apply(this, this.rgb);\n            if (this.getWrapper().classList.contains(SHOWVALUE)) {\n                this.updateInput(cValue);\n            }\n            this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb), true);\n        }\n    };\n    ColorPicker.prototype.tilePosition = function (items, element, cIdx) {\n        items = Array.prototype.slice.call(items);\n        var n = items.length;\n        var emptyCount = this.columns - items[n - 1].parentElement.childElementCount;\n        var idx = items.indexOf(element);\n        idx += cIdx;\n        if (idx < 0) {\n            idx += n + emptyCount;\n        }\n        else {\n            idx %= n + emptyCount;\n        }\n        return idx;\n    };\n    ColorPicker.prototype.inputHandler = function (e) {\n        var target = e.target;\n        if (!target.value.length) {\n            return;\n        }\n        var hsv;\n        var pValue;\n        var label = select('.e-float-text', target.parentElement).textContent;\n        switch (label) {\n            case 'HEX': {\n                var value = '';\n                if ((target.value[0] === '#' && target.value.length !== 5) || (target.value[0] !== '#' && target.value.length !== 4)) {\n                    value = this.roundValue(target.value);\n                }\n                if (value.length === 9) {\n                    pValue = this.rgbToHex(this.rgb);\n                    this.rgb = this.hexToRgb(value + value.substr(-2));\n                    this.inputValueChange(this.rgbToHsv.apply(this, this.rgb), pValue, target.value, e);\n                }\n                else {\n                    return;\n                }\n                break;\n            }\n            case 'R':\n                if (this.rgb[0] !== Number(target.value)) {\n                    pValue = this.rgbToHex(this.rgb);\n                    this.rgb[0] = Number(target.value);\n                    hsv = this.rgbToHsv.apply(this, this.rgb);\n                    this.inputValueChange(hsv, pValue, null, e);\n                }\n                break;\n            case 'G':\n                if (this.rgb[1] !== Number(target.value)) {\n                    pValue = this.rgbToHex(this.rgb);\n                    this.rgb[1] = Number(target.value);\n                    hsv = this.rgbToHsv.apply(this, this.rgb);\n                    this.inputValueChange(hsv, pValue, null, e);\n                }\n                break;\n            case 'B':\n                if (this.rgb[2] !== Number(target.value)) {\n                    pValue = this.rgbToHex(this.rgb);\n                    this.rgb[2] = Number(target.value);\n                    hsv = this.rgbToHsv.apply(this, this.rgb);\n                    this.inputValueChange(hsv, pValue, null, e);\n                }\n                break;\n            case 'H':\n                this.hueSlider.value = Number(target.value);\n                break;\n            case 'S':\n                if (this.hsv[1] !== Number(target.value)) {\n                    this.hsv[1] = Number(target.value);\n                    this.updateHsv();\n                    this.convertToOtherFormat(false, e);\n                }\n                break;\n            case 'V':\n                if (this.hsv[2] !== Number(target.value)) {\n                    this.hsv[2] = Number(target.value);\n                    this.updateHsv();\n                    this.convertToOtherFormat(false, e);\n                }\n                break;\n            case 'A':\n                this.opacitySlider.value = Number(target.value);\n                break;\n        }\n    };\n    ColorPicker.prototype.inputValueChange = function (hsv, pValue, value, e) {\n        if (hsv[0] !== this.hsv[0]) {\n            this.hueSlider.setProperties({ 'value': hsv[0] }, true);\n            this.hueSlider.refresh();\n            this.setHsvContainerBg(hsv[0]);\n        }\n        this.hsv = hsv;\n        var cValue = this.rgbToHex(this.rgb);\n        this.setHandlerPosition();\n        this.updateInput(value ? value : cValue);\n        var rgba = this.convertToRgbString(this.rgb);\n        this.updatePreview(rgba);\n        this.triggerEvent(cValue, pValue, rgba, false, e);\n    };\n    ColorPicker.prototype.triggerEvent = function (cValue, pValue, rgba, isKey, e) {\n        if (isKey === void 0) { isKey = false; }\n        var hex = cValue.slice(0, 7);\n        if (isNullOrUndefined(e)) {\n            e = new MouseEvent('click', { bubbles: true, cancelable: false });\n        }\n        if (!this.showButtons && !isKey) {\n            this.trigger('change', { currentValue: { hex: hex, rgba: rgba }, event: e,\n                previousValue: { hex: this.value.slice(0, 7), rgba: this.convertToRgbString(this.hexToRgb(this.value)) }, value: cValue });\n            if (this.enableOpacity) {\n                this.setProperties({ 'value': cValue }, true);\n            }\n            else {\n                this.setProperties({ 'value': hex }, true);\n            }\n            this.element.value = hex ? hex : '#000000';\n        }\n        else {\n            this.trigger('select', {\n                currentValue: { hex: hex, rgba: rgba }, event: e,\n                previousValue: { hex: pValue.slice(0, 7), rgba: this.convertToRgbString(this.hexToRgb(pValue)) }\n            });\n        }\n    };\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers.\n     * Also it maintains the initial input element from the DOM.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    ColorPicker.prototype.destroy = function () {\n        var _this = this;\n        var wrapper = this.getWrapper();\n        _super.prototype.destroy.call(this);\n        ['tabindex', 'spellcheck'].forEach(function (attr) { _this.element.removeAttribute(attr); });\n        if (this.inline) {\n            this.unWireEvents();\n            this.destroyOtherComp();\n        }\n        else {\n            if (this.isPopupOpen()) {\n                this.unWireEvents();\n                this.destroyOtherComp();\n            }\n            this.splitBtn.destroy();\n            this.splitBtn = null;\n        }\n        this.tileRipple();\n        this.tileRipple = null;\n        this.ctrlBtnRipple();\n        this.ctrlBtnRipple = null;\n        if (this.element.nextElementSibling) {\n            detach(this.element.nextElementSibling);\n        }\n        if (wrapper) {\n            wrapper.parentElement.insertBefore(this.element, wrapper);\n            detach(wrapper);\n        }\n        this.container = null;\n        if (this.formElement) {\n            EventHandler.remove(this.formElement, 'reset', this.formResetHandler);\n        }\n    };\n    ColorPicker.prototype.destroyOtherComp = function () {\n        if (this.isPicker()) {\n            var popup = closest(this.hueSlider.element, '.e-color-picker');\n            var numericElemColl = popup.querySelectorAll('.e-numerictextbox');\n            for (var i = 0; i < numericElemColl.length; i++) {\n                getInstance(numericElemColl[i], NumericTextBox).destroy();\n            }\n            this.hueSlider.destroy();\n            if (this.enableOpacity) {\n                this.opacitySlider.destroy();\n                this.opacitySlider = null;\n            }\n            this.hueSlider = null;\n            var tooltipInst = this.getTooltipInst();\n            tooltipInst.close();\n            tooltipInst.destroy();\n            this.tooltipEle = null;\n        }\n    };\n    ColorPicker.prototype.isPopupOpen = function () {\n        return this.getPopupEle().classList.contains('e-popup-open');\n    };\n    ColorPicker.prototype.unWireEvents = function () {\n        if (this.isPicker()) {\n            var dragHandler = this.getDragHandler();\n            EventHandler.remove(dragHandler, 'keydown', this.pickerKeyDown);\n            var ctrlBtn = select('.' + CTRLBTN, this.container);\n            if (ctrlBtn) {\n                EventHandler.remove(ctrlBtn, 'keydown', this.ctrlBtnKeyDown);\n            }\n            EventHandler.remove(this.getHsvContainer(), 'mousedown touchstart', this.handlerDown);\n            if (this.modeSwitcher || this.showButtons) {\n                EventHandler.remove(select('.' + CTRLSWITCH, this.container), 'click', this.btnClickHandler);\n            }\n            EventHandler.remove(select('.' + PREVIOUS, this.container), 'click', this.previewHandler);\n        }\n        else {\n            EventHandler.remove(this.container, 'click', this.paletteClickHandler);\n            EventHandler.remove(this.container, 'keydown', this.paletteKeyDown);\n        }\n    };\n    ColorPicker.prototype.roundValue = function (value) {\n        if (!value) {\n            return '';\n        }\n        if (value[0] !== '#') {\n            value = '#' + value;\n        }\n        var len = value.length;\n        if (len === 4) {\n            value += 'f';\n            len = 5;\n        }\n        if (len === 5) {\n            var tempValue = '';\n            for (var i = 1, len_1 = value.length; i < len_1; i++) {\n                tempValue += (value.charAt(i) + value.charAt(i));\n            }\n            value = '#' + tempValue;\n            len = 9;\n        }\n        if (len === 7) {\n            value += 'ff';\n        }\n        return value;\n    };\n    ColorPicker.prototype.hexToRgb = function (hex) {\n        if (!hex) {\n            return [];\n        }\n        hex = hex.trim();\n        if (hex.length !== 9) {\n            hex = this.roundValue(hex);\n        }\n        var opacity = Number((parseInt(hex.slice(-2), 16) / 255).toFixed(2));\n        hex = hex.slice(1, 7);\n        var bigInt = parseInt(hex, 16);\n        var h = [];\n        h.push((bigInt >> 16) & 255);\n        h.push((bigInt >> 8) & 255);\n        h.push(bigInt & 255);\n        h.push(opacity);\n        return h;\n    };\n    ColorPicker.prototype.rgbToHsv = function (r, g, b, opacity) {\n        if (this.rgb && !this.rgb.length) {\n            return [];\n        }\n        r /= 255;\n        g /= 255;\n        b /= 255;\n        var max = Math.max(r, g, b);\n        var min = Math.min(r, g, b);\n        var h;\n        var v = max;\n        var d = max - min;\n        var s = max === 0 ? 0 : d / max;\n        if (max === min) {\n            h = 0;\n        }\n        else {\n            switch (max) {\n                case r:\n                    h = (g - b) / d + (g < b ? 6 : 0);\n                    break;\n                case g:\n                    h = (b - r) / d + 2;\n                    break;\n                case b:\n                    h = (r - g) / d + 4;\n                    break;\n            }\n            h /= 6;\n        }\n        var hsv = [Math.round(h * 360), Math.round(s * 1000) / 10, Math.round(v * 1000) / 10];\n        if (!isNullOrUndefined(opacity)) {\n            hsv.push(opacity);\n        }\n        return hsv;\n    };\n    ColorPicker.prototype.hsvToRgb = function (h, s, v, opacity) {\n        var r;\n        var g;\n        var b;\n        s /= 100;\n        v /= 100;\n        if (s === 0) {\n            r = g = b = v;\n            return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255), opacity];\n        }\n        h /= 60;\n        var i = Math.floor(h);\n        var f = h - i;\n        var p = v * (1 - s);\n        var q = v * (1 - s * f);\n        var t = v * (1 - s * (1 - f));\n        switch (i) {\n            case 0:\n                r = v;\n                g = t;\n                b = p;\n                break;\n            case 1:\n                r = q;\n                g = v;\n                b = p;\n                break;\n            case 2:\n                r = p;\n                g = v;\n                b = t;\n                break;\n            case 3:\n                r = p;\n                g = q;\n                b = v;\n                break;\n            case 4:\n                r = t;\n                g = p;\n                b = v;\n                break;\n            default:\n                r = v;\n                g = p;\n                b = q;\n        }\n        var rgb = [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n        if (!isNullOrUndefined(opacity)) {\n            rgb.push(opacity);\n        }\n        return rgb;\n    };\n    ColorPicker.prototype.rgbToHex = function (rgb) {\n        return rgb.length ? ('#' + this.hex(rgb[0]) + this.hex(rgb[1]) + this.hex(rgb[2]) +\n            (!isNullOrUndefined(rgb[3]) ? (rgb[3] !== 0 ? (Math.round(rgb[3] * 255) + 0x10000).toString(16).substr(-2) : '00') : '')) : '';\n    };\n    ColorPicker.prototype.hex = function (x) {\n        return ('0' + x.toString(16)).slice(-2);\n    };\n    ColorPicker.prototype.changeModeSwitcherProp = function (prop) {\n        var ctrlSwitchWrapper = select('.' + CTRLSWITCH, this.container);\n        if (prop) {\n            if (ctrlSwitchWrapper) {\n                this.appendModeSwitchBtn();\n            }\n            else {\n                this.createCtrlBtn();\n                if (this.isPicker() && !this.disabled) {\n                    this.addCtrlSwitchEvent();\n                }\n            }\n        }\n        else {\n            if (ctrlSwitchWrapper) {\n                if (this.showButtons) {\n                    detach(select('.' + MODESWITCH, ctrlSwitchWrapper));\n                }\n                else {\n                    remove(ctrlSwitchWrapper);\n                }\n            }\n        }\n    };\n    ColorPicker.prototype.changeShowBtnProps = function (prop) {\n        var ctrlBtnWrapper = select('.' + CTRLSWITCH, this.container);\n        if (prop) {\n            if (ctrlBtnWrapper) {\n                remove(ctrlBtnWrapper);\n            }\n            this.createCtrlBtn();\n            if (this.isPicker() && !this.disabled) {\n                this.addCtrlSwitchEvent();\n            }\n        }\n        else {\n            if (this.modeSwitcher) {\n                detach(select('.' + CTRLBTN, ctrlBtnWrapper));\n            }\n            else {\n                remove(ctrlBtnWrapper);\n            }\n        }\n    };\n    ColorPicker.prototype.changeValueProp = function (newProp) {\n        if (this.isPicker()) {\n            this.rgb = this.hexToRgb(newProp);\n            this.hsv = this.rgbToHsv.apply(this, this.rgb);\n            this.setHandlerPosition();\n            detach(closest(this.hueSlider.element, '.e-slider-preview'));\n            this.createSlider();\n            this.setHsvContainerBg();\n            this.updateInput(newProp);\n            if (this.rgb.length === 4) {\n                this.updateOpacityInput(this.rgb[3] * 100);\n            }\n        }\n        else {\n            this.removeTileSelection();\n            var ele = this.container.querySelector('span[aria-label=\"' + this.roundValue(newProp) + '\"]');\n            if (ele) {\n                this.addTileSelection(ele);\n            }\n        }\n    };\n    ColorPicker.prototype.setInputEleProps = function () {\n        remove(select('.' + INPUTWRAPPER, this.container));\n        this.createInput();\n    };\n    ColorPicker.prototype.changeDisabledProp = function (newProp) {\n        if (this.isPicker()) {\n            this.hueSlider.enabled = !newProp;\n            this.opacitySlider.enabled = !newProp;\n            this.setInputEleProps();\n        }\n        if (newProp) {\n            this.toggleDisabled(true);\n            this.unWireEvents();\n        }\n        else {\n            this.toggleDisabled(false);\n            this.wireEvents();\n        }\n    };\n    ColorPicker.prototype.changeCssClassProps = function (newProp, oldProp) {\n        var wrapper = this.getWrapper();\n        var popupWrapper = this.getPopupEle();\n        if (oldProp) {\n            removeClass([wrapper, popupWrapper], oldProp.split(' '));\n        }\n        if (newProp) {\n            addClass([wrapper, popupWrapper], newProp.replace(/\\s+/g, ' ').trim().split(' '));\n        }\n    };\n    ColorPicker.prototype.changeRtlProps = function (newProp) {\n        if (newProp) {\n            addClass([this.getWrapper()], 'e-rtl');\n        }\n        else {\n            removeClass([this.getWrapper()], 'e-rtl');\n        }\n    };\n    ColorPicker.prototype.changePaletteProps = function () {\n        detach(this.container.children[0]);\n        this.container.style.width = '';\n        this.createPalette();\n    };\n    ColorPicker.prototype.changeOpacityProps = function (newProp) {\n        var wrapper = this.getWrapper();\n        if (newProp) {\n            removeClass([this.container.parentElement], HIDEOPACITY);\n            this.createOpacitySlider(select('.e-colorpicker-slider', this.container).appendChild(this.createElement('div', { className: 'e-opacity-slider' })));\n            if (!wrapper.classList.contains(HIDEVALUE) && !wrapper.classList.contains(HIDERGBA)) {\n                this.appendOpacityValue(select('.e-input-container', this.container));\n            }\n        }\n        else {\n            addClass([this.container.parentElement], HIDEOPACITY);\n            this.opacitySlider.destroy();\n            remove(this.opacitySlider.element);\n            this.opacitySlider = null;\n            if (!wrapper.classList.contains(HIDEVALUE) && !wrapper.classList.contains(HIDERGBA)) {\n                remove(select('.' + OPACITY, this.container).parentElement);\n            }\n        }\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param  {ColorPickerModel} newProp - Specifies new properties\n     * @param  {ColorPickerModel} oldProp - Specifies old properties\n     * @returns {void}\n     * @private\n     */\n    ColorPicker.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var _this = this;\n        if (!isNullOrUndefined(newProp.value)) {\n            var value = this.roundValue(newProp.value);\n            if (value.length === 9) {\n                this.element.value = this.roundValue(value).slice(0, 7);\n                var preview = this.splitBtn && select('.' + SPLITPREVIEW, this.splitBtn.element);\n                if (preview) {\n                    preview.style.backgroundColor = this.convertToRgbString(this.hexToRgb(newProp.value));\n                }\n            }\n            else if (this.noColor && this.mode === 'Palette' && this.value === '') {\n                var preview = this.splitBtn && select('.' + SPLITPREVIEW, this.splitBtn.element);\n                preview.style.backgroundColor = '';\n            }\n            else {\n                this.value = oldProp.value;\n            }\n        }\n        if (!this.inline && isNullOrUndefined(newProp.inline)) {\n            var otherCompModel = ['disabled', 'enableRtl'];\n            this.splitBtn.setProperties(getModel(newProp, otherCompModel));\n            if (!this.isPopupOpen()) {\n                this.changeCssClassProps(newProp.cssClass, oldProp.cssClass);\n                this.changeRtlProps(newProp.enableRtl);\n                return;\n            }\n        }\n        var _loop_1 = function (prop) {\n            switch (prop) {\n                case 'inline':\n                    if (newProp.inline) {\n                        this_1.getWrapper().appendChild(this_1.container);\n                        this_1.splitBtn.destroy();\n                        detach(this_1.element.nextElementSibling);\n                        if (!this_1.container.children.length) {\n                            this_1.createWidget();\n                        }\n                    }\n                    else {\n                        this_1.destroyOtherComp();\n                        this_1.unWireEvents();\n                        this_1.container.innerHTML = '';\n                        this_1.createSplitBtn();\n                    }\n                    break;\n                case 'cssClass': {\n                    this_1.changeCssClassProps(newProp.cssClass, oldProp.cssClass);\n                    var props = newProp.cssClass.split(' ').concat(oldProp.cssClass.split(' '));\n                    props = props.reduce(function (a, b) { if (a.indexOf(b) < 0) {\n                        a.push(b);\n                    } return a; }, []);\n                    var count_1 = 0;\n                    props.forEach(function (cls) {\n                        if (count_1 === 0 &&\n                            (cls === HIDEVALUE || cls === HIDEVALUESWITCH || cls === SHOWVALUE || cls === HIDEHEX || cls === HIDERGBA)) {\n                            var inputWrap = select('.' + INPUTWRAPPER, _this.container);\n                            if (inputWrap) {\n                                remove(select('.' + INPUTWRAPPER, _this.container));\n                            }\n                            _this.createInput();\n                            count_1++;\n                        }\n                    });\n                    break;\n                }\n                case 'enableRtl':\n                    if (this_1.isPicker()) {\n                        this_1.hueSlider.enableRtl = newProp.enableRtl;\n                        if (this_1.enableOpacity) {\n                            this_1.opacitySlider.enableRtl = newProp.enableRtl;\n                        }\n                        this_1.setInputEleProps();\n                    }\n                    this_1.changeRtlProps(newProp.enableRtl);\n                    break;\n                case 'disabled':\n                    this_1.changeDisabledProp(newProp.disabled);\n                    break;\n                case 'value':\n                    if (this_1.value !== oldProp.value) {\n                        this_1.changeValueProp(newProp.value);\n                    }\n                    break;\n                case 'showButtons':\n                    this_1.changeShowBtnProps(newProp.showButtons);\n                    break;\n                case 'mode':\n                    if (newProp.mode === 'Picker') {\n                        this_1.switchToPicker();\n                    }\n                    else {\n                        this_1.switchToPalette();\n                    }\n                    break;\n                case 'modeSwitcher':\n                    this_1.changeModeSwitcherProp(newProp.modeSwitcher);\n                    break;\n                case 'columns':\n                case 'presetColors':\n                    if (!this_1.isPicker()) {\n                        this_1.changePaletteProps();\n                    }\n                    break;\n                case 'noColor':\n                    if (newProp.noColor) {\n                        if (this_1.mode === 'Palette' && !this_1.modeSwitcher) {\n                            this_1.setNoColor();\n                        }\n                    }\n                    else {\n                        this_1.changePaletteProps();\n                    }\n                    break;\n                case 'enableOpacity':\n                    this_1.changeOpacityProps(newProp.enableOpacity);\n                    break;\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            _loop_1(prop);\n        }\n    };\n    /**\n     * Sets the focus to Colorpicker\n     * its native method\n     *\n     * @public\n     * @returns {void}\n     */\n    ColorPicker.prototype.focusIn = function () {\n        this.element.parentElement.focus();\n    };\n    __decorate([\n        Property('#008000ff')\n    ], ColorPicker.prototype, \"value\", void 0);\n    __decorate([\n        Property('')\n    ], ColorPicker.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], ColorPicker.prototype, \"disabled\", void 0);\n    __decorate([\n        Property('Picker')\n    ], ColorPicker.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], ColorPicker.prototype, \"modeSwitcher\", void 0);\n    __decorate([\n        Property(null)\n    ], ColorPicker.prototype, \"presetColors\", void 0);\n    __decorate([\n        Property(true)\n    ], ColorPicker.prototype, \"showButtons\", void 0);\n    __decorate([\n        Property(10)\n    ], ColorPicker.prototype, \"columns\", void 0);\n    __decorate([\n        Property(false)\n    ], ColorPicker.prototype, \"inline\", void 0);\n    __decorate([\n        Property(false)\n    ], ColorPicker.prototype, \"noColor\", void 0);\n    __decorate([\n        Property(false)\n    ], ColorPicker.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        Property(true)\n    ], ColorPicker.prototype, \"enableOpacity\", void 0);\n    __decorate([\n        Property(false)\n    ], ColorPicker.prototype, \"createPopupOnClick\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"select\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"change\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"beforeTileRender\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"beforeOpen\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"open\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"beforeClose\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"beforeModeSwitch\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"onModeSwitch\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"created\", void 0);\n    ColorPicker = __decorate([\n        NotifyPropertyChanges\n    ], ColorPicker);\n    return ColorPicker;\n}(Component));\nexport { ColorPicker };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
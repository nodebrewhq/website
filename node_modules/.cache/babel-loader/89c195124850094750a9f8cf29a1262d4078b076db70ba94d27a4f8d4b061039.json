{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport { isNullOrUndefined, extend, EventHandler, formatUnit, Browser } from '@syncfusion/ej2-base';\nimport { createElement, remove, addClass, removeClass, append, prepend } from '@syncfusion/ej2-base';\nimport { ViewBase } from './view-base';\nimport { VerticalEvent } from '../event-renderer/vertical-view';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * vertical view\n */\nvar VerticalView = /** @class */function (_super) {\n  __extends(VerticalView, _super);\n  function VerticalView(parent) {\n    var _this = _super.call(this, parent) || this;\n    _this.viewClass = 'e-day-view';\n    _this.isInverseTableSelect = true;\n    _this.baseCssClass = 'e-vertical-view';\n    _this.appointment = null;\n    return _this;\n  }\n  VerticalView.prototype.getModuleName = function () {\n    return 'verticalView';\n  };\n  VerticalView.prototype.addEventListener = function () {\n    this.parent.on(event.scrollUiUpdate, this.scrollUiUpdate, this);\n    this.parent.on(event.dataReady, this.renderEvents, this);\n  };\n  VerticalView.prototype.removeEventListener = function () {\n    if (this.parent) {\n      this.parent.off(event.scrollUiUpdate, this.scrollUiUpdate);\n      this.parent.off(event.dataReady, this.renderEvents);\n    }\n  };\n  VerticalView.prototype.renderEvents = function () {\n    this.appointment = this.parent.activeViewOptions.timeScale.enable ? new VerticalEvent(this.parent) : new MonthEvent(this.parent);\n    this.appointment.renderAppointments();\n    this.parent.notify(event.eventsLoaded, {});\n  };\n  VerticalView.prototype.onContentScroll = function (e) {\n    this.parent.removeNewEventElement();\n    var target = e.target;\n    this.parent.notify(event.virtualScroll, e);\n    this.scrollLeftPanel(target);\n    this.scrollTopPanel(target);\n    if (!this.parent.isAdaptive) {\n      this.parent.uiStateValues.top = target.scrollTop;\n    }\n    this.parent.uiStateValues.left = target.scrollLeft;\n    if (!isNullOrUndefined(this.parent.quickPopup) && !this.parent.uiStateValues.isTapHold) {\n      this.parent.quickPopup.quickPopupHide();\n    }\n    this.setPersistence();\n  };\n  VerticalView.prototype.onAdaptiveMove = function (e) {\n    if (this.parent.uiStateValues.action) {\n      e.preventDefault();\n    }\n  };\n  VerticalView.prototype.onAdaptiveScroll = function (e) {\n    if (this.parent && !this.parent.isDestroyed) {\n      this.parent.removeNewEventElement();\n      this.parent.uiStateValues.top = e.target.scrollTop;\n    }\n  };\n  VerticalView.prototype.scrollLeftPanel = function (target) {\n    var leftPanel = this.getLeftPanelElement();\n    if (!isNullOrUndefined(leftPanel)) {\n      leftPanel.scrollTop = target.scrollTop;\n    }\n  };\n  VerticalView.prototype.scrollUiUpdate = function (args) {\n    if (!this.parent) {\n      return;\n    }\n    var dateHeader = this.parent.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n    var headerBarHeight = this.getHeaderBarHeight();\n    var timeCells = this.getLeftPanelElement();\n    var content = this.getScrollableElement();\n    var header = this.getDatesHeaderElement();\n    var scrollerHeight = this.parent.element.offsetHeight - headerBarHeight - header.offsetHeight;\n    this.setContentHeight(content, timeCells, scrollerHeight);\n    this.setColWidth(content);\n    var scrollBarWidth = util.getScrollBarWidth();\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    header.style[args.cssProperties.rtlPadding] = '';\n    var isDateHeaderScroll = this.parent.enableAllDayScroll ? !(content.offsetWidth - content.clientWidth <= dateHeader.offsetWidth - dateHeader.clientWidth && dateHeader.classList.contains('e-all-day-scroll')) : true;\n    if (content.offsetWidth - content.clientWidth > 0 && isDateHeaderScroll) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      header.firstElementChild.style[args.cssProperties.border] = '';\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      header.style[args.cssProperties.padding] = '';\n    }\n    if (!args.isPreventScrollUpdate) {\n      if (this.parent.uiStateValues.isInitial) {\n        if (this.parent.currentView.indexOf('Timeline') > -1) {\n          content.scrollTop = this.parent.uiStateValues.top;\n        }\n        this.scrollToWorkHour();\n        this.parent.uiStateValues.isInitial = false;\n      } else {\n        if (timeCells) {\n          timeCells.scrollTop = this.parent.uiStateValues.top;\n        }\n        content.scrollTop = this.parent.uiStateValues.top;\n        content.scrollLeft = this.parent.uiStateValues.left;\n      }\n    }\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      this.highlightCurrentTime();\n    }\n    this.retainScrollPosition();\n    if (!isNullOrUndefined(timeCells) && !isNullOrUndefined(content) && timeCells.scrollTop !== content.scrollTop) {\n      timeCells.scrollTop = content.scrollTop;\n    }\n  };\n  VerticalView.prototype.setContentHeight = function (element, leftPanelElement, height) {\n    if (this.parent.isAdaptive && !this.isTimelineView()) {\n      element.style.height = this.parent.height === 'auto' ? 'auto' : formatUnit(height);\n    } else {\n      if (!isNullOrUndefined(leftPanelElement)) {\n        leftPanelElement.style.height = this.parent.height === 'auto' ? 'auto' : formatUnit(height - this.getScrollXIndent(element));\n      }\n      element.style.height = this.parent.height === 'auto' ? 'auto' : formatUnit(height);\n    }\n  };\n  VerticalView.prototype.scrollToWorkHour = function () {\n    if (this.parent.workHours.highlight) {\n      var firstWorkHourCell = this.element.querySelector('.' + cls.WORK_HOURS_CLASS);\n      if (firstWorkHourCell) {\n        this.getScrollableElement().scrollTop = firstWorkHourCell.offsetTop;\n        this.parent.uiStateValues.top = firstWorkHourCell.offsetTop;\n        this.parent.uiStateValues.left = 0;\n      }\n    }\n  };\n  VerticalView.prototype.scrollToHour = function (hour, scrollDate) {\n    var date = this.parent.getStartEndTime(hour);\n    if (!isNullOrUndefined(scrollDate)) {\n      var headerElement = this.element.querySelector('.' + cls.HEADER_CELLS_CLASS + '[data-date=\"' + new Date(util.resetTime(scrollDate)).getTime() + '\"]');\n      if (headerElement) {\n        if (this.parent.enableRtl) {\n          var conWrap = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n          this.getScrollableElement().scrollLeft = -(conWrap.offsetWidth - headerElement.offsetLeft - headerElement.offsetWidth);\n        } else {\n          this.getScrollableElement().scrollLeft = headerElement.offsetLeft;\n        }\n      }\n    }\n    if (isNullOrUndefined(date)) {\n      return;\n    }\n    this.getScrollableElement().scrollTop = this.getTopFromDateTime(date);\n  };\n  VerticalView.prototype.scrollToDate = function (scrollDate) {\n    this.scrollToHour(null, scrollDate);\n  };\n  VerticalView.prototype.generateColumnLevels = function () {\n    var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n    var columnLevels = [];\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n      if (this.parent.activeViewOptions.group.hideNonWorkingDays) {\n        while (columnLevels[0].length === 0) {\n          this.parent.setProperties({\n            selectedDate: this.parent.activeView.getNextPreviousDate(this.previousNextAction)\n          }, true);\n          this.parent.activeView.getRenderDates();\n          if (this.parent.headerModule) {\n            this.parent.headerModule.setCalendarDate(this.parent.selectedDate);\n            this.parent.headerModule.updateDateRange();\n          }\n          level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n          columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n        }\n      }\n      if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n        var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        var resStartHour = resourceLevel.resourceData[resourceLevel.resource.startHourField];\n        var resEndHour = resourceLevel.resourceData[resourceLevel.resource.endHourField];\n        var dateSlots = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays, resStartHour, resEndHour);\n        columnLevels = [dateSlots];\n      }\n    } else {\n      columnLevels.push(level);\n    }\n    this.colLevels = columnLevels;\n    return columnLevels;\n  };\n  // eslint-disable-next-line max-len\n  VerticalView.prototype.getDateSlots = function (renderDates, workDays, workStartHour, workEndHour) {\n    if (workStartHour === void 0) {\n      workStartHour = this.parent.workHours.start;\n    }\n    if (workEndHour === void 0) {\n      workEndHour = this.parent.workHours.end;\n    }\n    var dateCol = [];\n    var start = this.parent.getStartEndTime(workStartHour);\n    var end = this.parent.getStartEndTime(workEndHour);\n    for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n      var col = renderDates_1[_i];\n      var classList = [cls.HEADER_CELLS_CLASS];\n      if (this.isCurrentDate(col)) {\n        classList.push(cls.CURRENT_DAY_CLASS);\n      }\n      dateCol.push({\n        date: col,\n        type: 'dateHeader',\n        className: classList,\n        colSpan: 1,\n        workDays: workDays,\n        startHour: new Date(+start),\n        endHour: new Date(+end)\n      });\n    }\n    return dateCol;\n  };\n  VerticalView.prototype.isWorkHourRange = function (date) {\n    return this.getStartHour().getTime() <= date.getTime() && this.getEndHour().getTime() >= date.getTime();\n  };\n  VerticalView.prototype.highlightCurrentTime = function () {\n    var _this = this;\n    if (this.parent.activeViewOptions.headerRows.length > 0 && this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n      return;\n    }\n    var currentDate = this.parent.getCurrentTime();\n    if (this.parent.showTimeIndicator && this.isWorkHourRange(currentDate)) {\n      var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n      if (currentDateIndex.length > 0) {\n        var workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n        if (workCells.length > 0) {\n          this.changeCurrentTimePosition();\n        }\n        if (isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n          var interval = util.MS_PER_MINUTE - (currentDate.getSeconds() * 1000 + currentDate.getMilliseconds());\n          if (interval <= util.MS_PER_MINUTE - 1000) {\n            window.setTimeout(function () {\n              if (!isNullOrUndefined(_this.currentTimeIndicatorTimer)) {\n                _this.clearCurrentTimeIndicatorTimer();\n                _this.changeCurrentTimePosition();\n                _this.updateCurrentTimeIndicatorTimer();\n              }\n            }, interval);\n          }\n          this.updateCurrentTimeIndicatorTimer();\n        }\n      } else {\n        this.clearCurrentTimeIndicatorTimer();\n      }\n    } else {\n      this.clearCurrentTimeIndicatorTimer();\n    }\n  };\n  VerticalView.prototype.getCurrentTimeIndicatorIndex = function () {\n    var currentDateIndex = [];\n    if (!isNullOrUndefined(this.parent.resourceBase) && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      var count = 0;\n      var currentDate = util.resetTime(this.parent.getCurrentTime());\n      if (this.parent.virtualScrollModule && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.activeViewOptions.group.byDate) {\n        for (var _i = 0, _a = this.parent.resourceBase.expandedResources; _i < _a.length; _i++) {\n          var resource = _a[_i];\n          if (util.resetTime(resource.date).getTime() === currentDate.getTime()) {\n            currentDateIndex.push(count);\n          }\n          count += 1;\n        }\n      } else {\n        for (var _b = 0, _c = this.parent.resourceBase.renderedResources; _b < _c.length; _b++) {\n          var resource = _c[_b];\n          var index = this.parent.getIndexOfDate(resource.renderDates, currentDate);\n          if (index >= 0) {\n            var resIndex = this.parent.activeViewOptions.group.byDate ? this.parent.resourceBase.lastResourceLevel.length * index + count : count + index;\n            currentDateIndex.push(resIndex);\n          }\n          count += this.parent.activeViewOptions.group.byDate ? 1 : resource.renderDates.length;\n        }\n      }\n    } else {\n      var renderDates = this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0 ? this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates : this.renderDates;\n      var index = this.parent.getIndexOfDate(renderDates, util.resetTime(this.parent.getCurrentTime()));\n      if (index >= 0) {\n        currentDateIndex.push(index);\n      }\n    }\n    return currentDateIndex;\n  };\n  VerticalView.prototype.clearCurrentTimeIndicatorTimer = function () {\n    if (!isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n      window.clearInterval(this.currentTimeIndicatorTimer);\n      this.currentTimeIndicatorTimer = null;\n      this.removeCurrentTimeIndicatorElements();\n    }\n  };\n  VerticalView.prototype.updateCurrentTimeIndicatorTimer = function () {\n    var _this = this;\n    this.currentTimeIndicatorTimer = window.setInterval(function () {\n      _this.changeCurrentTimePosition();\n    }, util.MS_PER_MINUTE);\n  };\n  VerticalView.prototype.removeCurrentTimeIndicatorElements = function () {\n    var queryString = '.' + cls.PREVIOUS_TIMELINE_CLASS + ',.' + cls.CURRENT_TIMELINE_CLASS + ',.' + cls.CURRENT_TIME_CLASS;\n    var timeIndicator = [].slice.call(this.element.querySelectorAll(queryString));\n    for (var _i = 0, timeIndicator_1 = timeIndicator; _i < timeIndicator_1.length; _i++) {\n      var indicator = timeIndicator_1[_i];\n      remove(indicator);\n    }\n  };\n  VerticalView.prototype.changeCurrentTimePosition = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n    this.removeCurrentTimeIndicatorElements();\n    var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n    var firstRow = this.parent.getContentTable().rows[0];\n    var top = this.getTopFromDateTime(this.parent.getCurrentTime());\n    var topInPx = formatUnit(top);\n    var rowIndex = Math.floor(top / firstRow.cells[0].offsetHeight);\n    var timeCellsWrap = this.getLeftPanelElement();\n    var timeTrs = [].slice.call(timeCellsWrap.querySelectorAll('tr'));\n    if (isNullOrUndefined(rowIndex) || isNaN(rowIndex) || rowIndex === timeTrs.length) {\n      return;\n    }\n    var curTimeWrap = [].slice.call(this.element.querySelectorAll('.' + cls.TIMELINE_WRAPPER_CLASS));\n    for (var i = 0, length_1 = currentDateIndex[0]; i < length_1; i++) {\n      curTimeWrap[parseInt(i.toString(), 10)].appendChild(createElement('div', {\n        className: cls.PREVIOUS_TIMELINE_CLASS,\n        styles: 'top:' + topInPx\n      }));\n    }\n    for (var _i = 0, currentDateIndex_1 = currentDateIndex; _i < currentDateIndex_1.length; _i++) {\n      var day = currentDateIndex_1[_i];\n      curTimeWrap[parseInt(day.toString(), 10)].appendChild(createElement('div', {\n        className: cls.CURRENT_TIMELINE_CLASS,\n        styles: 'top:' + topInPx\n      }));\n    }\n    var currentTimeEle = createElement('div', {\n      innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n      className: cls.CURRENT_TIME_CLASS,\n      styles: 'top:' + topInPx\n    });\n    if (rowIndex <= timeTrs.length) {\n      removeClass(timeCellsWrap.querySelectorAll('.' + cls.HIDE_CHILDS_CLASS), cls.HIDE_CHILDS_CLASS);\n      if (timeTrs[parseInt(rowIndex.toString(), 10)]) {\n        addClass([timeTrs[parseInt(rowIndex.toString(), 10)].lastElementChild], cls.HIDE_CHILDS_CLASS);\n      }\n      prepend([currentTimeEle], timeCellsWrap);\n      currentTimeEle.style.top = formatUnit(currentTimeEle.offsetTop - currentTimeEle.offsetHeight / 2);\n    }\n  };\n  VerticalView.prototype.getTopFromDateTime = function (date) {\n    var startHour = this.getStartHour();\n    var diffInMinutes = (date.getHours() - startHour.getHours()) * 60 + (date.getMinutes() - startHour.getMinutes());\n    return diffInMinutes * this.getWorkCellHeight() * this.parent.activeViewOptions.timeScale.slotCount / this.parent.activeViewOptions.timeScale.interval;\n  };\n  VerticalView.prototype.getWorkCellHeight = function () {\n    return parseFloat(util.getElementHeight(this.element.querySelector('.' + cls.WORK_CELLS_CLASS)).toFixed(2));\n  };\n  VerticalView.prototype.getTdContent = function (date, type, groupIndex) {\n    var cntEle;\n    var wrapper = createElement('div');\n    var templateName = '';\n    var templateId = this.parent.element.id + '_';\n    switch (type) {\n      case 'dateHeader':\n        if (this.parent.activeViewOptions.dateHeaderTemplate) {\n          templateName = 'dateHeaderTemplate';\n          var args = {\n            date: date,\n            type: type\n          };\n          var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n          cntEle = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false, undefined, undefined, this.parent.root));\n        } else {\n          wrapper.innerHTML = this.parent.activeView.isTimelineView() ? \"<span class=\\\"e-header-date e-navigate\\\">\" + this.getTimelineDate(date) + \"</span>\" : \"<div class=\\\"e-header-day\\\">\" + util.capitalizeFirstWord(this.getDayName(date), 'single') + \"</div>\" + (\"<div class=\\\"e-header-date e-navigate\\\" role=\\\"link\\\">\" + this.getDate(date) + \"</div>\");\n          cntEle = [].slice.call(wrapper.childNodes);\n        }\n        break;\n      case 'majorSlot':\n        if (this.parent.activeViewOptions.timeScale.majorSlotTemplate) {\n          templateName = 'majorSlotTemplate';\n          var args = {\n            date: date,\n            type: type\n          };\n          cntEle = [].slice.call(this.parent.getMajorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false, undefined, undefined, this.parent.root));\n        } else {\n          wrapper.innerHTML = \"<span>\" + this.getTime(date) + \"</span>\";\n          cntEle = [].slice.call(wrapper.childNodes);\n        }\n        break;\n      case 'minorSlot':\n        if (this.parent.activeViewOptions.timeScale.minorSlotTemplate) {\n          templateName = 'minorSlotTemplate';\n          var args = {\n            date: date,\n            type: type\n          };\n          cntEle = [].slice.call(this.parent.getMinorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false, undefined, undefined, this.parent.root));\n        } else {\n          cntEle = [].slice.call(wrapper.childNodes);\n        }\n        break;\n      case 'alldayCells':\n        if (this.parent.activeViewOptions.cellTemplate) {\n          var viewName = this.parent.activeViewOptions.cellTemplateName;\n          templateName = 'cellTemplate';\n          var args = {\n            date: date,\n            type: type,\n            groupIndex: groupIndex\n          };\n          cntEle = [].slice.call(this.parent.getCellTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false, undefined, undefined, this.parent.root));\n        }\n        break;\n    }\n    return cntEle;\n  };\n  VerticalView.prototype.refreshHeader = function () {\n    remove(this.element.querySelector('tbody tr'));\n    this.renderHeader();\n    this.parent.notify(event.contentReady, {});\n    var dateHeader = this.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n    if (dateHeader) {\n      dateHeader.scrollLeft = this.parent.uiStateValues.left;\n    }\n  };\n  VerticalView.prototype.renderLayout = function (type) {\n    this.setPanel(createElement('div', {\n      className: cls.TABLE_WRAP_CLASS\n    }));\n    var clsList = [this.baseCssClass, this.viewClass];\n    clsList.push(type);\n    if (this.parent.activeViewOptions.group.byDate) {\n      clsList.push('e-by-date');\n    }\n    if (!this.parent.activeViewOptions.timeScale.enable) {\n      addClass([this.element], [cls.TIMESCALE_DISABLE, this.viewClass]);\n    }\n    if (this.parent.activeViewOptions.allowVirtualScrolling && !this.parent.uiStateValues.isGroupAdaptive) {\n      clsList.push(cls.VIRTUAL_SCROLL_CLASS);\n    }\n    if (this.parent.rowAutoHeight && this.parent.eventSettings.ignoreWhitespace) {\n      clsList.push(cls.IGNORE_WHITESPACE);\n    }\n    this.renderPanel(type);\n    addClass([this.element], clsList);\n    this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n    this.element.querySelector('table').setAttribute('role', 'presentation');\n    this.colLevels = this.generateColumnLevels();\n    this.renderHeader();\n    this.renderContent();\n    if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n      this.renderResourceMobileLayout();\n    }\n    this.parent.notify(event.contentReady, {});\n  };\n  VerticalView.prototype.renderHeader = function () {\n    var tr = createElement('tr');\n    var dateTd = createElement('td');\n    dateTd.appendChild(this.renderDatesHeader());\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      var indentTd = createElement('td', {\n        className: cls.LEFT_INDENT_CLASS\n      });\n      indentTd.appendChild(this.renderLeftIndent());\n      tr.appendChild(indentTd);\n    }\n    tr.appendChild(dateTd);\n    prepend([tr], this.element.querySelector('tbody'));\n  };\n  VerticalView.prototype.renderContent = function () {\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      this.parent.resourceBase.renderedResources = extend([], this.parent.resourceBase.lastResourceLevel, null, true);\n    }\n    var tr = createElement('tr');\n    var workTd = createElement('td');\n    if (this.parent.isAdaptive) {\n      workTd.setAttribute('colspan', this.parent.activeViewOptions.timeScale.enable ? '2' : '1');\n      var scrollContainer = createElement('div', {\n        className: cls.SCROLL_CONTAINER_CLASS\n      });\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        scrollContainer.appendChild(this.renderTimeCells());\n      }\n      scrollContainer.appendChild(this.renderContentArea());\n      workTd.appendChild(scrollContainer);\n      EventHandler.add(scrollContainer, 'scroll', this.onAdaptiveScroll, this);\n      EventHandler.add(scrollContainer, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n      tr.appendChild(workTd);\n    } else {\n      var levels = this.colLevels.slice(0);\n      if (this.parent.virtualScrollModule) {\n        this.resetColLevels();\n      }\n      var wrap = this.renderContentArea();\n      workTd.appendChild(wrap);\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        var timesTd = createElement('td');\n        timesTd.appendChild(this.renderTimeCells());\n        tr.appendChild(timesTd);\n      }\n      tr.appendChild(workTd);\n      if (this.parent.virtualScrollModule) {\n        this.colLevels = levels;\n        this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n      }\n    }\n    this.element.querySelector('tbody').appendChild(tr);\n  };\n  VerticalView.prototype.renderLeftIndent = function () {\n    var wrap = createElement('div', {\n      className: cls.LEFT_INDENT_WRAP_CLASS\n    });\n    var tbl = this.createTableLayout();\n    var trEle = createElement('tr');\n    var rowCount = this.colLevels.length;\n    var nth;\n    for (var i = 0; i < rowCount; i++) {\n      var ntr_1 = trEle.cloneNode();\n      var data_1 = {\n        className: [this.colLevels[parseInt(i.toString(), 10)][0] && this.colLevels[parseInt(i.toString(), 10)][0].className[0]],\n        type: 'emptyCells'\n      };\n      if (this.parent.activeViewOptions.showWeekNumber && data_1.className.indexOf(cls.HEADER_CELLS_CLASS) !== -1) {\n        data_1.className.push(cls.WEEK_NUMBER_CLASS);\n        var weekNo = this.parent.getWeekNumberContent(this.renderDates);\n        data_1.template = [createElement('span', {\n          innerHTML: '' + weekNo,\n          attrs: {\n            title: this.parent.localeObj.getConstant('week') + ' ' + weekNo\n          }\n        })];\n      }\n      nth = this.createTd(data_1);\n      this.parent.renderHeaderIndentTemplate(data_1, nth);\n      ntr_1.appendChild(nth);\n      tbl.querySelector('tbody').appendChild(ntr_1);\n    }\n    var ntr = trEle.cloneNode();\n    var appointmentExpandCollapse = createElement('div', {\n      attrs: {\n        'tabindex': '0',\n        'role': 'list',\n        title: this.parent.localeObj.getConstant('expandAllDaySection'),\n        'aria-disabled': 'false',\n        'aria-label': this.parent.localeObj.getConstant('expandAllDaySection')\n      },\n      className: cls.ALLDAY_APPOINTMENT_SECTION_CLASS + ' ' + cls.APPOINTMENT_ROW_EXPAND_CLASS + ' ' + cls.ICON + ' ' + cls.DISABLE_CLASS\n    });\n    var data = {\n      className: [cls.ALLDAY_CELLS_CLASS],\n      type: 'emptyCells'\n    };\n    nth = this.createTd(data);\n    nth.appendChild(appointmentExpandCollapse);\n    this.parent.renderHeaderIndentTemplate(data, nth);\n    ntr.appendChild(nth);\n    tbl.querySelector('tbody').appendChild(ntr);\n    wrap.appendChild(tbl);\n    return wrap;\n  };\n  VerticalView.prototype.renderDatesHeader = function () {\n    var container = createElement('div', {\n      className: cls.DATE_HEADER_CONTAINER_CLASS\n    });\n    var wrap = createElement('div', {\n      className: cls.DATE_HEADER_WRAP_CLASS\n    });\n    container.appendChild(wrap);\n    var tbl = this.createTableLayout();\n    var trEle = createElement('tr', {\n      className: cls.HEADER_ROW_CLASS\n    });\n    var rowCount = this.colLevels.length;\n    var lastLevel = this.colLevels[rowCount - 1];\n    for (var i = 0; i < rowCount; i++) {\n      var ntr = trEle.cloneNode();\n      var level = this.colLevels[parseInt(i.toString(), 10)];\n      for (var j = 0; j < level.length; j++) {\n        ntr.appendChild(this.createTd(level[parseInt(j.toString(), 10)]));\n      }\n      tbl.querySelector('tbody').appendChild(ntr);\n    }\n    this.createAllDayRow(tbl, lastLevel);\n    this.createColGroup(tbl, lastLevel);\n    wrap.appendChild(tbl);\n    return container;\n  };\n  VerticalView.prototype.createAllDayRow = function (table, tdData) {\n    var ntr = createElement('tr', {\n      className: cls.ALLDAY_ROW_CLASS\n    });\n    for (var j = 0; j < tdData.length; j++) {\n      var td = extend({}, tdData[parseInt(j.toString(), 10)]);\n      td.className = [cls.ALLDAY_CELLS_CLASS];\n      td.type = 'alldayCells';\n      var ntd = this.createTd(td);\n      ntd.setAttribute('data-date', td.date.getTime().toString());\n      if (!isNullOrUndefined(td.groupIndex)) {\n        ntd.setAttribute('data-group-index', '' + td.groupIndex);\n      } else if (this.parent.uiStateValues.isGroupAdaptive) {\n        ntd.setAttribute('data-group-index', '' + this.parent.uiStateValues.groupIndex);\n      }\n      this.wireCellEvents(ntd);\n      ntr.appendChild(ntd);\n    }\n    table.querySelector('tbody').appendChild(ntr);\n    var thead = createElement('thead');\n    thead.appendChild(this.parent.eventBase.createEventWrapper('allDay'));\n    prepend([thead], table);\n  };\n  VerticalView.prototype.createTd = function (td) {\n    var tdEle = createElement('td');\n    this.addAttributes(td, tdEle);\n    if (td.date && td.type) {\n      var ele = this.getTdContent(td.date, td.type, td.groupIndex);\n      if (ele && ele.length) {\n        append(ele, tdEle);\n      }\n    }\n    if (!this.parent.isMinMaxDate(util.resetTime(new Date('' + td.date)))) {\n      addClass([tdEle], cls.DISABLE_DATES);\n    }\n    if (td.type === 'resourceHeader') {\n      this.setResourceHeaderContent(tdEle, td);\n    }\n    if (td.type === 'dateHeader' && td.className.indexOf(cls.HEADER_CELLS_CLASS) >= 0) {\n      tdEle.setAttribute('data-date', td.date.getTime().toString());\n      if (!isNullOrUndefined(td.groupIndex)) {\n        tdEle.setAttribute('data-group-index', '' + td.groupIndex);\n      }\n      this.wireMouseEvents(tdEle);\n    }\n    var args = {\n      elementType: td.type,\n      element: tdEle,\n      date: td.date,\n      groupIndex: td.groupIndex\n    };\n    this.parent.trigger(event.renderCell, args);\n    return tdEle;\n  };\n  VerticalView.prototype.wireCellEvents = function (element) {\n    EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n    this.wireMouseEvents(element);\n  };\n  VerticalView.prototype.wireMouseEvents = function (element) {\n    EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n    if (!this.parent.isAdaptive) {\n      EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n    }\n  };\n  VerticalView.prototype.renderTimeCells = function () {\n    var _this = this;\n    var wrap = createElement('div', {\n      className: cls.TIME_CELLS_WRAP_CLASS\n    });\n    var tbl = this.createTableLayout();\n    var trEle = createElement('tr');\n    var handler = function (r) {\n      r.type = r.first ? 'majorSlot' : 'minorSlot';\n      r.className = r.last ? [cls.TIME_CELLS_CLASS, cls.TIME_SLOT_CLASS] : [cls.TIME_SLOT_CLASS];\n      var ntr = trEle.cloneNode();\n      var data = {\n        date: r.date,\n        type: r.type,\n        className: r.className\n      };\n      ntr.appendChild(_this.createTd(data));\n      tbl.querySelector('tbody').appendChild(ntr);\n      return r;\n    };\n    this.getTimeSlotRows(handler);\n    wrap.appendChild(tbl);\n    return wrap;\n  };\n  VerticalView.prototype.renderContentArea = function () {\n    var wrap = createElement('div', {\n      className: cls.CONTENT_WRAP_CLASS\n    });\n    var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n    this.setAriaAttributes(tbl);\n    this.addAutoHeightClass(tbl);\n    this.renderContentTable(tbl);\n    this.createColGroup(tbl, this.colLevels.slice(-1)[0]);\n    wrap.appendChild(tbl);\n    this.wireCellEvents(tbl.querySelector('tbody'));\n    EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n    EventHandler.add(wrap, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n    return wrap;\n  };\n  VerticalView.prototype.renderContentTable = function (table) {\n    var tBody = table.querySelector('tbody');\n    append(this.getContentRows(), tBody);\n    this.renderContentTableHeader(table);\n  };\n  VerticalView.prototype.getContentRows = function () {\n    var _this = this;\n    var rows = [];\n    var tr = createElement('tr');\n    var td = createElement('td', {\n      attrs: {\n        'aria-selected': 'false'\n      }\n    });\n    var handler = function (r) {\n      var ntr = tr.cloneNode();\n      for (var _i = 0, _a = _this.colLevels[_this.colLevels.length - 1]; _i < _a.length; _i++) {\n        var tdData = _a[_i];\n        var ntd = _this.createContentTd(tdData, r, td);\n        ntr.appendChild(ntd);\n      }\n      rows.push(ntr);\n      return r;\n    };\n    this.getTimeSlotRows(handler);\n    return rows;\n  };\n  VerticalView.prototype.createContentTd = function (tdData, r, td) {\n    var ntd = td.cloneNode();\n    if (tdData.colSpan) {\n      ntd.setAttribute('colspan', tdData.colSpan.toString());\n    }\n    var clsName = this.getContentTdClass(r);\n    var cellDate = util.resetTime(tdData.date);\n    if (!this.parent.isMinMaxDate(cellDate)) {\n      clsName.push(cls.DISABLE_DATES);\n    }\n    cellDate = new Date(cellDate.setHours(r.date.getHours(), r.date.getMinutes(), r.date.getSeconds(), r.date.getMilliseconds()));\n    var type = 'workCells';\n    if (tdData.className.indexOf(cls.RESOURCE_PARENT_CLASS) !== -1) {\n      clsName.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n      type = 'resourceGroupCells';\n    }\n    if (this.parent.workHours.highlight && (this.parent.activeViewOptions.timeScale.enable && this.isWorkHour(cellDate, tdData.startHour, tdData.endHour, tdData.workDays) || !this.parent.activeViewOptions.timeScale.enable && this.isWorkDay(cellDate, tdData.workDays))) {\n      clsName.push(cls.WORK_HOURS_CLASS);\n    }\n    addClass([ntd], clsName);\n    if (this.parent.activeViewOptions.cellTemplate) {\n      var args_1 = {\n        date: cellDate,\n        type: type,\n        groupIndex: tdData.groupIndex\n      };\n      var scheduleId = this.parent.element.id + '_';\n      var viewName = this.parent.activeViewOptions.cellTemplateName;\n      var templateId = scheduleId + viewName + 'cellTemplate';\n      var tooltipTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false, undefined, undefined, this.parent.root));\n      append(tooltipTemplate, ntd);\n    }\n    ntd.setAttribute('data-date', cellDate.getTime().toString());\n    var skeleton = 'full';\n    if (!this.parent.activeViewOptions.timeScale.enable) {\n      var announcementText = this.parent.globalize.formatDate(tdData.date, {\n        skeleton: skeleton,\n        calendar: this.parent.getCalendarMode()\n      });\n      ntd.setAttribute('aria-label', announcementText);\n    } else {\n      var startDateText = this.parent.globalize.formatDate(cellDate, {\n        type: 'dateTime',\n        skeleton: skeleton,\n        calendar: this.parent.getCalendarMode()\n      });\n      var endDateText = this.parent.globalize.formatDate(this.getEndDateFromStartDate(cellDate), {\n        type: 'dateTime',\n        skeleton: skeleton,\n        calendar: this.parent.getCalendarMode()\n      });\n      ntd.setAttribute('aria-label', startDateText + ' ' + this.parent.localeObj.getConstant('endAt') + ' ' + endDateText);\n    }\n    if (!isNullOrUndefined(tdData.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n      var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : tdData.groupIndex;\n      ntd.setAttribute('data-group-index', '' + groupIndex);\n    }\n    var args = {\n      elementType: type,\n      element: ntd,\n      date: cellDate,\n      groupIndex: tdData.groupIndex\n    };\n    this.parent.trigger(event.renderCell, args);\n    return ntd;\n  };\n  VerticalView.prototype.getContentTdClass = function (r) {\n    return r.last ? [cls.WORK_CELLS_CLASS] : [cls.WORK_CELLS_CLASS, cls.ALTERNATE_CELLS_CLASS];\n  };\n  VerticalView.prototype.renderContentTableHeader = function (table) {\n    var thead = createElement('thead');\n    thead.appendChild(this.parent.eventBase.createEventWrapper());\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      thead.appendChild(this.parent.eventBase.createEventWrapper('timeIndicator'));\n    }\n    prepend([thead], table);\n  };\n  VerticalView.prototype.getScrollableElement = function () {\n    if (this.parent.isAdaptive && !this.isTimelineView()) {\n      return this.element.querySelector('.' + cls.SCROLL_CONTAINER_CLASS);\n    } else {\n      return this.getContentAreaElement();\n    }\n  };\n  VerticalView.prototype.getLeftPanelElement = function () {\n    return this.element.querySelector('.' + cls.TIME_CELLS_WRAP_CLASS);\n  };\n  VerticalView.prototype.getEndDateFromStartDate = function (start) {\n    var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n    var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n    var end = new Date(start.getTime());\n    end.setMilliseconds(end.getMilliseconds() + msInterval);\n    return end;\n  };\n  VerticalView.prototype.getStartEndHours = function (startEndTime) {\n    if (!isNullOrUndefined(startEndTime) && startEndTime !== '') {\n      var startEndDate = new Date(2000, 0, 0, 0);\n      var timeString = startEndTime.split(':');\n      if (timeString.length === 2) {\n        startEndDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0);\n      }\n      return startEndDate;\n    }\n    return new Date(2000, 0, 0, 0);\n  };\n  VerticalView.prototype.getTimeSlotRows = function (handler) {\n    var rows = [];\n    var startHour = this.getStartEndHours(this.parent.activeViewOptions.startHour);\n    var endHour = this.getStartEndHours(this.parent.activeViewOptions.endHour);\n    var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n    var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n    var length = Math.round(util.MS_PER_DAY / msInterval);\n    var msStartHour = startHour.getTime();\n    var msEndHour = endHour.getTime();\n    if (msStartHour !== msEndHour) {\n      var milliSeconds = startHour.getTimezoneOffset() !== endHour.getTimezoneOffset() ? msEndHour - msStartHour - 3600000 : msEndHour - msStartHour;\n      length = Math.round(milliSeconds / msInterval);\n    }\n    if (!this.parent.activeViewOptions.timeScale.enable) {\n      length = 1;\n    }\n    var start = this.parent.getStartEndTime(this.parent.workHours.start);\n    var end = this.parent.getStartEndTime(this.parent.workHours.end);\n    for (var i = 0; i < length; i++) {\n      var dt = new Date(msStartHour + msInterval * i);\n      if (util.isDaylightSavingTime(dt) || new Date(msStartHour).getTimezoneOffset() !== dt.getTimezoneOffset()) {\n        var timeOffset = new Date(msStartHour).getTimezoneOffset() - dt.getTimezoneOffset();\n        dt = new Date(dt.getTime() - 1000 * 60 * timeOffset);\n      }\n      var majorTickDivider = i % (msMajorInterval / msInterval);\n      var row = {\n        date: new Date('' + dt),\n        startHour: start,\n        endHour: end,\n        first: majorTickDivider === 0,\n        middle: majorTickDivider < this.parent.activeViewOptions.timeScale.slotCount - 1,\n        last: majorTickDivider === this.parent.activeViewOptions.timeScale.slotCount - 1,\n        type: ''\n      };\n      if (handler) {\n        handler(row);\n      }\n      rows.push(row);\n    }\n    return rows;\n  };\n  VerticalView.prototype.getAdjustedDate = function (startTime) {\n    if (!this.parent.activeViewOptions.timeScale.enable) {\n      return new Date(startTime.setHours(0, 0, 0, 0));\n    } else {\n      var timeSlots = this.getTimeSlotRows();\n      var startDate = new Date(new Date(timeSlots[0].date.getTime()).setHours(startTime.getHours(), startTime.getMinutes(), startTime.getMilliseconds()));\n      for (var i = 0; i < timeSlots.length; i++) {\n        if (timeSlots[parseInt(i.toString(), 10)].date.getTime() > startDate.getTime()) {\n          startTime.setHours(timeSlots[i - 1].date.getHours(), timeSlots[i - 1].date.getMinutes(), timeSlots[i - 1].date.getMilliseconds());\n          return new Date(startTime);\n        }\n      }\n    }\n    return null;\n  };\n  VerticalView.prototype.destroy = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n    this.clearCurrentTimeIndicatorTimer();\n    if (this.element) {\n      if (this.appointment) {\n        this.appointment.destroy();\n        this.appointment = null;\n      }\n      var contentScrollableEle = this.getContentAreaElement();\n      if (contentScrollableEle) {\n        EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n        EventHandler.remove(contentScrollableEle, Browser.touchMoveEvent, this.onAdaptiveMove);\n      }\n      if (this.parent.resourceBase) {\n        this.parent.resourceBase.destroy();\n      }\n      if (this.parent.scheduleTouchModule) {\n        this.parent.scheduleTouchModule.resetValues();\n      }\n      _super.prototype.destroy.call(this);\n    }\n  };\n  return VerticalView;\n}(ViewBase);\nexport { VerticalView };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","isNullOrUndefined","extend","EventHandler","formatUnit","Browser","createElement","remove","addClass","removeClass","append","prepend","ViewBase","VerticalEvent","MonthEvent","util","event","cls","VerticalView","_super","parent","_this","call","viewClass","isInverseTableSelect","baseCssClass","appointment","getModuleName","addEventListener","on","scrollUiUpdate","dataReady","renderEvents","removeEventListener","off","activeViewOptions","timeScale","enable","renderAppointments","notify","eventsLoaded","onContentScroll","e","removeNewEventElement","target","virtualScroll","scrollLeftPanel","scrollTopPanel","isAdaptive","uiStateValues","top","scrollTop","left","scrollLeft","quickPopup","isTapHold","quickPopupHide","setPersistence","onAdaptiveMove","action","preventDefault","onAdaptiveScroll","isDestroyed","leftPanel","getLeftPanelElement","args","dateHeader","element","querySelector","DATE_HEADER_WRAP_CLASS","headerBarHeight","getHeaderBarHeight","timeCells","content","getScrollableElement","header","getDatesHeaderElement","scrollerHeight","offsetHeight","setContentHeight","setColWidth","scrollBarWidth","getScrollBarWidth","firstElementChild","style","cssProperties","rtlBorder","rtlPadding","isDateHeaderScroll","enableAllDayScroll","offsetWidth","clientWidth","classList","contains","border","padding","isPreventScrollUpdate","isInitial","currentView","indexOf","scrollToWorkHour","highlightCurrentTime","retainScrollPosition","leftPanelElement","height","isTimelineView","getScrollXIndent","workHours","highlight","firstWorkHourCell","WORK_HOURS_CLASS","offsetTop","scrollToHour","hour","scrollDate","date","getStartEndTime","headerElement","HEADER_CELLS_CLASS","Date","resetTime","getTime","enableRtl","conWrap","CONTENT_TABLE_CLASS","offsetLeft","getTopFromDateTime","scrollToDate","generateColumnLevels","level","getDateSlots","renderDates","workDays","columnLevels","group","resources","length","resourceBase","generateResourceLevels","hideNonWorkingDays","setProperties","selectedDate","activeView","getNextPreviousDate","previousNextAction","getRenderDates","headerModule","setCalendarDate","updateDateRange","isGroupAdaptive","lastResourceLevel","resourceLevel","groupIndex","resStartHour","resourceData","resource","startHourField","resEndHour","endHourField","dateSlots","push","colLevels","workStartHour","workEndHour","start","end","dateCol","_i","renderDates_1","col","isCurrentDate","CURRENT_DAY_CLASS","type","className","colSpan","startHour","endHour","isWorkHourRange","getStartHour","getEndHour","headerRows","slice","option","currentDate","getCurrentTime","showTimeIndicator","currentDateIndex","getCurrentTimeIndicatorIndex","workCells","querySelectorAll","WORK_CELLS_CLASS","changeCurrentTimePosition","currentTimeIndicatorTimer","interval","MS_PER_MINUTE","getSeconds","getMilliseconds","window","setTimeout","clearCurrentTimeIndicatorTimer","updateCurrentTimeIndicatorTimer","count","virtualScrollModule","allowVirtualScrolling","byDate","_a","expandedResources","_b","_c","renderedResources","index","getIndexOfDate","resIndex","clearInterval","removeCurrentTimeIndicatorElements","setInterval","queryString","PREVIOUS_TIMELINE_CLASS","CURRENT_TIMELINE_CLASS","CURRENT_TIME_CLASS","timeIndicator","timeIndicator_1","indicator","firstRow","getContentTable","rows","topInPx","rowIndex","Math","floor","cells","timeCellsWrap","timeTrs","isNaN","curTimeWrap","TIMELINE_WRAPPER_CLASS","i","length_1","parseInt","toString","appendChild","styles","currentDateIndex_1","day","currentTimeEle","innerHTML","getTimeString","HIDE_CHILDS_CLASS","lastElementChild","diffInMinutes","getHours","getMinutes","getWorkCellHeight","slotCount","parseFloat","getElementHeight","toFixed","getTdContent","cntEle","wrapper","templateName","templateId","id","dateHeaderTemplate","viewName","dateHeaderTemplateName","getDateHeaderTemplate","undefined","root","getTimelineDate","capitalizeFirstWord","getDayName","getDate","childNodes","majorSlotTemplate","getMajorSlotTemplate","minorSlotTemplate","getMinorSlotTemplate","cellTemplate","cellTemplateName","getCellTemplate","refreshHeader","renderHeader","contentReady","renderLayout","setPanel","TABLE_WRAP_CLASS","clsList","TIMESCALE_DISABLE","VIRTUAL_SCROLL_CLASS","rowAutoHeight","eventSettings","ignoreWhitespace","IGNORE_WHITESPACE","renderPanel","createTableLayout","OUTER_TABLE_CLASS","setAttribute","renderContent","RESOURCE_TOOLBAR_CONTAINER","renderResourceMobileLayout","tr","dateTd","renderDatesHeader","indentTd","LEFT_INDENT_CLASS","renderLeftIndent","workTd","scrollContainer","SCROLL_CONTAINER_CLASS","renderTimeCells","renderContentArea","add","touchMoveEvent","levels","resetColLevels","wrap","timesTd","renderVirtualTrack","LEFT_INDENT_WRAP_CLASS","tbl","trEle","rowCount","nth","ntr_1","cloneNode","data_1","showWeekNumber","WEEK_NUMBER_CLASS","weekNo","getWeekNumberContent","template","attrs","title","localeObj","getConstant","createTd","renderHeaderIndentTemplate","ntr","appointmentExpandCollapse","ALLDAY_APPOINTMENT_SECTION_CLASS","APPOINTMENT_ROW_EXPAND_CLASS","ICON","DISABLE_CLASS","data","ALLDAY_CELLS_CLASS","container","DATE_HEADER_CONTAINER_CLASS","HEADER_ROW_CLASS","lastLevel","j","createAllDayRow","createColGroup","table","tdData","ALLDAY_ROW_CLASS","td","ntd","wireCellEvents","thead","eventBase","createEventWrapper","tdEle","addAttributes","ele","isMinMaxDate","DISABLE_DATES","setResourceHeaderContent","wireMouseEvents","elementType","trigger","renderCell","workCellAction","cellMouseDown","cellClick","cellDblClick","TIME_CELLS_WRAP_CLASS","handler","r","first","last","TIME_CELLS_CLASS","TIME_SLOT_CLASS","getTimeSlotRows","CONTENT_WRAP_CLASS","setAriaAttributes","addAutoHeightClass","renderContentTable","tBody","getContentRows","renderContentTableHeader","createContentTd","clsName","getContentTdClass","cellDate","setHours","RESOURCE_PARENT_CLASS","RESOURCE_GROUP_CELLS_CLASS","isWorkHour","isWorkDay","args_1","scheduleId","tooltipTemplate","skeleton","announcementText","globalize","formatDate","calendar","getCalendarMode","startDateText","endDateText","getEndDateFromStartDate","ALTERNATE_CELLS_CLASS","getContentAreaElement","msMajorInterval","msInterval","setMilliseconds","getStartEndHours","startEndTime","startEndDate","timeString","split","round","MS_PER_DAY","msStartHour","msEndHour","milliSeconds","getTimezoneOffset","dt","isDaylightSavingTime","timeOffset","majorTickDivider","row","middle","getAdjustedDate","startTime","timeSlots","startDate","destroy","contentScrollableEle","scheduleTouchModule","resetValues"],"sources":["/Users/anjalichaturvedi/GitHub/brew-bridge-dashboard/website/node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/vertical-view.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, extend, EventHandler, formatUnit, Browser } from '@syncfusion/ej2-base';\nimport { createElement, remove, addClass, removeClass, append, prepend } from '@syncfusion/ej2-base';\nimport { ViewBase } from './view-base';\nimport { VerticalEvent } from '../event-renderer/vertical-view';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * vertical view\n */\nvar VerticalView = /** @class */ (function (_super) {\n    __extends(VerticalView, _super);\n    function VerticalView(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-day-view';\n        _this.isInverseTableSelect = true;\n        _this.baseCssClass = 'e-vertical-view';\n        _this.appointment = null;\n        return _this;\n    }\n    VerticalView.prototype.getModuleName = function () {\n        return 'verticalView';\n    };\n    VerticalView.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.scrollUiUpdate, this);\n        this.parent.on(event.dataReady, this.renderEvents, this);\n    };\n    VerticalView.prototype.removeEventListener = function () {\n        if (this.parent) {\n            this.parent.off(event.scrollUiUpdate, this.scrollUiUpdate);\n            this.parent.off(event.dataReady, this.renderEvents);\n        }\n    };\n    VerticalView.prototype.renderEvents = function () {\n        this.appointment = this.parent.activeViewOptions.timeScale.enable ?\n            new VerticalEvent(this.parent) : new MonthEvent(this.parent);\n        this.appointment.renderAppointments();\n        this.parent.notify(event.eventsLoaded, {});\n    };\n    VerticalView.prototype.onContentScroll = function (e) {\n        this.parent.removeNewEventElement();\n        var target = e.target;\n        this.parent.notify(event.virtualScroll, e);\n        this.scrollLeftPanel(target);\n        this.scrollTopPanel(target);\n        if (!this.parent.isAdaptive) {\n            this.parent.uiStateValues.top = target.scrollTop;\n        }\n        this.parent.uiStateValues.left = target.scrollLeft;\n        if (!isNullOrUndefined(this.parent.quickPopup) && !this.parent.uiStateValues.isTapHold) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        this.setPersistence();\n    };\n    VerticalView.prototype.onAdaptiveMove = function (e) {\n        if (this.parent.uiStateValues.action) {\n            e.preventDefault();\n        }\n    };\n    VerticalView.prototype.onAdaptiveScroll = function (e) {\n        if (this.parent && !this.parent.isDestroyed) {\n            this.parent.removeNewEventElement();\n            this.parent.uiStateValues.top = e.target.scrollTop;\n        }\n    };\n    VerticalView.prototype.scrollLeftPanel = function (target) {\n        var leftPanel = this.getLeftPanelElement();\n        if (!isNullOrUndefined(leftPanel)) {\n            leftPanel.scrollTop = target.scrollTop;\n        }\n    };\n    VerticalView.prototype.scrollUiUpdate = function (args) {\n        if (!this.parent) {\n            return;\n        }\n        var dateHeader = this.parent.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        var headerBarHeight = this.getHeaderBarHeight();\n        var timeCells = this.getLeftPanelElement();\n        var content = this.getScrollableElement();\n        var header = this.getDatesHeaderElement();\n        var scrollerHeight = this.parent.element.offsetHeight - headerBarHeight - header.offsetHeight;\n        this.setContentHeight(content, timeCells, scrollerHeight);\n        this.setColWidth(content);\n        var scrollBarWidth = util.getScrollBarWidth();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        header.style[args.cssProperties.rtlPadding] = '';\n        var isDateHeaderScroll = this.parent.enableAllDayScroll ? !((content.offsetWidth - content.clientWidth) <=\n            (dateHeader.offsetWidth - dateHeader.clientWidth) && dateHeader.classList.contains('e-all-day-scroll')) : true;\n        if (content.offsetWidth - content.clientWidth > 0 && isDateHeaderScroll) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.firstElementChild.style[args.cssProperties.border] = '';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.style[args.cssProperties.padding] = '';\n        }\n        if (!args.isPreventScrollUpdate) {\n            if (this.parent.uiStateValues.isInitial) {\n                if (this.parent.currentView.indexOf('Timeline') > -1) {\n                    content.scrollTop = this.parent.uiStateValues.top;\n                }\n                this.scrollToWorkHour();\n                this.parent.uiStateValues.isInitial = false;\n            }\n            else {\n                if (timeCells) {\n                    timeCells.scrollTop = this.parent.uiStateValues.top;\n                }\n                content.scrollTop = this.parent.uiStateValues.top;\n                content.scrollLeft = this.parent.uiStateValues.left;\n            }\n        }\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            this.highlightCurrentTime();\n        }\n        this.retainScrollPosition();\n        if (!isNullOrUndefined(timeCells) && !isNullOrUndefined(content) && timeCells.scrollTop !== content.scrollTop) {\n            timeCells.scrollTop = content.scrollTop;\n        }\n    };\n    VerticalView.prototype.setContentHeight = function (element, leftPanelElement, height) {\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\n            element.style.height = (this.parent.height === 'auto') ? 'auto' : formatUnit(height);\n        }\n        else {\n            if (!isNullOrUndefined(leftPanelElement)) {\n                leftPanelElement.style.height = (this.parent.height === 'auto') ? 'auto'\n                    : formatUnit(height - this.getScrollXIndent(element));\n            }\n            element.style.height = (this.parent.height === 'auto') ? 'auto' : formatUnit(height);\n        }\n    };\n    VerticalView.prototype.scrollToWorkHour = function () {\n        if (this.parent.workHours.highlight) {\n            var firstWorkHourCell = this.element.querySelector('.' + cls.WORK_HOURS_CLASS);\n            if (firstWorkHourCell) {\n                this.getScrollableElement().scrollTop = firstWorkHourCell.offsetTop;\n                this.parent.uiStateValues.top = firstWorkHourCell.offsetTop;\n                this.parent.uiStateValues.left = 0;\n            }\n        }\n    };\n    VerticalView.prototype.scrollToHour = function (hour, scrollDate) {\n        var date = this.parent.getStartEndTime(hour);\n        if (!isNullOrUndefined(scrollDate)) {\n            var headerElement = this.element.querySelector('.' + cls.HEADER_CELLS_CLASS + '[data-date=\"' + new Date(util.resetTime(scrollDate)).getTime() + '\"]');\n            if (headerElement) {\n                if (this.parent.enableRtl) {\n                    var conWrap = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n                    this.getScrollableElement().scrollLeft = -(conWrap.offsetWidth - headerElement.offsetLeft - headerElement.offsetWidth);\n                }\n                else {\n                    this.getScrollableElement().scrollLeft = headerElement.offsetLeft;\n                }\n            }\n        }\n        if (isNullOrUndefined(date)) {\n            return;\n        }\n        this.getScrollableElement().scrollTop = this.getTopFromDateTime(date);\n    };\n    VerticalView.prototype.scrollToDate = function (scrollDate) {\n        this.scrollToHour(null, scrollDate);\n    };\n    VerticalView.prototype.generateColumnLevels = function () {\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        var columnLevels = [];\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.activeViewOptions.group.hideNonWorkingDays) {\n                while (columnLevels[0].length === 0) {\n                    this.parent.setProperties({ selectedDate: this.parent.activeView.getNextPreviousDate(this.previousNextAction) }, true);\n                    this.parent.activeView.getRenderDates();\n                    if (this.parent.headerModule) {\n                        this.parent.headerModule.setCalendarDate(this.parent.selectedDate);\n                        this.parent.headerModule.updateDateRange();\n                    }\n                    level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n                    columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n                }\n            }\n            if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                var resStartHour = resourceLevel.resourceData[resourceLevel.resource.startHourField];\n                var resEndHour = resourceLevel.resourceData[resourceLevel.resource.endHourField];\n                var dateSlots = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays, resStartHour, resEndHour);\n                columnLevels = [dateSlots];\n            }\n        }\n        else {\n            columnLevels.push(level);\n        }\n        this.colLevels = columnLevels;\n        return columnLevels;\n    };\n    // eslint-disable-next-line max-len\n    VerticalView.prototype.getDateSlots = function (renderDates, workDays, workStartHour, workEndHour) {\n        if (workStartHour === void 0) { workStartHour = this.parent.workHours.start; }\n        if (workEndHour === void 0) { workEndHour = this.parent.workHours.end; }\n        var dateCol = [];\n        var start = this.parent.getStartEndTime(workStartHour);\n        var end = this.parent.getStartEndTime(workEndHour);\n        for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n            var col = renderDates_1[_i];\n            var classList = [cls.HEADER_CELLS_CLASS];\n            if (this.isCurrentDate(col)) {\n                classList.push(cls.CURRENT_DAY_CLASS);\n            }\n            dateCol.push({\n                date: col, type: 'dateHeader', className: classList, colSpan: 1,\n                workDays: workDays, startHour: new Date(+start), endHour: new Date(+end)\n            });\n        }\n        return dateCol;\n    };\n    VerticalView.prototype.isWorkHourRange = function (date) {\n        return (this.getStartHour().getTime() <= date.getTime()) && (this.getEndHour().getTime() >= date.getTime());\n    };\n    VerticalView.prototype.highlightCurrentTime = function () {\n        var _this = this;\n        if (this.parent.activeViewOptions.headerRows.length > 0 &&\n            this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n            return;\n        }\n        var currentDate = this.parent.getCurrentTime();\n        if (this.parent.showTimeIndicator && this.isWorkHourRange(currentDate)) {\n            var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n            if (currentDateIndex.length > 0) {\n                var workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n                if (workCells.length > 0) {\n                    this.changeCurrentTimePosition();\n                }\n                if (isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n                    var interval = util.MS_PER_MINUTE - ((currentDate.getSeconds() * 1000) + currentDate.getMilliseconds());\n                    if (interval <= (util.MS_PER_MINUTE - 1000)) {\n                        window.setTimeout(function () {\n                            if (!isNullOrUndefined(_this.currentTimeIndicatorTimer)) {\n                                _this.clearCurrentTimeIndicatorTimer();\n                                _this.changeCurrentTimePosition();\n                                _this.updateCurrentTimeIndicatorTimer();\n                            }\n                        }, interval);\n                    }\n                    this.updateCurrentTimeIndicatorTimer();\n                }\n            }\n            else {\n                this.clearCurrentTimeIndicatorTimer();\n            }\n        }\n        else {\n            this.clearCurrentTimeIndicatorTimer();\n        }\n    };\n    VerticalView.prototype.getCurrentTimeIndicatorIndex = function () {\n        var currentDateIndex = [];\n        if (!isNullOrUndefined(this.parent.resourceBase) && (this.parent.activeViewOptions.group.resources.length > 0) &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            var count = 0;\n            var currentDate = util.resetTime(this.parent.getCurrentTime());\n            if (this.parent.virtualScrollModule && this.parent.activeViewOptions.allowVirtualScrolling &&\n                this.parent.activeViewOptions.group.byDate) {\n                for (var _i = 0, _a = this.parent.resourceBase.expandedResources; _i < _a.length; _i++) {\n                    var resource = _a[_i];\n                    if (util.resetTime(resource.date).getTime() === currentDate.getTime()) {\n                        currentDateIndex.push(count);\n                    }\n                    count += 1;\n                }\n            }\n            else {\n                for (var _b = 0, _c = this.parent.resourceBase.renderedResources; _b < _c.length; _b++) {\n                    var resource = _c[_b];\n                    var index = this.parent.getIndexOfDate(resource.renderDates, currentDate);\n                    if (index >= 0) {\n                        var resIndex = this.parent.activeViewOptions.group.byDate ?\n                            (this.parent.resourceBase.lastResourceLevel.length * index) + count : count + index;\n                        currentDateIndex.push(resIndex);\n                    }\n                    count += this.parent.activeViewOptions.group.byDate ? 1 : resource.renderDates.length;\n                }\n            }\n        }\n        else {\n            var renderDates = (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0)\n                ? this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates : this.renderDates;\n            var index = this.parent.getIndexOfDate(renderDates, util.resetTime(this.parent.getCurrentTime()));\n            if (index >= 0) {\n                currentDateIndex.push(index);\n            }\n        }\n        return currentDateIndex;\n    };\n    VerticalView.prototype.clearCurrentTimeIndicatorTimer = function () {\n        if (!isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n            window.clearInterval(this.currentTimeIndicatorTimer);\n            this.currentTimeIndicatorTimer = null;\n            this.removeCurrentTimeIndicatorElements();\n        }\n    };\n    VerticalView.prototype.updateCurrentTimeIndicatorTimer = function () {\n        var _this = this;\n        this.currentTimeIndicatorTimer = window.setInterval(function () { _this.changeCurrentTimePosition(); }, util.MS_PER_MINUTE);\n    };\n    VerticalView.prototype.removeCurrentTimeIndicatorElements = function () {\n        var queryString = '.' + cls.PREVIOUS_TIMELINE_CLASS + ',.' + cls.CURRENT_TIMELINE_CLASS + ',.' + cls.CURRENT_TIME_CLASS;\n        var timeIndicator = [].slice.call(this.element.querySelectorAll(queryString));\n        for (var _i = 0, timeIndicator_1 = timeIndicator; _i < timeIndicator_1.length; _i++) {\n            var indicator = timeIndicator_1[_i];\n            remove(indicator);\n        }\n    };\n    VerticalView.prototype.changeCurrentTimePosition = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.removeCurrentTimeIndicatorElements();\n        var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n        var firstRow = this.parent.getContentTable().rows[0];\n        var top = this.getTopFromDateTime(this.parent.getCurrentTime());\n        var topInPx = formatUnit(top);\n        var rowIndex = Math.floor(top / firstRow.cells[0].offsetHeight);\n        var timeCellsWrap = this.getLeftPanelElement();\n        var timeTrs = [].slice.call(timeCellsWrap.querySelectorAll('tr'));\n        if (isNullOrUndefined(rowIndex) || isNaN(rowIndex) || rowIndex === timeTrs.length) {\n            return;\n        }\n        var curTimeWrap = [].slice.call(this.element.querySelectorAll('.' + cls.TIMELINE_WRAPPER_CLASS));\n        for (var i = 0, length_1 = currentDateIndex[0]; i < length_1; i++) {\n            curTimeWrap[parseInt(i.toString(), 10)].appendChild(createElement('div', { className: cls.PREVIOUS_TIMELINE_CLASS, styles: 'top:' + topInPx }));\n        }\n        for (var _i = 0, currentDateIndex_1 = currentDateIndex; _i < currentDateIndex_1.length; _i++) {\n            var day = currentDateIndex_1[_i];\n            curTimeWrap[parseInt(day.toString(), 10)].appendChild(createElement('div', { className: cls.CURRENT_TIMELINE_CLASS, styles: 'top:' + topInPx }));\n        }\n        var currentTimeEle = createElement('div', {\n            innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n            className: cls.CURRENT_TIME_CLASS,\n            styles: 'top:' + topInPx\n        });\n        if (rowIndex <= timeTrs.length) {\n            removeClass(timeCellsWrap.querySelectorAll('.' + cls.HIDE_CHILDS_CLASS), cls.HIDE_CHILDS_CLASS);\n            if (timeTrs[parseInt(rowIndex.toString(), 10)]) {\n                addClass([timeTrs[parseInt(rowIndex.toString(), 10)].lastElementChild], cls.HIDE_CHILDS_CLASS);\n            }\n            prepend([currentTimeEle], timeCellsWrap);\n            currentTimeEle.style.top = formatUnit(currentTimeEle.offsetTop - (currentTimeEle.offsetHeight / 2));\n        }\n    };\n    VerticalView.prototype.getTopFromDateTime = function (date) {\n        var startHour = this.getStartHour();\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        return (diffInMinutes * this.getWorkCellHeight() * this.parent.activeViewOptions.timeScale.slotCount) /\n            this.parent.activeViewOptions.timeScale.interval;\n    };\n    VerticalView.prototype.getWorkCellHeight = function () {\n        return parseFloat(util.getElementHeight(this.element.querySelector('.' + cls.WORK_CELLS_CLASS)).toFixed(2));\n    };\n    VerticalView.prototype.getTdContent = function (date, type, groupIndex) {\n        var cntEle;\n        var wrapper = createElement('div');\n        var templateName = '';\n        var templateId = this.parent.element.id + '_';\n        switch (type) {\n            case 'dateHeader':\n                if (this.parent.activeViewOptions.dateHeaderTemplate) {\n                    templateName = 'dateHeaderTemplate';\n                    var args = { date: date, type: type };\n                    var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n                    cntEle = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false, undefined, undefined, this.parent.root));\n                }\n                else {\n                    wrapper.innerHTML = this.parent.activeView.isTimelineView() ?\n                        \"<span class=\\\"e-header-date e-navigate\\\">\" + this.getTimelineDate(date) + \"</span>\" :\n                        \"<div class=\\\"e-header-day\\\">\" + util.capitalizeFirstWord(this.getDayName(date), 'single') + \"</div>\" +\n                            (\"<div class=\\\"e-header-date e-navigate\\\" role=\\\"link\\\">\" + this.getDate(date) + \"</div>\");\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'majorSlot':\n                if (this.parent.activeViewOptions.timeScale.majorSlotTemplate) {\n                    templateName = 'majorSlotTemplate';\n                    var args = { date: date, type: type };\n                    cntEle = [].slice.call(this.parent.getMajorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false, undefined, undefined, this.parent.root));\n                }\n                else {\n                    wrapper.innerHTML = \"<span>\" + this.getTime(date) + \"</span>\";\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'minorSlot':\n                if (this.parent.activeViewOptions.timeScale.minorSlotTemplate) {\n                    templateName = 'minorSlotTemplate';\n                    var args = { date: date, type: type };\n                    cntEle = [].slice.call(this.parent.getMinorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false, undefined, undefined, this.parent.root));\n                }\n                else {\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'alldayCells':\n                if (this.parent.activeViewOptions.cellTemplate) {\n                    var viewName = this.parent.activeViewOptions.cellTemplateName;\n                    templateName = 'cellTemplate';\n                    var args = { date: date, type: type, groupIndex: groupIndex };\n                    cntEle = [].slice.call(this.parent.getCellTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false, undefined, undefined, this.parent.root));\n                }\n                break;\n        }\n        return cntEle;\n    };\n    VerticalView.prototype.refreshHeader = function () {\n        remove(this.element.querySelector('tbody tr'));\n        this.renderHeader();\n        this.parent.notify(event.contentReady, {});\n        var dateHeader = this.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        if (dateHeader) {\n            dateHeader.scrollLeft = this.parent.uiStateValues.left;\n        }\n    };\n    VerticalView.prototype.renderLayout = function (type) {\n        this.setPanel(createElement('div', { className: cls.TABLE_WRAP_CLASS }));\n        var clsList = [this.baseCssClass, this.viewClass];\n        clsList.push(type);\n        if (this.parent.activeViewOptions.group.byDate) {\n            clsList.push('e-by-date');\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            addClass([this.element], [cls.TIMESCALE_DISABLE, this.viewClass]);\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling && !this.parent.uiStateValues.isGroupAdaptive) {\n            clsList.push(cls.VIRTUAL_SCROLL_CLASS);\n        }\n        if (this.parent.rowAutoHeight && this.parent.eventSettings.ignoreWhitespace) {\n            clsList.push(cls.IGNORE_WHITESPACE);\n        }\n        this.renderPanel(type);\n        addClass([this.element], clsList);\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.colLevels = this.generateColumnLevels();\n        this.renderHeader();\n        this.renderContent();\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n    };\n    VerticalView.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var indentTd = createElement('td', { className: cls.LEFT_INDENT_CLASS });\n            indentTd.appendChild(this.renderLeftIndent());\n            tr.appendChild(indentTd);\n        }\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    VerticalView.prototype.renderContent = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.renderedResources = extend([], this.parent.resourceBase.lastResourceLevel, null, true);\n        }\n        var tr = createElement('tr');\n        var workTd = createElement('td');\n        if (this.parent.isAdaptive) {\n            workTd.setAttribute('colspan', (this.parent.activeViewOptions.timeScale.enable ? '2' : '1'));\n            var scrollContainer = createElement('div', { className: cls.SCROLL_CONTAINER_CLASS });\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                scrollContainer.appendChild(this.renderTimeCells());\n            }\n            scrollContainer.appendChild(this.renderContentArea());\n            workTd.appendChild(scrollContainer);\n            EventHandler.add(scrollContainer, 'scroll', this.onAdaptiveScroll, this);\n            EventHandler.add(scrollContainer, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n            tr.appendChild(workTd);\n        }\n        else {\n            var levels = this.colLevels.slice(0);\n            if (this.parent.virtualScrollModule) {\n                this.resetColLevels();\n            }\n            var wrap = this.renderContentArea();\n            workTd.appendChild(wrap);\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                var timesTd = createElement('td');\n                timesTd.appendChild(this.renderTimeCells());\n                tr.appendChild(timesTd);\n            }\n            tr.appendChild(workTd);\n            if (this.parent.virtualScrollModule) {\n                this.colLevels = levels;\n                this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n            }\n        }\n        this.element.querySelector('tbody').appendChild(tr);\n    };\n    VerticalView.prototype.renderLeftIndent = function () {\n        var wrap = createElement('div', { className: cls.LEFT_INDENT_WRAP_CLASS });\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var rowCount = this.colLevels.length;\n        var nth;\n        for (var i = 0; i < rowCount; i++) {\n            var ntr_1 = trEle.cloneNode();\n            var data_1 = { className: [(this.colLevels[parseInt(i.toString(), 10)][0] && this.colLevels[parseInt(i.toString(), 10)][0].className[0])], type: 'emptyCells' };\n            if (this.parent.activeViewOptions.showWeekNumber && data_1.className.indexOf(cls.HEADER_CELLS_CLASS) !== -1) {\n                data_1.className.push(cls.WEEK_NUMBER_CLASS);\n                var weekNo = this.parent.getWeekNumberContent(this.renderDates);\n                data_1.template = [createElement('span', {\n                        innerHTML: '' + weekNo,\n                        attrs: { title: this.parent.localeObj.getConstant('week') + ' ' + weekNo }\n                    })];\n            }\n            nth = this.createTd(data_1);\n            this.parent.renderHeaderIndentTemplate(data_1, nth);\n            ntr_1.appendChild(nth);\n            tbl.querySelector('tbody').appendChild(ntr_1);\n        }\n        var ntr = trEle.cloneNode();\n        var appointmentExpandCollapse = createElement('div', {\n            attrs: {\n                'tabindex': '0', 'role': 'list',\n                title: this.parent.localeObj.getConstant('expandAllDaySection'), 'aria-disabled': 'false',\n                'aria-label': this.parent.localeObj.getConstant('expandAllDaySection')\n            },\n            className: cls.ALLDAY_APPOINTMENT_SECTION_CLASS + ' ' + cls.APPOINTMENT_ROW_EXPAND_CLASS + ' ' +\n                cls.ICON + ' ' + cls.DISABLE_CLASS\n        });\n        var data = { className: [cls.ALLDAY_CELLS_CLASS], type: 'emptyCells' };\n        nth = this.createTd(data);\n        nth.appendChild(appointmentExpandCollapse);\n        this.parent.renderHeaderIndentTemplate(data, nth);\n        ntr.appendChild(nth);\n        tbl.querySelector('tbody').appendChild(ntr);\n        wrap.appendChild(tbl);\n        return wrap;\n    };\n    VerticalView.prototype.renderDatesHeader = function () {\n        var container = createElement('div', { className: cls.DATE_HEADER_CONTAINER_CLASS });\n        var wrap = createElement('div', { className: cls.DATE_HEADER_WRAP_CLASS });\n        container.appendChild(wrap);\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr', { className: cls.HEADER_ROW_CLASS });\n        var rowCount = this.colLevels.length;\n        var lastLevel = this.colLevels[rowCount - 1];\n        for (var i = 0; i < rowCount; i++) {\n            var ntr = trEle.cloneNode();\n            var level = this.colLevels[parseInt(i.toString(), 10)];\n            for (var j = 0; j < level.length; j++) {\n                ntr.appendChild(this.createTd(level[parseInt(j.toString(), 10)]));\n            }\n            tbl.querySelector('tbody').appendChild(ntr);\n        }\n        this.createAllDayRow(tbl, lastLevel);\n        this.createColGroup(tbl, lastLevel);\n        wrap.appendChild(tbl);\n        return container;\n    };\n    VerticalView.prototype.createAllDayRow = function (table, tdData) {\n        var ntr = createElement('tr', { className: cls.ALLDAY_ROW_CLASS });\n        for (var j = 0; j < tdData.length; j++) {\n            var td = extend({}, tdData[parseInt(j.toString(), 10)]);\n            td.className = [cls.ALLDAY_CELLS_CLASS];\n            td.type = 'alldayCells';\n            var ntd = this.createTd(td);\n            ntd.setAttribute('data-date', td.date.getTime().toString());\n            if (!isNullOrUndefined(td.groupIndex)) {\n                ntd.setAttribute('data-group-index', '' + td.groupIndex);\n            }\n            else if (this.parent.uiStateValues.isGroupAdaptive) {\n                ntd.setAttribute('data-group-index', '' + this.parent.uiStateValues.groupIndex);\n            }\n            this.wireCellEvents(ntd);\n            ntr.appendChild(ntd);\n        }\n        table.querySelector('tbody').appendChild(ntr);\n        var thead = createElement('thead');\n        thead.appendChild(this.parent.eventBase.createEventWrapper('allDay'));\n        prepend([thead], table);\n    };\n    VerticalView.prototype.createTd = function (td) {\n        var tdEle = createElement('td');\n        this.addAttributes(td, tdEle);\n        if (td.date && td.type) {\n            var ele = this.getTdContent(td.date, td.type, td.groupIndex);\n            if (ele && ele.length) {\n                append(ele, tdEle);\n            }\n        }\n        if (!this.parent.isMinMaxDate(util.resetTime(new Date('' + td.date)))) {\n            addClass([tdEle], cls.DISABLE_DATES);\n        }\n        if (td.type === 'resourceHeader') {\n            this.setResourceHeaderContent(tdEle, td);\n        }\n        if (td.type === 'dateHeader' && td.className.indexOf(cls.HEADER_CELLS_CLASS) >= 0) {\n            tdEle.setAttribute('data-date', td.date.getTime().toString());\n            if (!isNullOrUndefined(td.groupIndex)) {\n                tdEle.setAttribute('data-group-index', '' + td.groupIndex);\n            }\n            this.wireMouseEvents(tdEle);\n        }\n        var args = { elementType: td.type, element: tdEle, date: td.date, groupIndex: td.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return tdEle;\n    };\n    VerticalView.prototype.wireCellEvents = function (element) {\n        EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n        this.wireMouseEvents(element);\n    };\n    VerticalView.prototype.wireMouseEvents = function (element) {\n        EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n        }\n    };\n    VerticalView.prototype.renderTimeCells = function () {\n        var _this = this;\n        var wrap = createElement('div', { className: cls.TIME_CELLS_WRAP_CLASS });\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var handler = function (r) {\n            r.type = r.first ? 'majorSlot' : 'minorSlot';\n            r.className = r.last ? [cls.TIME_CELLS_CLASS, cls.TIME_SLOT_CLASS] : [cls.TIME_SLOT_CLASS];\n            var ntr = trEle.cloneNode();\n            var data = { date: r.date, type: r.type, className: r.className };\n            ntr.appendChild(_this.createTd(data));\n            tbl.querySelector('tbody').appendChild(ntr);\n            return r;\n        };\n        this.getTimeSlotRows(handler);\n        wrap.appendChild(tbl);\n        return wrap;\n    };\n    VerticalView.prototype.renderContentArea = function () {\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        this.setAriaAttributes(tbl);\n        this.addAutoHeightClass(tbl);\n        this.renderContentTable(tbl);\n        this.createColGroup(tbl, this.colLevels.slice(-1)[0]);\n        wrap.appendChild(tbl);\n        this.wireCellEvents(tbl.querySelector('tbody'));\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        EventHandler.add(wrap, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n        return wrap;\n    };\n    VerticalView.prototype.renderContentTable = function (table) {\n        var tBody = table.querySelector('tbody');\n        append(this.getContentRows(), tBody);\n        this.renderContentTableHeader(table);\n    };\n    VerticalView.prototype.getContentRows = function () {\n        var _this = this;\n        var rows = [];\n        var tr = createElement('tr');\n        var td = createElement('td', { attrs: { 'aria-selected': 'false' } });\n        var handler = function (r) {\n            var ntr = tr.cloneNode();\n            for (var _i = 0, _a = _this.colLevels[_this.colLevels.length - 1]; _i < _a.length; _i++) {\n                var tdData = _a[_i];\n                var ntd = _this.createContentTd(tdData, r, td);\n                ntr.appendChild(ntd);\n            }\n            rows.push(ntr);\n            return r;\n        };\n        this.getTimeSlotRows(handler);\n        return rows;\n    };\n    VerticalView.prototype.createContentTd = function (tdData, r, td) {\n        var ntd = td.cloneNode();\n        if (tdData.colSpan) {\n            ntd.setAttribute('colspan', tdData.colSpan.toString());\n        }\n        var clsName = this.getContentTdClass(r);\n        var cellDate = util.resetTime(tdData.date);\n        if (!this.parent.isMinMaxDate(cellDate)) {\n            clsName.push(cls.DISABLE_DATES);\n        }\n        cellDate = new Date(cellDate.setHours(r.date.getHours(), r.date.getMinutes(), r.date.getSeconds(), r.date.getMilliseconds()));\n        var type = 'workCells';\n        if (tdData.className.indexOf(cls.RESOURCE_PARENT_CLASS) !== -1) {\n            clsName.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n            type = 'resourceGroupCells';\n        }\n        if (this.parent.workHours.highlight && ((this.parent.activeViewOptions.timeScale.enable &&\n            this.isWorkHour(cellDate, tdData.startHour, tdData.endHour, tdData.workDays)) ||\n            (!this.parent.activeViewOptions.timeScale.enable && this.isWorkDay(cellDate, tdData.workDays)))) {\n            clsName.push(cls.WORK_HOURS_CLASS);\n        }\n        addClass([ntd], clsName);\n        if (this.parent.activeViewOptions.cellTemplate) {\n            var args_1 = { date: cellDate, type: type, groupIndex: tdData.groupIndex };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.cellTemplateName;\n            var templateId = scheduleId + viewName + 'cellTemplate';\n            var tooltipTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false, undefined, undefined, this.parent.root));\n            append(tooltipTemplate, ntd);\n        }\n        ntd.setAttribute('data-date', cellDate.getTime().toString());\n        var skeleton = 'full';\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            var announcementText = this.parent.globalize.formatDate(tdData.date, { skeleton: skeleton, calendar: this.parent.getCalendarMode() });\n            ntd.setAttribute('aria-label', announcementText);\n        }\n        else {\n            var startDateText = this.parent.globalize.formatDate(cellDate, {\n                type: 'dateTime', skeleton: skeleton, calendar: this.parent.getCalendarMode()\n            });\n            var endDateText = this.parent.globalize.formatDate(this.getEndDateFromStartDate(cellDate), {\n                type: 'dateTime', skeleton: skeleton, calendar: this.parent.getCalendarMode()\n            });\n            ntd.setAttribute('aria-label', startDateText + ' ' + this.parent.localeObj.getConstant('endAt') + ' ' + endDateText);\n        }\n        if (!isNullOrUndefined(tdData.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n            var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                tdData.groupIndex;\n            ntd.setAttribute('data-group-index', '' + groupIndex);\n        }\n        var args = { elementType: type, element: ntd, date: cellDate, groupIndex: tdData.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return ntd;\n    };\n    VerticalView.prototype.getContentTdClass = function (r) {\n        return r.last ? [cls.WORK_CELLS_CLASS] : [cls.WORK_CELLS_CLASS, cls.ALTERNATE_CELLS_CLASS];\n    };\n    VerticalView.prototype.renderContentTableHeader = function (table) {\n        var thead = createElement('thead');\n        thead.appendChild(this.parent.eventBase.createEventWrapper());\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            thead.appendChild(this.parent.eventBase.createEventWrapper('timeIndicator'));\n        }\n        prepend([thead], table);\n    };\n    VerticalView.prototype.getScrollableElement = function () {\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\n            return this.element.querySelector('.' + cls.SCROLL_CONTAINER_CLASS);\n        }\n        else {\n            return this.getContentAreaElement();\n        }\n    };\n    VerticalView.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.TIME_CELLS_WRAP_CLASS);\n    };\n    VerticalView.prototype.getEndDateFromStartDate = function (start) {\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        var end = new Date(start.getTime());\n        end.setMilliseconds(end.getMilliseconds() + msInterval);\n        return end;\n    };\n    VerticalView.prototype.getStartEndHours = function (startEndTime) {\n        if (!isNullOrUndefined(startEndTime) && startEndTime !== '') {\n            var startEndDate = new Date(2000, 0, 0, 0);\n            var timeString = startEndTime.split(':');\n            if (timeString.length === 2) {\n                startEndDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0);\n            }\n            return startEndDate;\n        }\n        return new Date(2000, 0, 0, 0);\n    };\n    VerticalView.prototype.getTimeSlotRows = function (handler) {\n        var rows = [];\n        var startHour = this.getStartEndHours(this.parent.activeViewOptions.startHour);\n        var endHour = this.getStartEndHours(this.parent.activeViewOptions.endHour);\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        var length = Math.round(util.MS_PER_DAY / msInterval);\n        var msStartHour = startHour.getTime();\n        var msEndHour = endHour.getTime();\n        if (msStartHour !== msEndHour) {\n            var milliSeconds = (startHour.getTimezoneOffset() !== endHour.getTimezoneOffset()) ?\n                (msEndHour - msStartHour) - 3600000 : (msEndHour - msStartHour);\n            length = Math.round(milliSeconds / msInterval);\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            length = 1;\n        }\n        var start = this.parent.getStartEndTime(this.parent.workHours.start);\n        var end = this.parent.getStartEndTime(this.parent.workHours.end);\n        for (var i = 0; i < length; i++) {\n            var dt = new Date(msStartHour + (msInterval * i));\n            if (util.isDaylightSavingTime(dt) || new Date(msStartHour).getTimezoneOffset() !== dt.getTimezoneOffset()) {\n                var timeOffset = new Date(msStartHour).getTimezoneOffset() - dt.getTimezoneOffset();\n                dt = new Date(dt.getTime() - (1000 * 60 * timeOffset));\n            }\n            var majorTickDivider = i % (msMajorInterval / msInterval);\n            var row = {\n                date: new Date('' + dt),\n                startHour: start,\n                endHour: end,\n                first: (majorTickDivider === 0),\n                middle: (majorTickDivider < this.parent.activeViewOptions.timeScale.slotCount - 1),\n                last: (majorTickDivider === this.parent.activeViewOptions.timeScale.slotCount - 1),\n                type: ''\n            };\n            if (handler) {\n                handler(row);\n            }\n            rows.push(row);\n        }\n        return rows;\n    };\n    VerticalView.prototype.getAdjustedDate = function (startTime) {\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            return new Date(startTime.setHours(0, 0, 0, 0));\n        }\n        else {\n            var timeSlots = this.getTimeSlotRows();\n            var startDate = new Date(new Date(timeSlots[0].date.getTime()).\n                setHours(startTime.getHours(), startTime.getMinutes(), startTime.getMilliseconds()));\n            for (var i = 0; i < timeSlots.length; i++) {\n                if (timeSlots[parseInt(i.toString(), 10)].date.getTime() > startDate.getTime()) {\n                    startTime.setHours(timeSlots[i - 1].date.getHours(), timeSlots[i - 1].date.getMinutes(), timeSlots[i - 1].date.getMilliseconds());\n                    return new Date(startTime);\n                }\n            }\n        }\n        return null;\n    };\n    VerticalView.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.clearCurrentTimeIndicatorTimer();\n        if (this.element) {\n            if (this.appointment) {\n                this.appointment.destroy();\n                this.appointment = null;\n            }\n            var contentScrollableEle = this.getContentAreaElement();\n            if (contentScrollableEle) {\n                EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n                EventHandler.remove(contentScrollableEle, Browser.touchMoveEvent, this.onAdaptiveMove);\n            }\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            if (this.parent.scheduleTouchModule) {\n                this.parent.scheduleTouchModule.resetValues();\n            }\n            _super.prototype.destroy.call(this);\n        }\n    };\n    return VerticalView;\n}(ViewBase));\nexport { VerticalView };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
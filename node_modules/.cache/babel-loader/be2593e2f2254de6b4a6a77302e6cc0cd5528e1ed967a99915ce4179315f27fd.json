{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { addClass, Event, attributes, compile, Component, EventHandler, getUniqueID, select, Browser, append } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, KeyboardEvents, NotifyPropertyChanges, Property, remove, removeClass, initializeCSPTemplate } from '@syncfusion/ej2-base';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nvar ICONCSS = 'e-rating-icon e-icons e-star-filled';\nvar ITEMLIST = 'e-rating-item-list';\nvar ITEMCONTAINER = 'e-rating-item-container';\nvar SELECTED = 'e-rating-selected';\nvar INTERMEDIATE = 'e-rating-intermediate';\nvar LABEL = 'e-rating-label';\nvar RESET = 'e-icons e-reset';\nvar HIDDEN = 'e-rating-hidden';\nvar DISABLED = 'e-disabled';\nvar READONLY = 'e-rating-readonly';\nvar RTL = 'e-rtl';\nvar ANIMATION = 'e-rating-animation';\nvar FULLTEMPLATE = 'e-rating-full';\nvar EMPTYTEMPLATE = 'e-rating-empty';\nvar SELECTEDVALUE = 'e-selected-value';\nvar RATINGVALUE = '--rating-value';\n/**\n * Defines where to position the label in rating\n */\nexport var LabelPosition;\n(function (LabelPosition) {\n  /**\n   * The label is positioned at the top center of the rating component.\n   */\n  LabelPosition[\"Top\"] = \"Top\";\n  /**\n   * The label is positioned at the bottom center of the rating component.\n   */\n  LabelPosition[\"Bottom\"] = \"Bottom\";\n  /**\n   * The label is positioned at the left side of the rating component.\n   */\n  LabelPosition[\"Left\"] = \"Left\";\n  /**\n   * The label is positioned at the right side of the rating component.\n   */\n  LabelPosition[\"Right\"] = \"Right\";\n})(LabelPosition || (LabelPosition = {}));\n/**\n * Defines the precision type of the rating.\n * It is used to component the granularity of the rating, allowing users to provide ratings with varying levels of precision.\n */\nexport var PrecisionType;\n(function (PrecisionType) {\n  /**\n   * The rating is increased in whole number increments.\n   */\n  PrecisionType[\"Full\"] = \"Full\";\n  /**\n   * The rating is increased in increments of 0.5 (half).\n   */\n  PrecisionType[\"Half\"] = \"Half\";\n  /**\n   * The rating is increased in increments of 0.25 (quarter).\n   */\n  PrecisionType[\"Quarter\"] = \"Quarter\";\n  /**\n   * The rating is increased in increments of 0.1.\n   */\n  PrecisionType[\"Exact\"] = \"Exact\";\n})(PrecisionType || (PrecisionType = {}));\n/**\n * The Rating component allows the user to rate something by clicking on a set of symbols on a numeric scale.\n * This allows users to provide feedback or ratings for products, services, or content.\n *\n * ```html\n * <input id=\"rating\">\n * ```\n * ```typescript\n * <script>\n *   let ratingObj: Rating = new Rating();\n *   ratingObj.appendTo('#rating');\n * </script>\n * ```\n */\nvar Rating = /** @class */function (_super) {\n  __extends(Rating, _super);\n  /**\n   * Constructor for creating the widget\n   *\n   * @param  {RatingModel} options - Specifies the rating model\n   * @param  {string|HTMLButtonElement} element - Specifies the target element\n   */\n  function Rating(options, element) {\n    var _this = _super.call(this, options, element) || this;\n    _this.itemElements = [];\n    return _this;\n  }\n  Rating.prototype.preRender = function () {\n    if (!this.element.id) {\n      this.element.id = getUniqueID('e-' + this.getModuleName());\n    }\n    this.keyConfigs = {\n      downarrow: 'downarrow',\n      leftarrow: 'leftarrow',\n      rightarrow: 'rightarrow',\n      uparrow: 'uparrow',\n      space: 'space'\n    };\n    this.tooltipOpen = false;\n    this.isTouchSelected = false;\n  };\n  Rating.prototype.render = function () {\n    this.initialize();\n    this.updateMinValue();\n    this.updateTemplateFunction();\n    this.triggerChange(null, this.value, false);\n    this.renderItems();\n    this.displayLabel();\n  };\n  Rating.prototype.initialize = function () {\n    this.wrapper = this.createElement('div', {\n      className: 'e-' + this.getModuleName() + '-container '\n    });\n    this.element.parentNode.insertBefore(this.wrapper, this.element);\n    this.wrapper.appendChild(this.element);\n    if (this.element.getAttribute('name') == null) {\n      this.element.setAttribute('name', this.element.id);\n    }\n    attributes(this.element, {\n      'aria-label': 'rating'\n    });\n    this.renderItemList();\n    this.updateReset();\n    if (this.readOnly) {\n      this.wrapper.classList.add(READONLY);\n    }\n    if (!this.visible) {\n      this.wrapper.classList.add(HIDDEN);\n    }\n    if (this.enableRtl) {\n      this.wrapper.classList.add(RTL);\n    }\n    if (this.enableAnimation) {\n      this.wrapper.classList.add(ANIMATION);\n    }\n    if (this.cssClass) {\n      addClass([this.wrapper], this.cssClass.split(' '));\n    }\n    this.updateTooltip();\n    this.wireKeyboardEvent();\n    this.updateDisabled();\n  };\n  Rating.prototype.updateDisabled = function () {\n    this.wrapper.classList[this.disabled ? 'add' : 'remove'](DISABLED);\n    attributes(this.ratingItemList, {\n      'tabindex': this.disabled ? '-1' : '0'\n    });\n    this.updateResetButton();\n  };\n  Rating.prototype.updateResetButton = function () {\n    if (this.allowReset) {\n      var isDisabled = this.value <= this.min || this.disabled;\n      this.resetElement.classList[isDisabled ? 'add' : 'remove'](DISABLED);\n      attributes(this.resetElement, {\n        'tabindex': isDisabled ? '-1' : '0',\n        'aria-hidden': isDisabled.toString()\n      });\n    }\n  };\n  Rating.prototype.renderItemList = function () {\n    var _this = this;\n    this.ratingItemList = this.createElement('div', {\n      className: ITEMLIST,\n      id: this.element.id + '_item-list'\n    });\n    attributes(this.ratingItemList, {\n      'aria-label': 'rating',\n      'role': 'slider'\n    });\n    this.wrapper.appendChild(this.ratingItemList);\n    EventHandler.add(this.ratingItemList, 'touchmove', function (e) {\n      return _this.touchMoveHandler(e);\n    }, this);\n    EventHandler.add(this.ratingItemList, Browser.touchEndEvent, this.touchEndHandler, this);\n  };\n  Rating.prototype.touchMoveHandler = function (e) {\n    if (!this.isTouchSelected) {\n      this.wrapper.classList.add('e-rating-touch');\n      this.isTouchSelected = true;\n    }\n    this.wrapper.classList.add('e-touch-select');\n    var rect = this.ratingItemList.getBoundingClientRect();\n    var x = e.touches[0].clientX - rect.x;\n    var currValue = x / rect.width * this.itemsCount;\n    currValue = this.enableRtl ? this.itemsCount - currValue : currValue;\n    currValue = currValue < this.min ? this.min : currValue > this.itemsCount ? this.itemsCount : currValue;\n    currValue = this.validateValue(currValue);\n    var element = currValue === 0 ? null : this.itemElements[parseInt((Math.ceil(currValue) - 1).toString(), 10)];\n    if (currValue === this.currentValue) {\n      if (this.showTooltip && element) {\n        this.openRatingTooltip(element, false);\n      }\n      return;\n    }\n    var previousValue = this.currentValue;\n    this.triggerChange(e, currValue);\n    this.updateCurrentValue(currValue);\n    if (this.showTooltip) {\n      if (element) {\n        if (Math.ceil(currValue) !== Math.ceil(previousValue)) {\n          this.closeRatingTooltip();\n        }\n        this.openRatingTooltip(element, true);\n      } else {\n        this.closeRatingTooltip();\n      }\n    }\n  };\n  Rating.prototype.touchEndHandler = function () {\n    this.closeRatingTooltip();\n    this.wrapper.classList.remove('e-touch-select');\n  };\n  Rating.prototype.updateTemplateFunction = function () {\n    this.emptyTemplateFunction = this.emptyTemplate ? this.getTemplateString(this.emptyTemplate) : null;\n    this.fullTemplateFunction = this.fullTemplate ? this.getTemplateString(this.fullTemplate) : null;\n  };\n  Rating.prototype.renderItems = function () {\n    var _this = this;\n    for (var i = 0; i < this.itemsCount; i++) {\n      var ratingItemContainer = this.createElement('span', {\n        className: ITEMCONTAINER\n      });\n      var spanItem = this.createElement('span', {\n        className: 'e-rating-item'\n      });\n      var ratingValue = this.getRatingValue(this.value, i);\n      this.renderItemContent(spanItem, ratingValue, i, false);\n      ratingItemContainer.appendChild(spanItem);\n      this.wireItemsEvents(ratingItemContainer, i + 1);\n      this.itemElements.push(ratingItemContainer);\n      var eventArgs = {\n        element: ratingItemContainer,\n        value: i + 1\n      };\n      this.trigger('beforeItemRender', eventArgs, function (args) {\n        _this.ratingItemList.appendChild(args.element);\n      });\n    }\n    attributes(this.ratingItemList, {\n      'aria-valuemax': this.itemsCount.toString()\n    });\n    this.updateItemValue(false);\n  };\n  Rating.prototype.renderItemContent = function (spanEle, val, index, isrerender) {\n    if (isrerender) {\n      this.removeItemContent(spanEle);\n    }\n    if (this.fullTemplate && val === 1) {\n      spanEle.classList.add(FULLTEMPLATE);\n      append(this.fullTemplateFunction({\n        index: index,\n        ratingValue: val\n      }, this, 'ratingFullTemplate', this.element.id + 'fullTemplate', this.isStringTemplate), spanEle);\n    } else if (this.emptyTemplate) {\n      spanEle.classList.add(EMPTYTEMPLATE);\n      append(this.emptyTemplateFunction({\n        index: index,\n        ratingValue: val\n      }, this, 'ratingEmptyTemplate', this.element.id + 'emptyTemplate', this.isStringTemplate), spanEle);\n    } else {\n      addClass([spanEle], ICONCSS.split(' '));\n    }\n  };\n  Rating.prototype.removeItemContent = function (spanEle) {\n    spanEle.classList.remove(FULLTEMPLATE, EMPTYTEMPLATE);\n    removeClass([spanEle], ICONCSS.split(' '));\n    if (spanEle.firstChild) {\n      spanEle.innerHTML = '';\n    }\n  };\n  Rating.prototype.updateTooltip = function () {\n    if (this.showTooltip) {\n      this.tooltipObj = new Tooltip({\n        target: '.e-rating-item-container',\n        windowCollision: true,\n        opensOn: 'Custom',\n        cssClass: this.cssClass ? 'e-rating-tooltip ' + this.cssClass : 'e-rating-tooltip'\n      });\n      this.tooltipObj.appendTo(this.ratingItemList);\n    } else {\n      if (!isNullOrUndefined(this.tooltipObj)) {\n        this.tooltipObj.destroy();\n        this.tooltipObj = null;\n      }\n    }\n  };\n  Rating.prototype.updateMinValue = function () {\n    this.setProperties({\n      min: this.validateValue(this.min)\n    }, true);\n    if (this.min > 0 && this.value < this.min) {\n      this.triggerChange(null, this.min, false);\n    }\n    attributes(this.ratingItemList, {\n      'aria-valuemin': this.min.toString()\n    });\n  };\n  Rating.prototype.validateValue = function (currentValue) {\n    if (currentValue > this.itemsCount) {\n      currentValue = this.itemsCount;\n    } else if (currentValue < 0) {\n      currentValue = 0;\n    } else {\n      currentValue = this.precision === PrecisionType.Full || this.enableSingleSelection ? Math.round(currentValue) : this.precision === PrecisionType.Half ? Math.round(currentValue * 2) / 2 : this.precision === PrecisionType.Quarter ? Math.round(currentValue * 4) / 4 : Math.round(currentValue * 10) / 10;\n    }\n    return currentValue;\n  };\n  Rating.prototype.getRatingValue = function (value, i) {\n    return this.enableSingleSelection ? value > i && value <= i + 1 ? 1 : 0 : value >= i + 1 ? 1 : value < i ? 0 : value - i;\n  };\n  Rating.prototype.updateItemValue = function (isUpdate) {\n    if (isUpdate === void 0) {\n      isUpdate = true;\n    }\n    if (isUpdate && this.isReact) {\n      this.clearTemplate(['ratingEmptyTemplate', 'ratingFullTemplate']);\n    }\n    for (var i = 0; i < this.itemsCount; i++) {\n      var itemElement = this.itemElements[parseInt(i.toString(), 10)];\n      itemElement.classList.remove(SELECTED, INTERMEDIATE, SELECTEDVALUE);\n      var ratingValue = this.getRatingValue(this.currentValue, i);\n      if (ratingValue === 1) {\n        itemElement.classList.add(SELECTED);\n      } else if (ratingValue > 0) {\n        itemElement.classList.add(INTERMEDIATE);\n      } else if (this.precision === PrecisionType.Full && i + 1 <= this.value && !this.enableSingleSelection) {\n        itemElement.classList.add(SELECTEDVALUE);\n      }\n      if (isUpdate) {\n        this.updateItemContent(ratingValue, i);\n      }\n      itemElement.style.setProperty(RATINGVALUE, ratingValue * 100 + '%');\n      itemElement.classList[this.value === 0 && i === 0 || this.value === i + 1 || ratingValue > 0 && ratingValue < 1 ? 'add' : 'remove']('e-rating-focus');\n    }\n    if (isUpdate) {\n      this.renderReactTemplates();\n    }\n    this.updateResetButton();\n    attributes(this.ratingItemList, {\n      'aria-valuenow': this.currentValue.toString()\n    });\n    attributes(this.element, {\n      'value': this.value.toString()\n    });\n  };\n  Rating.prototype.updateItemContent = function (ratingValue, index) {\n    if (!this.fullTemplate && !this.emptyTemplate) {\n      return;\n    }\n    var spanEle = this.itemElements[parseInt(index.toString(), 10)].querySelector('.e-rating-item');\n    if (this.fullTemplate && ratingValue === 1) {\n      if (!this.isReact && spanEle.classList.contains(FULLTEMPLATE)) {\n        return;\n      }\n      this.removeItemContent(spanEle);\n      spanEle.classList.add(FULLTEMPLATE);\n      append(this.fullTemplateFunction({\n        ratingValue: ratingValue,\n        index: index\n      }, this, 'ratingFullTemplate', this.element.id + 'fullTemplate' + index, this.isStringTemplate), spanEle);\n    } else if (this.emptyTemplate) {\n      if (!this.isReact && spanEle.classList.contains(EMPTYTEMPLATE)) {\n        return;\n      }\n      this.removeItemContent(spanEle);\n      spanEle.classList.add(EMPTYTEMPLATE);\n      append(this.emptyTemplateFunction({\n        ratingValue: ratingValue,\n        index: index\n      }, this, 'ratingEmptyTemplate', this.element.id + 'emptyTemplate' + index, this.isStringTemplate), spanEle);\n    } else {\n      this.removeItemContent(spanEle);\n      addClass([spanEle], ICONCSS.split(' '));\n    }\n  };\n  Rating.prototype.updateTooltipContent = function (isChange) {\n    var _this = this;\n    if (this.showTooltip) {\n      if (this.isReact) {\n        this.clearTemplate(['ratingTooltipTemplate']);\n      }\n      var content_1;\n      if (this.tooltipTemplate) {\n        content_1 = this.createElement('span', {\n          className: 'e-rating-tooltip-content'\n        });\n        var templateFunction = this.getTemplateString(this.tooltipTemplate);\n        append(templateFunction({\n          value: this.currentValue\n        }, this, 'ratingTooltipTemplate', this.element.id + 'tooltipTemplate', this.isStringTemplate), content_1);\n        this.tooltipObj.setProperties({\n          content: content_1\n        }, isChange);\n        if (this.isAngular) {\n          setTimeout(function () {\n            var ratingSpan = _this.ratingItemList.querySelectorAll('.' + ITEMCONTAINER + '.' + SELECTED);\n            _this.tooltipObj.refresh(ratingSpan[ratingSpan.length - 1]);\n          });\n        }\n      } else {\n        content_1 = this.currentValue.toString();\n        this.tooltipObj.setProperties({\n          content: initializeCSPTemplate(function () {\n            return content_1;\n          })\n        }, isChange);\n      }\n      this.renderReactTemplates();\n    }\n  };\n  Rating.prototype.getTemplateString = function (template) {\n    var stringContent = '';\n    try {\n      if (typeof template !== 'function') {\n        var tempEle = select(template);\n        if (tempEle) {\n          //Return innerHTML incase of jsrenderer script else outerHTML\n          stringContent = tempEle.tagName === 'SCRIPT' ? tempEle.innerHTML : tempEle.outerHTML;\n        } else {\n          stringContent = template;\n        }\n      } else {\n        stringContent = template;\n      }\n    } catch (e) {\n      stringContent = template;\n    }\n    return compile(stringContent);\n  };\n  Rating.prototype.displayLabel = function () {\n    if (this.showLabel) {\n      this.spanLabel = this.createElement('span', {\n        className: LABEL\n      });\n      this.updateLabel();\n      this.updateLabelPosition();\n    } else {\n      if (this.wrapper.contains(this.spanLabel)) {\n        remove(this.spanLabel);\n        this.spanLabel = null;\n      }\n    }\n  };\n  Rating.prototype.updateLabel = function () {\n    if (this.showLabel) {\n      if (this.labelTemplate) {\n        if (this.isReact) {\n          this.clearTemplate(['ratingLabelTemplate']);\n        }\n        if (this.spanLabel.firstChild) {\n          this.spanLabel.innerHTML = '';\n        }\n        var templateFunction = this.getTemplateString(this.labelTemplate);\n        append(templateFunction({\n          value: this.currentValue\n        }, this, 'ratingLabelTemplate', this.element.id + 'labelTemplate', this.isStringTemplate), this.spanLabel);\n        this.renderReactTemplates();\n      } else {\n        this.spanLabel.textContent = this.currentValue + ' / ' + this.itemsCount;\n      }\n    }\n  };\n  Rating.prototype.updateReset = function () {\n    if (this.allowReset) {\n      this.resetElement = this.createElement('span', {\n        className: RESET,\n        attrs: {\n          'aria-label': 'resetbutton',\n          'role': 'button'\n        }\n      });\n      this.updateResetButton();\n      EventHandler.add(this.resetElement, 'click', this.resetClicked, this);\n      this.wrapper.insertBefore(this.resetElement, this.ratingItemList);\n    } else {\n      if (this.wrapper.contains(this.resetElement)) {\n        remove(this.resetElement);\n        this.resetElement = null;\n      }\n    }\n  };\n  Rating.prototype.updateLabelPosition = function () {\n    this.clearLabelPosition();\n    this.spanLabel.classList.add('e-label-' + this.labelPosition.toLowerCase());\n    if (this.labelPosition === 'Left' || this.labelPosition === 'Top') {\n      this.wrapper.firstChild.after(this.spanLabel);\n    } else {\n      this.wrapper.appendChild(this.spanLabel);\n    }\n  };\n  Rating.prototype.clearLabelPosition = function () {\n    var removeCss = this.spanLabel.classList.value.match(/(e-label-[top|bottom|right|left]+)/g);\n    if (removeCss) {\n      removeClass([this.spanLabel], removeCss);\n    }\n  };\n  Rating.prototype.wireItemsEvents = function (itemElement, index) {\n    var _this = this;\n    EventHandler.add(itemElement, 'click', function (e) {\n      return _this.clickHandler(e);\n    }, this);\n    EventHandler.add(itemElement, 'mousemove', function (e) {\n      return _this.mouseMoveHandler(index, e);\n    }, this);\n    EventHandler.add(itemElement, 'mouseleave', this.mouseLeaveHandler, this);\n  };\n  Rating.prototype.clickHandler = function (e) {\n    this.currentValue = this.min > 0 && this.currentValue < this.min ? this.min : this.currentValue;\n    this.triggerChange(e, this.currentValue);\n    this.updateItemValue();\n    this.updateLabel();\n    this.updateResetButton();\n  };\n  Rating.prototype.updateValueChange = function (e, val, isInteracted) {\n    if (isInteracted === void 0) {\n      isInteracted = true;\n    }\n    this.triggerChange(e, val, isInteracted);\n    this.updateItemValue();\n    this.updateLabel();\n  };\n  Rating.prototype.triggerChange = function (e, val, isInteracted) {\n    if (isInteracted === void 0) {\n      isInteracted = true;\n    }\n    val = this.validateValue(val);\n    this.currentValue = val;\n    if (this.currentValue === this.value) {\n      return;\n    }\n    var eventArgs = {\n      event: e,\n      isInteracted: isInteracted,\n      value: val,\n      previousValue: this.value\n    };\n    this.setProperties({\n      value: val\n    }, true);\n    this.trigger('valueChanged', eventArgs);\n  };\n  Rating.prototype.mouseMoveHandler = function (index, e) {\n    if (this.isTouchSelected) {\n      this.wrapper.classList.remove('e-rating-touch');\n      this.isTouchSelected = false;\n    }\n    var currValue = this.calculateCurrentValue(index, e);\n    currValue = this.validateValue(currValue);\n    var element = this.itemElements[parseInt((index - 1).toString(), 10)];\n    if (currValue === this.currentValue) {\n      this.openRatingTooltip(element, false);\n      return;\n    }\n    this.updateCurrentValue(currValue);\n    this.openRatingTooltip(element, true);\n    var eventArgs = {\n      element: element,\n      event: e,\n      value: currValue\n    };\n    this.trigger('onItemHover', eventArgs);\n  };\n  Rating.prototype.openRatingTooltip = function (element, isChange) {\n    if (this.showTooltip) {\n      if (!this.tooltipOpen) {\n        this.updateTooltipContent(false);\n        this.tooltipObj.open(element);\n        this.tooltipOpen = true;\n      } else if (isChange) {\n        this.updateTooltipContent(true);\n        this.tooltipObj.refresh(element);\n      }\n    }\n  };\n  Rating.prototype.closeRatingTooltip = function () {\n    if (this.tooltipOpen) {\n      this.tooltipObj.close();\n      this.tooltipOpen = false;\n    }\n  };\n  Rating.prototype.updateCurrentValue = function (currValue) {\n    this.currentValue = currValue;\n    this.updateItemValue();\n    this.updateLabel();\n  };\n  Rating.prototype.mouseLeaveHandler = function () {\n    this.closeRatingTooltip();\n    this.updateCurrentValue(this.value);\n  };\n  Rating.prototype.calculateCurrentValue = function (index, args) {\n    var currentValue = index;\n    if (!(this.enableSingleSelection || this.precision === PrecisionType.Full)) {\n      currentValue = args.offsetX / this.itemElements[index - 1].clientWidth;\n      currentValue = this.enableRtl ? 1 - currentValue : currentValue;\n      if (this.precision === PrecisionType.Quarter) {\n        currentValue = currentValue <= 0.25 ? 0.25 : currentValue <= 0.5 ? 0.5 : currentValue < 0.75 ? 0.75 : 1.0;\n      } else if (this.precision === PrecisionType.Half) {\n        currentValue = currentValue <= 0.5 ? 0.5 : 1;\n      }\n      currentValue = currentValue + index - 1;\n    }\n    return currentValue;\n  };\n  /**\n   * Reset’s the value to minimum.\n   *\n   * {% codeBlock src='rating/reset/index.md' %}{% endcodeBlock %}\n   *\n   * @returns {void}\n   */\n  Rating.prototype.reset = function () {\n    this.resetClicked(null, false);\n  };\n  Rating.prototype.resetClicked = function (e, isInteracted) {\n    if (isInteracted === void 0) {\n      isInteracted = true;\n    }\n    this.updateValueChange(e, this.min, isInteracted);\n    this.updateResetButton();\n  };\n  Rating.prototype.wireKeyboardEvent = function () {\n    this.keyboardModuleRating = new KeyboardEvents(this.wrapper, {\n      keyAction: this.keyActionHandler.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n  };\n  Rating.prototype.keyActionHandler = function (e) {\n    e.preventDefault();\n    if (this.disabled || this.readOnly) {\n      return;\n    }\n    if (e.target.classList.contains(ITEMLIST)) {\n      switch (e.action) {\n        case 'uparrow':\n          this.handleNavigation(e, true);\n          break;\n        case 'downarrow':\n          this.handleNavigation(e, false);\n          break;\n        case 'leftarrow':\n          this.handleNavigation(e, this.enableRtl);\n          break;\n        case 'rightarrow':\n          this.handleNavigation(e, !this.enableRtl);\n          break;\n      }\n    }\n    if (this.allowReset && e.target.classList.contains('e-reset')) {\n      switch (e.action) {\n        case 'space':\n          this.resetClicked(e);\n          break;\n      }\n    }\n  };\n  Rating.prototype.handleNavigation = function (e, isIncrease) {\n    if (!isIncrease && this.value > this.min || isIncrease && this.value < this.itemsCount) {\n      var currentValue = this.precision === PrecisionType.Full || this.enableSingleSelection ? 1 : this.precision === PrecisionType.Half ? 0.5 : this.precision === PrecisionType.Quarter ? 0.25 : Math.round(0.1 * 10) / 10;\n      currentValue = isIncrease ? this.value + currentValue : this.value - currentValue;\n      this.updateValueChange(e, currentValue);\n      this.updateResetButton();\n    }\n  };\n  Rating.prototype.updateContent = function () {\n    if (this.isReact) {\n      this.clearTemplate(['ratingEmptyTemplate', 'ratingFullTemplate']);\n    }\n    for (var i = 0; i < this.itemsCount; i++) {\n      var itemElement = this.itemElements[parseInt(i.toString(), 10)].firstElementChild;\n      this.renderItemContent(itemElement, this.getRatingValue(this.value, i), i, true);\n    }\n  };\n  /**\n   * To get component name.\n   *\n   * @returns {string} - Module Name\n   * @private\n   */\n  Rating.prototype.getModuleName = function () {\n    return 'rating';\n  };\n  /**\n   * To get the properties to be maintained in the persisted state.\n   *\n   * @returns {string} - Persist data\n   */\n  Rating.prototype.getPersistData = function () {\n    return this.addOnPersist([]);\n  };\n  Rating.prototype.removeItemElements = function () {\n    for (var i = 0; i < this.itemElements.length; i++) {\n      remove(this.itemElements[parseInt(i.toString(), 10)]);\n    }\n    this.itemElements = [];\n  };\n  /**\n   * Destroys the Rating instance.\n   *\n   * @returns {void}\n   */\n  Rating.prototype.destroy = function () {\n    var _this = this;\n    _super.prototype.destroy.call(this);\n    // unwires the events and detach the li elements\n    this.removeItemElements();\n    this.clearTemplate();\n    if (this.spanLabel) {\n      remove(this.spanLabel);\n      this.spanLabel = null;\n    }\n    if (this.resetElement) {\n      remove(this.resetElement);\n      this.resetElement = null;\n    }\n    if (this.showTooltip) {\n      this.tooltipObj.destroy();\n      this.tooltipObj = null;\n    }\n    remove(this.ratingItemList);\n    this.ratingItemList = null;\n    this.wrapper.parentNode.insertBefore(this.element, this.wrapper);\n    remove(this.wrapper);\n    this.wrapper = null;\n    this.keyboardModuleRating.destroy();\n    this.keyboardModuleRating = null;\n    ['value', 'aria-label', 'name'].forEach(function (attr) {\n      _this.element.removeAttribute(attr);\n    });\n  };\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param  {RatingModel} newProp - Specifies new properties\n   * @param  {RatingModel} oldProp - Specifies old properties\n   * @returns {void}\n   * @private\n   */\n  Rating.prototype.onPropertyChanged = function (newProp, oldProp) {\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      switch (prop) {\n        case 'value':\n          this.updateValueChange(null, this.value > this.min ? this.value : this.min, false);\n          break;\n        case 'min':\n          this.updateMinValue();\n          this.updateItemValue();\n          this.updateLabel();\n          break;\n        case 'showLabel':\n          this.displayLabel();\n          break;\n        case 'visible':\n          this.wrapper.classList[!this.visible ? 'add' : 'remove'](HIDDEN);\n          break;\n        case 'disabled':\n          this.updateDisabled();\n          break;\n        case 'readOnly':\n          this.wrapper.classList[this.readOnly ? 'add' : 'remove'](READONLY);\n          break;\n        case 'allowReset':\n          this.updateReset();\n          break;\n        case 'enableRtl':\n          this.wrapper.classList[this.enableRtl ? 'add' : 'remove'](RTL);\n          break;\n        case 'cssClass':\n          if (oldProp.cssClass) {\n            removeClass([this.wrapper], oldProp.cssClass.split(' '));\n          }\n          if (newProp.cssClass) {\n            addClass([this.wrapper], newProp.cssClass.split(' '));\n          }\n          if (this.tooltipObj) {\n            this.tooltipObj.setProperties({\n              cssClass: this.cssClass ? 'e-rating-tooltip ' + this.cssClass : 'e-rating-tooltip'\n            });\n          }\n          break;\n        case 'labelPosition':\n          this.updateLabelPosition();\n          break;\n        case 'showTooltip':\n          this.updateTooltip();\n          break;\n        case 'precision':\n          this.updateMinValue();\n          this.triggerChange(null, this.value, false);\n          this.updateItemValue();\n          this.updateLabel();\n          break;\n        case 'enableSingleSelection':\n          //To validate the value against single selection and update the items, label + trigger change event if value changed\n          this.updateValueChange(null, this.currentValue, false);\n          break;\n        case 'enableAnimation':\n          this.wrapper.classList[this.enableAnimation ? 'add' : 'remove'](ANIMATION);\n          break;\n        case 'emptyTemplate':\n        case 'fullTemplate':\n          this.updateTemplateFunction();\n          this.updateContent();\n          break;\n        case 'labelTemplate':\n          this.updateLabel();\n          break;\n        case 'itemsCount':\n          this.removeItemElements();\n          this.renderItems();\n          this.updateLabel();\n          break;\n      }\n    }\n  };\n  __decorate([Property(false)], Rating.prototype, \"allowReset\", void 0);\n  __decorate([Property('')], Rating.prototype, \"cssClass\", void 0);\n  __decorate([Property(false)], Rating.prototype, \"disabled\", void 0);\n  __decorate([Property('')], Rating.prototype, \"emptyTemplate\", void 0);\n  __decorate([Property(true)], Rating.prototype, \"enableAnimation\", void 0);\n  __decorate([Property(false)], Rating.prototype, \"enableSingleSelection\", void 0);\n  __decorate([Property('')], Rating.prototype, \"fullTemplate\", void 0);\n  __decorate([Property(5)], Rating.prototype, \"itemsCount\", void 0);\n  __decorate([Property(LabelPosition.Right)], Rating.prototype, \"labelPosition\", void 0);\n  __decorate([Property('')], Rating.prototype, \"labelTemplate\", void 0);\n  __decorate([Property(0.0)], Rating.prototype, \"min\", void 0);\n  __decorate([Property(PrecisionType.Full)], Rating.prototype, \"precision\", void 0);\n  __decorate([Property(false)], Rating.prototype, \"readOnly\", void 0);\n  __decorate([Property(false)], Rating.prototype, \"showLabel\", void 0);\n  __decorate([Property(true)], Rating.prototype, \"showTooltip\", void 0);\n  __decorate([Property('')], Rating.prototype, \"tooltipTemplate\", void 0);\n  __decorate([Property(0.0)], Rating.prototype, \"value\", void 0);\n  __decorate([Property(true)], Rating.prototype, \"visible\", void 0);\n  __decorate([Event()], Rating.prototype, \"beforeItemRender\", void 0);\n  __decorate([Event()], Rating.prototype, \"created\", void 0);\n  __decorate([Event()], Rating.prototype, \"onItemHover\", void 0);\n  __decorate([Event()], Rating.prototype, \"valueChanged\", void 0);\n  Rating = __decorate([NotifyPropertyChanges], Rating);\n  return Rating;\n}(Component);\nexport { Rating };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","addClass","Event","attributes","compile","Component","EventHandler","getUniqueID","select","Browser","append","isNullOrUndefined","KeyboardEvents","NotifyPropertyChanges","Property","remove","removeClass","initializeCSPTemplate","Tooltip","ICONCSS","ITEMLIST","ITEMCONTAINER","SELECTED","INTERMEDIATE","LABEL","RESET","HIDDEN","DISABLED","READONLY","RTL","ANIMATION","FULLTEMPLATE","EMPTYTEMPLATE","SELECTEDVALUE","RATINGVALUE","LabelPosition","PrecisionType","Rating","_super","options","element","_this","call","itemElements","preRender","id","getModuleName","keyConfigs","downarrow","leftarrow","rightarrow","uparrow","space","tooltipOpen","isTouchSelected","render","initialize","updateMinValue","updateTemplateFunction","triggerChange","value","renderItems","displayLabel","wrapper","createElement","className","parentNode","insertBefore","appendChild","getAttribute","setAttribute","renderItemList","updateReset","readOnly","classList","add","visible","enableRtl","enableAnimation","cssClass","split","updateTooltip","wireKeyboardEvent","updateDisabled","disabled","ratingItemList","updateResetButton","allowReset","isDisabled","min","resetElement","toString","e","touchMoveHandler","touchEndEvent","touchEndHandler","rect","getBoundingClientRect","x","touches","clientX","currValue","width","itemsCount","validateValue","parseInt","Math","ceil","currentValue","showTooltip","openRatingTooltip","previousValue","updateCurrentValue","closeRatingTooltip","emptyTemplateFunction","emptyTemplate","getTemplateString","fullTemplateFunction","fullTemplate","ratingItemContainer","spanItem","ratingValue","getRatingValue","renderItemContent","wireItemsEvents","push","eventArgs","trigger","args","updateItemValue","spanEle","val","index","isrerender","removeItemContent","isStringTemplate","firstChild","innerHTML","tooltipObj","windowCollision","opensOn","appendTo","destroy","setProperties","precision","Full","enableSingleSelection","round","Half","Quarter","isUpdate","isReact","clearTemplate","itemElement","updateItemContent","style","setProperty","renderReactTemplates","querySelector","contains","updateTooltipContent","isChange","content_1","tooltipTemplate","templateFunction","content","isAngular","setTimeout","ratingSpan","querySelectorAll","refresh","template","stringContent","tempEle","tagName","outerHTML","showLabel","spanLabel","updateLabel","updateLabelPosition","labelTemplate","textContent","attrs","resetClicked","clearLabelPosition","labelPosition","toLowerCase","after","removeCss","match","clickHandler","mouseMoveHandler","mouseLeaveHandler","updateValueChange","isInteracted","event","calculateCurrentValue","open","close","offsetX","clientWidth","reset","keyboardModuleRating","keyAction","keyActionHandler","bind","eventName","preventDefault","action","handleNavigation","isIncrease","updateContent","firstElementChild","getPersistData","addOnPersist","removeItemElements","forEach","attr","removeAttribute","onPropertyChanged","newProp","oldProp","_i","_a","keys","prop","Right"],"sources":["/Users/anjalichaturvedi/GitHub/brew-bridge-dashboard/website/node_modules/@syncfusion/ej2-inputs/src/rating/rating.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { addClass, Event, attributes, compile, Component, EventHandler, getUniqueID, select, Browser, append } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, KeyboardEvents, NotifyPropertyChanges, Property, remove, removeClass, initializeCSPTemplate } from '@syncfusion/ej2-base';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nvar ICONCSS = 'e-rating-icon e-icons e-star-filled';\nvar ITEMLIST = 'e-rating-item-list';\nvar ITEMCONTAINER = 'e-rating-item-container';\nvar SELECTED = 'e-rating-selected';\nvar INTERMEDIATE = 'e-rating-intermediate';\nvar LABEL = 'e-rating-label';\nvar RESET = 'e-icons e-reset';\nvar HIDDEN = 'e-rating-hidden';\nvar DISABLED = 'e-disabled';\nvar READONLY = 'e-rating-readonly';\nvar RTL = 'e-rtl';\nvar ANIMATION = 'e-rating-animation';\nvar FULLTEMPLATE = 'e-rating-full';\nvar EMPTYTEMPLATE = 'e-rating-empty';\nvar SELECTEDVALUE = 'e-selected-value';\nvar RATINGVALUE = '--rating-value';\n/**\n * Defines where to position the label in rating\n */\nexport var LabelPosition;\n(function (LabelPosition) {\n    /**\n     * The label is positioned at the top center of the rating component.\n     */\n    LabelPosition[\"Top\"] = \"Top\";\n    /**\n     * The label is positioned at the bottom center of the rating component.\n     */\n    LabelPosition[\"Bottom\"] = \"Bottom\";\n    /**\n     * The label is positioned at the left side of the rating component.\n     */\n    LabelPosition[\"Left\"] = \"Left\";\n    /**\n     * The label is positioned at the right side of the rating component.\n     */\n    LabelPosition[\"Right\"] = \"Right\";\n})(LabelPosition || (LabelPosition = {}));\n/**\n * Defines the precision type of the rating.\n * It is used to component the granularity of the rating, allowing users to provide ratings with varying levels of precision.\n */\nexport var PrecisionType;\n(function (PrecisionType) {\n    /**\n     * The rating is increased in whole number increments.\n     */\n    PrecisionType[\"Full\"] = \"Full\";\n    /**\n     * The rating is increased in increments of 0.5 (half).\n     */\n    PrecisionType[\"Half\"] = \"Half\";\n    /**\n     * The rating is increased in increments of 0.25 (quarter).\n     */\n    PrecisionType[\"Quarter\"] = \"Quarter\";\n    /**\n     * The rating is increased in increments of 0.1.\n     */\n    PrecisionType[\"Exact\"] = \"Exact\";\n})(PrecisionType || (PrecisionType = {}));\n/**\n * The Rating component allows the user to rate something by clicking on a set of symbols on a numeric scale.\n * This allows users to provide feedback or ratings for products, services, or content.\n *\n * ```html\n * <input id=\"rating\">\n * ```\n * ```typescript\n * <script>\n *   let ratingObj: Rating = new Rating();\n *   ratingObj.appendTo('#rating');\n * </script>\n * ```\n */\nvar Rating = /** @class */ (function (_super) {\n    __extends(Rating, _super);\n    /**\n     * Constructor for creating the widget\n     *\n     * @param  {RatingModel} options - Specifies the rating model\n     * @param  {string|HTMLButtonElement} element - Specifies the target element\n     */\n    function Rating(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.itemElements = [];\n        return _this;\n    }\n    Rating.prototype.preRender = function () {\n        if (!this.element.id) {\n            this.element.id = getUniqueID('e-' + this.getModuleName());\n        }\n        this.keyConfigs = {\n            downarrow: 'downarrow',\n            leftarrow: 'leftarrow',\n            rightarrow: 'rightarrow',\n            uparrow: 'uparrow',\n            space: 'space'\n        };\n        this.tooltipOpen = false;\n        this.isTouchSelected = false;\n    };\n    Rating.prototype.render = function () {\n        this.initialize();\n        this.updateMinValue();\n        this.updateTemplateFunction();\n        this.triggerChange(null, this.value, false);\n        this.renderItems();\n        this.displayLabel();\n    };\n    Rating.prototype.initialize = function () {\n        this.wrapper = this.createElement('div', { className: 'e-' + this.getModuleName() + '-container ' });\n        this.element.parentNode.insertBefore(this.wrapper, this.element);\n        this.wrapper.appendChild(this.element);\n        if ((this.element.getAttribute('name') == null)) {\n            this.element.setAttribute('name', this.element.id);\n        }\n        attributes(this.element, { 'aria-label': 'rating' });\n        this.renderItemList();\n        this.updateReset();\n        if (this.readOnly) {\n            this.wrapper.classList.add(READONLY);\n        }\n        if (!this.visible) {\n            this.wrapper.classList.add(HIDDEN);\n        }\n        if (this.enableRtl) {\n            this.wrapper.classList.add(RTL);\n        }\n        if (this.enableAnimation) {\n            this.wrapper.classList.add(ANIMATION);\n        }\n        if (this.cssClass) {\n            addClass([this.wrapper], this.cssClass.split(' '));\n        }\n        this.updateTooltip();\n        this.wireKeyboardEvent();\n        this.updateDisabled();\n    };\n    Rating.prototype.updateDisabled = function () {\n        this.wrapper.classList[this.disabled ? 'add' : 'remove'](DISABLED);\n        attributes(this.ratingItemList, { 'tabindex': (this.disabled) ? '-1' : '0' });\n        this.updateResetButton();\n    };\n    Rating.prototype.updateResetButton = function () {\n        if (this.allowReset) {\n            var isDisabled = (this.value <= this.min) || this.disabled;\n            this.resetElement.classList[isDisabled ? 'add' : 'remove'](DISABLED);\n            attributes(this.resetElement, { 'tabindex': (isDisabled ? '-1' : '0'), 'aria-hidden': isDisabled.toString() });\n        }\n    };\n    Rating.prototype.renderItemList = function () {\n        var _this = this;\n        this.ratingItemList = this.createElement('div', {\n            className: ITEMLIST,\n            id: this.element.id + '_item-list'\n        });\n        attributes(this.ratingItemList, { 'aria-label': 'rating', 'role': 'slider' });\n        this.wrapper.appendChild(this.ratingItemList);\n        EventHandler.add(this.ratingItemList, 'touchmove', function (e) { return _this.touchMoveHandler(e); }, this);\n        EventHandler.add(this.ratingItemList, Browser.touchEndEvent, this.touchEndHandler, this);\n    };\n    Rating.prototype.touchMoveHandler = function (e) {\n        if (!this.isTouchSelected) {\n            this.wrapper.classList.add('e-rating-touch');\n            this.isTouchSelected = true;\n        }\n        this.wrapper.classList.add('e-touch-select');\n        var rect = this.ratingItemList.getBoundingClientRect();\n        var x = e.touches[0].clientX - rect.x;\n        var currValue = (x / rect.width) * this.itemsCount;\n        currValue = (this.enableRtl) ? (this.itemsCount - currValue) : currValue;\n        currValue = currValue < this.min ? this.min : currValue > this.itemsCount ? this.itemsCount : currValue;\n        currValue = this.validateValue(currValue);\n        var element = currValue === 0 ? null : this.itemElements[parseInt((Math.ceil(currValue) - 1).toString(), 10)];\n        if (currValue === this.currentValue) {\n            if (this.showTooltip && element) {\n                this.openRatingTooltip(element, false);\n            }\n            return;\n        }\n        var previousValue = this.currentValue;\n        this.triggerChange(e, currValue);\n        this.updateCurrentValue(currValue);\n        if (this.showTooltip) {\n            if (element) {\n                if (Math.ceil(currValue) !== Math.ceil(previousValue)) {\n                    this.closeRatingTooltip();\n                }\n                this.openRatingTooltip(element, true);\n            }\n            else {\n                this.closeRatingTooltip();\n            }\n        }\n    };\n    Rating.prototype.touchEndHandler = function () {\n        this.closeRatingTooltip();\n        this.wrapper.classList.remove('e-touch-select');\n    };\n    Rating.prototype.updateTemplateFunction = function () {\n        this.emptyTemplateFunction = this.emptyTemplate ? this.getTemplateString(this.emptyTemplate) : null;\n        this.fullTemplateFunction = this.fullTemplate ? this.getTemplateString(this.fullTemplate) : null;\n    };\n    Rating.prototype.renderItems = function () {\n        var _this = this;\n        for (var i = 0; i < this.itemsCount; i++) {\n            var ratingItemContainer = this.createElement('span', { className: ITEMCONTAINER });\n            var spanItem = this.createElement('span', { className: 'e-rating-item' });\n            var ratingValue = this.getRatingValue(this.value, i);\n            this.renderItemContent(spanItem, ratingValue, i, false);\n            ratingItemContainer.appendChild(spanItem);\n            this.wireItemsEvents(ratingItemContainer, i + 1);\n            this.itemElements.push(ratingItemContainer);\n            var eventArgs = { element: ratingItemContainer, value: i + 1 };\n            this.trigger('beforeItemRender', eventArgs, function (args) {\n                _this.ratingItemList.appendChild(args.element);\n            });\n        }\n        attributes(this.ratingItemList, { 'aria-valuemax': this.itemsCount.toString() });\n        this.updateItemValue(false);\n    };\n    Rating.prototype.renderItemContent = function (spanEle, val, index, isrerender) {\n        if (isrerender) {\n            this.removeItemContent(spanEle);\n        }\n        if (this.fullTemplate && val === 1) {\n            spanEle.classList.add(FULLTEMPLATE);\n            append(this.fullTemplateFunction({ index: index, ratingValue: val }, this, 'ratingFullTemplate', (this.element.id + 'fullTemplate'), this.isStringTemplate), spanEle);\n        }\n        else if (this.emptyTemplate) {\n            spanEle.classList.add(EMPTYTEMPLATE);\n            append(this.emptyTemplateFunction({ index: index, ratingValue: val }, this, 'ratingEmptyTemplate', (this.element.id + 'emptyTemplate'), this.isStringTemplate), spanEle);\n        }\n        else {\n            addClass([spanEle], ICONCSS.split(' '));\n        }\n    };\n    Rating.prototype.removeItemContent = function (spanEle) {\n        spanEle.classList.remove(FULLTEMPLATE, EMPTYTEMPLATE);\n        removeClass([spanEle], ICONCSS.split(' '));\n        if (spanEle.firstChild) {\n            spanEle.innerHTML = '';\n        }\n    };\n    Rating.prototype.updateTooltip = function () {\n        if (this.showTooltip) {\n            this.tooltipObj = new Tooltip({\n                target: '.e-rating-item-container', windowCollision: true,\n                opensOn: 'Custom', cssClass: this.cssClass ? ('e-rating-tooltip ' + this.cssClass) : 'e-rating-tooltip'\n            });\n            this.tooltipObj.appendTo(this.ratingItemList);\n        }\n        else {\n            if (!isNullOrUndefined(this.tooltipObj)) {\n                this.tooltipObj.destroy();\n                this.tooltipObj = null;\n            }\n        }\n    };\n    Rating.prototype.updateMinValue = function () {\n        this.setProperties({ min: this.validateValue(this.min) }, true);\n        if (this.min > 0 && this.value < this.min) {\n            this.triggerChange(null, this.min, false);\n        }\n        attributes(this.ratingItemList, { 'aria-valuemin': this.min.toString() });\n    };\n    Rating.prototype.validateValue = function (currentValue) {\n        if (currentValue > this.itemsCount) {\n            currentValue = this.itemsCount;\n        }\n        else if (currentValue < 0) {\n            currentValue = 0;\n        }\n        else {\n            currentValue = ((this.precision === PrecisionType.Full) || this.enableSingleSelection) ? Math.round(currentValue) :\n                (this.precision === PrecisionType.Half) ? (Math.round(currentValue * 2) / 2) :\n                    (this.precision === PrecisionType.Quarter) ? (Math.round(currentValue * 4) / 4) : (Math.round(currentValue * 10) / 10);\n        }\n        return currentValue;\n    };\n    Rating.prototype.getRatingValue = function (value, i) {\n        return (this.enableSingleSelection) ? (((value > i) && (value <= i + 1)) ? 1 : 0) :\n            (value >= i + 1) ? 1 : ((value < i) ? 0 : (value - i));\n    };\n    Rating.prototype.updateItemValue = function (isUpdate) {\n        if (isUpdate === void 0) { isUpdate = true; }\n        if (isUpdate && this.isReact) {\n            this.clearTemplate(['ratingEmptyTemplate', 'ratingFullTemplate']);\n        }\n        for (var i = 0; i < this.itemsCount; i++) {\n            var itemElement = this.itemElements[parseInt(i.toString(), 10)];\n            itemElement.classList.remove(SELECTED, INTERMEDIATE, SELECTEDVALUE);\n            var ratingValue = this.getRatingValue(this.currentValue, i);\n            if (ratingValue === 1) {\n                itemElement.classList.add(SELECTED);\n            }\n            else if (ratingValue > 0) {\n                itemElement.classList.add(INTERMEDIATE);\n            }\n            else if ((this.precision === PrecisionType.Full) && (i + 1 <= this.value) && (!this.enableSingleSelection)) {\n                itemElement.classList.add(SELECTEDVALUE);\n            }\n            if (isUpdate) {\n                this.updateItemContent(ratingValue, i);\n            }\n            itemElement.style.setProperty(RATINGVALUE, (ratingValue * 100) + '%');\n            itemElement.classList[((this.value === 0) && (i === 0)) || (this.value === i + 1) || ((ratingValue > 0) && (ratingValue < 1)) ? 'add' : 'remove']('e-rating-focus');\n        }\n        if (isUpdate) {\n            this.renderReactTemplates();\n        }\n        this.updateResetButton();\n        attributes(this.ratingItemList, { 'aria-valuenow': this.currentValue.toString() });\n        attributes(this.element, { 'value': this.value.toString() });\n    };\n    Rating.prototype.updateItemContent = function (ratingValue, index) {\n        if (!this.fullTemplate && !this.emptyTemplate) {\n            return;\n        }\n        var spanEle = this.itemElements[parseInt(index.toString(), 10)].querySelector('.e-rating-item');\n        if (this.fullTemplate && ratingValue === 1) {\n            if (!this.isReact && spanEle.classList.contains(FULLTEMPLATE)) {\n                return;\n            }\n            this.removeItemContent(spanEle);\n            spanEle.classList.add(FULLTEMPLATE);\n            append(this.fullTemplateFunction({ ratingValue: ratingValue, index: index }, this, 'ratingFullTemplate', (this.element.id + 'fullTemplate' + index), this.isStringTemplate), spanEle);\n        }\n        else if (this.emptyTemplate) {\n            if (!this.isReact && spanEle.classList.contains(EMPTYTEMPLATE)) {\n                return;\n            }\n            this.removeItemContent(spanEle);\n            spanEle.classList.add(EMPTYTEMPLATE);\n            append(this.emptyTemplateFunction({ ratingValue: ratingValue, index: index }, this, 'ratingEmptyTemplate', (this.element.id + 'emptyTemplate' + index), this.isStringTemplate), spanEle);\n        }\n        else {\n            this.removeItemContent(spanEle);\n            addClass([spanEle], ICONCSS.split(' '));\n        }\n    };\n    Rating.prototype.updateTooltipContent = function (isChange) {\n        var _this = this;\n        if (this.showTooltip) {\n            if (this.isReact) {\n                this.clearTemplate(['ratingTooltipTemplate']);\n            }\n            var content_1;\n            if (this.tooltipTemplate) {\n                content_1 = this.createElement('span', { className: 'e-rating-tooltip-content' });\n                var templateFunction = this.getTemplateString(this.tooltipTemplate);\n                append(templateFunction({ value: this.currentValue }, this, 'ratingTooltipTemplate', (this.element.id + 'tooltipTemplate'), this.isStringTemplate), content_1);\n                this.tooltipObj.setProperties({ content: content_1 }, isChange);\n                if (this.isAngular) {\n                    setTimeout(function () {\n                        var ratingSpan = _this.ratingItemList.querySelectorAll('.' + ITEMCONTAINER + '.' + SELECTED);\n                        _this.tooltipObj.refresh(ratingSpan[ratingSpan.length - 1]);\n                    });\n                }\n            }\n            else {\n                content_1 = this.currentValue.toString();\n                this.tooltipObj.setProperties({ content: initializeCSPTemplate(function () { return content_1; }) }, isChange);\n            }\n            this.renderReactTemplates();\n        }\n    };\n    Rating.prototype.getTemplateString = function (template) {\n        var stringContent = '';\n        try {\n            if (typeof template !== 'function') {\n                var tempEle = select(template);\n                if (tempEle) {\n                    //Return innerHTML incase of jsrenderer script else outerHTML\n                    stringContent = tempEle.tagName === 'SCRIPT' ? tempEle.innerHTML : tempEle.outerHTML;\n                }\n                else {\n                    stringContent = template;\n                }\n            }\n            else {\n                stringContent = template;\n            }\n        }\n        catch (e) {\n            stringContent = template;\n        }\n        return compile(stringContent);\n    };\n    Rating.prototype.displayLabel = function () {\n        if (this.showLabel) {\n            this.spanLabel = this.createElement('span', { className: LABEL });\n            this.updateLabel();\n            this.updateLabelPosition();\n        }\n        else {\n            if (this.wrapper.contains(this.spanLabel)) {\n                remove(this.spanLabel);\n                this.spanLabel = null;\n            }\n        }\n    };\n    Rating.prototype.updateLabel = function () {\n        if (this.showLabel) {\n            if (this.labelTemplate) {\n                if (this.isReact) {\n                    this.clearTemplate(['ratingLabelTemplate']);\n                }\n                if (this.spanLabel.firstChild) {\n                    this.spanLabel.innerHTML = '';\n                }\n                var templateFunction = this.getTemplateString(this.labelTemplate);\n                append(templateFunction({ value: this.currentValue }, this, 'ratingLabelTemplate', (this.element.id + 'labelTemplate'), this.isStringTemplate), this.spanLabel);\n                this.renderReactTemplates();\n            }\n            else {\n                this.spanLabel.textContent = this.currentValue + ' / ' + this.itemsCount;\n            }\n        }\n    };\n    Rating.prototype.updateReset = function () {\n        if (this.allowReset) {\n            this.resetElement = this.createElement('span', {\n                className: RESET,\n                attrs: { 'aria-label': 'resetbutton', 'role': 'button' }\n            });\n            this.updateResetButton();\n            EventHandler.add(this.resetElement, 'click', this.resetClicked, this);\n            this.wrapper.insertBefore(this.resetElement, this.ratingItemList);\n        }\n        else {\n            if (this.wrapper.contains(this.resetElement)) {\n                remove(this.resetElement);\n                this.resetElement = null;\n            }\n        }\n    };\n    Rating.prototype.updateLabelPosition = function () {\n        this.clearLabelPosition();\n        this.spanLabel.classList.add('e-label-' + this.labelPosition.toLowerCase());\n        if (this.labelPosition === 'Left' || this.labelPosition === 'Top') {\n            this.wrapper.firstChild.after(this.spanLabel);\n        }\n        else {\n            this.wrapper.appendChild(this.spanLabel);\n        }\n    };\n    Rating.prototype.clearLabelPosition = function () {\n        var removeCss = this.spanLabel.classList.value.match(/(e-label-[top|bottom|right|left]+)/g);\n        if (removeCss) {\n            removeClass([this.spanLabel], removeCss);\n        }\n    };\n    Rating.prototype.wireItemsEvents = function (itemElement, index) {\n        var _this = this;\n        EventHandler.add(itemElement, 'click', function (e) { return _this.clickHandler(e); }, this);\n        EventHandler.add(itemElement, 'mousemove', function (e) { return _this.mouseMoveHandler(index, e); }, this);\n        EventHandler.add(itemElement, 'mouseleave', this.mouseLeaveHandler, this);\n    };\n    Rating.prototype.clickHandler = function (e) {\n        this.currentValue = (this.min > 0 && this.currentValue < this.min) ? this.min : this.currentValue;\n        this.triggerChange(e, this.currentValue);\n        this.updateItemValue();\n        this.updateLabel();\n        this.updateResetButton();\n    };\n    Rating.prototype.updateValueChange = function (e, val, isInteracted) {\n        if (isInteracted === void 0) { isInteracted = true; }\n        this.triggerChange(e, val, isInteracted);\n        this.updateItemValue();\n        this.updateLabel();\n    };\n    Rating.prototype.triggerChange = function (e, val, isInteracted) {\n        if (isInteracted === void 0) { isInteracted = true; }\n        val = this.validateValue(val);\n        this.currentValue = val;\n        if (this.currentValue === this.value) {\n            return;\n        }\n        var eventArgs = { event: e, isInteracted: isInteracted, value: val, previousValue: this.value };\n        this.setProperties({ value: val }, true);\n        this.trigger('valueChanged', eventArgs);\n    };\n    Rating.prototype.mouseMoveHandler = function (index, e) {\n        if (this.isTouchSelected) {\n            this.wrapper.classList.remove('e-rating-touch');\n            this.isTouchSelected = false;\n        }\n        var currValue = this.calculateCurrentValue(index, e);\n        currValue = this.validateValue(currValue);\n        var element = this.itemElements[parseInt((index - 1).toString(), 10)];\n        if (currValue === this.currentValue) {\n            this.openRatingTooltip(element, false);\n            return;\n        }\n        this.updateCurrentValue(currValue);\n        this.openRatingTooltip(element, true);\n        var eventArgs = { element: element, event: e, value: currValue };\n        this.trigger('onItemHover', eventArgs);\n    };\n    Rating.prototype.openRatingTooltip = function (element, isChange) {\n        if (this.showTooltip) {\n            if (!this.tooltipOpen) {\n                this.updateTooltipContent(false);\n                this.tooltipObj.open(element);\n                this.tooltipOpen = true;\n            }\n            else if (isChange) {\n                this.updateTooltipContent(true);\n                this.tooltipObj.refresh(element);\n            }\n        }\n    };\n    Rating.prototype.closeRatingTooltip = function () {\n        if (this.tooltipOpen) {\n            this.tooltipObj.close();\n            this.tooltipOpen = false;\n        }\n    };\n    Rating.prototype.updateCurrentValue = function (currValue) {\n        this.currentValue = currValue;\n        this.updateItemValue();\n        this.updateLabel();\n    };\n    Rating.prototype.mouseLeaveHandler = function () {\n        this.closeRatingTooltip();\n        this.updateCurrentValue(this.value);\n    };\n    Rating.prototype.calculateCurrentValue = function (index, args) {\n        var currentValue = index;\n        if (!(this.enableSingleSelection || (this.precision === PrecisionType.Full))) {\n            currentValue = args.offsetX / this.itemElements[index - 1].clientWidth;\n            currentValue = (this.enableRtl) ? (1 - currentValue) : currentValue;\n            if (this.precision === PrecisionType.Quarter) {\n                currentValue = currentValue <= 0.25 ? 0.25 : currentValue <= 0.5 ? 0.5 : currentValue < 0.75 ? 0.75 : 1.0;\n            }\n            else if (this.precision === PrecisionType.Half) {\n                currentValue = currentValue <= 0.5 ? 0.5 : 1;\n            }\n            currentValue = currentValue + index - 1;\n        }\n        return currentValue;\n    };\n    /**\n     * Reset’s the value to minimum.\n     *\n     * {% codeBlock src='rating/reset/index.md' %}{% endcodeBlock %}\n     *\n     * @returns {void}\n     */\n    Rating.prototype.reset = function () {\n        this.resetClicked(null, false);\n    };\n    Rating.prototype.resetClicked = function (e, isInteracted) {\n        if (isInteracted === void 0) { isInteracted = true; }\n        this.updateValueChange(e, this.min, isInteracted);\n        this.updateResetButton();\n    };\n    Rating.prototype.wireKeyboardEvent = function () {\n        this.keyboardModuleRating = new KeyboardEvents(this.wrapper, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n    };\n    Rating.prototype.keyActionHandler = function (e) {\n        e.preventDefault();\n        if (this.disabled || this.readOnly) {\n            return;\n        }\n        if (e.target.classList.contains(ITEMLIST)) {\n            switch (e.action) {\n                case 'uparrow':\n                    this.handleNavigation(e, true);\n                    break;\n                case 'downarrow':\n                    this.handleNavigation(e, false);\n                    break;\n                case 'leftarrow':\n                    this.handleNavigation(e, this.enableRtl);\n                    break;\n                case 'rightarrow':\n                    this.handleNavigation(e, !this.enableRtl);\n                    break;\n            }\n        }\n        if (this.allowReset && e.target.classList.contains('e-reset')) {\n            switch (e.action) {\n                case 'space':\n                    this.resetClicked(e);\n                    break;\n            }\n        }\n    };\n    Rating.prototype.handleNavigation = function (e, isIncrease) {\n        if ((!isIncrease && (this.value > this.min)) || (isIncrease && (this.value < this.itemsCount))) {\n            var currentValue = (this.precision === PrecisionType.Full || this.enableSingleSelection) ? 1 :\n                (this.precision === PrecisionType.Half) ? 0.5 : (this.precision === PrecisionType.Quarter) ? 0.25 :\n                    Math.round(0.1 * 10) / 10;\n            currentValue = isIncrease ? this.value + currentValue : this.value - currentValue;\n            this.updateValueChange(e, (currentValue));\n            this.updateResetButton();\n        }\n    };\n    Rating.prototype.updateContent = function () {\n        if (this.isReact) {\n            this.clearTemplate(['ratingEmptyTemplate', 'ratingFullTemplate']);\n        }\n        for (var i = 0; i < this.itemsCount; i++) {\n            var itemElement = this.itemElements[parseInt(i.toString(), 10)].firstElementChild;\n            this.renderItemContent(itemElement, this.getRatingValue(this.value, i), i, true);\n        }\n    };\n    /**\n     * To get component name.\n     *\n     * @returns {string} - Module Name\n     * @private\n     */\n    Rating.prototype.getModuleName = function () {\n        return 'rating';\n    };\n    /**\n     * To get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} - Persist data\n     */\n    Rating.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    Rating.prototype.removeItemElements = function () {\n        for (var i = 0; i < this.itemElements.length; i++) {\n            remove(this.itemElements[parseInt(i.toString(), 10)]);\n        }\n        this.itemElements = [];\n    };\n    /**\n     * Destroys the Rating instance.\n     *\n     * @returns {void}\n     */\n    Rating.prototype.destroy = function () {\n        var _this = this;\n        _super.prototype.destroy.call(this);\n        // unwires the events and detach the li elements\n        this.removeItemElements();\n        this.clearTemplate();\n        if (this.spanLabel) {\n            remove(this.spanLabel);\n            this.spanLabel = null;\n        }\n        if (this.resetElement) {\n            remove(this.resetElement);\n            this.resetElement = null;\n        }\n        if (this.showTooltip) {\n            this.tooltipObj.destroy();\n            this.tooltipObj = null;\n        }\n        remove(this.ratingItemList);\n        this.ratingItemList = null;\n        this.wrapper.parentNode.insertBefore(this.element, this.wrapper);\n        remove(this.wrapper);\n        this.wrapper = null;\n        this.keyboardModuleRating.destroy();\n        this.keyboardModuleRating = null;\n        ['value', 'aria-label', 'name'].forEach(function (attr) {\n            _this.element.removeAttribute(attr);\n        });\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param  {RatingModel} newProp - Specifies new properties\n     * @param  {RatingModel} oldProp - Specifies old properties\n     * @returns {void}\n     * @private\n     */\n    Rating.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'value':\n                    this.updateValueChange(null, (this.value > this.min) ? this.value : this.min, false);\n                    break;\n                case 'min':\n                    this.updateMinValue();\n                    this.updateItemValue();\n                    this.updateLabel();\n                    break;\n                case 'showLabel':\n                    this.displayLabel();\n                    break;\n                case 'visible':\n                    this.wrapper.classList[!this.visible ? 'add' : 'remove'](HIDDEN);\n                    break;\n                case 'disabled':\n                    this.updateDisabled();\n                    break;\n                case 'readOnly':\n                    this.wrapper.classList[this.readOnly ? 'add' : 'remove'](READONLY);\n                    break;\n                case 'allowReset':\n                    this.updateReset();\n                    break;\n                case 'enableRtl':\n                    this.wrapper.classList[this.enableRtl ? 'add' : 'remove'](RTL);\n                    break;\n                case 'cssClass':\n                    if (oldProp.cssClass) {\n                        removeClass([this.wrapper], oldProp.cssClass.split(' '));\n                    }\n                    if (newProp.cssClass) {\n                        addClass([this.wrapper], newProp.cssClass.split(' '));\n                    }\n                    if (this.tooltipObj) {\n                        this.tooltipObj.setProperties({ cssClass: this.cssClass ? ('e-rating-tooltip ' + this.cssClass) : 'e-rating-tooltip' });\n                    }\n                    break;\n                case 'labelPosition':\n                    this.updateLabelPosition();\n                    break;\n                case 'showTooltip':\n                    this.updateTooltip();\n                    break;\n                case 'precision':\n                    this.updateMinValue();\n                    this.triggerChange(null, this.value, false);\n                    this.updateItemValue();\n                    this.updateLabel();\n                    break;\n                case 'enableSingleSelection':\n                    //To validate the value against single selection and update the items, label + trigger change event if value changed\n                    this.updateValueChange(null, this.currentValue, false);\n                    break;\n                case 'enableAnimation':\n                    this.wrapper.classList[this.enableAnimation ? 'add' : 'remove'](ANIMATION);\n                    break;\n                case 'emptyTemplate':\n                case 'fullTemplate':\n                    this.updateTemplateFunction();\n                    this.updateContent();\n                    break;\n                case 'labelTemplate':\n                    this.updateLabel();\n                    break;\n                case 'itemsCount':\n                    this.removeItemElements();\n                    this.renderItems();\n                    this.updateLabel();\n                    break;\n            }\n        }\n    };\n    __decorate([\n        Property(false)\n    ], Rating.prototype, \"allowReset\", void 0);\n    __decorate([\n        Property('')\n    ], Rating.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], Rating.prototype, \"disabled\", void 0);\n    __decorate([\n        Property('')\n    ], Rating.prototype, \"emptyTemplate\", void 0);\n    __decorate([\n        Property(true)\n    ], Rating.prototype, \"enableAnimation\", void 0);\n    __decorate([\n        Property(false)\n    ], Rating.prototype, \"enableSingleSelection\", void 0);\n    __decorate([\n        Property('')\n    ], Rating.prototype, \"fullTemplate\", void 0);\n    __decorate([\n        Property(5)\n    ], Rating.prototype, \"itemsCount\", void 0);\n    __decorate([\n        Property(LabelPosition.Right)\n    ], Rating.prototype, \"labelPosition\", void 0);\n    __decorate([\n        Property('')\n    ], Rating.prototype, \"labelTemplate\", void 0);\n    __decorate([\n        Property(0.0)\n    ], Rating.prototype, \"min\", void 0);\n    __decorate([\n        Property(PrecisionType.Full)\n    ], Rating.prototype, \"precision\", void 0);\n    __decorate([\n        Property(false)\n    ], Rating.prototype, \"readOnly\", void 0);\n    __decorate([\n        Property(false)\n    ], Rating.prototype, \"showLabel\", void 0);\n    __decorate([\n        Property(true)\n    ], Rating.prototype, \"showTooltip\", void 0);\n    __decorate([\n        Property('')\n    ], Rating.prototype, \"tooltipTemplate\", void 0);\n    __decorate([\n        Property(0.0)\n    ], Rating.prototype, \"value\", void 0);\n    __decorate([\n        Property(true)\n    ], Rating.prototype, \"visible\", void 0);\n    __decorate([\n        Event()\n    ], Rating.prototype, \"beforeItemRender\", void 0);\n    __decorate([\n        Event()\n    ], Rating.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Rating.prototype, \"onItemHover\", void 0);\n    __decorate([\n        Event()\n    ], Rating.prototype, \"valueChanged\", void 0);\n    Rating = __decorate([\n        NotifyPropertyChanges\n    ], Rating);\n    return Rating;\n}(Component));\nexport { Rating };\n"],"mappings":"AAAA,IAAIA,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAM,YAAY;EACrD,IAAIC,aAAa,GAAG,SAAAA,CAAUC,CAAC,EAAEC,CAAC,EAAE;IAChCF,aAAa,GAAGG,MAAM,CAACC,cAAc,IAChC;MAAEC,SAAS,EAAE;IAAG,CAAC,YAAYC,KAAK,IAAI,UAAUL,CAAC,EAAEC,CAAC,EAAE;MAAED,CAAC,CAACI,SAAS,GAAGH,CAAC;IAAE,CAAE,IAC5E,UAAUD,CAAC,EAAEC,CAAC,EAAE;MAAE,KAAK,IAAIK,CAAC,IAAIL,CAAC,EAAE,IAAIA,CAAC,CAACM,cAAc,CAACD,CAAC,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;IAAE,CAAC;IAC9E,OAAOP,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;EAC9B,CAAC;EACD,OAAO,UAAUD,CAAC,EAAEC,CAAC,EAAE;IACnBF,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;IACnB,SAASO,EAAEA,CAAA,EAAG;MAAE,IAAI,CAACC,WAAW,GAAGT,CAAC;IAAE;IACtCA,CAAC,CAACU,SAAS,GAAGT,CAAC,KAAK,IAAI,GAAGC,MAAM,CAACS,MAAM,CAACV,CAAC,CAAC,IAAIO,EAAE,CAACE,SAAS,GAAGT,CAAC,CAACS,SAAS,EAAE,IAAIF,EAAE,CAAC,CAAC,CAAC;EACxF,CAAC;AACL,CAAC,CAAE,CAAC;AACJ,IAAII,UAAU,GAAI,IAAI,IAAI,IAAI,CAACA,UAAU,IAAK,UAAUC,UAAU,EAAEC,MAAM,EAAEC,GAAG,EAAEC,IAAI,EAAE;EACnF,IAAIC,CAAC,GAAGC,SAAS,CAACC,MAAM;IAAEC,CAAC,GAAGH,CAAC,GAAG,CAAC,GAAGH,MAAM,GAAGE,IAAI,KAAK,IAAI,GAAGA,IAAI,GAAGd,MAAM,CAACmB,wBAAwB,CAACP,MAAM,EAAEC,GAAG,CAAC,GAAGC,IAAI;IAAEhB,CAAC;EAC5H,IAAI,OAAOsB,OAAO,KAAK,QAAQ,IAAI,OAAOA,OAAO,CAACC,QAAQ,KAAK,UAAU,EAAEH,CAAC,GAAGE,OAAO,CAACC,QAAQ,CAACV,UAAU,EAAEC,MAAM,EAAEC,GAAG,EAAEC,IAAI,CAAC,CAAC,KAC1H,KAAK,IAAIQ,CAAC,GAAGX,UAAU,CAACM,MAAM,GAAG,CAAC,EAAEK,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE,IAAIxB,CAAC,GAAGa,UAAU,CAACW,CAAC,CAAC,EAAEJ,CAAC,GAAG,CAACH,CAAC,GAAG,CAAC,GAAGjB,CAAC,CAACoB,CAAC,CAAC,GAAGH,CAAC,GAAG,CAAC,GAAGjB,CAAC,CAACc,MAAM,EAAEC,GAAG,EAAEK,CAAC,CAAC,GAAGpB,CAAC,CAACc,MAAM,EAAEC,GAAG,CAAC,KAAKK,CAAC;EACjJ,OAAOH,CAAC,GAAG,CAAC,IAAIG,CAAC,IAAIlB,MAAM,CAACuB,cAAc,CAACX,MAAM,EAAEC,GAAG,EAAEK,CAAC,CAAC,EAAEA,CAAC;AACjE,CAAC;AACD,SAASM,QAAQ,EAAEC,KAAK,EAAEC,UAAU,EAAEC,OAAO,EAAEC,SAAS,EAAEC,YAAY,EAAEC,WAAW,EAAEC,MAAM,EAAEC,OAAO,EAAEC,MAAM,QAAQ,sBAAsB;AAC1I,SAASC,iBAAiB,EAAEC,cAAc,EAAEC,qBAAqB,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,WAAW,EAAEC,qBAAqB,QAAQ,sBAAsB;AACrJ,SAASC,OAAO,QAAQ,wBAAwB;AAChD,IAAIC,OAAO,GAAG,qCAAqC;AACnD,IAAIC,QAAQ,GAAG,oBAAoB;AACnC,IAAIC,aAAa,GAAG,yBAAyB;AAC7C,IAAIC,QAAQ,GAAG,mBAAmB;AAClC,IAAIC,YAAY,GAAG,uBAAuB;AAC1C,IAAIC,KAAK,GAAG,gBAAgB;AAC5B,IAAIC,KAAK,GAAG,iBAAiB;AAC7B,IAAIC,MAAM,GAAG,iBAAiB;AAC9B,IAAIC,QAAQ,GAAG,YAAY;AAC3B,IAAIC,QAAQ,GAAG,mBAAmB;AAClC,IAAIC,GAAG,GAAG,OAAO;AACjB,IAAIC,SAAS,GAAG,oBAAoB;AACpC,IAAIC,YAAY,GAAG,eAAe;AAClC,IAAIC,aAAa,GAAG,gBAAgB;AACpC,IAAIC,aAAa,GAAG,kBAAkB;AACtC,IAAIC,WAAW,GAAG,gBAAgB;AAClC;AACA;AACA;AACA,OAAO,IAAIC,aAAa;AACxB,CAAC,UAAUA,aAAa,EAAE;EACtB;AACJ;AACA;EACIA,aAAa,CAAC,KAAK,CAAC,GAAG,KAAK;EAC5B;AACJ;AACA;EACIA,aAAa,CAAC,QAAQ,CAAC,GAAG,QAAQ;EAClC;AACJ;AACA;EACIA,aAAa,CAAC,MAAM,CAAC,GAAG,MAAM;EAC9B;AACJ;AACA;EACIA,aAAa,CAAC,OAAO,CAAC,GAAG,OAAO;AACpC,CAAC,EAAEA,aAAa,KAAKA,aAAa,GAAG,CAAC,CAAC,CAAC,CAAC;AACzC;AACA;AACA;AACA;AACA,OAAO,IAAIC,aAAa;AACxB,CAAC,UAAUA,aAAa,EAAE;EACtB;AACJ;AACA;EACIA,aAAa,CAAC,MAAM,CAAC,GAAG,MAAM;EAC9B;AACJ;AACA;EACIA,aAAa,CAAC,MAAM,CAAC,GAAG,MAAM;EAC9B;AACJ;AACA;EACIA,aAAa,CAAC,SAAS,CAAC,GAAG,SAAS;EACpC;AACJ;AACA;EACIA,aAAa,CAAC,OAAO,CAAC,GAAG,OAAO;AACpC,CAAC,EAAEA,aAAa,KAAKA,aAAa,GAAG,CAAC,CAAC,CAAC,CAAC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIC,MAAM,GAAG,aAAe,UAAUC,MAAM,EAAE;EAC1CjE,SAAS,CAACgE,MAAM,EAAEC,MAAM,CAAC;EACzB;AACJ;AACA;AACA;AACA;AACA;EACI,SAASD,MAAMA,CAACE,OAAO,EAAEC,OAAO,EAAE;IAC9B,IAAIC,KAAK,GAAGH,MAAM,CAACI,IAAI,CAAC,IAAI,EAAEH,OAAO,EAAEC,OAAO,CAAC,IAAI,IAAI;IACvDC,KAAK,CAACE,YAAY,GAAG,EAAE;IACvB,OAAOF,KAAK;EAChB;EACAJ,MAAM,CAACpD,SAAS,CAAC2D,SAAS,GAAG,YAAY;IACrC,IAAI,CAAC,IAAI,CAACJ,OAAO,CAACK,EAAE,EAAE;MAClB,IAAI,CAACL,OAAO,CAACK,EAAE,GAAGtC,WAAW,CAAC,IAAI,GAAG,IAAI,CAACuC,aAAa,CAAC,CAAC,CAAC;IAC9D;IACA,IAAI,CAACC,UAAU,GAAG;MACdC,SAAS,EAAE,WAAW;MACtBC,SAAS,EAAE,WAAW;MACtBC,UAAU,EAAE,YAAY;MACxBC,OAAO,EAAE,SAAS;MAClBC,KAAK,EAAE;IACX,CAAC;IACD,IAAI,CAACC,WAAW,GAAG,KAAK;IACxB,IAAI,CAACC,eAAe,GAAG,KAAK;EAChC,CAAC;EACDjB,MAAM,CAACpD,SAAS,CAACsE,MAAM,GAAG,YAAY;IAClC,IAAI,CAACC,UAAU,CAAC,CAAC;IACjB,IAAI,CAACC,cAAc,CAAC,CAAC;IACrB,IAAI,CAACC,sBAAsB,CAAC,CAAC;IAC7B,IAAI,CAACC,aAAa,CAAC,IAAI,EAAE,IAAI,CAACC,KAAK,EAAE,KAAK,CAAC;IAC3C,IAAI,CAACC,WAAW,CAAC,CAAC;IAClB,IAAI,CAACC,YAAY,CAAC,CAAC;EACvB,CAAC;EACDzB,MAAM,CAACpD,SAAS,CAACuE,UAAU,GAAG,YAAY;IACtC,IAAI,CAACO,OAAO,GAAG,IAAI,CAACC,aAAa,CAAC,KAAK,EAAE;MAAEC,SAAS,EAAE,IAAI,GAAG,IAAI,CAACnB,aAAa,CAAC,CAAC,GAAG;IAAc,CAAC,CAAC;IACpG,IAAI,CAACN,OAAO,CAAC0B,UAAU,CAACC,YAAY,CAAC,IAAI,CAACJ,OAAO,EAAE,IAAI,CAACvB,OAAO,CAAC;IAChE,IAAI,CAACuB,OAAO,CAACK,WAAW,CAAC,IAAI,CAAC5B,OAAO,CAAC;IACtC,IAAK,IAAI,CAACA,OAAO,CAAC6B,YAAY,CAAC,MAAM,CAAC,IAAI,IAAI,EAAG;MAC7C,IAAI,CAAC7B,OAAO,CAAC8B,YAAY,CAAC,MAAM,EAAE,IAAI,CAAC9B,OAAO,CAACK,EAAE,CAAC;IACtD;IACA1C,UAAU,CAAC,IAAI,CAACqC,OAAO,EAAE;MAAE,YAAY,EAAE;IAAS,CAAC,CAAC;IACpD,IAAI,CAAC+B,cAAc,CAAC,CAAC;IACrB,IAAI,CAACC,WAAW,CAAC,CAAC;IAClB,IAAI,IAAI,CAACC,QAAQ,EAAE;MACf,IAAI,CAACV,OAAO,CAACW,SAAS,CAACC,GAAG,CAAC/C,QAAQ,CAAC;IACxC;IACA,IAAI,CAAC,IAAI,CAACgD,OAAO,EAAE;MACf,IAAI,CAACb,OAAO,CAACW,SAAS,CAACC,GAAG,CAACjD,MAAM,CAAC;IACtC;IACA,IAAI,IAAI,CAACmD,SAAS,EAAE;MAChB,IAAI,CAACd,OAAO,CAACW,SAAS,CAACC,GAAG,CAAC9C,GAAG,CAAC;IACnC;IACA,IAAI,IAAI,CAACiD,eAAe,EAAE;MACtB,IAAI,CAACf,OAAO,CAACW,SAAS,CAACC,GAAG,CAAC7C,SAAS,CAAC;IACzC;IACA,IAAI,IAAI,CAACiD,QAAQ,EAAE;MACf9E,QAAQ,CAAC,CAAC,IAAI,CAAC8D,OAAO,CAAC,EAAE,IAAI,CAACgB,QAAQ,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC;IACtD;IACA,IAAI,CAACC,aAAa,CAAC,CAAC;IACpB,IAAI,CAACC,iBAAiB,CAAC,CAAC;IACxB,IAAI,CAACC,cAAc,CAAC,CAAC;EACzB,CAAC;EACD9C,MAAM,CAACpD,SAAS,CAACkG,cAAc,GAAG,YAAY;IAC1C,IAAI,CAACpB,OAAO,CAACW,SAAS,CAAC,IAAI,CAACU,QAAQ,GAAG,KAAK,GAAG,QAAQ,CAAC,CAACzD,QAAQ,CAAC;IAClExB,UAAU,CAAC,IAAI,CAACkF,cAAc,EAAE;MAAE,UAAU,EAAG,IAAI,CAACD,QAAQ,GAAI,IAAI,GAAG;IAAI,CAAC,CAAC;IAC7E,IAAI,CAACE,iBAAiB,CAAC,CAAC;EAC5B,CAAC;EACDjD,MAAM,CAACpD,SAAS,CAACqG,iBAAiB,GAAG,YAAY;IAC7C,IAAI,IAAI,CAACC,UAAU,EAAE;MACjB,IAAIC,UAAU,GAAI,IAAI,CAAC5B,KAAK,IAAI,IAAI,CAAC6B,GAAG,IAAK,IAAI,CAACL,QAAQ;MAC1D,IAAI,CAACM,YAAY,CAAChB,SAAS,CAACc,UAAU,GAAG,KAAK,GAAG,QAAQ,CAAC,CAAC7D,QAAQ,CAAC;MACpExB,UAAU,CAAC,IAAI,CAACuF,YAAY,EAAE;QAAE,UAAU,EAAGF,UAAU,GAAG,IAAI,GAAG,GAAI;QAAE,aAAa,EAAEA,UAAU,CAACG,QAAQ,CAAC;MAAE,CAAC,CAAC;IAClH;EACJ,CAAC;EACDtD,MAAM,CAACpD,SAAS,CAACsF,cAAc,GAAG,YAAY;IAC1C,IAAI9B,KAAK,GAAG,IAAI;IAChB,IAAI,CAAC4C,cAAc,GAAG,IAAI,CAACrB,aAAa,CAAC,KAAK,EAAE;MAC5CC,SAAS,EAAE7C,QAAQ;MACnByB,EAAE,EAAE,IAAI,CAACL,OAAO,CAACK,EAAE,GAAG;IAC1B,CAAC,CAAC;IACF1C,UAAU,CAAC,IAAI,CAACkF,cAAc,EAAE;MAAE,YAAY,EAAE,QAAQ;MAAE,MAAM,EAAE;IAAS,CAAC,CAAC;IAC7E,IAAI,CAACtB,OAAO,CAACK,WAAW,CAAC,IAAI,CAACiB,cAAc,CAAC;IAC7C/E,YAAY,CAACqE,GAAG,CAAC,IAAI,CAACU,cAAc,EAAE,WAAW,EAAE,UAAUO,CAAC,EAAE;MAAE,OAAOnD,KAAK,CAACoD,gBAAgB,CAACD,CAAC,CAAC;IAAE,CAAC,EAAE,IAAI,CAAC;IAC5GtF,YAAY,CAACqE,GAAG,CAAC,IAAI,CAACU,cAAc,EAAE5E,OAAO,CAACqF,aAAa,EAAE,IAAI,CAACC,eAAe,EAAE,IAAI,CAAC;EAC5F,CAAC;EACD1D,MAAM,CAACpD,SAAS,CAAC4G,gBAAgB,GAAG,UAAUD,CAAC,EAAE;IAC7C,IAAI,CAAC,IAAI,CAACtC,eAAe,EAAE;MACvB,IAAI,CAACS,OAAO,CAACW,SAAS,CAACC,GAAG,CAAC,gBAAgB,CAAC;MAC5C,IAAI,CAACrB,eAAe,GAAG,IAAI;IAC/B;IACA,IAAI,CAACS,OAAO,CAACW,SAAS,CAACC,GAAG,CAAC,gBAAgB,CAAC;IAC5C,IAAIqB,IAAI,GAAG,IAAI,CAACX,cAAc,CAACY,qBAAqB,CAAC,CAAC;IACtD,IAAIC,CAAC,GAAGN,CAAC,CAACO,OAAO,CAAC,CAAC,CAAC,CAACC,OAAO,GAAGJ,IAAI,CAACE,CAAC;IACrC,IAAIG,SAAS,GAAIH,CAAC,GAAGF,IAAI,CAACM,KAAK,GAAI,IAAI,CAACC,UAAU;IAClDF,SAAS,GAAI,IAAI,CAACxB,SAAS,GAAK,IAAI,CAAC0B,UAAU,GAAGF,SAAS,GAAIA,SAAS;IACxEA,SAAS,GAAGA,SAAS,GAAG,IAAI,CAACZ,GAAG,GAAG,IAAI,CAACA,GAAG,GAAGY,SAAS,GAAG,IAAI,CAACE,UAAU,GAAG,IAAI,CAACA,UAAU,GAAGF,SAAS;IACvGA,SAAS,GAAG,IAAI,CAACG,aAAa,CAACH,SAAS,CAAC;IACzC,IAAI7D,OAAO,GAAG6D,SAAS,KAAK,CAAC,GAAG,IAAI,GAAG,IAAI,CAAC1D,YAAY,CAAC8D,QAAQ,CAAC,CAACC,IAAI,CAACC,IAAI,CAACN,SAAS,CAAC,GAAG,CAAC,EAAEV,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IAC7G,IAAIU,SAAS,KAAK,IAAI,CAACO,YAAY,EAAE;MACjC,IAAI,IAAI,CAACC,WAAW,IAAIrE,OAAO,EAAE;QAC7B,IAAI,CAACsE,iBAAiB,CAACtE,OAAO,EAAE,KAAK,CAAC;MAC1C;MACA;IACJ;IACA,IAAIuE,aAAa,GAAG,IAAI,CAACH,YAAY;IACrC,IAAI,CAACjD,aAAa,CAACiC,CAAC,EAAES,SAAS,CAAC;IAChC,IAAI,CAACW,kBAAkB,CAACX,SAAS,CAAC;IAClC,IAAI,IAAI,CAACQ,WAAW,EAAE;MAClB,IAAIrE,OAAO,EAAE;QACT,IAAIkE,IAAI,CAACC,IAAI,CAACN,SAAS,CAAC,KAAKK,IAAI,CAACC,IAAI,CAACI,aAAa,CAAC,EAAE;UACnD,IAAI,CAACE,kBAAkB,CAAC,CAAC;QAC7B;QACA,IAAI,CAACH,iBAAiB,CAACtE,OAAO,EAAE,IAAI,CAAC;MACzC,CAAC,MACI;QACD,IAAI,CAACyE,kBAAkB,CAAC,CAAC;MAC7B;IACJ;EACJ,CAAC;EACD5E,MAAM,CAACpD,SAAS,CAAC8G,eAAe,GAAG,YAAY;IAC3C,IAAI,CAACkB,kBAAkB,CAAC,CAAC;IACzB,IAAI,CAAClD,OAAO,CAACW,SAAS,CAAC3D,MAAM,CAAC,gBAAgB,CAAC;EACnD,CAAC;EACDsB,MAAM,CAACpD,SAAS,CAACyE,sBAAsB,GAAG,YAAY;IAClD,IAAI,CAACwD,qBAAqB,GAAG,IAAI,CAACC,aAAa,GAAG,IAAI,CAACC,iBAAiB,CAAC,IAAI,CAACD,aAAa,CAAC,GAAG,IAAI;IACnG,IAAI,CAACE,oBAAoB,GAAG,IAAI,CAACC,YAAY,GAAG,IAAI,CAACF,iBAAiB,CAAC,IAAI,CAACE,YAAY,CAAC,GAAG,IAAI;EACpG,CAAC;EACDjF,MAAM,CAACpD,SAAS,CAAC4E,WAAW,GAAG,YAAY;IACvC,IAAIpB,KAAK,GAAG,IAAI;IAChB,KAAK,IAAI1C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACwG,UAAU,EAAExG,CAAC,EAAE,EAAE;MACtC,IAAIwH,mBAAmB,GAAG,IAAI,CAACvD,aAAa,CAAC,MAAM,EAAE;QAAEC,SAAS,EAAE5C;MAAc,CAAC,CAAC;MAClF,IAAImG,QAAQ,GAAG,IAAI,CAACxD,aAAa,CAAC,MAAM,EAAE;QAAEC,SAAS,EAAE;MAAgB,CAAC,CAAC;MACzE,IAAIwD,WAAW,GAAG,IAAI,CAACC,cAAc,CAAC,IAAI,CAAC9D,KAAK,EAAE7D,CAAC,CAAC;MACpD,IAAI,CAAC4H,iBAAiB,CAACH,QAAQ,EAAEC,WAAW,EAAE1H,CAAC,EAAE,KAAK,CAAC;MACvDwH,mBAAmB,CAACnD,WAAW,CAACoD,QAAQ,CAAC;MACzC,IAAI,CAACI,eAAe,CAACL,mBAAmB,EAAExH,CAAC,GAAG,CAAC,CAAC;MAChD,IAAI,CAAC4C,YAAY,CAACkF,IAAI,CAACN,mBAAmB,CAAC;MAC3C,IAAIO,SAAS,GAAG;QAAEtF,OAAO,EAAE+E,mBAAmB;QAAE3D,KAAK,EAAE7D,CAAC,GAAG;MAAE,CAAC;MAC9D,IAAI,CAACgI,OAAO,CAAC,kBAAkB,EAAED,SAAS,EAAE,UAAUE,IAAI,EAAE;QACxDvF,KAAK,CAAC4C,cAAc,CAACjB,WAAW,CAAC4D,IAAI,CAACxF,OAAO,CAAC;MAClD,CAAC,CAAC;IACN;IACArC,UAAU,CAAC,IAAI,CAACkF,cAAc,EAAE;MAAE,eAAe,EAAE,IAAI,CAACkB,UAAU,CAACZ,QAAQ,CAAC;IAAE,CAAC,CAAC;IAChF,IAAI,CAACsC,eAAe,CAAC,KAAK,CAAC;EAC/B,CAAC;EACD5F,MAAM,CAACpD,SAAS,CAAC0I,iBAAiB,GAAG,UAAUO,OAAO,EAAEC,GAAG,EAAEC,KAAK,EAAEC,UAAU,EAAE;IAC5E,IAAIA,UAAU,EAAE;MACZ,IAAI,CAACC,iBAAiB,CAACJ,OAAO,CAAC;IACnC;IACA,IAAI,IAAI,CAACZ,YAAY,IAAIa,GAAG,KAAK,CAAC,EAAE;MAChCD,OAAO,CAACxD,SAAS,CAACC,GAAG,CAAC5C,YAAY,CAAC;MACnCrB,MAAM,CAAC,IAAI,CAAC2G,oBAAoB,CAAC;QAAEe,KAAK,EAAEA,KAAK;QAAEX,WAAW,EAAEU;MAAI,CAAC,EAAE,IAAI,EAAE,oBAAoB,EAAG,IAAI,CAAC3F,OAAO,CAACK,EAAE,GAAG,cAAc,EAAG,IAAI,CAAC0F,gBAAgB,CAAC,EAAEL,OAAO,CAAC;IACzK,CAAC,MACI,IAAI,IAAI,CAACf,aAAa,EAAE;MACzBe,OAAO,CAACxD,SAAS,CAACC,GAAG,CAAC3C,aAAa,CAAC;MACpCtB,MAAM,CAAC,IAAI,CAACwG,qBAAqB,CAAC;QAAEkB,KAAK,EAAEA,KAAK;QAAEX,WAAW,EAAEU;MAAI,CAAC,EAAE,IAAI,EAAE,qBAAqB,EAAG,IAAI,CAAC3F,OAAO,CAACK,EAAE,GAAG,eAAe,EAAG,IAAI,CAAC0F,gBAAgB,CAAC,EAAEL,OAAO,CAAC;IAC5K,CAAC,MACI;MACDjI,QAAQ,CAAC,CAACiI,OAAO,CAAC,EAAE/G,OAAO,CAAC6D,KAAK,CAAC,GAAG,CAAC,CAAC;IAC3C;EACJ,CAAC;EACD3C,MAAM,CAACpD,SAAS,CAACqJ,iBAAiB,GAAG,UAAUJ,OAAO,EAAE;IACpDA,OAAO,CAACxD,SAAS,CAAC3D,MAAM,CAACgB,YAAY,EAAEC,aAAa,CAAC;IACrDhB,WAAW,CAAC,CAACkH,OAAO,CAAC,EAAE/G,OAAO,CAAC6D,KAAK,CAAC,GAAG,CAAC,CAAC;IAC1C,IAAIkD,OAAO,CAACM,UAAU,EAAE;MACpBN,OAAO,CAACO,SAAS,GAAG,EAAE;IAC1B;EACJ,CAAC;EACDpG,MAAM,CAACpD,SAAS,CAACgG,aAAa,GAAG,YAAY;IACzC,IAAI,IAAI,CAAC4B,WAAW,EAAE;MAClB,IAAI,CAAC6B,UAAU,GAAG,IAAIxH,OAAO,CAAC;QAC1B7B,MAAM,EAAE,0BAA0B;QAAEsJ,eAAe,EAAE,IAAI;QACzDC,OAAO,EAAE,QAAQ;QAAE7D,QAAQ,EAAE,IAAI,CAACA,QAAQ,GAAI,mBAAmB,GAAG,IAAI,CAACA,QAAQ,GAAI;MACzF,CAAC,CAAC;MACF,IAAI,CAAC2D,UAAU,CAACG,QAAQ,CAAC,IAAI,CAACxD,cAAc,CAAC;IACjD,CAAC,MACI;MACD,IAAI,CAAC1E,iBAAiB,CAAC,IAAI,CAAC+H,UAAU,CAAC,EAAE;QACrC,IAAI,CAACA,UAAU,CAACI,OAAO,CAAC,CAAC;QACzB,IAAI,CAACJ,UAAU,GAAG,IAAI;MAC1B;IACJ;EACJ,CAAC;EACDrG,MAAM,CAACpD,SAAS,CAACwE,cAAc,GAAG,YAAY;IAC1C,IAAI,CAACsF,aAAa,CAAC;MAAEtD,GAAG,EAAE,IAAI,CAACe,aAAa,CAAC,IAAI,CAACf,GAAG;IAAE,CAAC,EAAE,IAAI,CAAC;IAC/D,IAAI,IAAI,CAACA,GAAG,GAAG,CAAC,IAAI,IAAI,CAAC7B,KAAK,GAAG,IAAI,CAAC6B,GAAG,EAAE;MACvC,IAAI,CAAC9B,aAAa,CAAC,IAAI,EAAE,IAAI,CAAC8B,GAAG,EAAE,KAAK,CAAC;IAC7C;IACAtF,UAAU,CAAC,IAAI,CAACkF,cAAc,EAAE;MAAE,eAAe,EAAE,IAAI,CAACI,GAAG,CAACE,QAAQ,CAAC;IAAE,CAAC,CAAC;EAC7E,CAAC;EACDtD,MAAM,CAACpD,SAAS,CAACuH,aAAa,GAAG,UAAUI,YAAY,EAAE;IACrD,IAAIA,YAAY,GAAG,IAAI,CAACL,UAAU,EAAE;MAChCK,YAAY,GAAG,IAAI,CAACL,UAAU;IAClC,CAAC,MACI,IAAIK,YAAY,GAAG,CAAC,EAAE;MACvBA,YAAY,GAAG,CAAC;IACpB,CAAC,MACI;MACDA,YAAY,GAAK,IAAI,CAACoC,SAAS,KAAK5G,aAAa,CAAC6G,IAAI,IAAK,IAAI,CAACC,qBAAqB,GAAIxC,IAAI,CAACyC,KAAK,CAACvC,YAAY,CAAC,GAC5G,IAAI,CAACoC,SAAS,KAAK5G,aAAa,CAACgH,IAAI,GAAK1C,IAAI,CAACyC,KAAK,CAACvC,YAAY,GAAG,CAAC,CAAC,GAAG,CAAC,GACtE,IAAI,CAACoC,SAAS,KAAK5G,aAAa,CAACiH,OAAO,GAAK3C,IAAI,CAACyC,KAAK,CAACvC,YAAY,GAAG,CAAC,CAAC,GAAG,CAAC,GAAKF,IAAI,CAACyC,KAAK,CAACvC,YAAY,GAAG,EAAE,CAAC,GAAG,EAAG;IAClI;IACA,OAAOA,YAAY;EACvB,CAAC;EACDvE,MAAM,CAACpD,SAAS,CAACyI,cAAc,GAAG,UAAU9D,KAAK,EAAE7D,CAAC,EAAE;IAClD,OAAQ,IAAI,CAACmJ,qBAAqB,GAAOtF,KAAK,GAAG7D,CAAC,IAAM6D,KAAK,IAAI7D,CAAC,GAAG,CAAE,GAAI,CAAC,GAAG,CAAC,GAC3E6D,KAAK,IAAI7D,CAAC,GAAG,CAAC,GAAI,CAAC,GAAK6D,KAAK,GAAG7D,CAAC,GAAI,CAAC,GAAI6D,KAAK,GAAG7D,CAAG;EAC9D,CAAC;EACDsC,MAAM,CAACpD,SAAS,CAACgJ,eAAe,GAAG,UAAUqB,QAAQ,EAAE;IACnD,IAAIA,QAAQ,KAAK,KAAK,CAAC,EAAE;MAAEA,QAAQ,GAAG,IAAI;IAAE;IAC5C,IAAIA,QAAQ,IAAI,IAAI,CAACC,OAAO,EAAE;MAC1B,IAAI,CAACC,aAAa,CAAC,CAAC,qBAAqB,EAAE,oBAAoB,CAAC,CAAC;IACrE;IACA,KAAK,IAAIzJ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACwG,UAAU,EAAExG,CAAC,EAAE,EAAE;MACtC,IAAI0J,WAAW,GAAG,IAAI,CAAC9G,YAAY,CAAC8D,QAAQ,CAAC1G,CAAC,CAAC4F,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;MAC/D8D,WAAW,CAAC/E,SAAS,CAAC3D,MAAM,CAACO,QAAQ,EAAEC,YAAY,EAAEU,aAAa,CAAC;MACnE,IAAIwF,WAAW,GAAG,IAAI,CAACC,cAAc,CAAC,IAAI,CAACd,YAAY,EAAE7G,CAAC,CAAC;MAC3D,IAAI0H,WAAW,KAAK,CAAC,EAAE;QACnBgC,WAAW,CAAC/E,SAAS,CAACC,GAAG,CAACrD,QAAQ,CAAC;MACvC,CAAC,MACI,IAAImG,WAAW,GAAG,CAAC,EAAE;QACtBgC,WAAW,CAAC/E,SAAS,CAACC,GAAG,CAACpD,YAAY,CAAC;MAC3C,CAAC,MACI,IAAK,IAAI,CAACyH,SAAS,KAAK5G,aAAa,CAAC6G,IAAI,IAAMlJ,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC6D,KAAM,IAAK,CAAC,IAAI,CAACsF,qBAAsB,EAAE;QACxGO,WAAW,CAAC/E,SAAS,CAACC,GAAG,CAAC1C,aAAa,CAAC;MAC5C;MACA,IAAIqH,QAAQ,EAAE;QACV,IAAI,CAACI,iBAAiB,CAACjC,WAAW,EAAE1H,CAAC,CAAC;MAC1C;MACA0J,WAAW,CAACE,KAAK,CAACC,WAAW,CAAC1H,WAAW,EAAGuF,WAAW,GAAG,GAAG,GAAI,GAAG,CAAC;MACrEgC,WAAW,CAAC/E,SAAS,CAAG,IAAI,CAACd,KAAK,KAAK,CAAC,IAAM7D,CAAC,KAAK,CAAE,IAAM,IAAI,CAAC6D,KAAK,KAAK7D,CAAC,GAAG,CAAE,IAAM0H,WAAW,GAAG,CAAC,IAAMA,WAAW,GAAG,CAAG,GAAG,KAAK,GAAG,QAAQ,CAAC,CAAC,gBAAgB,CAAC;IACvK;IACA,IAAI6B,QAAQ,EAAE;MACV,IAAI,CAACO,oBAAoB,CAAC,CAAC;IAC/B;IACA,IAAI,CAACvE,iBAAiB,CAAC,CAAC;IACxBnF,UAAU,CAAC,IAAI,CAACkF,cAAc,EAAE;MAAE,eAAe,EAAE,IAAI,CAACuB,YAAY,CAACjB,QAAQ,CAAC;IAAE,CAAC,CAAC;IAClFxF,UAAU,CAAC,IAAI,CAACqC,OAAO,EAAE;MAAE,OAAO,EAAE,IAAI,CAACoB,KAAK,CAAC+B,QAAQ,CAAC;IAAE,CAAC,CAAC;EAChE,CAAC;EACDtD,MAAM,CAACpD,SAAS,CAACyK,iBAAiB,GAAG,UAAUjC,WAAW,EAAEW,KAAK,EAAE;IAC/D,IAAI,CAAC,IAAI,CAACd,YAAY,IAAI,CAAC,IAAI,CAACH,aAAa,EAAE;MAC3C;IACJ;IACA,IAAIe,OAAO,GAAG,IAAI,CAACvF,YAAY,CAAC8D,QAAQ,CAAC2B,KAAK,CAACzC,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACmE,aAAa,CAAC,gBAAgB,CAAC;IAC/F,IAAI,IAAI,CAACxC,YAAY,IAAIG,WAAW,KAAK,CAAC,EAAE;MACxC,IAAI,CAAC,IAAI,CAAC8B,OAAO,IAAIrB,OAAO,CAACxD,SAAS,CAACqF,QAAQ,CAAChI,YAAY,CAAC,EAAE;QAC3D;MACJ;MACA,IAAI,CAACuG,iBAAiB,CAACJ,OAAO,CAAC;MAC/BA,OAAO,CAACxD,SAAS,CAACC,GAAG,CAAC5C,YAAY,CAAC;MACnCrB,MAAM,CAAC,IAAI,CAAC2G,oBAAoB,CAAC;QAAEI,WAAW,EAAEA,WAAW;QAAEW,KAAK,EAAEA;MAAM,CAAC,EAAE,IAAI,EAAE,oBAAoB,EAAG,IAAI,CAAC5F,OAAO,CAACK,EAAE,GAAG,cAAc,GAAGuF,KAAK,EAAG,IAAI,CAACG,gBAAgB,CAAC,EAAEL,OAAO,CAAC;IACzL,CAAC,MACI,IAAI,IAAI,CAACf,aAAa,EAAE;MACzB,IAAI,CAAC,IAAI,CAACoC,OAAO,IAAIrB,OAAO,CAACxD,SAAS,CAACqF,QAAQ,CAAC/H,aAAa,CAAC,EAAE;QAC5D;MACJ;MACA,IAAI,CAACsG,iBAAiB,CAACJ,OAAO,CAAC;MAC/BA,OAAO,CAACxD,SAAS,CAACC,GAAG,CAAC3C,aAAa,CAAC;MACpCtB,MAAM,CAAC,IAAI,CAACwG,qBAAqB,CAAC;QAAEO,WAAW,EAAEA,WAAW;QAAEW,KAAK,EAAEA;MAAM,CAAC,EAAE,IAAI,EAAE,qBAAqB,EAAG,IAAI,CAAC5F,OAAO,CAACK,EAAE,GAAG,eAAe,GAAGuF,KAAK,EAAG,IAAI,CAACG,gBAAgB,CAAC,EAAEL,OAAO,CAAC;IAC5L,CAAC,MACI;MACD,IAAI,CAACI,iBAAiB,CAACJ,OAAO,CAAC;MAC/BjI,QAAQ,CAAC,CAACiI,OAAO,CAAC,EAAE/G,OAAO,CAAC6D,KAAK,CAAC,GAAG,CAAC,CAAC;IAC3C;EACJ,CAAC;EACD3C,MAAM,CAACpD,SAAS,CAAC+K,oBAAoB,GAAG,UAAUC,QAAQ,EAAE;IACxD,IAAIxH,KAAK,GAAG,IAAI;IAChB,IAAI,IAAI,CAACoE,WAAW,EAAE;MAClB,IAAI,IAAI,CAAC0C,OAAO,EAAE;QACd,IAAI,CAACC,aAAa,CAAC,CAAC,uBAAuB,CAAC,CAAC;MACjD;MACA,IAAIU,SAAS;MACb,IAAI,IAAI,CAACC,eAAe,EAAE;QACtBD,SAAS,GAAG,IAAI,CAAClG,aAAa,CAAC,MAAM,EAAE;UAAEC,SAAS,EAAE;QAA2B,CAAC,CAAC;QACjF,IAAImG,gBAAgB,GAAG,IAAI,CAAChD,iBAAiB,CAAC,IAAI,CAAC+C,eAAe,CAAC;QACnEzJ,MAAM,CAAC0J,gBAAgB,CAAC;UAAExG,KAAK,EAAE,IAAI,CAACgD;QAAa,CAAC,EAAE,IAAI,EAAE,uBAAuB,EAAG,IAAI,CAACpE,OAAO,CAACK,EAAE,GAAG,iBAAiB,EAAG,IAAI,CAAC0F,gBAAgB,CAAC,EAAE2B,SAAS,CAAC;QAC9J,IAAI,CAACxB,UAAU,CAACK,aAAa,CAAC;UAAEsB,OAAO,EAAEH;QAAU,CAAC,EAAED,QAAQ,CAAC;QAC/D,IAAI,IAAI,CAACK,SAAS,EAAE;UAChBC,UAAU,CAAC,YAAY;YACnB,IAAIC,UAAU,GAAG/H,KAAK,CAAC4C,cAAc,CAACoF,gBAAgB,CAAC,GAAG,GAAGpJ,aAAa,GAAG,GAAG,GAAGC,QAAQ,CAAC;YAC5FmB,KAAK,CAACiG,UAAU,CAACgC,OAAO,CAACF,UAAU,CAACA,UAAU,CAAC9K,MAAM,GAAG,CAAC,CAAC,CAAC;UAC/D,CAAC,CAAC;QACN;MACJ,CAAC,MACI;QACDwK,SAAS,GAAG,IAAI,CAACtD,YAAY,CAACjB,QAAQ,CAAC,CAAC;QACxC,IAAI,CAAC+C,UAAU,CAACK,aAAa,CAAC;UAAEsB,OAAO,EAAEpJ,qBAAqB,CAAC,YAAY;YAAE,OAAOiJ,SAAS;UAAE,CAAC;QAAE,CAAC,EAAED,QAAQ,CAAC;MAClH;MACA,IAAI,CAACJ,oBAAoB,CAAC,CAAC;IAC/B;EACJ,CAAC;EACDxH,MAAM,CAACpD,SAAS,CAACmI,iBAAiB,GAAG,UAAUuD,QAAQ,EAAE;IACrD,IAAIC,aAAa,GAAG,EAAE;IACtB,IAAI;MACA,IAAI,OAAOD,QAAQ,KAAK,UAAU,EAAE;QAChC,IAAIE,OAAO,GAAGrK,MAAM,CAACmK,QAAQ,CAAC;QAC9B,IAAIE,OAAO,EAAE;UACT;UACAD,aAAa,GAAGC,OAAO,CAACC,OAAO,KAAK,QAAQ,GAAGD,OAAO,CAACpC,SAAS,GAAGoC,OAAO,CAACE,SAAS;QACxF,CAAC,MACI;UACDH,aAAa,GAAGD,QAAQ;QAC5B;MACJ,CAAC,MACI;QACDC,aAAa,GAAGD,QAAQ;MAC5B;IACJ,CAAC,CACD,OAAO/E,CAAC,EAAE;MACNgF,aAAa,GAAGD,QAAQ;IAC5B;IACA,OAAOvK,OAAO,CAACwK,aAAa,CAAC;EACjC,CAAC;EACDvI,MAAM,CAACpD,SAAS,CAAC6E,YAAY,GAAG,YAAY;IACxC,IAAI,IAAI,CAACkH,SAAS,EAAE;MAChB,IAAI,CAACC,SAAS,GAAG,IAAI,CAACjH,aAAa,CAAC,MAAM,EAAE;QAAEC,SAAS,EAAEzC;MAAM,CAAC,CAAC;MACjE,IAAI,CAAC0J,WAAW,CAAC,CAAC;MAClB,IAAI,CAACC,mBAAmB,CAAC,CAAC;IAC9B,CAAC,MACI;MACD,IAAI,IAAI,CAACpH,OAAO,CAACgG,QAAQ,CAAC,IAAI,CAACkB,SAAS,CAAC,EAAE;QACvClK,MAAM,CAAC,IAAI,CAACkK,SAAS,CAAC;QACtB,IAAI,CAACA,SAAS,GAAG,IAAI;MACzB;IACJ;EACJ,CAAC;EACD5I,MAAM,CAACpD,SAAS,CAACiM,WAAW,GAAG,YAAY;IACvC,IAAI,IAAI,CAACF,SAAS,EAAE;MAChB,IAAI,IAAI,CAACI,aAAa,EAAE;QACpB,IAAI,IAAI,CAAC7B,OAAO,EAAE;UACd,IAAI,CAACC,aAAa,CAAC,CAAC,qBAAqB,CAAC,CAAC;QAC/C;QACA,IAAI,IAAI,CAACyB,SAAS,CAACzC,UAAU,EAAE;UAC3B,IAAI,CAACyC,SAAS,CAACxC,SAAS,GAAG,EAAE;QACjC;QACA,IAAI2B,gBAAgB,GAAG,IAAI,CAAChD,iBAAiB,CAAC,IAAI,CAACgE,aAAa,CAAC;QACjE1K,MAAM,CAAC0J,gBAAgB,CAAC;UAAExG,KAAK,EAAE,IAAI,CAACgD;QAAa,CAAC,EAAE,IAAI,EAAE,qBAAqB,EAAG,IAAI,CAACpE,OAAO,CAACK,EAAE,GAAG,eAAe,EAAG,IAAI,CAAC0F,gBAAgB,CAAC,EAAE,IAAI,CAAC0C,SAAS,CAAC;QAC/J,IAAI,CAACpB,oBAAoB,CAAC,CAAC;MAC/B,CAAC,MACI;QACD,IAAI,CAACoB,SAAS,CAACI,WAAW,GAAG,IAAI,CAACzE,YAAY,GAAG,KAAK,GAAG,IAAI,CAACL,UAAU;MAC5E;IACJ;EACJ,CAAC;EACDlE,MAAM,CAACpD,SAAS,CAACuF,WAAW,GAAG,YAAY;IACvC,IAAI,IAAI,CAACe,UAAU,EAAE;MACjB,IAAI,CAACG,YAAY,GAAG,IAAI,CAAC1B,aAAa,CAAC,MAAM,EAAE;QAC3CC,SAAS,EAAExC,KAAK;QAChB6J,KAAK,EAAE;UAAE,YAAY,EAAE,aAAa;UAAE,MAAM,EAAE;QAAS;MAC3D,CAAC,CAAC;MACF,IAAI,CAAChG,iBAAiB,CAAC,CAAC;MACxBhF,YAAY,CAACqE,GAAG,CAAC,IAAI,CAACe,YAAY,EAAE,OAAO,EAAE,IAAI,CAAC6F,YAAY,EAAE,IAAI,CAAC;MACrE,IAAI,CAACxH,OAAO,CAACI,YAAY,CAAC,IAAI,CAACuB,YAAY,EAAE,IAAI,CAACL,cAAc,CAAC;IACrE,CAAC,MACI;MACD,IAAI,IAAI,CAACtB,OAAO,CAACgG,QAAQ,CAAC,IAAI,CAACrE,YAAY,CAAC,EAAE;QAC1C3E,MAAM,CAAC,IAAI,CAAC2E,YAAY,CAAC;QACzB,IAAI,CAACA,YAAY,GAAG,IAAI;MAC5B;IACJ;EACJ,CAAC;EACDrD,MAAM,CAACpD,SAAS,CAACkM,mBAAmB,GAAG,YAAY;IAC/C,IAAI,CAACK,kBAAkB,CAAC,CAAC;IACzB,IAAI,CAACP,SAAS,CAACvG,SAAS,CAACC,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC8G,aAAa,CAACC,WAAW,CAAC,CAAC,CAAC;IAC3E,IAAI,IAAI,CAACD,aAAa,KAAK,MAAM,IAAI,IAAI,CAACA,aAAa,KAAK,KAAK,EAAE;MAC/D,IAAI,CAAC1H,OAAO,CAACyE,UAAU,CAACmD,KAAK,CAAC,IAAI,CAACV,SAAS,CAAC;IACjD,CAAC,MACI;MACD,IAAI,CAAClH,OAAO,CAACK,WAAW,CAAC,IAAI,CAAC6G,SAAS,CAAC;IAC5C;EACJ,CAAC;EACD5I,MAAM,CAACpD,SAAS,CAACuM,kBAAkB,GAAG,YAAY;IAC9C,IAAII,SAAS,GAAG,IAAI,CAACX,SAAS,CAACvG,SAAS,CAACd,KAAK,CAACiI,KAAK,CAAC,qCAAqC,CAAC;IAC3F,IAAID,SAAS,EAAE;MACX5K,WAAW,CAAC,CAAC,IAAI,CAACiK,SAAS,CAAC,EAAEW,SAAS,CAAC;IAC5C;EACJ,CAAC;EACDvJ,MAAM,CAACpD,SAAS,CAAC2I,eAAe,GAAG,UAAU6B,WAAW,EAAErB,KAAK,EAAE;IAC7D,IAAI3F,KAAK,GAAG,IAAI;IAChBnC,YAAY,CAACqE,GAAG,CAAC8E,WAAW,EAAE,OAAO,EAAE,UAAU7D,CAAC,EAAE;MAAE,OAAOnD,KAAK,CAACqJ,YAAY,CAAClG,CAAC,CAAC;IAAE,CAAC,EAAE,IAAI,CAAC;IAC5FtF,YAAY,CAACqE,GAAG,CAAC8E,WAAW,EAAE,WAAW,EAAE,UAAU7D,CAAC,EAAE;MAAE,OAAOnD,KAAK,CAACsJ,gBAAgB,CAAC3D,KAAK,EAAExC,CAAC,CAAC;IAAE,CAAC,EAAE,IAAI,CAAC;IAC3GtF,YAAY,CAACqE,GAAG,CAAC8E,WAAW,EAAE,YAAY,EAAE,IAAI,CAACuC,iBAAiB,EAAE,IAAI,CAAC;EAC7E,CAAC;EACD3J,MAAM,CAACpD,SAAS,CAAC6M,YAAY,GAAG,UAAUlG,CAAC,EAAE;IACzC,IAAI,CAACgB,YAAY,GAAI,IAAI,CAACnB,GAAG,GAAG,CAAC,IAAI,IAAI,CAACmB,YAAY,GAAG,IAAI,CAACnB,GAAG,GAAI,IAAI,CAACA,GAAG,GAAG,IAAI,CAACmB,YAAY;IACjG,IAAI,CAACjD,aAAa,CAACiC,CAAC,EAAE,IAAI,CAACgB,YAAY,CAAC;IACxC,IAAI,CAACqB,eAAe,CAAC,CAAC;IACtB,IAAI,CAACiD,WAAW,CAAC,CAAC;IAClB,IAAI,CAAC5F,iBAAiB,CAAC,CAAC;EAC5B,CAAC;EACDjD,MAAM,CAACpD,SAAS,CAACgN,iBAAiB,GAAG,UAAUrG,CAAC,EAAEuC,GAAG,EAAE+D,YAAY,EAAE;IACjE,IAAIA,YAAY,KAAK,KAAK,CAAC,EAAE;MAAEA,YAAY,GAAG,IAAI;IAAE;IACpD,IAAI,CAACvI,aAAa,CAACiC,CAAC,EAAEuC,GAAG,EAAE+D,YAAY,CAAC;IACxC,IAAI,CAACjE,eAAe,CAAC,CAAC;IACtB,IAAI,CAACiD,WAAW,CAAC,CAAC;EACtB,CAAC;EACD7I,MAAM,CAACpD,SAAS,CAAC0E,aAAa,GAAG,UAAUiC,CAAC,EAAEuC,GAAG,EAAE+D,YAAY,EAAE;IAC7D,IAAIA,YAAY,KAAK,KAAK,CAAC,EAAE;MAAEA,YAAY,GAAG,IAAI;IAAE;IACpD/D,GAAG,GAAG,IAAI,CAAC3B,aAAa,CAAC2B,GAAG,CAAC;IAC7B,IAAI,CAACvB,YAAY,GAAGuB,GAAG;IACvB,IAAI,IAAI,CAACvB,YAAY,KAAK,IAAI,CAAChD,KAAK,EAAE;MAClC;IACJ;IACA,IAAIkE,SAAS,GAAG;MAAEqE,KAAK,EAAEvG,CAAC;MAAEsG,YAAY,EAAEA,YAAY;MAAEtI,KAAK,EAAEuE,GAAG;MAAEpB,aAAa,EAAE,IAAI,CAACnD;IAAM,CAAC;IAC/F,IAAI,CAACmF,aAAa,CAAC;MAAEnF,KAAK,EAAEuE;IAAI,CAAC,EAAE,IAAI,CAAC;IACxC,IAAI,CAACJ,OAAO,CAAC,cAAc,EAAED,SAAS,CAAC;EAC3C,CAAC;EACDzF,MAAM,CAACpD,SAAS,CAAC8M,gBAAgB,GAAG,UAAU3D,KAAK,EAAExC,CAAC,EAAE;IACpD,IAAI,IAAI,CAACtC,eAAe,EAAE;MACtB,IAAI,CAACS,OAAO,CAACW,SAAS,CAAC3D,MAAM,CAAC,gBAAgB,CAAC;MAC/C,IAAI,CAACuC,eAAe,GAAG,KAAK;IAChC;IACA,IAAI+C,SAAS,GAAG,IAAI,CAAC+F,qBAAqB,CAAChE,KAAK,EAAExC,CAAC,CAAC;IACpDS,SAAS,GAAG,IAAI,CAACG,aAAa,CAACH,SAAS,CAAC;IACzC,IAAI7D,OAAO,GAAG,IAAI,CAACG,YAAY,CAAC8D,QAAQ,CAAC,CAAC2B,KAAK,GAAG,CAAC,EAAEzC,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IACrE,IAAIU,SAAS,KAAK,IAAI,CAACO,YAAY,EAAE;MACjC,IAAI,CAACE,iBAAiB,CAACtE,OAAO,EAAE,KAAK,CAAC;MACtC;IACJ;IACA,IAAI,CAACwE,kBAAkB,CAACX,SAAS,CAAC;IAClC,IAAI,CAACS,iBAAiB,CAACtE,OAAO,EAAE,IAAI,CAAC;IACrC,IAAIsF,SAAS,GAAG;MAAEtF,OAAO,EAAEA,OAAO;MAAE2J,KAAK,EAAEvG,CAAC;MAAEhC,KAAK,EAAEyC;IAAU,CAAC;IAChE,IAAI,CAAC0B,OAAO,CAAC,aAAa,EAAED,SAAS,CAAC;EAC1C,CAAC;EACDzF,MAAM,CAACpD,SAAS,CAAC6H,iBAAiB,GAAG,UAAUtE,OAAO,EAAEyH,QAAQ,EAAE;IAC9D,IAAI,IAAI,CAACpD,WAAW,EAAE;MAClB,IAAI,CAAC,IAAI,CAACxD,WAAW,EAAE;QACnB,IAAI,CAAC2G,oBAAoB,CAAC,KAAK,CAAC;QAChC,IAAI,CAACtB,UAAU,CAAC2D,IAAI,CAAC7J,OAAO,CAAC;QAC7B,IAAI,CAACa,WAAW,GAAG,IAAI;MAC3B,CAAC,MACI,IAAI4G,QAAQ,EAAE;QACf,IAAI,CAACD,oBAAoB,CAAC,IAAI,CAAC;QAC/B,IAAI,CAACtB,UAAU,CAACgC,OAAO,CAAClI,OAAO,CAAC;MACpC;IACJ;EACJ,CAAC;EACDH,MAAM,CAACpD,SAAS,CAACgI,kBAAkB,GAAG,YAAY;IAC9C,IAAI,IAAI,CAAC5D,WAAW,EAAE;MAClB,IAAI,CAACqF,UAAU,CAAC4D,KAAK,CAAC,CAAC;MACvB,IAAI,CAACjJ,WAAW,GAAG,KAAK;IAC5B;EACJ,CAAC;EACDhB,MAAM,CAACpD,SAAS,CAAC+H,kBAAkB,GAAG,UAAUX,SAAS,EAAE;IACvD,IAAI,CAACO,YAAY,GAAGP,SAAS;IAC7B,IAAI,CAAC4B,eAAe,CAAC,CAAC;IACtB,IAAI,CAACiD,WAAW,CAAC,CAAC;EACtB,CAAC;EACD7I,MAAM,CAACpD,SAAS,CAAC+M,iBAAiB,GAAG,YAAY;IAC7C,IAAI,CAAC/E,kBAAkB,CAAC,CAAC;IACzB,IAAI,CAACD,kBAAkB,CAAC,IAAI,CAACpD,KAAK,CAAC;EACvC,CAAC;EACDvB,MAAM,CAACpD,SAAS,CAACmN,qBAAqB,GAAG,UAAUhE,KAAK,EAAEJ,IAAI,EAAE;IAC5D,IAAIpB,YAAY,GAAGwB,KAAK;IACxB,IAAI,EAAE,IAAI,CAACc,qBAAqB,IAAK,IAAI,CAACF,SAAS,KAAK5G,aAAa,CAAC6G,IAAK,CAAC,EAAE;MAC1ErC,YAAY,GAAGoB,IAAI,CAACuE,OAAO,GAAG,IAAI,CAAC5J,YAAY,CAACyF,KAAK,GAAG,CAAC,CAAC,CAACoE,WAAW;MACtE5F,YAAY,GAAI,IAAI,CAAC/B,SAAS,GAAK,CAAC,GAAG+B,YAAY,GAAIA,YAAY;MACnE,IAAI,IAAI,CAACoC,SAAS,KAAK5G,aAAa,CAACiH,OAAO,EAAE;QAC1CzC,YAAY,GAAGA,YAAY,IAAI,IAAI,GAAG,IAAI,GAAGA,YAAY,IAAI,GAAG,GAAG,GAAG,GAAGA,YAAY,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG;MAC7G,CAAC,MACI,IAAI,IAAI,CAACoC,SAAS,KAAK5G,aAAa,CAACgH,IAAI,EAAE;QAC5CxC,YAAY,GAAGA,YAAY,IAAI,GAAG,GAAG,GAAG,GAAG,CAAC;MAChD;MACAA,YAAY,GAAGA,YAAY,GAAGwB,KAAK,GAAG,CAAC;IAC3C;IACA,OAAOxB,YAAY;EACvB,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;EACIvE,MAAM,CAACpD,SAAS,CAACwN,KAAK,GAAG,YAAY;IACjC,IAAI,CAAClB,YAAY,CAAC,IAAI,EAAE,KAAK,CAAC;EAClC,CAAC;EACDlJ,MAAM,CAACpD,SAAS,CAACsM,YAAY,GAAG,UAAU3F,CAAC,EAAEsG,YAAY,EAAE;IACvD,IAAIA,YAAY,KAAK,KAAK,CAAC,EAAE;MAAEA,YAAY,GAAG,IAAI;IAAE;IACpD,IAAI,CAACD,iBAAiB,CAACrG,CAAC,EAAE,IAAI,CAACH,GAAG,EAAEyG,YAAY,CAAC;IACjD,IAAI,CAAC5G,iBAAiB,CAAC,CAAC;EAC5B,CAAC;EACDjD,MAAM,CAACpD,SAAS,CAACiG,iBAAiB,GAAG,YAAY;IAC7C,IAAI,CAACwH,oBAAoB,GAAG,IAAI9L,cAAc,CAAC,IAAI,CAACmD,OAAO,EAAE;MACzD4I,SAAS,EAAE,IAAI,CAACC,gBAAgB,CAACC,IAAI,CAAC,IAAI,CAAC;MAC3C9J,UAAU,EAAE,IAAI,CAACA,UAAU;MAC3B+J,SAAS,EAAE;IACf,CAAC,CAAC;EACN,CAAC;EACDzK,MAAM,CAACpD,SAAS,CAAC2N,gBAAgB,GAAG,UAAUhH,CAAC,EAAE;IAC7CA,CAAC,CAACmH,cAAc,CAAC,CAAC;IAClB,IAAI,IAAI,CAAC3H,QAAQ,IAAI,IAAI,CAACX,QAAQ,EAAE;MAChC;IACJ;IACA,IAAImB,CAAC,CAACvG,MAAM,CAACqF,SAAS,CAACqF,QAAQ,CAAC3I,QAAQ,CAAC,EAAE;MACvC,QAAQwE,CAAC,CAACoH,MAAM;QACZ,KAAK,SAAS;UACV,IAAI,CAACC,gBAAgB,CAACrH,CAAC,EAAE,IAAI,CAAC;UAC9B;QACJ,KAAK,WAAW;UACZ,IAAI,CAACqH,gBAAgB,CAACrH,CAAC,EAAE,KAAK,CAAC;UAC/B;QACJ,KAAK,WAAW;UACZ,IAAI,CAACqH,gBAAgB,CAACrH,CAAC,EAAE,IAAI,CAACf,SAAS,CAAC;UACxC;QACJ,KAAK,YAAY;UACb,IAAI,CAACoI,gBAAgB,CAACrH,CAAC,EAAE,CAAC,IAAI,CAACf,SAAS,CAAC;UACzC;MACR;IACJ;IACA,IAAI,IAAI,CAACU,UAAU,IAAIK,CAAC,CAACvG,MAAM,CAACqF,SAAS,CAACqF,QAAQ,CAAC,SAAS,CAAC,EAAE;MAC3D,QAAQnE,CAAC,CAACoH,MAAM;QACZ,KAAK,OAAO;UACR,IAAI,CAACzB,YAAY,CAAC3F,CAAC,CAAC;UACpB;MACR;IACJ;EACJ,CAAC;EACDvD,MAAM,CAACpD,SAAS,CAACgO,gBAAgB,GAAG,UAAUrH,CAAC,EAAEsH,UAAU,EAAE;IACzD,IAAK,CAACA,UAAU,IAAK,IAAI,CAACtJ,KAAK,GAAG,IAAI,CAAC6B,GAAI,IAAMyH,UAAU,IAAK,IAAI,CAACtJ,KAAK,GAAG,IAAI,CAAC2C,UAAY,EAAE;MAC5F,IAAIK,YAAY,GAAI,IAAI,CAACoC,SAAS,KAAK5G,aAAa,CAAC6G,IAAI,IAAI,IAAI,CAACC,qBAAqB,GAAI,CAAC,GACvF,IAAI,CAACF,SAAS,KAAK5G,aAAa,CAACgH,IAAI,GAAI,GAAG,GAAI,IAAI,CAACJ,SAAS,KAAK5G,aAAa,CAACiH,OAAO,GAAI,IAAI,GAC7F3C,IAAI,CAACyC,KAAK,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG,EAAE;MACjCvC,YAAY,GAAGsG,UAAU,GAAG,IAAI,CAACtJ,KAAK,GAAGgD,YAAY,GAAG,IAAI,CAAChD,KAAK,GAAGgD,YAAY;MACjF,IAAI,CAACqF,iBAAiB,CAACrG,CAAC,EAAGgB,YAAa,CAAC;MACzC,IAAI,CAACtB,iBAAiB,CAAC,CAAC;IAC5B;EACJ,CAAC;EACDjD,MAAM,CAACpD,SAAS,CAACkO,aAAa,GAAG,YAAY;IACzC,IAAI,IAAI,CAAC5D,OAAO,EAAE;MACd,IAAI,CAACC,aAAa,CAAC,CAAC,qBAAqB,EAAE,oBAAoB,CAAC,CAAC;IACrE;IACA,KAAK,IAAIzJ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACwG,UAAU,EAAExG,CAAC,EAAE,EAAE;MACtC,IAAI0J,WAAW,GAAG,IAAI,CAAC9G,YAAY,CAAC8D,QAAQ,CAAC1G,CAAC,CAAC4F,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAACyH,iBAAiB;MACjF,IAAI,CAACzF,iBAAiB,CAAC8B,WAAW,EAAE,IAAI,CAAC/B,cAAc,CAAC,IAAI,CAAC9D,KAAK,EAAE7D,CAAC,CAAC,EAAEA,CAAC,EAAE,IAAI,CAAC;IACpF;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;EACIsC,MAAM,CAACpD,SAAS,CAAC6D,aAAa,GAAG,YAAY;IACzC,OAAO,QAAQ;EACnB,CAAC;EACD;AACJ;AACA;AACA;AACA;EACIT,MAAM,CAACpD,SAAS,CAACoO,cAAc,GAAG,YAAY;IAC1C,OAAO,IAAI,CAACC,YAAY,CAAC,EAAE,CAAC;EAChC,CAAC;EACDjL,MAAM,CAACpD,SAAS,CAACsO,kBAAkB,GAAG,YAAY;IAC9C,KAAK,IAAIxN,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAC4C,YAAY,CAACjD,MAAM,EAAEK,CAAC,EAAE,EAAE;MAC/CgB,MAAM,CAAC,IAAI,CAAC4B,YAAY,CAAC8D,QAAQ,CAAC1G,CAAC,CAAC4F,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;IACzD;IACA,IAAI,CAAChD,YAAY,GAAG,EAAE;EAC1B,CAAC;EACD;AACJ;AACA;AACA;AACA;EACIN,MAAM,CAACpD,SAAS,CAAC6J,OAAO,GAAG,YAAY;IACnC,IAAIrG,KAAK,GAAG,IAAI;IAChBH,MAAM,CAACrD,SAAS,CAAC6J,OAAO,CAACpG,IAAI,CAAC,IAAI,CAAC;IACnC;IACA,IAAI,CAAC6K,kBAAkB,CAAC,CAAC;IACzB,IAAI,CAAC/D,aAAa,CAAC,CAAC;IACpB,IAAI,IAAI,CAACyB,SAAS,EAAE;MAChBlK,MAAM,CAAC,IAAI,CAACkK,SAAS,CAAC;MACtB,IAAI,CAACA,SAAS,GAAG,IAAI;IACzB;IACA,IAAI,IAAI,CAACvF,YAAY,EAAE;MACnB3E,MAAM,CAAC,IAAI,CAAC2E,YAAY,CAAC;MACzB,IAAI,CAACA,YAAY,GAAG,IAAI;IAC5B;IACA,IAAI,IAAI,CAACmB,WAAW,EAAE;MAClB,IAAI,CAAC6B,UAAU,CAACI,OAAO,CAAC,CAAC;MACzB,IAAI,CAACJ,UAAU,GAAG,IAAI;IAC1B;IACA3H,MAAM,CAAC,IAAI,CAACsE,cAAc,CAAC;IAC3B,IAAI,CAACA,cAAc,GAAG,IAAI;IAC1B,IAAI,CAACtB,OAAO,CAACG,UAAU,CAACC,YAAY,CAAC,IAAI,CAAC3B,OAAO,EAAE,IAAI,CAACuB,OAAO,CAAC;IAChEhD,MAAM,CAAC,IAAI,CAACgD,OAAO,CAAC;IACpB,IAAI,CAACA,OAAO,GAAG,IAAI;IACnB,IAAI,CAAC2I,oBAAoB,CAAC5D,OAAO,CAAC,CAAC;IACnC,IAAI,CAAC4D,oBAAoB,GAAG,IAAI;IAChC,CAAC,OAAO,EAAE,YAAY,EAAE,MAAM,CAAC,CAACc,OAAO,CAAC,UAAUC,IAAI,EAAE;MACpDhL,KAAK,CAACD,OAAO,CAACkL,eAAe,CAACD,IAAI,CAAC;IACvC,CAAC,CAAC;EACN,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACIpL,MAAM,CAACpD,SAAS,CAAC0O,iBAAiB,GAAG,UAAUC,OAAO,EAAEC,OAAO,EAAE;IAC7D,KAAK,IAAIC,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAGtP,MAAM,CAACuP,IAAI,CAACJ,OAAO,CAAC,EAAEE,EAAE,GAAGC,EAAE,CAACrO,MAAM,EAAEoO,EAAE,EAAE,EAAE;MAC9D,IAAIG,IAAI,GAAGF,EAAE,CAACD,EAAE,CAAC;MACjB,QAAQG,IAAI;QACR,KAAK,OAAO;UACR,IAAI,CAAChC,iBAAiB,CAAC,IAAI,EAAG,IAAI,CAACrI,KAAK,GAAG,IAAI,CAAC6B,GAAG,GAAI,IAAI,CAAC7B,KAAK,GAAG,IAAI,CAAC6B,GAAG,EAAE,KAAK,CAAC;UACpF;QACJ,KAAK,KAAK;UACN,IAAI,CAAChC,cAAc,CAAC,CAAC;UACrB,IAAI,CAACwE,eAAe,CAAC,CAAC;UACtB,IAAI,CAACiD,WAAW,CAAC,CAAC;UAClB;QACJ,KAAK,WAAW;UACZ,IAAI,CAACpH,YAAY,CAAC,CAAC;UACnB;QACJ,KAAK,SAAS;UACV,IAAI,CAACC,OAAO,CAACW,SAAS,CAAC,CAAC,IAAI,CAACE,OAAO,GAAG,KAAK,GAAG,QAAQ,CAAC,CAAClD,MAAM,CAAC;UAChE;QACJ,KAAK,UAAU;UACX,IAAI,CAACyD,cAAc,CAAC,CAAC;UACrB;QACJ,KAAK,UAAU;UACX,IAAI,CAACpB,OAAO,CAACW,SAAS,CAAC,IAAI,CAACD,QAAQ,GAAG,KAAK,GAAG,QAAQ,CAAC,CAAC7C,QAAQ,CAAC;UAClE;QACJ,KAAK,YAAY;UACb,IAAI,CAAC4C,WAAW,CAAC,CAAC;UAClB;QACJ,KAAK,WAAW;UACZ,IAAI,CAACT,OAAO,CAACW,SAAS,CAAC,IAAI,CAACG,SAAS,GAAG,KAAK,GAAG,QAAQ,CAAC,CAAChD,GAAG,CAAC;UAC9D;QACJ,KAAK,UAAU;UACX,IAAIgM,OAAO,CAAC9I,QAAQ,EAAE;YAClB/D,WAAW,CAAC,CAAC,IAAI,CAAC+C,OAAO,CAAC,EAAE8J,OAAO,CAAC9I,QAAQ,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC;UAC5D;UACA,IAAI4I,OAAO,CAAC7I,QAAQ,EAAE;YAClB9E,QAAQ,CAAC,CAAC,IAAI,CAAC8D,OAAO,CAAC,EAAE6J,OAAO,CAAC7I,QAAQ,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC;UACzD;UACA,IAAI,IAAI,CAAC0D,UAAU,EAAE;YACjB,IAAI,CAACA,UAAU,CAACK,aAAa,CAAC;cAAEhE,QAAQ,EAAE,IAAI,CAACA,QAAQ,GAAI,mBAAmB,GAAG,IAAI,CAACA,QAAQ,GAAI;YAAmB,CAAC,CAAC;UAC3H;UACA;QACJ,KAAK,eAAe;UAChB,IAAI,CAACoG,mBAAmB,CAAC,CAAC;UAC1B;QACJ,KAAK,aAAa;UACd,IAAI,CAAClG,aAAa,CAAC,CAAC;UACpB;QACJ,KAAK,WAAW;UACZ,IAAI,CAACxB,cAAc,CAAC,CAAC;UACrB,IAAI,CAACE,aAAa,CAAC,IAAI,EAAE,IAAI,CAACC,KAAK,EAAE,KAAK,CAAC;UAC3C,IAAI,CAACqE,eAAe,CAAC,CAAC;UACtB,IAAI,CAACiD,WAAW,CAAC,CAAC;UAClB;QACJ,KAAK,uBAAuB;UACxB;UACA,IAAI,CAACe,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAACrF,YAAY,EAAE,KAAK,CAAC;UACtD;QACJ,KAAK,iBAAiB;UAClB,IAAI,CAAC7C,OAAO,CAACW,SAAS,CAAC,IAAI,CAACI,eAAe,GAAG,KAAK,GAAG,QAAQ,CAAC,CAAChD,SAAS,CAAC;UAC1E;QACJ,KAAK,eAAe;QACpB,KAAK,cAAc;UACf,IAAI,CAAC4B,sBAAsB,CAAC,CAAC;UAC7B,IAAI,CAACyJ,aAAa,CAAC,CAAC;UACpB;QACJ,KAAK,eAAe;UAChB,IAAI,CAACjC,WAAW,CAAC,CAAC;UAClB;QACJ,KAAK,YAAY;UACb,IAAI,CAACqC,kBAAkB,CAAC,CAAC;UACzB,IAAI,CAAC1J,WAAW,CAAC,CAAC;UAClB,IAAI,CAACqH,WAAW,CAAC,CAAC;UAClB;MACR;IACJ;EACJ,CAAC;EACD/L,UAAU,CAAC,CACP2B,QAAQ,CAAC,KAAK,CAAC,CAClB,EAAEuB,MAAM,CAACpD,SAAS,EAAE,YAAY,EAAE,KAAK,CAAC,CAAC;EAC1CE,UAAU,CAAC,CACP2B,QAAQ,CAAC,EAAE,CAAC,CACf,EAAEuB,MAAM,CAACpD,SAAS,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;EACxCE,UAAU,CAAC,CACP2B,QAAQ,CAAC,KAAK,CAAC,CAClB,EAAEuB,MAAM,CAACpD,SAAS,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;EACxCE,UAAU,CAAC,CACP2B,QAAQ,CAAC,EAAE,CAAC,CACf,EAAEuB,MAAM,CAACpD,SAAS,EAAE,eAAe,EAAE,KAAK,CAAC,CAAC;EAC7CE,UAAU,CAAC,CACP2B,QAAQ,CAAC,IAAI,CAAC,CACjB,EAAEuB,MAAM,CAACpD,SAAS,EAAE,iBAAiB,EAAE,KAAK,CAAC,CAAC;EAC/CE,UAAU,CAAC,CACP2B,QAAQ,CAAC,KAAK,CAAC,CAClB,EAAEuB,MAAM,CAACpD,SAAS,EAAE,uBAAuB,EAAE,KAAK,CAAC,CAAC;EACrDE,UAAU,CAAC,CACP2B,QAAQ,CAAC,EAAE,CAAC,CACf,EAAEuB,MAAM,CAACpD,SAAS,EAAE,cAAc,EAAE,KAAK,CAAC,CAAC;EAC5CE,UAAU,CAAC,CACP2B,QAAQ,CAAC,CAAC,CAAC,CACd,EAAEuB,MAAM,CAACpD,SAAS,EAAE,YAAY,EAAE,KAAK,CAAC,CAAC;EAC1CE,UAAU,CAAC,CACP2B,QAAQ,CAACqB,aAAa,CAAC+L,KAAK,CAAC,CAChC,EAAE7L,MAAM,CAACpD,SAAS,EAAE,eAAe,EAAE,KAAK,CAAC,CAAC;EAC7CE,UAAU,CAAC,CACP2B,QAAQ,CAAC,EAAE,CAAC,CACf,EAAEuB,MAAM,CAACpD,SAAS,EAAE,eAAe,EAAE,KAAK,CAAC,CAAC;EAC7CE,UAAU,CAAC,CACP2B,QAAQ,CAAC,GAAG,CAAC,CAChB,EAAEuB,MAAM,CAACpD,SAAS,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;EACnCE,UAAU,CAAC,CACP2B,QAAQ,CAACsB,aAAa,CAAC6G,IAAI,CAAC,CAC/B,EAAE5G,MAAM,CAACpD,SAAS,EAAE,WAAW,EAAE,KAAK,CAAC,CAAC;EACzCE,UAAU,CAAC,CACP2B,QAAQ,CAAC,KAAK,CAAC,CAClB,EAAEuB,MAAM,CAACpD,SAAS,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;EACxCE,UAAU,CAAC,CACP2B,QAAQ,CAAC,KAAK,CAAC,CAClB,EAAEuB,MAAM,CAACpD,SAAS,EAAE,WAAW,EAAE,KAAK,CAAC,CAAC;EACzCE,UAAU,CAAC,CACP2B,QAAQ,CAAC,IAAI,CAAC,CACjB,EAAEuB,MAAM,CAACpD,SAAS,EAAE,aAAa,EAAE,KAAK,CAAC,CAAC;EAC3CE,UAAU,CAAC,CACP2B,QAAQ,CAAC,EAAE,CAAC,CACf,EAAEuB,MAAM,CAACpD,SAAS,EAAE,iBAAiB,EAAE,KAAK,CAAC,CAAC;EAC/CE,UAAU,CAAC,CACP2B,QAAQ,CAAC,GAAG,CAAC,CAChB,EAAEuB,MAAM,CAACpD,SAAS,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;EACrCE,UAAU,CAAC,CACP2B,QAAQ,CAAC,IAAI,CAAC,CACjB,EAAEuB,MAAM,CAACpD,SAAS,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC;EACvCE,UAAU,CAAC,CACPe,KAAK,CAAC,CAAC,CACV,EAAEmC,MAAM,CAACpD,SAAS,EAAE,kBAAkB,EAAE,KAAK,CAAC,CAAC;EAChDE,UAAU,CAAC,CACPe,KAAK,CAAC,CAAC,CACV,EAAEmC,MAAM,CAACpD,SAAS,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC;EACvCE,UAAU,CAAC,CACPe,KAAK,CAAC,CAAC,CACV,EAAEmC,MAAM,CAACpD,SAAS,EAAE,aAAa,EAAE,KAAK,CAAC,CAAC;EAC3CE,UAAU,CAAC,CACPe,KAAK,CAAC,CAAC,CACV,EAAEmC,MAAM,CAACpD,SAAS,EAAE,cAAc,EAAE,KAAK,CAAC,CAAC;EAC5CoD,MAAM,GAAGlD,UAAU,CAAC,CAChB0B,qBAAqB,CACxB,EAAEwB,MAAM,CAAC;EACV,OAAOA,MAAM;AACjB,CAAC,CAAChC,SAAS,CAAE;AACb,SAASgC,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
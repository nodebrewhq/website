{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, addClass, remove, isNullOrUndefined, setStyleAttribute, createElement, prepend } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Virtual Scroll\n */\nvar VirtualScroll = /** @class */function () {\n  function VirtualScroll(parent) {\n    this.translateY = 0;\n    this.itemSize = 60;\n    this.bufferCount = 3;\n    this.renderedLength = 0;\n    this.averageRowHeight = 0;\n    this.startIndex = 0;\n    this.parent = parent;\n    this.addEventListener();\n  }\n  VirtualScroll.prototype.addEventListener = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on(events.virtualScroll, this.virtualScrolling, this);\n  };\n  VirtualScroll.prototype.removeEventListener = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off(events.virtualScroll, this.virtualScrolling);\n  };\n  VirtualScroll.prototype.getRenderedCount = function () {\n    this.setItemSize();\n    var containerSize = this.isHorizontalScroll ? this.parent.element.clientWidth : this.parent.element.clientHeight;\n    this.renderedLength = Math.ceil(containerSize / this.itemSize) + this.bufferCount;\n    return this.renderedLength;\n  };\n  VirtualScroll.prototype.renderVirtualTrack = function (contentWrap) {\n    var wrap = createElement('div', {\n      className: cls.VIRTUAL_TRACK_CLASS\n    });\n    if (this.isHorizontalScroll) {\n      var colCount = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1].length;\n      wrap.style.width = colCount * this.itemSize + 'px';\n    } else {\n      wrap.style.height = this.parent.resourceBase.expandedResources.length * this.itemSize + 'px';\n    }\n    contentWrap.appendChild(wrap);\n  };\n  VirtualScroll.prototype.updateVirtualScrollHeight = function () {\n    var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n    var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n    var lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n    if (lastRenderIndex !== lastResourceIndex) {\n      var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n      this.renderedLength = conTable.querySelector('tbody').children.length;\n      virtual.style.height = conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - this.renderedLength) * conTable.offsetHeight / this.renderedLength + 'px';\n      var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n      if (conWrap.scrollHeight - conWrap.scrollTop < conWrap.offsetHeight * this.bufferCount) {\n        virtual.style.height = parseInt(virtual.style.height, 10) + conWrap.offsetHeight * this.bufferCount + 'px';\n      }\n    } else {\n      virtual.style.height = '';\n    }\n    this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;\n  };\n  VirtualScroll.prototype.updateVirtualTrackHeight = function (wrap) {\n    var resourceCount = this.parent.resourceBase.renderedResources.length;\n    if (resourceCount !== this.getRenderedCount()) {\n      wrap.style.height = this.parent.element.querySelector('.e-content-wrap').clientHeight + 'px';\n      var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n      var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n      var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n      this.translateY = 0;\n      this.setTranslate(resWrap, conWrap, eventWrap);\n    } else {\n      var lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;\n      var lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n      var renderedResCount = resourceCount + (lastCollIndex - lastRenderIndex);\n      renderedResCount = renderedResCount > this.parent.resourceBase.expandedResources.length ? this.parent.resourceBase.expandedResources.length : renderedResCount;\n      wrap.style.height = renderedResCount * this.itemSize + 'px';\n    }\n  };\n  VirtualScroll.prototype.setItemSize = function () {\n    if (this.isHorizontalScroll) {\n      this.itemSize = util.getElementWidthFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n    } else {\n      this.itemSize = util.getElementHeightFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n    }\n  };\n  VirtualScroll.prototype.refreshLayout = function () {\n    var initialHeight = this.parent.uiStateValues.scheduleHeight;\n    this.parent.uiStateValues.scheduleHeight = this.parent.element.offsetHeight;\n    var preRenderedLength = this.renderedLength;\n    if (this.parent.uiStateValues.scheduleHeight !== initialHeight) {\n      if (preRenderedLength < this.getRenderedCount()) {\n        this.isRemoteRefresh = true;\n      }\n      var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n      var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n      var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n      var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n      var endIndex = firstTDIndex + this.renderedLength;\n      firstTDIndex = endIndex > this.parent.resourceBase.expandedResources.length ? this.parent.resourceBase.expandedResources.length - this.renderedLength : firstTDIndex;\n      firstTDIndex = firstTDIndex < 0 ? 0 : firstTDIndex;\n      this.parent.resourceBase.renderedResources = this.parent.resourceBase.expandedResources.slice(firstTDIndex, endIndex);\n      if (this.parent.resourceBase.renderedResources.length > 0) {\n        this.updateContent(resWrap, conWrap, eventWrap, this.parent.resourceBase.renderedResources);\n      }\n    }\n  };\n  VirtualScroll.prototype.renderEvents = function () {\n    this.setTabIndex();\n    var dynamicData = this.triggerScrollEvent(events.virtualScrollStop);\n    if (this.parent.activeViewOptions && this.parent.activeViewOptions.enableLazyLoading && this.parent.crudModule) {\n      if (dynamicData.length > 0) {\n        this.parent.crudModule.refreshProcessedData(true, dynamicData);\n        this.parent.hideSpinner();\n        return;\n      }\n      this.parent.crudModule.refreshDataManager();\n      return;\n    }\n    if (this.parent.crudModule) {\n      this.parent.crudModule.refreshProcessedData(true);\n    }\n    if (this.parent.currentView !== 'Month') {\n      this.parent.notify(events.contentReady, {});\n    }\n    this.parent.hideSpinner();\n  };\n  VirtualScroll.prototype.virtualScrolling = function () {\n    var _this = this;\n    if (this.parent.quickPopup) {\n      this.parent.quickPopup.quickPopupHide();\n      this.parent.quickPopup.morePopup.hide();\n    }\n    var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    if (this.isHorizontalScroll) {\n      this.horizontalScrolling(conWrap);\n    } else {\n      var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n      var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n      var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n      var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n      if (!this.parent.rowAutoHeight) {\n        addClass([conWrap, resWrap], 'e-transition');\n      }\n      this.renderedLength = resWrap.querySelector('tbody').children.length;\n      var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n      var scrollHeight = this.parent.rowAutoHeight ? conTable.offsetHeight - conWrap.offsetHeight : this.bufferCount * this.itemSize;\n      var resCollection = [];\n      if (conWrap.scrollTop - this.translateY < 0) {\n        resCollection = this.upScroll(conWrap, firstTDIndex);\n      } else if (conWrap.scrollTop - this.translateY > scrollHeight) {\n        resCollection = this.downScroll(conWrap, firstTDIndex);\n      }\n      if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n        this.triggerScrollEvent(events.virtualScrollStart);\n        var selectedEle = this.parent.getSelectedCells();\n        this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n        this.updateContent(resWrap, conWrap, eventWrap, resCollection);\n        this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n        if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n          this.parent.dragAndDropModule.navigationWrapper();\n        }\n        window.clearTimeout(this.timeValue);\n        this.timeValue = window.setTimeout(function () {\n          _this.renderEvents();\n        }, 250);\n      }\n    }\n  };\n  VirtualScroll.prototype.horizontalScrolling = function (conWrap) {\n    var _this = this;\n    var resCollection = [];\n    var scrollWidth = this.bufferCount * this.itemSize;\n    if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) < 0) {\n      resCollection = this.leftScroll(conWrap);\n    } else if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) > scrollWidth) {\n      resCollection = this.rightScroll(conWrap);\n    }\n    if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n      if (this.parent.resourceBase.expandedResources.length !== resCollection.length || this.parent.resourceBase.expandedResources[0] !== resCollection[0] || this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1] !== resCollection[resCollection.length - 1]) {\n        this.triggerScrollEvent(events.virtualScrollStart);\n        var colLevels = this.parent.activeView.colLevels.slice(0);\n        this.updateHorizontalContent(conWrap, resCollection);\n        setStyleAttribute(conWrap.querySelector('table'), {\n          transform: \"translateX(\" + this.translateY + \"px)\"\n        });\n        this.parent.activeView.colLevels = colLevels;\n        if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n          this.parent.dragAndDropModule.navigationWrapper();\n        }\n      }\n      window.clearTimeout(this.timeValue);\n      this.timeValue = window.setTimeout(function () {\n        _this.renderEvents();\n      }, 250);\n    }\n  };\n  VirtualScroll.prototype.triggerScrollEvent = function (action) {\n    var _this = this;\n    var dynamicData = [];\n    if (!this.parent.activeView) {\n      return dynamicData;\n    }\n    var eventArgs = {\n      startDate: this.parent.activeView.startDate(),\n      endDate: this.parent.activeView.endDate(),\n      startIndex: this.parent.resourceBase.renderedResources[0].groupIndex,\n      endIndex: this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex,\n      resourceData: this.parent.resourceBase.renderedResources.map(function (x) {\n        return x.resourceData;\n      }),\n      name: action\n    };\n    this.parent.trigger(action, eventArgs, function (args) {\n      if (action === events.virtualScrollStart) {\n        _this.parent.showSpinner();\n      } else if (action === events.virtualScrollStop && !isNullOrUndefined(args.eventData) && args.eventData.length > 0) {\n        dynamicData = args.eventData;\n      }\n    });\n    return dynamicData;\n  };\n  VirtualScroll.prototype.upScroll = function (conWrap, firstTDIndex) {\n    var index = 0;\n    index = ~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize) - this.renderedLength;\n    if (this.parent.rowAutoHeight) {\n      index = index > firstTDIndex ? firstTDIndex - this.bufferCount : index;\n    }\n    index = index > 0 ? index : 0;\n    var prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);\n    this.parent.resourceBase.renderedResources = prevSetCollection;\n    if (firstTDIndex === 0) {\n      this.translateY = conWrap.scrollTop;\n    } else {\n      var height = this.parent.rowAutoHeight ? this.averageRowHeight : this.itemSize;\n      height = height > 0 ? height : this.itemSize;\n      this.translateY = conWrap.scrollTop - this.bufferCount * height > 0 ? conWrap.scrollTop - this.bufferCount * height : 0;\n    }\n    return prevSetCollection;\n  };\n  VirtualScroll.prototype.downScroll = function (conWrap, firstTDIndex) {\n    var lastResource = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n    var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n    if (lastResource === lastResourceIndex) {\n      return null;\n    }\n    var nextSetResIndex = 0;\n    nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);\n    if (this.parent.rowAutoHeight) {\n      nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;\n      nextSetResIndex = nextSetResIndex > firstTDIndex + this.bufferCount ? nextSetResIndex : firstTDIndex + this.bufferCount;\n    }\n    var lastIndex = nextSetResIndex + this.renderedLength;\n    lastIndex = lastIndex > this.parent.resourceBase.expandedResources.length ? nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;\n    var nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);\n    this.translateY = conWrap.scrollTop;\n    return nextSetCollection;\n  };\n  VirtualScroll.prototype.leftScroll = function (conWrap) {\n    var index = 0;\n    index = ~~(Math.abs(conWrap.scrollLeft) / this.itemSize) + Math.ceil(conWrap.clientWidth / this.itemSize) - this.renderedLength;\n    index = index > 0 ? index : 0;\n    return this.getCollection(index, index + this.renderedLength);\n  };\n  VirtualScroll.prototype.rightScroll = function (conWrap) {\n    var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];\n    var nextSetIndex = 0;\n    nextSetIndex = ~~(Math.abs(conWrap.scrollLeft) / this.itemSize);\n    var lastIndex = nextSetIndex + this.renderedLength;\n    lastIndex = lastIndex > lastLevel.length - 1 ? lastLevel.length - 1 : lastIndex;\n    return this.getCollection(lastIndex - this.renderedLength, lastIndex);\n  };\n  VirtualScroll.prototype.getCollection = function (startIndex, endIndex) {\n    this.translateY = startIndex * this.itemSize;\n    var lastLevel = this.getResCollection(startIndex, endIndex);\n    if (this.parent.enableRtl) {\n      this.translateY = -this.translateY;\n    }\n    return lastLevel;\n  };\n  VirtualScroll.prototype.getResCollection = function (startIndex, endIndex) {\n    var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];\n    var resCollection = [];\n    var index = {\n      startIndex: 0,\n      endIndex: 0\n    };\n    if (this.parent.activeViewOptions.group.byDate) {\n      if (lastLevel[parseInt(startIndex.toString(), 10)].date.getTime() === this.parent.resourceBase.expandedResources[0].date.getTime() && lastLevel[parseInt(endIndex.toString(), 10)].date.getTime() === this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].date.getTime()) {\n        return this.parent.resourceBase.expandedResources;\n      }\n      resCollection = this.getByDateCollection(lastLevel[parseInt(startIndex.toString(), 10)], lastLevel[parseInt(endIndex.toString(), 10)], index);\n      this.setRenderedDates(resCollection);\n    } else {\n      if (lastLevel[parseInt(startIndex.toString(), 10)].groupIndex === this.parent.resourceBase.expandedResources[0].groupIndex && lastLevel[parseInt(endIndex.toString(), 10)].groupIndex === this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex) {\n        return this.parent.resourceBase.expandedResources;\n      }\n      resCollection = this.getByIdCollection(lastLevel[parseInt(startIndex.toString(), 10)], lastLevel[parseInt(endIndex.toString(), 10)], index);\n    }\n    if (this.parent.currentView !== 'Month') {\n      this.startIndex = index.startIndex;\n      resCollection = lastLevel.slice(index.startIndex, index.endIndex);\n    }\n    this.translateY = index.startIndex * this.itemSize;\n    return resCollection;\n  };\n  VirtualScroll.prototype.getByDateCollection = function (firstItem, lastItem, index) {\n    var resCollection = this.parent.activeView.colLevels[0].filter(function (data) {\n      return firstItem.date.getTime() <= data.date.getTime() && data.date.getTime() <= lastItem.date.getTime();\n    });\n    this.setStartEndIndex(this.parent.activeView.colLevels[0], resCollection[0], resCollection[resCollection.length - 1], index);\n    return resCollection;\n  };\n  VirtualScroll.prototype.getByIdCollection = function (firstItem, lastItem, index) {\n    var resCollection = this.parent.resourceBase.lastResourceLevel.filter(function (data) {\n      return firstItem.groupIndex <= data.groupIndex && data.groupIndex <= lastItem.groupIndex;\n    });\n    this.parent.resourceBase.renderedResources = resCollection;\n    this.setStartEndIndex(this.parent.resourceBase.lastResourceLevel, resCollection[0], resCollection[resCollection.length - 1], index);\n    return resCollection;\n  };\n  VirtualScroll.prototype.setStartEndIndex = function (data, firstItem, lastItem, colIndex) {\n    var index = 0;\n    data.filter(function (data) {\n      if (firstItem === data) {\n        colIndex.startIndex = index;\n      } else if (lastItem === data) {\n        colIndex.endIndex = index + data.colSpan;\n      }\n      index += data.colSpan;\n    });\n    if (firstItem === lastItem) {\n      colIndex.endIndex = colIndex.startIndex + lastItem.colSpan;\n    }\n  };\n  VirtualScroll.prototype.updateContent = function (resWrap, conWrap, eventWrap, resCollection) {\n    var renderedLength = resWrap.querySelector('tbody').children.length;\n    if (document.activeElement && document.activeElement.classList.contains(cls.RESOURCE_CELLS_CLASS)) {\n      this.isResourceCell = true;\n      this.parent.element.focus();\n    }\n    for (var i = 0; i < renderedLength; i++) {\n      remove(resWrap.querySelector('tbody tr'));\n      remove(conWrap.querySelector('tbody tr'));\n      remove(eventWrap.querySelector('div'));\n    }\n    this.parent.resourceBase.renderedResources = resCollection;\n    var resourceRows = this.parent.resourceBase.getContentRows(resCollection, true);\n    var contentRows = this.parent.activeView.getContentRows();\n    var eventRows = this.parent.activeView.getEventRows(resCollection.length);\n    append(resourceRows, resWrap.querySelector('tbody'));\n    append(contentRows, conWrap.querySelector('tbody'));\n    append(eventRows, eventWrap);\n  };\n  VirtualScroll.prototype.updateHorizontalContent = function (conWrap, resCollection) {\n    this.parent.resourceBase.expandedResources = resCollection;\n    var selectedEle = this.parent.getSelectedCells();\n    this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n    var renderedLength = conWrap.querySelectorAll('tbody tr').length;\n    for (var i = 0; i < renderedLength; i++) {\n      remove(conWrap.querySelector('tbody tr'));\n    }\n    if (this.parent.currentView === 'Month') {\n      if (this.parent.activeViewOptions.group.byDate) {\n        this.parent.activeView.colLevels[0] = resCollection;\n      } else {\n        this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 2] = resCollection;\n      }\n      var contentRows = this.parent.activeView.getContentRows();\n      append(contentRows, conWrap.querySelector('tbody'));\n    } else {\n      var col = [].slice.call(conWrap.querySelector('colgroup').children);\n      for (var i = 0; i < col.length; i++) {\n        remove(col[parseInt(i.toString(), 10)]);\n      }\n      this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1] = resCollection;\n      var contentRows = this.parent.activeView.getContentRows();\n      var table = conWrap.querySelector('table');\n      var thead = conWrap.querySelector('thead');\n      var colGroupEle_1 = conWrap.querySelector('colgroup');\n      resCollection.forEach(function () {\n        colGroupEle_1.appendChild(createElement('col'));\n      });\n      thead.appendChild(this.parent.eventBase.createEventWrapper('', this.startIndex > 0 ? this.startIndex : 0));\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        thead.appendChild(this.parent.eventBase.createEventWrapper('timeIndicator'));\n      }\n      prepend([thead], table);\n      append(contentRows, conWrap.querySelector('tbody'));\n    }\n  };\n  VirtualScroll.prototype.getBufferCollection = function (startIndex, endIndex) {\n    return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);\n  };\n  VirtualScroll.prototype.setTranslate = function (resWrap, conWrap, eventWrap, timeIndicator) {\n    setStyleAttribute(resWrap.querySelector('table'), {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n    setStyleAttribute(conWrap.querySelector('table'), {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n    setStyleAttribute(eventWrap, {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n    if (!isNullOrUndefined(timeIndicator)) {\n      setStyleAttribute(timeIndicator, {\n        transform: \"translateY(\" + this.translateY + \"px)\"\n      });\n    }\n  };\n  VirtualScroll.prototype.updateFocusedWorkCell = function () {\n    if (this.focusedEle) {\n      var date = parseInt(this.focusedEle.getAttribute('data-date'), 10);\n      var groupIndex = parseInt(this.focusedEle.getAttribute('data-group-index'), 10);\n      var ele = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-date=\\\"\" + date + \"\\\"][data-group-index=\\\"\" + groupIndex + \"\\\"]\");\n      if (ele) {\n        this.parent.addSelectedClass([ele], ele, true);\n      }\n      this.focusedEle = null;\n    }\n  };\n  VirtualScroll.prototype.setRenderedDates = function (resCollection) {\n    if (this.parent.currentView !== 'Month') {\n      var dateCol_1 = resCollection.map(function (x) {\n        return x.date;\n      });\n      this.parent.resourceBase.renderedResources.forEach(function (x) {\n        return x.renderDates = dateCol_1;\n      });\n    } else {\n      var dateCol_2 = resCollection.map(function (x) {\n        return x.date.getDay();\n      });\n      var renderDates_1 = this.parent.activeView.renderDates.filter(function (x) {\n        return dateCol_2.indexOf(x.getDay()) >= 0;\n      });\n      this.parent.resourceBase.renderedResources.forEach(function (x) {\n        return x.renderDates = renderDates_1;\n      });\n    }\n  };\n  VirtualScroll.prototype.setTabIndex = function () {\n    var resColWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n    var resCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.RESOURCE_CELLS_CLASS));\n    if (resCells && resColWrap) {\n      resCells.forEach(function (element) {\n        if (element.getBoundingClientRect().top >= resColWrap.getBoundingClientRect().top) {\n          element.setAttribute('tabindex', '0');\n        }\n      });\n    }\n    var focusResCell = this.parent.element.querySelector(\".\" + cls.RESOURCE_CELLS_CLASS + \"[tabindex=\\\"\" + 0 + \"\\\"]\");\n    if (this.isResourceCell && focusResCell) {\n      focusResCell.focus();\n      this.isResourceCell = false;\n    }\n  };\n  VirtualScroll.prototype.destroy = function () {\n    this.removeEventListener();\n    this.focusedEle = null;\n  };\n  return VirtualScroll;\n}();\nexport { VirtualScroll };","map":{"version":3,"names":["append","addClass","remove","isNullOrUndefined","setStyleAttribute","createElement","prepend","events","cls","util","VirtualScroll","parent","translateY","itemSize","bufferCount","renderedLength","averageRowHeight","startIndex","addEventListener","prototype","isDestroyed","on","virtualScroll","virtualScrolling","removeEventListener","off","getRenderedCount","setItemSize","containerSize","isHorizontalScroll","element","clientWidth","clientHeight","Math","ceil","renderVirtualTrack","contentWrap","wrap","className","VIRTUAL_TRACK_CLASS","colCount","activeView","colLevels","length","style","width","height","resourceBase","expandedResources","appendChild","updateVirtualScrollHeight","virtual","querySelector","lastResourceIndex","groupIndex","lastRenderIndex","renderedResources","conTable","CONTENT_TABLE_CLASS","children","offsetHeight","conWrap","CONTENT_WRAP_CLASS","scrollHeight","scrollTop","parseInt","updateVirtualTrackHeight","resourceCount","resWrap","RESOURCE_COLUMN_WRAP_CLASS","eventWrap","EVENT_TABLE_CLASS","setTranslate","lastCollIndex","renderedResCount","getElementWidthFromClass","WORK_CELLS_CLASS","getElementHeightFromClass","refreshLayout","initialHeight","uiStateValues","scheduleHeight","preRenderedLength","isRemoteRefresh","firstTDIndex","getAttribute","endIndex","slice","updateContent","renderEvents","setTabIndex","dynamicData","triggerScrollEvent","virtualScrollStop","activeViewOptions","enableLazyLoading","crudModule","refreshProcessedData","hideSpinner","refreshDataManager","currentView","notify","contentReady","_this","quickPopup","quickPopupHide","morePopup","hide","horizontalScrolling","timeIndicator","CURRENT_TIMELINE_CLASS","rowAutoHeight","resCollection","upScroll","downScroll","virtualScrollStart","selectedEle","getSelectedCells","focusedEle","dragAndDropModule","actionObj","action","navigationWrapper","window","clearTimeout","timeValue","setTimeout","scrollWidth","abs","scrollLeft","leftScroll","rightScroll","updateHorizontalContent","transform","eventArgs","startDate","endDate","resourceData","map","x","name","trigger","args","showSpinner","eventData","index","prevSetCollection","getBufferCollection","lastResource","nextSetResIndex","lastIndex","nextSetCollection","getCollection","lastLevel","nextSetIndex","getResCollection","enableRtl","group","byDate","toString","date","getTime","getByDateCollection","setRenderedDates","getByIdCollection","firstItem","lastItem","filter","data","setStartEndIndex","lastResourceLevel","colIndex","colSpan","document","activeElement","classList","contains","RESOURCE_CELLS_CLASS","isResourceCell","focus","i","resourceRows","getContentRows","contentRows","eventRows","getEventRows","querySelectorAll","col","call","table","thead","colGroupEle_1","forEach","eventBase","createEventWrapper","timeScale","enable","updateFocusedWorkCell","ele","addSelectedClass","dateCol_1","renderDates","dateCol_2","getDay","renderDates_1","indexOf","resColWrap","resCells","getBoundingClientRect","top","setAttribute","focusResCell","destroy"],"sources":["/Users/anjalichaturvedi/GitHub/brew-bridge-dashboard/website/node_modules/@syncfusion/ej2-schedule/src/schedule/actions/virtual-scroll.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, addClass, remove, isNullOrUndefined, setStyleAttribute, createElement, prepend } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Virtual Scroll\n */\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent) {\n        this.translateY = 0;\n        this.itemSize = 60;\n        this.bufferCount = 3;\n        this.renderedLength = 0;\n        this.averageRowHeight = 0;\n        this.startIndex = 0;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.addEventListener = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.virtualScroll, this.virtualScrolling, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.virtualScroll, this.virtualScrolling);\n    };\n    VirtualScroll.prototype.getRenderedCount = function () {\n        this.setItemSize();\n        var containerSize = this.isHorizontalScroll ? this.parent.element.clientWidth : this.parent.element.clientHeight;\n        this.renderedLength = Math.ceil(containerSize / this.itemSize) + this.bufferCount;\n        return this.renderedLength;\n    };\n    VirtualScroll.prototype.renderVirtualTrack = function (contentWrap) {\n        var wrap = createElement('div', { className: cls.VIRTUAL_TRACK_CLASS });\n        if (this.isHorizontalScroll) {\n            var colCount = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1].length;\n            wrap.style.width = (colCount * this.itemSize) + 'px';\n        }\n        else {\n            wrap.style.height = (this.parent.resourceBase.expandedResources.length * this.itemSize) + 'px';\n        }\n        contentWrap.appendChild(wrap);\n    };\n    VirtualScroll.prototype.updateVirtualScrollHeight = function () {\n        var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        var lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        if (lastRenderIndex !== lastResourceIndex) {\n            var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n            this.renderedLength = conTable.querySelector('tbody').children.length;\n            virtual.style.height = (conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - (this.renderedLength)) *\n                conTable.offsetHeight / this.renderedLength) + 'px';\n            var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            if ((conWrap.scrollHeight - conWrap.scrollTop) < conWrap.offsetHeight * this.bufferCount) {\n                virtual.style.height = parseInt(virtual.style.height, 10) + (conWrap.offsetHeight * this.bufferCount) + 'px';\n            }\n        }\n        else {\n            virtual.style.height = '';\n        }\n        this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;\n    };\n    VirtualScroll.prototype.updateVirtualTrackHeight = function (wrap) {\n        var resourceCount = this.parent.resourceBase.renderedResources.length;\n        if (resourceCount !== this.getRenderedCount()) {\n            wrap.style.height = this.parent.element.querySelector('.e-content-wrap').clientHeight + 'px';\n            var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n            var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n            this.translateY = 0;\n            this.setTranslate(resWrap, conWrap, eventWrap);\n        }\n        else {\n            var lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;\n            var lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n            var renderedResCount = resourceCount + (lastCollIndex - lastRenderIndex);\n            renderedResCount = (renderedResCount > this.parent.resourceBase.expandedResources.length) ?\n                this.parent.resourceBase.expandedResources.length : renderedResCount;\n            wrap.style.height = (renderedResCount * this.itemSize) + 'px';\n        }\n    };\n    VirtualScroll.prototype.setItemSize = function () {\n        if (this.isHorizontalScroll) {\n            this.itemSize = util.getElementWidthFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n        }\n        else {\n            this.itemSize = util.getElementHeightFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n        }\n    };\n    VirtualScroll.prototype.refreshLayout = function () {\n        var initialHeight = this.parent.uiStateValues.scheduleHeight;\n        this.parent.uiStateValues.scheduleHeight = this.parent.element.offsetHeight;\n        var preRenderedLength = this.renderedLength;\n        if (this.parent.uiStateValues.scheduleHeight !== initialHeight) {\n            if (preRenderedLength < this.getRenderedCount()) {\n                this.isRemoteRefresh = true;\n            }\n            var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n            var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n            var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n            var endIndex = (firstTDIndex + this.renderedLength);\n            firstTDIndex = (endIndex > this.parent.resourceBase.expandedResources.length) ?\n                (this.parent.resourceBase.expandedResources.length - this.renderedLength) : firstTDIndex;\n            firstTDIndex = firstTDIndex < 0 ? 0 : firstTDIndex;\n            this.parent.resourceBase.renderedResources = this.parent.resourceBase.expandedResources.slice(firstTDIndex, endIndex);\n            if (this.parent.resourceBase.renderedResources.length > 0) {\n                this.updateContent(resWrap, conWrap, eventWrap, this.parent.resourceBase.renderedResources);\n            }\n        }\n    };\n    VirtualScroll.prototype.renderEvents = function () {\n        this.setTabIndex();\n        var dynamicData = this.triggerScrollEvent(events.virtualScrollStop);\n        if (this.parent.activeViewOptions && this.parent.activeViewOptions.enableLazyLoading && this.parent.crudModule) {\n            if (dynamicData.length > 0) {\n                this.parent.crudModule.refreshProcessedData(true, dynamicData);\n                this.parent.hideSpinner();\n                return;\n            }\n            this.parent.crudModule.refreshDataManager();\n            return;\n        }\n        if (this.parent.crudModule) {\n            this.parent.crudModule.refreshProcessedData(true);\n        }\n        if (this.parent.currentView !== 'Month') {\n            this.parent.notify(events.contentReady, {});\n        }\n        this.parent.hideSpinner();\n    };\n    VirtualScroll.prototype.virtualScrolling = function () {\n        var _this = this;\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n            this.parent.quickPopup.morePopup.hide();\n        }\n        var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (this.isHorizontalScroll) {\n            this.horizontalScrolling(conWrap);\n        }\n        else {\n            var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n            var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n            var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n            var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n            if (!this.parent.rowAutoHeight) {\n                addClass([conWrap, resWrap], 'e-transition');\n            }\n            this.renderedLength = resWrap.querySelector('tbody').children.length;\n            var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n            var scrollHeight = this.parent.rowAutoHeight ?\n                (conTable.offsetHeight - conWrap.offsetHeight) : this.bufferCount * this.itemSize;\n            var resCollection = [];\n            if ((conWrap.scrollTop) - this.translateY < 0) {\n                resCollection = this.upScroll(conWrap, firstTDIndex);\n            }\n            else if (conWrap.scrollTop - this.translateY > scrollHeight) {\n                resCollection = this.downScroll(conWrap, firstTDIndex);\n            }\n            if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n                this.triggerScrollEvent(events.virtualScrollStart);\n                var selectedEle = this.parent.getSelectedCells();\n                this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n                this.updateContent(resWrap, conWrap, eventWrap, resCollection);\n                this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n                if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                    this.parent.dragAndDropModule.navigationWrapper();\n                }\n                window.clearTimeout(this.timeValue);\n                this.timeValue = window.setTimeout(function () { _this.renderEvents(); }, 250);\n            }\n        }\n    };\n    VirtualScroll.prototype.horizontalScrolling = function (conWrap) {\n        var _this = this;\n        var resCollection = [];\n        var scrollWidth = this.bufferCount * this.itemSize;\n        if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) < 0) {\n            resCollection = this.leftScroll(conWrap);\n        }\n        else if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) > scrollWidth) {\n            resCollection = this.rightScroll(conWrap);\n        }\n        if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n            if (this.parent.resourceBase.expandedResources.length !== resCollection.length ||\n                this.parent.resourceBase.expandedResources[0] !== resCollection[0] ||\n                this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1] !==\n                    resCollection[resCollection.length - 1]) {\n                this.triggerScrollEvent(events.virtualScrollStart);\n                var colLevels = this.parent.activeView.colLevels.slice(0);\n                this.updateHorizontalContent(conWrap, resCollection);\n                setStyleAttribute(conWrap.querySelector('table'), { transform: \"translateX(\" + this.translateY + \"px)\" });\n                this.parent.activeView.colLevels = colLevels;\n                if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                    this.parent.dragAndDropModule.navigationWrapper();\n                }\n            }\n            window.clearTimeout(this.timeValue);\n            this.timeValue = window.setTimeout(function () { _this.renderEvents(); }, 250);\n        }\n    };\n    VirtualScroll.prototype.triggerScrollEvent = function (action) {\n        var _this = this;\n        var dynamicData = [];\n        if (!this.parent.activeView) {\n            return dynamicData;\n        }\n        var eventArgs = {\n            startDate: this.parent.activeView.startDate(),\n            endDate: this.parent.activeView.endDate(),\n            startIndex: this.parent.resourceBase.renderedResources[0].groupIndex,\n            endIndex: this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex,\n            resourceData: this.parent.resourceBase.renderedResources.map(function (x) { return x.resourceData; }),\n            name: action\n        };\n        this.parent.trigger(action, eventArgs, function (args) {\n            if (action === events.virtualScrollStart) {\n                _this.parent.showSpinner();\n            }\n            else if (action === events.virtualScrollStop && !isNullOrUndefined(args.eventData) && args.eventData.length > 0) {\n                dynamicData = args.eventData;\n            }\n        });\n        return dynamicData;\n    };\n    VirtualScroll.prototype.upScroll = function (conWrap, firstTDIndex) {\n        var index = 0;\n        index = (~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize)) - this.renderedLength;\n        if (this.parent.rowAutoHeight) {\n            index = (index > firstTDIndex) ? firstTDIndex - this.bufferCount : index;\n        }\n        index = (index > 0) ? index : 0;\n        var prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);\n        this.parent.resourceBase.renderedResources = prevSetCollection;\n        if (firstTDIndex === 0) {\n            this.translateY = conWrap.scrollTop;\n        }\n        else {\n            var height = (this.parent.rowAutoHeight) ? this.averageRowHeight : this.itemSize;\n            height = (height > 0) ? height : this.itemSize;\n            this.translateY = (conWrap.scrollTop - (this.bufferCount * height) > 0) ?\n                conWrap.scrollTop - (this.bufferCount * height) : 0;\n        }\n        return prevSetCollection;\n    };\n    VirtualScroll.prototype.downScroll = function (conWrap, firstTDIndex) {\n        var lastResource = this.parent.resourceBase.\n            renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        if (lastResource === lastResourceIndex) {\n            return null;\n        }\n        var nextSetResIndex = 0;\n        nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);\n        if (this.parent.rowAutoHeight) {\n            nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;\n            nextSetResIndex = (nextSetResIndex > firstTDIndex + this.bufferCount) ? nextSetResIndex : firstTDIndex + this.bufferCount;\n        }\n        var lastIndex = nextSetResIndex + this.renderedLength;\n        lastIndex = (lastIndex > this.parent.resourceBase.expandedResources.length) ?\n            nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;\n        var nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);\n        this.translateY = conWrap.scrollTop;\n        return nextSetCollection;\n    };\n    VirtualScroll.prototype.leftScroll = function (conWrap) {\n        var index = 0;\n        index = (~~(Math.abs(conWrap.scrollLeft) / this.itemSize) + Math.ceil(conWrap.clientWidth / this.itemSize)) - this.renderedLength;\n        index = (index > 0) ? index : 0;\n        return this.getCollection(index, index + this.renderedLength);\n    };\n    VirtualScroll.prototype.rightScroll = function (conWrap) {\n        var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];\n        var nextSetIndex = 0;\n        nextSetIndex = ~~(Math.abs(conWrap.scrollLeft) / this.itemSize);\n        var lastIndex = nextSetIndex + this.renderedLength;\n        lastIndex = (lastIndex > lastLevel.length - 1) ? lastLevel.length - 1 : lastIndex;\n        return this.getCollection(lastIndex - this.renderedLength, lastIndex);\n    };\n    VirtualScroll.prototype.getCollection = function (startIndex, endIndex) {\n        this.translateY = startIndex * this.itemSize;\n        var lastLevel = this.getResCollection(startIndex, endIndex);\n        if (this.parent.enableRtl) {\n            this.translateY = -this.translateY;\n        }\n        return lastLevel;\n    };\n    VirtualScroll.prototype.getResCollection = function (startIndex, endIndex) {\n        var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];\n        var resCollection = [];\n        var index = { startIndex: 0, endIndex: 0 };\n        if (this.parent.activeViewOptions.group.byDate) {\n            if (lastLevel[parseInt(startIndex.toString(), 10)].date.getTime() ===\n                this.parent.resourceBase.expandedResources[0].date.getTime() &&\n                lastLevel[parseInt(endIndex.toString(), 10)].date.getTime() ===\n                    this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].date.getTime()) {\n                return this.parent.resourceBase.expandedResources;\n            }\n            resCollection =\n                this.getByDateCollection(lastLevel[parseInt(startIndex.toString(), 10)], lastLevel[parseInt(endIndex.toString(), 10)], index);\n            this.setRenderedDates(resCollection);\n        }\n        else {\n            if (lastLevel[parseInt(startIndex.toString(), 10)].groupIndex === this.parent.resourceBase.expandedResources[0].groupIndex &&\n                lastLevel[parseInt(endIndex.toString(), 10)].groupIndex ===\n                    this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex) {\n                return this.parent.resourceBase.expandedResources;\n            }\n            resCollection =\n                this.getByIdCollection(lastLevel[parseInt(startIndex.toString(), 10)], lastLevel[parseInt(endIndex.toString(), 10)], index);\n        }\n        if (this.parent.currentView !== 'Month') {\n            this.startIndex = index.startIndex;\n            resCollection = lastLevel.slice(index.startIndex, index.endIndex);\n        }\n        this.translateY = index.startIndex * this.itemSize;\n        return resCollection;\n    };\n    VirtualScroll.prototype.getByDateCollection = function (firstItem, lastItem, index) {\n        var resCollection = this.parent.activeView.colLevels[0].filter(function (data) {\n            return firstItem.date.getTime() <= data.date.getTime() &&\n                data.date.getTime() <= lastItem.date.getTime();\n        });\n        this.setStartEndIndex(this.parent.activeView.colLevels[0], resCollection[0], resCollection[resCollection.length - 1], index);\n        return resCollection;\n    };\n    VirtualScroll.prototype.getByIdCollection = function (firstItem, lastItem, index) {\n        var resCollection = this.parent.resourceBase.lastResourceLevel.filter(function (data) {\n            return firstItem.groupIndex <= data.groupIndex && data.groupIndex <= lastItem.groupIndex;\n        });\n        this.parent.resourceBase.renderedResources = resCollection;\n        this.setStartEndIndex(this.parent.resourceBase.lastResourceLevel, resCollection[0], resCollection[resCollection.length - 1], index);\n        return resCollection;\n    };\n    VirtualScroll.prototype.setStartEndIndex = function (data, firstItem, lastItem, colIndex) {\n        var index = 0;\n        data.filter(function (data) {\n            if (firstItem === data) {\n                colIndex.startIndex = index;\n            }\n            else if (lastItem === data) {\n                colIndex.endIndex = index + data.colSpan;\n            }\n            index += data.colSpan;\n        });\n        if (firstItem === lastItem) {\n            colIndex.endIndex = colIndex.startIndex + lastItem.colSpan;\n        }\n    };\n    VirtualScroll.prototype.updateContent = function (resWrap, conWrap, eventWrap, resCollection) {\n        var renderedLength = resWrap.querySelector('tbody').children.length;\n        if (document.activeElement && document.activeElement.classList.contains(cls.RESOURCE_CELLS_CLASS)) {\n            this.isResourceCell = true;\n            this.parent.element.focus();\n        }\n        for (var i = 0; i < renderedLength; i++) {\n            remove(resWrap.querySelector('tbody tr'));\n            remove(conWrap.querySelector('tbody tr'));\n            remove(eventWrap.querySelector('div'));\n        }\n        this.parent.resourceBase.renderedResources = resCollection;\n        var resourceRows = this.parent.resourceBase.getContentRows(resCollection, true);\n        var contentRows = this.parent.activeView.getContentRows();\n        var eventRows = this.parent.activeView.getEventRows(resCollection.length);\n        append(resourceRows, resWrap.querySelector('tbody'));\n        append(contentRows, conWrap.querySelector('tbody'));\n        append(eventRows, eventWrap);\n    };\n    VirtualScroll.prototype.updateHorizontalContent = function (conWrap, resCollection) {\n        this.parent.resourceBase.expandedResources = resCollection;\n        var selectedEle = this.parent.getSelectedCells();\n        this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n        var renderedLength = conWrap.querySelectorAll('tbody tr').length;\n        for (var i = 0; i < renderedLength; i++) {\n            remove(conWrap.querySelector('tbody tr'));\n        }\n        if (this.parent.currentView === 'Month') {\n            if (this.parent.activeViewOptions.group.byDate) {\n                this.parent.activeView.colLevels[0] = resCollection;\n            }\n            else {\n                this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 2] = resCollection;\n            }\n            var contentRows = this.parent.activeView.getContentRows();\n            append(contentRows, conWrap.querySelector('tbody'));\n        }\n        else {\n            var col = [].slice.call(conWrap.querySelector('colgroup').children);\n            for (var i = 0; i < col.length; i++) {\n                remove(col[parseInt(i.toString(), 10)]);\n            }\n            this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1] = resCollection;\n            var contentRows = this.parent.activeView.getContentRows();\n            var table = conWrap.querySelector('table');\n            var thead = conWrap.querySelector('thead');\n            var colGroupEle_1 = conWrap.querySelector('colgroup');\n            resCollection.forEach(function () {\n                colGroupEle_1.appendChild(createElement('col'));\n            });\n            thead.appendChild(this.parent.eventBase.createEventWrapper('', this.startIndex > 0 ? this.startIndex : 0));\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                thead.appendChild(this.parent.eventBase.createEventWrapper('timeIndicator'));\n            }\n            prepend([thead], table);\n            append(contentRows, conWrap.querySelector('tbody'));\n        }\n    };\n    VirtualScroll.prototype.getBufferCollection = function (startIndex, endIndex) {\n        return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);\n    };\n    VirtualScroll.prototype.setTranslate = function (resWrap, conWrap, eventWrap, timeIndicator) {\n        setStyleAttribute(resWrap.querySelector('table'), { transform: \"translateY(\" + this.translateY + \"px)\" });\n        setStyleAttribute(conWrap.querySelector('table'), { transform: \"translateY(\" + this.translateY + \"px)\" });\n        setStyleAttribute(eventWrap, { transform: \"translateY(\" + this.translateY + \"px)\" });\n        if (!isNullOrUndefined(timeIndicator)) {\n            setStyleAttribute(timeIndicator, { transform: \"translateY(\" + this.translateY + \"px)\" });\n        }\n    };\n    VirtualScroll.prototype.updateFocusedWorkCell = function () {\n        if (this.focusedEle) {\n            var date = parseInt(this.focusedEle.getAttribute('data-date'), 10);\n            var groupIndex = parseInt(this.focusedEle.getAttribute('data-group-index'), 10);\n            var ele = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-date=\\\"\" + date + \"\\\"][data-group-index=\\\"\" + groupIndex + \"\\\"]\");\n            if (ele) {\n                this.parent.addSelectedClass([ele], ele, true);\n            }\n            this.focusedEle = null;\n        }\n    };\n    VirtualScroll.prototype.setRenderedDates = function (resCollection) {\n        if (this.parent.currentView !== 'Month') {\n            var dateCol_1 = resCollection.map(function (x) { return x.date; });\n            this.parent.resourceBase.renderedResources.forEach(function (x) { return x.renderDates = dateCol_1; });\n        }\n        else {\n            var dateCol_2 = resCollection.map(function (x) { return x.date.getDay(); });\n            var renderDates_1 = this.parent.activeView.renderDates.filter(function (x) { return dateCol_2.indexOf(x.getDay()) >= 0; });\n            this.parent.resourceBase.renderedResources.forEach(function (x) { return x.renderDates = renderDates_1; });\n        }\n    };\n    VirtualScroll.prototype.setTabIndex = function () {\n        var resColWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n        var resCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.RESOURCE_CELLS_CLASS));\n        if (resCells && resColWrap) {\n            resCells.forEach(function (element) {\n                if (element.getBoundingClientRect().top >= resColWrap.getBoundingClientRect().top) {\n                    element.setAttribute('tabindex', '0');\n                }\n            });\n        }\n        var focusResCell = this.parent.element.querySelector(\".\" + cls.RESOURCE_CELLS_CLASS + \"[tabindex=\\\"\" + 0 + \"\\\"]\");\n        if (this.isResourceCell && focusResCell) {\n            focusResCell.focus();\n            this.isResourceCell = false;\n        }\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n        this.focusedEle = null;\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
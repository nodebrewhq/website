{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable max-len */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isNullOrUndefined, setStyleAttribute, extend, EventHandler, createElement } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\nimport { MonthEvent } from './month';\nvar EVENT_GAP = 2;\nvar BLOCK_INDICATOR_WIDTH = 22;\nvar BLOCK_INDICATOR_HEIGHT = 18;\n/**\n * Timeline view events render\n */\nvar TimelineEvent = /** @class */function (_super) {\n  __extends(TimelineEvent, _super);\n  function TimelineEvent(parent, type) {\n    var _this = _super.call(this, parent) || this;\n    _this.startHour = _this.parent.activeView.getStartHour();\n    _this.endHour = _this.parent.activeView.getEndHour();\n    _this.slotCount = _this.parent.activeViewOptions.timeScale.slotCount;\n    _this.interval = _this.parent.activeViewOptions.timeScale.interval;\n    _this.day = 0;\n    _this.rowIndex = 0;\n    _this.cellTops = [];\n    _this.renderType = type;\n    _this.eventContainers = [].slice.call(_this.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n    var tr = [].slice.call(_this.element.querySelectorAll('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr'));\n    _this.dayLength = tr.length === 0 ? 0 : tr[0].children.length;\n    _this.content = _this.parent.element.querySelector('.' + cls.SCHEDULE_TABLE_CLASS + '.' + cls.CONTENT_TABLE_CLASS);\n    return _this;\n  }\n  TimelineEvent.prototype.getSlotDates = function () {\n    this.slots = [];\n    this.slots.push(this.parent.activeView.renderDates.map(function (date) {\n      return +date;\n    }));\n    if (this.parent.activeViewOptions.headerRows.length > 0 && this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n      this.renderType = 'day';\n      var workCell = this.content.querySelector('.' + cls.WORK_CELLS_CLASS);\n      this.cellWidth = util.getElementWidth(workCell) / +(workCell.getAttribute('colspan') || 1);\n      this.slotsPerDay = 1;\n    } else {\n      this.slotsPerDay = this.dayLength / this.dateRender.length;\n    }\n  };\n  TimelineEvent.prototype.getOverlapEvents = function (date, appointments) {\n    var appointmentsList = [];\n    if (this.renderType === 'day') {\n      for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n        var app = appointments_1[_i];\n        if (util.resetTime(app[this.fields.startTime]).getTime() <= util.resetTime(new Date(date.getTime())).getTime() && util.resetTime(app[this.fields.endTime]).getTime() >= util.resetTime(new Date(date.getTime())).getTime()) {\n          appointmentsList.push(app);\n        }\n      }\n    } else {\n      for (var _a = 0, appointments_2 = appointments; _a < appointments_2.length; _a++) {\n        var app = appointments_2[_a];\n        var eventData = app.data;\n        if (eventData.trimStartTime.getTime() <= date.getTime() && eventData.trimEndTime.getTime() > date.getTime() || eventData.trimStartTime.getTime() === date.getTime() && eventData.trimEndTime.getTime() === date.getTime()) {\n          appointmentsList.push(app);\n        }\n      }\n    }\n    return appointmentsList;\n  };\n  TimelineEvent.prototype.getSortComparerIndex = function (startDate, endDate) {\n    var appIndex = -1;\n    var appointments = this.renderedEvents;\n    if (appointments.length > 0) {\n      var appointmentsList = this.getOverlapSortComparerEvents(startDate, endDate, appointments);\n      var appLevel = appointmentsList.map(function (obj) {\n        return obj.Index;\n      });\n      appIndex = appLevel.length > 0 ? this.getSmallestMissingNumber(appLevel) : 0;\n    }\n    return appIndex === -1 ? 0 : appIndex;\n  };\n  TimelineEvent.prototype.getOverlapSortComparerEvents = function (startDate, endDate, appointmentsCollection) {\n    var appointments = [];\n    var _loop_1 = function (app) {\n      if (this_1.renderType === 'day') {\n        var start_1 = util.resetTime(startDate).getTime();\n        var end_1 = util.resetTime(endDate).getTime();\n        var appStart_1 = util.resetTime(app[this_1.fields.startTime]).getTime();\n        var appEnd_1 = util.resetTime(app[this_1.fields.endTime]).getTime();\n        var isEndOverlap = function () {\n          var endTime = end_1 - (util.getDateInMs(endDate) <= 0 ? util.MS_PER_DAY : 0);\n          endTime = start_1 > endTime ? start_1 : endTime;\n          return appEnd_1 >= endTime && appStart_1 <= endTime;\n        };\n        if (appStart_1 <= start_1 && appEnd_1 >= start_1 || isEndOverlap() || appStart_1 > start_1 && appEnd_1 < end_1) {\n          appointments.push(app);\n        }\n      } else {\n        var eventData = app.data;\n        if (eventData.trimStartTime.getTime() <= startDate.getTime() && startDate.getTime() < eventData.trimEndTime.getTime() || startDate.getTime() <= eventData.trimStartTime.getTime() && eventData.trimStartTime.getTime() < endDate.getTime()) {\n          appointments.push(app);\n        }\n      }\n    };\n    var this_1 = this;\n    for (var _i = 0, appointmentsCollection_1 = appointmentsCollection; _i < appointmentsCollection_1.length; _i++) {\n      var app = appointmentsCollection_1[_i];\n      _loop_1(app);\n    }\n    return appointments;\n  };\n  TimelineEvent.prototype.renderResourceEvents = function () {\n    this.removeHeightProperty(cls.RESOURCE_COLUMN_TABLE_CLASS);\n    var selector = '.' + cls.RESOURCE_COLUMN_TABLE_CLASS + ' tbody tr';\n    this.addCellHeight(selector, this.eventHeight, EVENT_GAP, this.moreIndicatorHeight, 0, false);\n    var resources = this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.renderedResources;\n    if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n      for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n        var source = this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)];\n        this.rowIndex = source.groupIndex;\n        this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, source);\n        if (this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)] && this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex !== this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex) {\n          var target = this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)];\n          this.rowIndex = target.groupIndex;\n          this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, target);\n        }\n      }\n      this.parent.crudModule.crudObj.isCrudAction = false;\n    } else {\n      for (var i = 0; i < resources.length; i++) {\n        this.rowIndex = i;\n        this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, resources[parseInt(i.toString(), 10)]);\n      }\n    }\n  };\n  TimelineEvent.prototype.renderEvents = function (event, resIndex, appointmentsList) {\n    var startTime = event[this.fields.startTime];\n    var endTime = event[this.fields.endTime];\n    if (startTime.getTime() < this.parent.minDate.getTime() || endTime.getTime() > this.parent.maxDate.getTime()) {\n      return;\n    }\n    var eventData = event.data;\n    startTime = this.getStartTime(event, eventData);\n    endTime = this.getEndTime(event, eventData);\n    var startEndHours = util.getStartEndHours(event[this.fields.startTime], this.startHour, this.endHour);\n    var eventDates = this.updateEventMinimumDuration(startEndHours, startTime, endTime);\n    startTime = eventDates.startDate;\n    endTime = eventDates.endDate;\n    this.day = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime())));\n    if (this.day < 0) {\n      return;\n    }\n    var cellTd = this.getCellTd();\n    var eventsPerRow = this.parent.rowAutoHeight ? 1 : this.parent.activeViewOptions.maxEventsPerRow;\n    var overlapCount = isNullOrUndefined(this.parent.eventSettings.sortComparer) ? this.getIndex(startTime) : this.getSortComparerIndex(startTime, endTime);\n    event.Index = overlapCount;\n    var appHeight = this.eventHeight;\n    var diffInDays = eventData.count;\n    var eventObj = extend({}, event, null, true);\n    eventObj[this.fields.startTime] = eventData[this.fields.startTime];\n    eventObj[this.fields.endTime] = eventData[this.fields.endTime];\n    var currentDate = util.resetTime(new Date(this.dateRender[this.day].getTime()));\n    var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n    var isValidEvent = true;\n    if (this.isDayProcess() || eventObj[this.fields.isAllDay]) {\n      isValidEvent = true;\n    } else {\n      isValidEvent = this.isValidEvent(eventObj, startTime, endTime, schedule);\n    }\n    if (startTime <= endTime && isValidEvent) {\n      var appWidth = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);\n      appWidth = this.renderType === 'day' ? appWidth - 2 : appWidth;\n      var appLeft = 0;\n      var appRight = 0;\n      var position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], this.day);\n      appWidth = appWidth <= 0 ? this.cellWidth : appWidth; // appWidth 0 when start and end time as same\n      this.renderedEvents.push(extend({}, event, null, true));\n      if (isNullOrUndefined(this.cellTops[parseInt(resIndex.toString(), 10)])) {\n        this.cellTops[parseInt(resIndex.toString(), 10)] = this.getRowTop(resIndex);\n      }\n      var top_1 = this.cellTops[parseInt(resIndex.toString(), 10)];\n      var appTop = top_1 + (this.maxHeight ? 0 : EVENT_GAP) + overlapCount * (appHeight + EVENT_GAP);\n      appLeft = this.parent.enableRtl ? 0 : position;\n      appRight = this.parent.enableRtl ? position : 0;\n      var height = (overlapCount + 1) * (appHeight + EVENT_GAP) + this.moreIndicatorHeight;\n      var renderApp = this.parent.activeViewOptions.maxEventsPerRow && !this.parent.rowAutoHeight && !this.parent.eventSettings.enableIndicator ? overlapCount < eventsPerRow : this.maxOrIndicator ? overlapCount < 1 ? true : false : this.cellHeight > height;\n      if (this.parent.rowAutoHeight || renderApp) {\n        var appointmentElement = void 0;\n        if (isNullOrUndefined(this.inlineValue)) {\n          appointmentElement = this.createAppointmentElement(event, resIndex);\n        } else {\n          appointmentElement = this.parent.inlineModule.createInlineAppointmentElement();\n        }\n        this.applyResourceColor(appointmentElement, event, 'backgroundColor', this.groupOrder);\n        setStyleAttribute(appointmentElement, {\n          'width': appWidth + 'px',\n          'left': appLeft + 'px',\n          'right': appRight + 'px',\n          'top': appTop + 'px'\n        });\n        this.wireAppointmentEvents(appointmentElement, event);\n        if (this.parent.rowAutoHeight) {\n          var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n          var conWidth = util.getElementWidth(conWrap);\n          var isWithoutScroll = conWrap.offsetHeight === conWrap.clientHeight && conWrap.offsetWidth === conWrap.clientWidth;\n          this.renderEventElement(event, appointmentElement, cellTd);\n          var firstChild = this.getFirstChild(resIndex);\n          this.updateCellHeight(firstChild, height);\n          if (isWithoutScroll && (conWrap.offsetWidth > conWrap.clientWidth || conWidth !== util.getElementWidth(conWrap))) {\n            this.adjustAppointments(conWidth);\n          }\n        } else {\n          this.renderEventElement(event, appointmentElement, cellTd);\n        }\n      } else {\n        for (var i = 0; i < diffInDays; i++) {\n          var moreIndicator = cellTd.querySelector('.' + cls.MORE_INDICATOR_CLASS);\n          var appPos = this.parent.enableRtl ? appRight : appLeft;\n          appPos = Math.floor(appPos / this.cellWidth) * this.cellWidth;\n          var interval = this.interval / this.slotCount;\n          var startDate = this.parent.activeViewOptions.option === 'TimelineMonth' || this.renderType === 'day' || i !== 0 ? new Date(this.dateRender[this.day + i].getTime()) : new Date(startTime);\n          var endDate = util.addDays(this.dateRender[this.day + i], 1);\n          if (this.parent.activeViewOptions.option === 'TimelineMonth' || this.renderType === 'day') {\n            var position_1 = this.getPosition(startDate, endDate, event[this.fields.isAllDay], this.day + i);\n            this.renderTimelineMoreIndicator(startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top_1, appLeft, appRight, cellTd, moreIndicator, appPos, position_1);\n          } else {\n            var slotCount = (util.getUniversalTime(endTime) - util.getUniversalTime(startTime)) / util.MS_PER_MINUTE * this.slotCount / this.interval;\n            for (var k = 0; k < slotCount; k++) {\n              startDate = k === 0 ? new Date(startDate.getTime()) : new Date(startDate.getTime() + 60000 * interval);\n              if (slotCount < 1) {\n                startDate = this.adjustToNearestTimeSlot(startDate, interval);\n              }\n              endDate = new Date(startDate.getTime() + 60000 * interval);\n              if (slotCount >= 1 && endDate.getTime() > endTime.getTime()) {\n                break;\n              }\n              var position_2 = this.getPosition(startDate, endDate, false, this.day + i);\n              if (appPos > position_2) {\n                break;\n              }\n              appPos = position_2;\n              this.renderTimelineMoreIndicator(startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top_1, appLeft, appRight, cellTd, moreIndicator, appPos, position_2);\n            }\n          }\n        }\n      }\n    }\n    this.parent.renderTemplates();\n  };\n  TimelineEvent.prototype.adjustToNearestTimeSlot = function (inputTime, interval) {\n    // Parse the input time\n    var parsedTime = new Date(inputTime);\n    // Get the minutes of the input time in milliseconds\n    var minutesInMilliseconds = parsedTime.getHours() * 60 * 60 * 1000 + parsedTime.getMinutes() * 60 * 1000;\n    // Calculate the adjusted time in milliseconds (nearest time slot)\n    var adjustedMinutesInMilliseconds = Math.floor(minutesInMilliseconds / (interval * 60 * 1000)) * (interval * 60 * 1000);\n    // Create a new Date object with the adjusted time\n    var adjustedTime = new Date(parsedTime.getTime());\n    adjustedTime.setHours(adjustedMinutesInMilliseconds / (60 * 60 * 1000) % 24);\n    adjustedTime.setMinutes(adjustedMinutesInMilliseconds % (60 * 60 * 1000) / (60 * 1000));\n    // Return the adjusted time in string format\n    return adjustedTime;\n  };\n  TimelineEvent.prototype.renderTimelineMoreIndicator = function (startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top, appLeft, appRight, cellTd, moreIndicator, appPos, position) {\n    appLeft = this.parent.enableRtl ? appRight = position : position;\n    appPos = this.parent.enableRtl ? appRight : appLeft;\n    appPos = Math.floor(appPos / this.cellWidth) * this.cellWidth;\n    if (cellTd && isNullOrUndefined(moreIndicator) || !this.isAlreadyAvail(appPos, cellTd)) {\n      var startDateTime = this.parent.activeViewOptions.option === 'TimelineMonth' || this.renderType === 'day' ? new Date(+startTime) : startDate;\n      var slotStartTime = new Date(startDateTime.setMinutes(Math.floor(startDateTime.getMinutes() / interval) * interval));\n      var slotEndTime = new Date(slotStartTime.getTime() + 60000 * interval);\n      var groupIndex = void 0;\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !isNullOrUndefined(resIndex)) {\n        groupIndex = resIndex.toString();\n      }\n      var filterEvents = this.getFilterEvents(startDate, endDate, slotStartTime, slotEndTime, groupIndex, appointmentsList);\n      var appArea = this.cellHeight - this.moreIndicatorHeight;\n      appHeight = this.withIndicator ? appArea - EVENT_GAP : appHeight;\n      var renderedAppCount = Math.floor(appArea / (appHeight + EVENT_GAP));\n      var count = this.parent.activeViewOptions.maxEventsPerRow && !this.parent.eventSettings.enableIndicator ? filterEvents.length - this.parent.activeViewOptions.maxEventsPerRow : filterEvents.length - renderedAppCount <= 0 ? 1 : filterEvents.length - renderedAppCount;\n      var moreIndicatorElement = void 0;\n      if (this.renderType === 'day') {\n        moreIndicatorElement = this.getMoreIndicatorElement(count, startDate, endDate);\n      } else {\n        moreIndicatorElement = this.getMoreIndicatorElement(count, slotStartTime, slotEndTime);\n      }\n      if (!isNullOrUndefined(groupIndex)) {\n        moreIndicatorElement.setAttribute('data-group-index', groupIndex);\n      }\n      moreIndicatorElement.style.top = top + appArea + 'px';\n      moreIndicatorElement.style.width = this.cellWidth + 'px';\n      moreIndicatorElement.style.left = Math.floor(appLeft / this.cellWidth) * this.cellWidth + 'px';\n      moreIndicatorElement.style.right = Math.floor(appRight / this.cellWidth) * this.cellWidth + 'px';\n      this.renderElement(cellTd, moreIndicatorElement);\n      EventHandler.add(moreIndicatorElement, 'click', this.moreIndicatorClick, this);\n    }\n  };\n  TimelineEvent.prototype.updateCellHeight = function (cell, height) {\n    var cellHeight = cell.style.height === '' ? this.cellHeight : parseInt(cell.style.height, 10);\n    if (height > cellHeight) {\n      setStyleAttribute(cell, {\n        'height': height + 'px'\n      });\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        var resourceCell = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_TABLE_CLASS + ' ' + 'tbody td[data-group-index=\"' + cell.getAttribute('data-group-index') + '\"]');\n        if (resourceCell) {\n          setStyleAttribute(resourceCell, {\n            'height': height + 'px'\n          });\n        }\n      }\n      var monthHeader = this.parent.element.querySelector('.e-month-header-wrapper table tr:nth-child(' + (cell.parentElement.rowIndex + 1) + ') td');\n      if (monthHeader) {\n        setStyleAttribute(monthHeader, {\n          'height': height + 'px'\n        });\n      }\n    }\n  };\n  TimelineEvent.prototype.adjustAppointments = function (conWidth) {\n    var _this = this;\n    var tr = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr');\n    var actualCellWidth = util.getElementWidth(this.workCells[0]);\n    this.cellWidth = actualCellWidth / +(this.workCells[0].getAttribute('colspan') || 1);\n    var currentPercentage = actualCellWidth * tr.children.length / (conWidth / 100);\n    var apps = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n    apps.forEach(function (app) {\n      if (_this.parent.enableRtl && app.style.right !== '0px') {\n        app.style.right = parseFloat(app.style.right) / 100 * currentPercentage + 'px';\n      } else if (app.style.left !== '0px') {\n        app.style.left = parseFloat(app.style.left) / 100 * currentPercentage + 'px';\n      }\n      app.style.width = parseFloat(app.style.width) / 100 * currentPercentage + 'px';\n    });\n  };\n  TimelineEvent.prototype.getFirstChild = function (index) {\n    var query = '.' + cls.CONTENT_TABLE_CLASS + ' tbody td';\n    var groupIndex = '';\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      groupIndex = '[data-group-index=\"' + index.toString() + '\"]';\n    }\n    var td = this.parent.element.querySelector(query + groupIndex);\n    return td;\n  };\n  TimelineEvent.prototype.updateBlockElements = function () {\n    var blockElement = [].slice.call(this.element.querySelectorAll('.' + cls.BLOCK_APPOINTMENT_CLASS));\n    for (var _i = 0, blockElement_1 = blockElement; _i < blockElement_1.length; _i++) {\n      var element = blockElement_1[_i];\n      var resIndex = parseInt(element.getAttribute('data-group-index'), 10);\n      var firstChild = this.getFirstChild(resIndex);\n      element.style.height = firstChild.offsetHeight + 'px';\n      var width = element.offsetWidth / firstChild.offsetWidth;\n      element.style.width = firstChild.offsetWidth * width + 'px';\n    }\n    var blockIndicator = [].slice.call(this.element.querySelectorAll('.' + cls.BLOCK_INDICATOR_CLASS));\n    for (var _a = 0, blockIndicator_1 = blockIndicator; _a < blockIndicator_1.length; _a++) {\n      var element = blockIndicator_1[_a];\n      var resIndex = parseInt(element.getAttribute('data-group-index'), 10);\n      element.style.top = this.getRowTop(resIndex) + this.getFirstChild(resIndex).offsetHeight - BLOCK_INDICATOR_HEIGHT + 'px';\n    }\n  };\n  TimelineEvent.prototype.getStartTime = function (event, eventData) {\n    var startTime = event[this.fields.startTime];\n    var schedule = util.getStartEndHours(startTime, this.startHour, this.endHour);\n    if (this.isDayProcess()) {\n      startTime = event[this.fields.startTime];\n    } else {\n      if (schedule.startHour.getTime() >= eventData[this.fields.startTime]) {\n        startTime = schedule.startHour;\n      } else if (schedule.endHour.getTime() <= eventData[this.fields.startTime]) {\n        startTime = this.getNextDay(schedule.startHour, eventData);\n      } else {\n        startTime = eventData[this.fields.startTime];\n      }\n    }\n    // To overcome the overflow\n    eventData.trimStartTime = event[this.fields.isAllDay] ? schedule.startHour : eventData[this.fields.startTime];\n    return startTime;\n  };\n  TimelineEvent.prototype.getNextDay = function (startTime, eventData) {\n    var startDate;\n    for (var i = 1; i <= this.dateRender.length; i++) {\n      startDate = util.addDays(startTime, i);\n      if (this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime()))) !== -1) {\n        eventData.count = eventData.count - 1;\n        return startDate;\n      }\n    }\n    return startDate;\n  };\n  TimelineEvent.prototype.getEndTime = function (event, eventData) {\n    var endTime = event[this.fields.endTime];\n    var schedule = util.getStartEndHours(endTime, this.startHour, this.endHour);\n    if (this.isDayProcess()) {\n      endTime = eventData[this.fields.endTime];\n    } else {\n      endTime = eventData[this.fields.endTime];\n      if (schedule.endHour.getTime() <= eventData[this.fields.endTime] || event[this.fields.isAllDay]) {\n        endTime = schedule.endHour;\n      }\n      if (schedule.startHour.getTime() >= eventData[this.fields.endTime].getTime() && !event[this.fields.isAllDay]) {\n        endTime = this.getPreviousDay(schedule.startHour, schedule.endHour, eventData);\n      }\n    }\n    // To overcome the overflow\n    eventData.trimEndTime = event[this.fields.isAllDay] ? schedule.endHour : eventData[this.fields.endTime];\n    return endTime;\n  };\n  TimelineEvent.prototype.getPreviousDay = function (startTime, endTime, eventData) {\n    for (var i = 1; i <= this.dateRender.length; i++) {\n      var endDate = util.addDays(endTime, -i);\n      if (this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime()))) !== -1) {\n        endDate = util.resetTime(new Date(endDate.getTime()));\n        endDate.setHours(endTime.getHours(), endTime.getMinutes(), endTime.getSeconds());\n        var count = eventData.count;\n        var actualEndTime = eventData[this.fields.endTime];\n        eventData.count = actualEndTime.getHours() !== 0 || actualEndTime.getMinutes() !== 0 ? count - 1 : count;\n        return endDate;\n      }\n    }\n    return eventData[this.fields.endTime];\n  };\n  TimelineEvent.prototype.getEventWidth = function (startDate, endDate, isAllDay, count) {\n    if (this.renderType === 'day' || isAllDay) {\n      return count * this.slotsPerDay * this.cellWidth;\n    }\n    if (this.isSameDay(startDate, endDate)) {\n      return this.getSameDayEventsWidth(startDate, endDate);\n    } else {\n      return this.getSpannedEventsWidth(startDate, endDate, count);\n    }\n  };\n  TimelineEvent.prototype.getSameDayEventsWidth = function (startDate, endDate) {\n    var intervalMins = this.interval;\n    if (this.slotsPerDay === 1) {\n      var hoursRange = util.getStartEndHours(util.resetTime(new Date(startDate.getTime())), this.startHour, this.endHour);\n      intervalMins = (hoursRange.endHour.getTime() - hoursRange.startHour.getTime()) / util.MS_PER_MINUTE;\n    }\n    return (util.getUniversalTime(endDate) - util.getUniversalTime(startDate)) / util.MS_PER_MINUTE * (this.cellWidth * this.slotCount) / intervalMins;\n  };\n  TimelineEvent.prototype.getSpannedEventsWidth = function (startDate, endDate, diffInDays) {\n    var width = diffInDays * this.slotsPerDay * this.cellWidth;\n    var endWidth;\n    var start = util.getStartEndHours(util.resetTime(new Date(startDate.getTime())), this.startHour, this.endHour);\n    var startWidth = this.getSameDayEventsWidth(start.startHour, startDate);\n    if (this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(endDate.getTime()))) === -1) {\n      endWidth = 0;\n    } else {\n      var end = util.getStartEndHours(util.resetTime(new Date(endDate.getTime())), this.startHour, this.endHour);\n      endWidth = this.getSameDayEventsWidth(endDate, end.endHour);\n      endWidth = this.slotsPerDay * this.cellWidth === endWidth ? 0 : endWidth;\n    }\n    var spannedWidth = startWidth + endWidth;\n    return width > spannedWidth ? width - spannedWidth : width - startWidth;\n  };\n  TimelineEvent.prototype.isSameDay = function (startTime, endTime) {\n    var startDay = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime())));\n    var endDay = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(endTime.getTime())));\n    return startDay === endDay;\n  };\n  TimelineEvent.prototype.getAppointmentLeft = function (schedule, startTime, day) {\n    var slotTd = this.isSameDay(startTime, schedule.startHour) ? (util.getUniversalTime(startTime) - util.getUniversalTime(schedule.startHour)) / (util.MS_PER_MINUTE * this.interval) * this.slotCount : 0;\n    if (day === 0) {\n      return slotTd;\n    } else {\n      var daySlot = Math.round((util.getUniversalTime(schedule.endHour) - util.getUniversalTime(schedule.startHour)) / util.MS_PER_MINUTE / this.interval * this.slotCount);\n      return daySlot * day + slotTd;\n    }\n  };\n  TimelineEvent.prototype.getPosition = function (startTime, endTime, isAllDay, day) {\n    if (this.renderType === 'day' || isAllDay) {\n      return day * this.slotsPerDay * this.cellWidth;\n    }\n    var currentDate = util.resetTime(new Date(this.dateRender[parseInt(day.toString(), 10)].getTime()));\n    var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n    var cellIndex;\n    if (schedule.endHour.getTime() <= endTime.getTime() && schedule.startHour.getTime() >= startTime.getTime()) {\n      cellIndex = this.getAppointmentLeft(schedule, schedule.startHour, day);\n    } else if (schedule.endHour.getTime() <= endTime.getTime()) {\n      cellIndex = this.getAppointmentLeft(schedule, startTime, day);\n    } else if (schedule.startHour.getTime() >= startTime.getTime()) {\n      cellIndex = this.getAppointmentLeft(schedule, schedule.startHour, day);\n    } else {\n      cellIndex = this.getAppointmentLeft(schedule, startTime, day);\n    }\n    return cellIndex * this.cellWidth;\n  };\n  TimelineEvent.prototype.getFilterEvents = function (startDate, endDate, startTime, endTime, gIndex, eventsList) {\n    if (this.renderType === 'day') {\n      return this.getFilteredEvents(startDate, endDate, gIndex, eventsList);\n    } else {\n      return this.getFilteredEvents(startTime, endTime, gIndex, eventsList);\n    }\n  };\n  TimelineEvent.prototype.isAlreadyAvail = function (appPos, cellTd) {\n    var moreIndicator = [].slice.call(cellTd.querySelectorAll('.' + cls.MORE_INDICATOR_CLASS));\n    for (var i = 0; i < moreIndicator.length; i++) {\n      var indicatorPos = void 0;\n      if (moreIndicator) {\n        indicatorPos = this.parent.enableRtl ? moreIndicator[parseInt(i.toString(), 10)].style.right : moreIndicator[parseInt(i.toString(), 10)].style.left;\n      }\n      if (parseInt(indicatorPos, 10) === Math.floor(appPos)) {\n        return true;\n      }\n    }\n    return false;\n  };\n  TimelineEvent.prototype.getRowTop = function (resIndex) {\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      return this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' ' + 'tbody td[data-group-index=\"' + resIndex.toString() + '\"]').offsetTop;\n    }\n    return 0;\n  };\n  TimelineEvent.prototype.getCellTd = function () {\n    var wrapIndex = this.parent.uiStateValues.isGroupAdaptive ? 0 : this.rowIndex;\n    return this.eventContainers[parseInt(wrapIndex.toString(), 10)];\n  };\n  TimelineEvent.prototype.renderBlockIndicator = function (cellTd, position, resIndex) {\n    // No need to render block icon for Year, Month and Week header rows\n    if (this.parent.headerRows.length > 0 && (this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Hour' || this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Date')) {\n      return;\n    }\n    position = Math.floor(position / this.cellWidth) * this.cellWidth + this.cellWidth - BLOCK_INDICATOR_WIDTH;\n    if (!this.isAlreadyAvail(position, cellTd)) {\n      var blockIndicator = createElement('div', {\n        className: 'e-icons ' + cls.BLOCK_INDICATOR_CLASS\n      });\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        blockIndicator.setAttribute('data-group-index', resIndex.toString());\n      }\n      if (this.parent.enableRtl) {\n        blockIndicator.style.right = position + 'px';\n      } else {\n        blockIndicator.style.left = position + 'px';\n      }\n      blockIndicator.style.top = this.getRowTop(resIndex) + this.cellHeight - BLOCK_INDICATOR_HEIGHT + 'px';\n      this.renderElement(cellTd, blockIndicator);\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  TimelineEvent.prototype.setMaxEventHeight = function (event, cell) {\n    setStyleAttribute(event, {\n      'height': this.cellHeight - (this.maxHeight ? 0 : EVENT_GAP) - (this.maxHeight ? 0 : this.moreIndicatorHeight) + 'px'\n    });\n  };\n  TimelineEvent.prototype.isDayProcess = function () {\n    if (this.parent.currentView === 'TimelineMonth' || !this.parent.activeViewOptions.timeScale.enable || this.parent.activeViewOptions.headerRows.length > 0 && this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n      return true;\n    }\n    return false;\n  };\n  TimelineEvent.prototype.destroy = function () {\n    this.renderType = null;\n    this.eventContainers = null;\n    this.dayLength = null;\n    this.content = null;\n    _super.prototype.destroy.call(this);\n    this.parent = null;\n  };\n  return TimelineEvent;\n}(MonthEvent);\nexport { TimelineEvent };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","isNullOrUndefined","setStyleAttribute","extend","EventHandler","createElement","cls","util","MonthEvent","EVENT_GAP","BLOCK_INDICATOR_WIDTH","BLOCK_INDICATOR_HEIGHT","TimelineEvent","_super","parent","type","_this","call","startHour","activeView","getStartHour","endHour","getEndHour","slotCount","activeViewOptions","timeScale","interval","day","rowIndex","cellTops","renderType","eventContainers","slice","element","querySelectorAll","APPOINTMENT_CONTAINER_CLASS","tr","CONTENT_TABLE_CLASS","dayLength","length","children","content","querySelector","SCHEDULE_TABLE_CLASS","getSlotDates","slots","push","renderDates","map","date","headerRows","option","workCell","WORK_CELLS_CLASS","cellWidth","getElementWidth","getAttribute","slotsPerDay","dateRender","getOverlapEvents","appointments","appointmentsList","_i","appointments_1","app","resetTime","fields","startTime","getTime","Date","endTime","_a","appointments_2","eventData","data","trimStartTime","trimEndTime","getSortComparerIndex","startDate","endDate","appIndex","renderedEvents","getOverlapSortComparerEvents","appLevel","obj","Index","getSmallestMissingNumber","appointmentsCollection","_loop_1","this_1","start_1","end_1","appStart_1","appEnd_1","isEndOverlap","getDateInMs","MS_PER_DAY","appointmentsCollection_1","renderResourceEvents","removeHeightProperty","RESOURCE_COLUMN_TABLE_CLASS","selector","addCellHeight","eventHeight","moreIndicatorHeight","resources","uiStateValues","isGroupAdaptive","resourceBase","lastResourceLevel","groupIndex","renderedResources","crudModule","crudObj","isCrudAction","i","len","sourceEvent","source","parseInt","toString","renderEventsHandler","workDays","targetEvent","target","renderEvents","event","resIndex","minDate","maxDate","getStartTime","getEndTime","startEndHours","getStartEndHours","eventDates","updateEventMinimumDuration","getIndexOfDate","cellTd","getCellTd","eventsPerRow","rowAutoHeight","maxEventsPerRow","overlapCount","eventSettings","sortComparer","getIndex","appHeight","diffInDays","count","eventObj","currentDate","schedule","isValidEvent","isDayProcess","isAllDay","appWidth","getEventWidth","appLeft","appRight","position","getPosition","getRowTop","top_1","appTop","maxHeight","enableRtl","height","renderApp","enableIndicator","maxOrIndicator","cellHeight","appointmentElement","inlineValue","createAppointmentElement","inlineModule","createInlineAppointmentElement","applyResourceColor","groupOrder","wireAppointmentEvents","conWrap","CONTENT_WRAP_CLASS","conWidth","isWithoutScroll","offsetHeight","clientHeight","offsetWidth","clientWidth","renderEventElement","firstChild","getFirstChild","updateCellHeight","adjustAppointments","moreIndicator","MORE_INDICATOR_CLASS","appPos","Math","floor","addDays","position_1","renderTimelineMoreIndicator","getUniversalTime","MS_PER_MINUTE","k","adjustToNearestTimeSlot","position_2","renderTemplates","inputTime","parsedTime","minutesInMilliseconds","getHours","getMinutes","adjustedMinutesInMilliseconds","adjustedTime","setHours","setMinutes","top","isAlreadyAvail","startDateTime","slotStartTime","slotEndTime","group","filterEvents","getFilterEvents","appArea","withIndicator","renderedAppCount","moreIndicatorElement","getMoreIndicatorElement","setAttribute","style","width","left","right","renderElement","add","moreIndicatorClick","cell","resourceCell","monthHeader","parentElement","actualCellWidth","workCells","currentPercentage","apps","APPOINTMENT_CLASS","forEach","parseFloat","index","query","td","updateBlockElements","blockElement","BLOCK_APPOINTMENT_CLASS","blockElement_1","blockIndicator","BLOCK_INDICATOR_CLASS","blockIndicator_1","getNextDay","getPreviousDay","getSeconds","actualEndTime","isSameDay","getSameDayEventsWidth","getSpannedEventsWidth","intervalMins","hoursRange","endWidth","start","startWidth","end","spannedWidth","startDay","endDay","getAppointmentLeft","slotTd","daySlot","round","cellIndex","gIndex","eventsList","getFilteredEvents","indicatorPos","offsetTop","wrapIndex","renderBlockIndicator","className","setMaxEventHeight","currentView","enable","destroy"],"sources":["/Users/anjalichaturvedi/GitHub/brew-bridge-dashboard/website/node_modules/@syncfusion/ej2-schedule/src/schedule/event-renderer/timeline-view.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable max-len */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isNullOrUndefined, setStyleAttribute, extend, EventHandler, createElement } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\nimport { MonthEvent } from './month';\nvar EVENT_GAP = 2;\nvar BLOCK_INDICATOR_WIDTH = 22;\nvar BLOCK_INDICATOR_HEIGHT = 18;\n/**\n * Timeline view events render\n */\nvar TimelineEvent = /** @class */ (function (_super) {\n    __extends(TimelineEvent, _super);\n    function TimelineEvent(parent, type) {\n        var _this = _super.call(this, parent) || this;\n        _this.startHour = _this.parent.activeView.getStartHour();\n        _this.endHour = _this.parent.activeView.getEndHour();\n        _this.slotCount = _this.parent.activeViewOptions.timeScale.slotCount;\n        _this.interval = _this.parent.activeViewOptions.timeScale.interval;\n        _this.day = 0;\n        _this.rowIndex = 0;\n        _this.cellTops = [];\n        _this.renderType = type;\n        _this.eventContainers = [].slice.call(_this.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        var tr = [].slice.call(_this.element.querySelectorAll('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr'));\n        _this.dayLength = tr.length === 0 ? 0 : tr[0].children.length;\n        _this.content = _this.parent.element.querySelector('.' + cls.SCHEDULE_TABLE_CLASS + '.' + cls.CONTENT_TABLE_CLASS);\n        return _this;\n    }\n    TimelineEvent.prototype.getSlotDates = function () {\n        this.slots = [];\n        this.slots.push(this.parent.activeView.renderDates.map(function (date) { return +date; }));\n        if (this.parent.activeViewOptions.headerRows.length > 0 &&\n            this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n            this.renderType = 'day';\n            var workCell = this.content.querySelector('.' + cls.WORK_CELLS_CLASS);\n            this.cellWidth = util.getElementWidth(workCell) / +(workCell.getAttribute('colspan') || 1);\n            this.slotsPerDay = 1;\n        }\n        else {\n            this.slotsPerDay = (this.dayLength / this.dateRender.length);\n        }\n    };\n    TimelineEvent.prototype.getOverlapEvents = function (date, appointments) {\n        var appointmentsList = [];\n        if (this.renderType === 'day') {\n            for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n                var app = appointments_1[_i];\n                if ((util.resetTime(app[this.fields.startTime]).getTime() <= util.resetTime(new Date(date.getTime())).getTime()) &&\n                    (util.resetTime(app[this.fields.endTime]).getTime() >= util.resetTime(new Date(date.getTime())).getTime())) {\n                    appointmentsList.push(app);\n                }\n            }\n        }\n        else {\n            for (var _a = 0, appointments_2 = appointments; _a < appointments_2.length; _a++) {\n                var app = appointments_2[_a];\n                var eventData = app.data;\n                if ((eventData.trimStartTime.getTime() <= date.getTime() &&\n                    eventData.trimEndTime.getTime() > date.getTime()) ||\n                    (eventData.trimStartTime.getTime() === date.getTime() &&\n                        eventData.trimEndTime.getTime() === date.getTime())) {\n                    appointmentsList.push(app);\n                }\n            }\n        }\n        return appointmentsList;\n    };\n    TimelineEvent.prototype.getSortComparerIndex = function (startDate, endDate) {\n        var appIndex = -1;\n        var appointments = this.renderedEvents;\n        if (appointments.length > 0) {\n            var appointmentsList = this.getOverlapSortComparerEvents(startDate, endDate, appointments);\n            var appLevel = appointmentsList.map(function (obj) { return obj.Index; });\n            appIndex = (appLevel.length > 0) ? this.getSmallestMissingNumber(appLevel) : 0;\n        }\n        return (appIndex === -1) ? 0 : appIndex;\n    };\n    TimelineEvent.prototype.getOverlapSortComparerEvents = function (startDate, endDate, appointmentsCollection) {\n        var appointments = [];\n        var _loop_1 = function (app) {\n            if (this_1.renderType === 'day') {\n                var start_1 = util.resetTime(startDate).getTime();\n                var end_1 = util.resetTime(endDate).getTime();\n                var appStart_1 = util.resetTime(app[this_1.fields.startTime]).getTime();\n                var appEnd_1 = util.resetTime(app[this_1.fields.endTime]).getTime();\n                var isEndOverlap = function () {\n                    var endTime = (end_1 - (util.getDateInMs(endDate) <= 0 ? util.MS_PER_DAY : 0));\n                    endTime = start_1 > endTime ? start_1 : endTime;\n                    return appEnd_1 >= endTime && appStart_1 <= endTime;\n                };\n                if (appStart_1 <= start_1 && appEnd_1 >= start_1 || isEndOverlap() || appStart_1 > start_1 && appEnd_1 < end_1) {\n                    appointments.push(app);\n                }\n            }\n            else {\n                var eventData = app.data;\n                if (((eventData.trimStartTime.getTime() <= startDate.getTime()) && (startDate.getTime() < eventData.trimEndTime.getTime())) ||\n                    ((startDate.getTime() <= eventData.trimStartTime.getTime()) && (eventData.trimStartTime.getTime() < endDate.getTime()))) {\n                    appointments.push(app);\n                }\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, appointmentsCollection_1 = appointmentsCollection; _i < appointmentsCollection_1.length; _i++) {\n            var app = appointmentsCollection_1[_i];\n            _loop_1(app);\n        }\n        return appointments;\n    };\n    TimelineEvent.prototype.renderResourceEvents = function () {\n        this.removeHeightProperty(cls.RESOURCE_COLUMN_TABLE_CLASS);\n        var selector = '.' + cls.RESOURCE_COLUMN_TABLE_CLASS + ' tbody tr';\n        this.addCellHeight(selector, this.eventHeight, EVENT_GAP, this.moreIndicatorHeight, 0, false);\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.renderedResources;\n        if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n            for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n                var source = this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)];\n                this.rowIndex = source.groupIndex;\n                this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, source);\n                if (this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)] && this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex !==\n                    this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex) {\n                    var target = this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)];\n                    this.rowIndex = target.groupIndex;\n                    this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, target);\n                }\n            }\n            this.parent.crudModule.crudObj.isCrudAction = false;\n        }\n        else {\n            for (var i = 0; i < resources.length; i++) {\n                this.rowIndex = i;\n                this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, resources[parseInt(i.toString(), 10)]);\n            }\n        }\n    };\n    TimelineEvent.prototype.renderEvents = function (event, resIndex, appointmentsList) {\n        var startTime = event[this.fields.startTime];\n        var endTime = event[this.fields.endTime];\n        if ((startTime.getTime() < this.parent.minDate.getTime()) || (endTime.getTime() > this.parent.maxDate.getTime())) {\n            return;\n        }\n        var eventData = event.data;\n        startTime = this.getStartTime(event, eventData);\n        endTime = this.getEndTime(event, eventData);\n        var startEndHours = util.getStartEndHours(event[this.fields.startTime], this.startHour, this.endHour);\n        var eventDates = this.updateEventMinimumDuration(startEndHours, startTime, endTime);\n        startTime = eventDates.startDate;\n        endTime = eventDates.endDate;\n        this.day = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime())));\n        if (this.day < 0) {\n            return;\n        }\n        var cellTd = this.getCellTd();\n        var eventsPerRow = this.parent.rowAutoHeight ? 1 : this.parent.activeViewOptions.maxEventsPerRow;\n        var overlapCount = (isNullOrUndefined(this.parent.eventSettings.sortComparer)) ? this.getIndex(startTime) : this.getSortComparerIndex(startTime, endTime);\n        event.Index = overlapCount;\n        var appHeight = this.eventHeight;\n        var diffInDays = eventData.count;\n        var eventObj = extend({}, event, null, true);\n        eventObj[this.fields.startTime] = eventData[this.fields.startTime];\n        eventObj[this.fields.endTime] = eventData[this.fields.endTime];\n        var currentDate = util.resetTime(new Date(this.dateRender[this.day].getTime()));\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        var isValidEvent = true;\n        if (this.isDayProcess() || eventObj[this.fields.isAllDay]) {\n            isValidEvent = true;\n        }\n        else {\n            isValidEvent = this.isValidEvent(eventObj, startTime, endTime, schedule);\n        }\n        if (startTime <= endTime && isValidEvent) {\n            var appWidth = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);\n            appWidth = this.renderType === 'day' ? appWidth - 2 : appWidth;\n            var appLeft = 0;\n            var appRight = 0;\n            var position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], this.day);\n            appWidth = (appWidth <= 0) ? this.cellWidth : appWidth; // appWidth 0 when start and end time as same\n            this.renderedEvents.push(extend({}, event, null, true));\n            if (isNullOrUndefined(this.cellTops[parseInt(resIndex.toString(), 10)])) {\n                this.cellTops[parseInt(resIndex.toString(), 10)] = this.getRowTop(resIndex);\n            }\n            var top_1 = this.cellTops[parseInt(resIndex.toString(), 10)];\n            var appTop = (top_1 + (this.maxHeight ? 0 : EVENT_GAP)) + (overlapCount * (appHeight + EVENT_GAP));\n            appLeft = (this.parent.enableRtl) ? 0 : position;\n            appRight = (this.parent.enableRtl) ? position : 0;\n            var height = ((overlapCount + 1) * (appHeight + EVENT_GAP)) + this.moreIndicatorHeight;\n            var renderApp = this.parent.activeViewOptions.maxEventsPerRow && !this.parent.rowAutoHeight && !this.parent.eventSettings.enableIndicator\n                ? overlapCount < eventsPerRow : this.maxOrIndicator ? overlapCount < 1 ? true : false : this.cellHeight > height;\n            if (this.parent.rowAutoHeight || renderApp) {\n                var appointmentElement = void 0;\n                if (isNullOrUndefined(this.inlineValue)) {\n                    appointmentElement = this.createAppointmentElement(event, resIndex);\n                }\n                else {\n                    appointmentElement = this.parent.inlineModule.createInlineAppointmentElement();\n                }\n                this.applyResourceColor(appointmentElement, event, 'backgroundColor', this.groupOrder);\n                setStyleAttribute(appointmentElement, {\n                    'width': appWidth + 'px', 'left': appLeft + 'px', 'right': appRight + 'px', 'top': appTop + 'px'\n                });\n                this.wireAppointmentEvents(appointmentElement, event);\n                if (this.parent.rowAutoHeight) {\n                    var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n                    var conWidth = util.getElementWidth(conWrap);\n                    var isWithoutScroll = conWrap.offsetHeight === conWrap.clientHeight &&\n                        conWrap.offsetWidth === conWrap.clientWidth;\n                    this.renderEventElement(event, appointmentElement, cellTd);\n                    var firstChild = this.getFirstChild(resIndex);\n                    this.updateCellHeight(firstChild, height);\n                    if (isWithoutScroll &&\n                        (conWrap.offsetWidth > conWrap.clientWidth || conWidth !== util.getElementWidth(conWrap))) {\n                        this.adjustAppointments(conWidth);\n                    }\n                }\n                else {\n                    this.renderEventElement(event, appointmentElement, cellTd);\n                }\n            }\n            else {\n                for (var i = 0; i < diffInDays; i++) {\n                    var moreIndicator = cellTd.querySelector('.' + cls.MORE_INDICATOR_CLASS);\n                    var appPos = (this.parent.enableRtl) ? appRight : appLeft;\n                    appPos = (Math.floor(appPos / this.cellWidth) * this.cellWidth);\n                    var interval = this.interval / this.slotCount;\n                    var startDate = (this.parent.activeViewOptions.option === 'TimelineMonth' || this.renderType === 'day' || i !== 0) ?\n                        new Date(this.dateRender[this.day + i].getTime()) : new Date(startTime);\n                    var endDate = util.addDays(this.dateRender[this.day + i], 1);\n                    if (this.parent.activeViewOptions.option === 'TimelineMonth' || this.renderType === 'day') {\n                        var position_1 = this.getPosition(startDate, endDate, event[this.fields.isAllDay], (this.day + i));\n                        this.renderTimelineMoreIndicator(startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top_1, appLeft, appRight, cellTd, moreIndicator, appPos, position_1);\n                    }\n                    else {\n                        var slotCount = (util.getUniversalTime(endTime) - util.getUniversalTime(startTime)) / util.MS_PER_MINUTE *\n                            this.slotCount / this.interval;\n                        for (var k = 0; k < slotCount; k++) {\n                            startDate = (k === 0) ? new Date(startDate.getTime()) : new Date(startDate.getTime() + (60000 * interval));\n                            if (slotCount < 1) {\n                                startDate = this.adjustToNearestTimeSlot(startDate, interval);\n                            }\n                            endDate = new Date(startDate.getTime() + (60000 * interval));\n                            if (slotCount >= 1 && endDate.getTime() > endTime.getTime()) {\n                                break;\n                            }\n                            var position_2 = this.getPosition(startDate, endDate, false, (this.day + i));\n                            if (appPos > position_2) {\n                                break;\n                            }\n                            appPos = position_2;\n                            this.renderTimelineMoreIndicator(startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top_1, appLeft, appRight, cellTd, moreIndicator, appPos, position_2);\n                        }\n                    }\n                }\n            }\n        }\n        this.parent.renderTemplates();\n    };\n    TimelineEvent.prototype.adjustToNearestTimeSlot = function (inputTime, interval) {\n        // Parse the input time\n        var parsedTime = new Date(inputTime);\n        // Get the minutes of the input time in milliseconds\n        var minutesInMilliseconds = parsedTime.getHours() * 60 * 60 * 1000 + parsedTime.getMinutes() * 60 * 1000;\n        // Calculate the adjusted time in milliseconds (nearest time slot)\n        var adjustedMinutesInMilliseconds = Math.floor(minutesInMilliseconds / (interval * 60 * 1000)) * (interval * 60 * 1000);\n        // Create a new Date object with the adjusted time\n        var adjustedTime = new Date(parsedTime.getTime());\n        adjustedTime.setHours(adjustedMinutesInMilliseconds / (60 * 60 * 1000) % 24);\n        adjustedTime.setMinutes((adjustedMinutesInMilliseconds % (60 * 60 * 1000)) / (60 * 1000));\n        // Return the adjusted time in string format\n        return adjustedTime;\n    };\n    TimelineEvent.prototype.renderTimelineMoreIndicator = function (startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top, appLeft, appRight, cellTd, moreIndicator, appPos, position) {\n        appLeft = (this.parent.enableRtl) ? appRight = position : position;\n        appPos = (this.parent.enableRtl) ? appRight : appLeft;\n        appPos = (Math.floor(appPos / this.cellWidth) * this.cellWidth);\n        if ((cellTd && isNullOrUndefined(moreIndicator)) ||\n            (!this.isAlreadyAvail(appPos, cellTd))) {\n            var startDateTime = (this.parent.activeViewOptions.option === 'TimelineMonth' || this.renderType === 'day') ? new Date(+startTime) : startDate;\n            var slotStartTime = (new Date(startDateTime.setMinutes(Math.floor(startDateTime.getMinutes() / interval) * interval)));\n            var slotEndTime = new Date(slotStartTime.getTime() + (60000 * interval));\n            var groupIndex = void 0;\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !isNullOrUndefined(resIndex)) {\n                groupIndex = resIndex.toString();\n            }\n            var filterEvents = this.getFilterEvents(startDate, endDate, slotStartTime, slotEndTime, groupIndex, appointmentsList);\n            var appArea = this.cellHeight - this.moreIndicatorHeight;\n            appHeight = this.withIndicator ? appArea - EVENT_GAP : appHeight;\n            var renderedAppCount = Math.floor(appArea / (appHeight + EVENT_GAP));\n            var count = this.parent.activeViewOptions.maxEventsPerRow && !this.parent.eventSettings.enableIndicator\n                ? filterEvents.length - this.parent.activeViewOptions.maxEventsPerRow : (filterEvents.length - renderedAppCount) <= 0 ? 1\n                : filterEvents.length - renderedAppCount;\n            var moreIndicatorElement = void 0;\n            if (this.renderType === 'day') {\n                moreIndicatorElement = this.getMoreIndicatorElement(count, startDate, endDate);\n            }\n            else {\n                moreIndicatorElement = this.getMoreIndicatorElement(count, slotStartTime, slotEndTime);\n            }\n            if (!isNullOrUndefined(groupIndex)) {\n                moreIndicatorElement.setAttribute('data-group-index', groupIndex);\n            }\n            moreIndicatorElement.style.top = top + appArea + 'px';\n            moreIndicatorElement.style.width = this.cellWidth + 'px';\n            moreIndicatorElement.style.left = (Math.floor(appLeft / this.cellWidth) * this.cellWidth) + 'px';\n            moreIndicatorElement.style.right = (Math.floor(appRight / this.cellWidth) * this.cellWidth) + 'px';\n            this.renderElement(cellTd, moreIndicatorElement);\n            EventHandler.add(moreIndicatorElement, 'click', this.moreIndicatorClick, this);\n        }\n    };\n    TimelineEvent.prototype.updateCellHeight = function (cell, height) {\n        var cellHeight = cell.style.height === '' ? this.cellHeight : parseInt(cell.style.height, 10);\n        if (height > cellHeight) {\n            setStyleAttribute(cell, { 'height': height + 'px' });\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                var resourceCell = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_TABLE_CLASS + ' ' + 'tbody td[data-group-index=\"' +\n                    cell.getAttribute('data-group-index') + '\"]');\n                if (resourceCell) {\n                    setStyleAttribute(resourceCell, { 'height': height + 'px' });\n                }\n            }\n            var monthHeader = this.parent.element.querySelector('.e-month-header-wrapper table tr:nth-child(' +\n                (cell.parentElement.rowIndex + 1) + ') td');\n            if (monthHeader) {\n                setStyleAttribute(monthHeader, { 'height': height + 'px' });\n            }\n        }\n    };\n    TimelineEvent.prototype.adjustAppointments = function (conWidth) {\n        var _this = this;\n        var tr = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr');\n        var actualCellWidth = util.getElementWidth(this.workCells[0]);\n        this.cellWidth = actualCellWidth / +(this.workCells[0].getAttribute('colspan') || 1);\n        var currentPercentage = (actualCellWidth * tr.children.length) / (conWidth / 100);\n        var apps = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n        apps.forEach(function (app) {\n            if (_this.parent.enableRtl && app.style.right !== '0px') {\n                app.style.right = ((parseFloat(app.style.right) / 100) * currentPercentage) + 'px';\n            }\n            else if (app.style.left !== '0px') {\n                app.style.left = ((parseFloat(app.style.left) / 100) * currentPercentage) + 'px';\n            }\n            app.style.width = ((parseFloat(app.style.width) / 100) * currentPercentage) + 'px';\n        });\n    };\n    TimelineEvent.prototype.getFirstChild = function (index) {\n        var query = '.' + cls.CONTENT_TABLE_CLASS + ' tbody td';\n        var groupIndex = '';\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            groupIndex = '[data-group-index=\"' + index.toString() + '\"]';\n        }\n        var td = this.parent.element.querySelector(query + groupIndex);\n        return td;\n    };\n    TimelineEvent.prototype.updateBlockElements = function () {\n        var blockElement = [].slice.call(this.element.querySelectorAll('.' + cls.BLOCK_APPOINTMENT_CLASS));\n        for (var _i = 0, blockElement_1 = blockElement; _i < blockElement_1.length; _i++) {\n            var element = blockElement_1[_i];\n            var resIndex = parseInt(element.getAttribute('data-group-index'), 10);\n            var firstChild = this.getFirstChild(resIndex);\n            element.style.height = firstChild.offsetHeight + 'px';\n            var width = element.offsetWidth / firstChild.offsetWidth;\n            element.style.width = (firstChild.offsetWidth * width) + 'px';\n        }\n        var blockIndicator = [].slice.call(this.element.querySelectorAll('.' + cls.BLOCK_INDICATOR_CLASS));\n        for (var _a = 0, blockIndicator_1 = blockIndicator; _a < blockIndicator_1.length; _a++) {\n            var element = blockIndicator_1[_a];\n            var resIndex = parseInt(element.getAttribute('data-group-index'), 10);\n            element.style.top = this.getRowTop(resIndex) +\n                this.getFirstChild(resIndex).offsetHeight - BLOCK_INDICATOR_HEIGHT + 'px';\n        }\n    };\n    TimelineEvent.prototype.getStartTime = function (event, eventData) {\n        var startTime = event[this.fields.startTime];\n        var schedule = util.getStartEndHours(startTime, this.startHour, this.endHour);\n        if (this.isDayProcess()) {\n            startTime = event[this.fields.startTime];\n        }\n        else {\n            if (schedule.startHour.getTime() >= eventData[this.fields.startTime]) {\n                startTime = schedule.startHour;\n            }\n            else if (schedule.endHour.getTime() <= eventData[this.fields.startTime]) {\n                startTime = this.getNextDay(schedule.startHour, eventData);\n            }\n            else {\n                startTime = eventData[this.fields.startTime];\n            }\n        }\n        // To overcome the overflow\n        eventData.trimStartTime = (event[this.fields.isAllDay]) ? schedule.startHour : eventData[this.fields.startTime];\n        return startTime;\n    };\n    TimelineEvent.prototype.getNextDay = function (startTime, eventData) {\n        var startDate;\n        for (var i = 1; i <= this.dateRender.length; i++) {\n            startDate = util.addDays(startTime, i);\n            if (this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime()))) !== -1) {\n                eventData.count = eventData.count - 1;\n                return startDate;\n            }\n        }\n        return startDate;\n    };\n    TimelineEvent.prototype.getEndTime = function (event, eventData) {\n        var endTime = event[this.fields.endTime];\n        var schedule = util.getStartEndHours(endTime, this.startHour, this.endHour);\n        if (this.isDayProcess()) {\n            endTime = eventData[this.fields.endTime];\n        }\n        else {\n            endTime = eventData[this.fields.endTime];\n            if (schedule.endHour.getTime() <= eventData[this.fields.endTime] || event[this.fields.isAllDay]) {\n                endTime = schedule.endHour;\n            }\n            if (schedule.startHour.getTime() >= eventData[this.fields.endTime].getTime() && !event[this.fields.isAllDay]) {\n                endTime = this.getPreviousDay(schedule.startHour, schedule.endHour, eventData);\n            }\n        }\n        // To overcome the overflow\n        eventData.trimEndTime = (event[this.fields.isAllDay]) ? schedule.endHour : eventData[this.fields.endTime];\n        return endTime;\n    };\n    TimelineEvent.prototype.getPreviousDay = function (startTime, endTime, eventData) {\n        for (var i = 1; i <= this.dateRender.length; i++) {\n            var endDate = util.addDays(endTime, -i);\n            if (this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime()))) !== -1) {\n                endDate = util.resetTime(new Date(endDate.getTime()));\n                endDate.setHours(endTime.getHours(), endTime.getMinutes(), endTime.getSeconds());\n                var count = eventData.count;\n                var actualEndTime = eventData[this.fields.endTime];\n                eventData.count = actualEndTime.getHours() !== 0 || actualEndTime.getMinutes() !== 0 ? count - 1 : count;\n                return endDate;\n            }\n        }\n        return eventData[this.fields.endTime];\n    };\n    TimelineEvent.prototype.getEventWidth = function (startDate, endDate, isAllDay, count) {\n        if (this.renderType === 'day' || isAllDay) {\n            return (count * this.slotsPerDay) * this.cellWidth;\n        }\n        if (this.isSameDay(startDate, endDate)) {\n            return this.getSameDayEventsWidth(startDate, endDate);\n        }\n        else {\n            return this.getSpannedEventsWidth(startDate, endDate, count);\n        }\n    };\n    TimelineEvent.prototype.getSameDayEventsWidth = function (startDate, endDate) {\n        var intervalMins = this.interval;\n        if (this.slotsPerDay === 1) {\n            var hoursRange = util.getStartEndHours(util.resetTime(new Date(startDate.getTime())), this.startHour, this.endHour);\n            intervalMins = (hoursRange.endHour.getTime() - hoursRange.startHour.getTime()) / util.MS_PER_MINUTE;\n        }\n        return ((util.getUniversalTime(endDate) - util.getUniversalTime(startDate)) /\n            util.MS_PER_MINUTE * (this.cellWidth * this.slotCount) / intervalMins);\n    };\n    TimelineEvent.prototype.getSpannedEventsWidth = function (startDate, endDate, diffInDays) {\n        var width = (diffInDays * this.slotsPerDay) * this.cellWidth;\n        var endWidth;\n        var start = util.getStartEndHours(util.resetTime(new Date(startDate.getTime())), this.startHour, this.endHour);\n        var startWidth = this.getSameDayEventsWidth(start.startHour, startDate);\n        if (this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(endDate.getTime()))) === -1) {\n            endWidth = 0;\n        }\n        else {\n            var end = util.getStartEndHours(util.resetTime(new Date(endDate.getTime())), this.startHour, this.endHour);\n            endWidth = this.getSameDayEventsWidth(endDate, end.endHour);\n            endWidth = ((this.slotsPerDay * this.cellWidth) === endWidth) ? 0 : endWidth;\n        }\n        var spannedWidth = startWidth + endWidth;\n        return (width > spannedWidth) ? width - spannedWidth : width - startWidth;\n    };\n    TimelineEvent.prototype.isSameDay = function (startTime, endTime) {\n        var startDay = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime())));\n        var endDay = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(endTime.getTime())));\n        return (startDay === endDay);\n    };\n    TimelineEvent.prototype.getAppointmentLeft = function (schedule, startTime, day) {\n        var slotTd = (this.isSameDay(startTime, schedule.startHour)) ?\n            ((util.getUniversalTime(startTime) - util.getUniversalTime(schedule.startHour)) /\n                (util.MS_PER_MINUTE * this.interval)) * this.slotCount : 0;\n        if (day === 0) {\n            return slotTd;\n        }\n        else {\n            var daySlot = Math.round((((util.getUniversalTime(schedule.endHour) - util.getUniversalTime(schedule.startHour)) /\n                util.MS_PER_MINUTE) / this.interval) * this.slotCount);\n            return (daySlot * day) + slotTd;\n        }\n    };\n    TimelineEvent.prototype.getPosition = function (startTime, endTime, isAllDay, day) {\n        if (this.renderType === 'day' || isAllDay) {\n            return (day * this.slotsPerDay) * this.cellWidth;\n        }\n        var currentDate = util.resetTime(new Date(this.dateRender[parseInt(day.toString(), 10)].getTime()));\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        var cellIndex;\n        if (schedule.endHour.getTime() <= endTime.getTime() && schedule.startHour.getTime() >= startTime.getTime()) {\n            cellIndex = this.getAppointmentLeft(schedule, schedule.startHour, day);\n        }\n        else if (schedule.endHour.getTime() <= endTime.getTime()) {\n            cellIndex = this.getAppointmentLeft(schedule, startTime, day);\n        }\n        else if (schedule.startHour.getTime() >= startTime.getTime()) {\n            cellIndex = this.getAppointmentLeft(schedule, schedule.startHour, day);\n        }\n        else {\n            cellIndex = this.getAppointmentLeft(schedule, startTime, day);\n        }\n        return cellIndex * this.cellWidth;\n    };\n    TimelineEvent.prototype.getFilterEvents = function (startDate, endDate, startTime, endTime, gIndex, eventsList) {\n        if (this.renderType === 'day') {\n            return this.getFilteredEvents(startDate, endDate, gIndex, eventsList);\n        }\n        else {\n            return this.getFilteredEvents(startTime, endTime, gIndex, eventsList);\n        }\n    };\n    TimelineEvent.prototype.isAlreadyAvail = function (appPos, cellTd) {\n        var moreIndicator = [].slice.call(cellTd.querySelectorAll('.' + cls.MORE_INDICATOR_CLASS));\n        for (var i = 0; i < moreIndicator.length; i++) {\n            var indicatorPos = void 0;\n            if (moreIndicator) {\n                indicatorPos = (this.parent.enableRtl) ? moreIndicator[parseInt(i.toString(), 10)].style.right : moreIndicator[parseInt(i.toString(), 10)].style.left;\n            }\n            if (parseInt(indicatorPos, 10) === Math.floor(appPos)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    TimelineEvent.prototype.getRowTop = function (resIndex) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            return this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS +\n                ' ' + 'tbody td[data-group-index=\"' + resIndex.toString() + '\"]').offsetTop;\n        }\n        return 0;\n    };\n    TimelineEvent.prototype.getCellTd = function () {\n        var wrapIndex = this.parent.uiStateValues.isGroupAdaptive ? 0 : this.rowIndex;\n        return this.eventContainers[parseInt(wrapIndex.toString(), 10)];\n    };\n    TimelineEvent.prototype.renderBlockIndicator = function (cellTd, position, resIndex) {\n        // No need to render block icon for Year, Month and Week header rows\n        if (this.parent.headerRows.length > 0 &&\n            (this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Hour' ||\n                this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Date')) {\n            return;\n        }\n        position = (Math.floor(position / this.cellWidth) * this.cellWidth) + this.cellWidth - BLOCK_INDICATOR_WIDTH;\n        if (!this.isAlreadyAvail(position, cellTd)) {\n            var blockIndicator = createElement('div', { className: 'e-icons ' + cls.BLOCK_INDICATOR_CLASS });\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                blockIndicator.setAttribute('data-group-index', resIndex.toString());\n            }\n            if (this.parent.enableRtl) {\n                blockIndicator.style.right = position + 'px';\n            }\n            else {\n                blockIndicator.style.left = position + 'px';\n            }\n            blockIndicator.style.top = this.getRowTop(resIndex) + this.cellHeight - BLOCK_INDICATOR_HEIGHT + 'px';\n            this.renderElement(cellTd, blockIndicator);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    TimelineEvent.prototype.setMaxEventHeight = function (event, cell) {\n        setStyleAttribute(event, {\n            'height': (this.cellHeight - (this.maxHeight ? 0 : EVENT_GAP) - (this.maxHeight ? 0 : this.moreIndicatorHeight)) + 'px'\n        });\n    };\n    TimelineEvent.prototype.isDayProcess = function () {\n        if (this.parent.currentView === 'TimelineMonth' || !this.parent.activeViewOptions.timeScale.enable ||\n            (this.parent.activeViewOptions.headerRows.length > 0 &&\n                this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour')) {\n            return true;\n        }\n        return false;\n    };\n    TimelineEvent.prototype.destroy = function () {\n        this.renderType = null;\n        this.eventContainers = null;\n        this.dayLength = null;\n        this.content = null;\n        _super.prototype.destroy.call(this);\n        this.parent = null;\n    };\n    return TimelineEvent;\n}(MonthEvent));\nexport { TimelineEvent };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { formatUnit, isNullOrUndefined, closest, extend, append, prepend, remove } from '@syncfusion/ej2-base';\nimport { createElement, addClass, EventHandler } from '@syncfusion/ej2-base';\nimport { AgendaBase } from '../event-renderer/agenda-base';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * agenda view\n */\nvar Agenda = /** @class */function (_super) {\n  __extends(Agenda, _super);\n  function Agenda(parent) {\n    var _this = _super.call(this, parent) || this;\n    _this.viewClass = 'e-agenda-view';\n    _this.isInverseTableSelect = false;\n    _this.agendaDates = {};\n    _this.virtualScrollTop = 1;\n    return _this;\n  }\n  Agenda.prototype.getModuleName = function () {\n    return 'agenda';\n  };\n  Agenda.prototype.renderLayout = function () {\n    this.agendaDates = {};\n    this.element = createElement('div', {\n      className: cls.TABLE_WRAP_CLASS\n    });\n    addClass([this.element], this.viewClass);\n    this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n    this.element.querySelector('table').setAttribute('role', 'presentation');\n    this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(this.element);\n    var eTr = createElement('tr');\n    this.element.querySelector('tbody').appendChild(eTr);\n    var workTd = createElement('td');\n    eTr.appendChild(workTd);\n    var wrap = createElement('div', {\n      className: cls.CONTENT_WRAP_CLASS\n    });\n    workTd.appendChild(wrap);\n    var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n    this.setAriaAttributes(tbl);\n    wrap.appendChild(tbl);\n    var tBody = tbl.querySelector('tbody');\n    var agendaDate = util.resetTime(this.parent.selectedDate);\n    this.renderEmptyContent(tBody, agendaDate);\n    this.wireEvents();\n    if (this.parent.resourceBase) {\n      this.parent.resourceBase.generateResourceLevels([{\n        renderDates: this.parent.activeView.renderDates\n      }]);\n    }\n    if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n      this.renderResourceMobileLayout();\n    }\n    this.parent.notify(event.contentReady, {});\n  };\n  Agenda.prototype.eventLoad = function (args) {\n    this.dataSource = extend([], this.parent.eventsData, null, true);\n    for (var _i = 0, _a = this.parent.eventsData; _i < _a.length; _i++) {\n      var event_1 = _a[_i];\n      delete event_1.generatedDates;\n    }\n    var eventCollection = this.parent.activeViewOptions.allowVirtualScrolling ? args.processedData : this.parent.eventsProcessed;\n    if (this.parent.uiStateValues.isGroupAdaptive) {\n      var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n      this.dataSource = this.parent.eventBase.filterEventsByResource(resource, this.dataSource);\n      eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n    }\n    this.parent.eventsProcessed = this.processAgendaEvents(eventCollection);\n    var agendaDate = util.resetTime(this.parent.selectedDate);\n    var tBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n    util.removeChildren(tBody);\n    this.renderInitialContent(tBody, agendaDate);\n    this.wireEventActions();\n    var contentArea = closest(tBody, '.' + cls.CONTENT_WRAP_CLASS);\n    contentArea.scrollTop = 1;\n    this.parent.notify(event.eventsLoaded, {});\n    if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n      this.retainScrollPosition();\n    }\n  };\n  Agenda.prototype.refreshEvent = function (refreshDate) {\n    var processedData = [];\n    var fields = this.parent.eventFields;\n    for (var _i = 0, _a = this.dataSource; _i < _a.length; _i++) {\n      var data = _a[_i];\n      if (isNullOrUndefined(data[fields.recurrenceID]) && !isNullOrUndefined(data[fields.recurrenceRule]) && !isNullOrUndefined(data.generatedDates) && refreshDate >= data.generatedDates.end) {\n        processedData = processedData.concat(this.parent.eventBase.generateOccurrence(data, refreshDate));\n      }\n    }\n    this.parent.eventsProcessed = this.parent.eventsProcessed.concat(this.processAgendaEvents(processedData));\n  };\n  Agenda.prototype.refreshHeader = function () {\n    var tBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n    if (this.parent.activeViewOptions.group.byDate) {\n      util.removeChildren(tBody);\n    } else {\n      remove(tBody.firstElementChild);\n    }\n    var agendaDate = util.resetTime(this.parent.selectedDate);\n    var emptyTBody = createElement('tbody');\n    var firstDate = new Date(agendaDate.getTime());\n    var lastDate = this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays ? this.getEndDateFromStartDate(firstDate) : util.addDays(firstDate, this.parent.agendaDaysCount);\n    this.renderContent(emptyTBody, firstDate, lastDate);\n    append([].slice.call(emptyTBody.childNodes), tBody);\n  };\n  Agenda.prototype.renderInitialContent = function (tBody, agendaDate) {\n    var emptyTBody = createElement('tbody');\n    var firstDate = new Date(agendaDate.getTime());\n    var lastDate = this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays ? this.getEndDateFromStartDate(firstDate) : util.addDays(firstDate, this.parent.agendaDaysCount);\n    this.renderContent(emptyTBody, firstDate, lastDate);\n    append([].slice.call(emptyTBody.childNodes), tBody);\n    // Initial rendering, to load previous date events upto scroll bar enable\n    if (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays && this.parent.eventsData.length > 0) {\n      var contentArea = this.getContentAreaElement();\n      var contentChild = contentArea.querySelector('.e-content-table');\n      while (contentArea.offsetWidth <= contentArea.clientWidth) {\n        if (this.parent.isAdaptive && contentChild.offsetHeight >= contentArea.clientHeight) {\n          break;\n        }\n        var emptyTBody_1 = createElement('tbody');\n        lastDate = firstDate;\n        firstDate = util.addDays(lastDate, -this.parent.agendaDaysCount);\n        this.renderContent(emptyTBody_1, firstDate, lastDate);\n        prepend([].slice.call(emptyTBody_1.childNodes), tBody);\n        if (firstDate <= this.parent.minDate) {\n          break;\n        }\n      }\n    }\n    if (tBody.childNodes.length <= 0) {\n      this.renderEmptyContent(tBody, agendaDate);\n    }\n  };\n  Agenda.prototype.renderContent = function (tBody, agendaDate, lastDate) {\n    var fieldMapping = this.parent.eventFields;\n    var firstDate = new Date(agendaDate.getTime());\n    var isObject = this.appointmentFiltering(firstDate, lastDate);\n    if (isObject.length > 0 && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) {\n      if (!this.parent.activeViewOptions.showWeekend && !this.isAgendaWorkDay(isObject[0][fieldMapping.startTime])) {\n        for (var _i = 0, isObject_1 = isObject; _i < isObject_1.length; _i++) {\n          var event_2 = isObject_1[_i];\n          if (this.isAgendaWorkDay(event_2[fieldMapping.startTime])) {\n            agendaDate = new Date(new Date(event_2[fieldMapping.startTime].getTime()).setHours(0, 0, 0, 0));\n            this.updateHeaderText(event_2[fieldMapping.startTime]);\n            break;\n          }\n        }\n      } else {\n        agendaDate = new Date(new Date(isObject[0][fieldMapping.startTime].getTime()).setHours(0, 0, 0, 0));\n        this.updateHeaderText(isObject[0][fieldMapping.startTime]);\n      }\n    }\n    var endDate;\n    if (!this.parent.hideEmptyAgendaDays || this.parent.agendaDaysCount > 0 && isObject.length > 0) {\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        var date = agendaDate;\n        if (!this.parent.activeViewOptions.group.byDate) {\n          this.parent.activeViewOptions.allowVirtualScrolling = false;\n          date = firstDate;\n          if (this.parent.headerModule) {\n            this.parent.headerModule.updateDateRange();\n            this.parent.headerModule.updateHeaderItems('remove');\n          }\n        }\n        this.calculateResourceTableElement(tBody, this.parent.agendaDaysCount, date, lastDate);\n      } else {\n        for (var day = 0; day < this.parent.agendaDaysCount; day++) {\n          var nTr = this.createTableRowElement(agendaDate, 'data');\n          var virtualContent = this.element.querySelector('tr[data-row-index=\"' + +nTr.dataset.rowIndex + '\"]');\n          if (virtualContent || !this.parent.activeViewOptions.showWeekend && !this.isAgendaWorkDay(agendaDate)) {\n            agendaDate = util.addDays(agendaDate, 1);\n            if (!virtualContent && this.parent.activeViewOptions.allowVirtualScrolling) {\n              day--;\n            }\n            if (agendaDate.getTime() > lastDate.getTime()) {\n              break;\n            }\n            continue;\n          }\n          var dTd = nTr.children[0];\n          var aTd = nTr.children[1];\n          var filterData = this.appointmentFiltering(agendaDate);\n          if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays && filterData.length === 0) {\n            var elementType = !this.parent.hideEmptyAgendaDays && filterData.length === 0 ? 'noEvents' : 'data';\n            dTd.appendChild(this.createDateHeaderElement(agendaDate));\n            nTr.appendChild(dTd);\n            var cTd = this.createAgendaContentElement(elementType, filterData, aTd);\n            nTr.appendChild(cTd);\n            if (cTd.querySelectorAll('li').length > 0) {\n              tBody.appendChild(nTr);\n            }\n          } else if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            day--;\n          }\n          if (this.isCurrentDate(new Date(agendaDate.getTime()))) {\n            addClass(dTd.childNodes, cls.AGENDA_CURRENT_DAY_CLASS);\n          }\n          agendaDate = util.addDays(agendaDate, 1);\n          if (agendaDate.getTime() > lastDate.getTime()) {\n            break;\n          }\n        }\n      }\n      endDate = new Date(agendaDate.getTime() - util.MS_PER_DAY);\n    }\n    this.agendaDates = {\n      start: firstDate,\n      end: endDate\n    };\n  };\n  Agenda.prototype.isAgendaWorkDay = function (date) {\n    if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.group.byDate) {\n      return this.isWorkDay(date, this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].workDays);\n    } else {\n      return this.isWorkDay(date);\n    }\n  };\n  Agenda.prototype.agendaScrolling = function (event) {\n    if (this.parent.quickPopup) {\n      this.parent.quickPopup.quickPopupHide();\n    }\n    if (this.parent.activeViewOptions.allowVirtualScrolling) {\n      this.virtualScrolling(event);\n    }\n    if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n      this.setPersistence();\n    }\n  };\n  Agenda.prototype.virtualScrolling = function (event) {\n    var target = event.target;\n    var scrollTop = target.scrollTop;\n    var scrollHeight = target.scrollHeight;\n    var offsetHeight = target.clientHeight;\n    var totalHeight = scrollTop + offsetHeight;\n    var direction = this.virtualScrollTop < scrollTop ? 'next' : 'previous';\n    var tBody = target.querySelector('tbody');\n    var emptyTBody = createElement('tbody');\n    var topElement = this.getElementFromScrollerPosition(event);\n    var scrollDate = this.parent.getDateFromElement(topElement);\n    var filterDate;\n    var filterData;\n    if (scrollTop === 0) {\n      filterDate = this.getPreviousNextDate(util.addDays(scrollDate, -1), direction);\n      filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n      if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n        this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n        prepend([].slice.call(emptyTBody.childNodes), tBody);\n        this.wireEventActions();\n        for (var s = 0, element = tBody.children; s < element.length; s++) {\n          if (element[parseInt(s.toString(), 10)].getAttribute('data-row-index') === topElement.getAttribute('data-column-index')) {\n            var scrollToValue = element[parseInt(s.toString(), 10)].offsetTop - this.element.querySelector('.e-agenda-item').offsetHeight;\n            target.scrollTop = scrollToValue;\n            break;\n          }\n        }\n        this.updateHeaderText(scrollDate);\n      }\n    } else if (totalHeight >= scrollHeight - 5) {\n      filterDate = this.getPreviousNextDate(util.addDays(scrollDate, 1), direction);\n      filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n      if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n        this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n        append([].slice.call(emptyTBody.childNodes), tBody);\n        this.wireEventActions();\n        this.updateHeaderText(scrollDate);\n      }\n    } else {\n      this.updateHeaderText(scrollDate);\n    }\n    this.virtualScrollTop = scrollTop;\n    var selectedElements = this.parent.eventBase.getSelectedAppointments();\n    if (selectedElements.length > 0) {\n      selectedElements[selectedElements.length - 1].focus();\n    }\n  };\n  Agenda.prototype.getElementFromScrollerPosition = function (event) {\n    var filterElement;\n    var target = event.target;\n    var scrollTop = target.scrollTop;\n    var scrollHeight = target.scrollHeight;\n    var offsetHeight = target.clientHeight;\n    var totalHeight = scrollTop + offsetHeight;\n    var liCollection = [].slice.call(target.querySelectorAll('.e-agenda-item'));\n    var li;\n    var liDetails;\n    if (liCollection.length > 0) {\n      if (scrollTop === 0) {\n        li = liCollection[0];\n        filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n      } else if (totalHeight === scrollHeight) {\n        li = liCollection[liCollection.length - 1];\n        filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n      } else {\n        for (var a = 0, length_1 = liCollection.length; a < length_1; a++) {\n          li = liCollection[parseInt(a.toString(), 10)];\n          liDetails = li.getBoundingClientRect();\n          if (liDetails.top >= 0) {\n            filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n            break;\n          }\n        }\n      }\n    }\n    return filterElement;\n  };\n  Agenda.prototype.updateHeaderText = function (date) {\n    if (this.parent.showHeaderBar) {\n      this.parent.headerModule.updateDateRange(date);\n    }\n  };\n  Agenda.prototype.getPreviousNextDate = function (date, type) {\n    var currentDate = new Date(date.getTime());\n    var firstDate = this.getStartDateFromEndDate(date);\n    var lastDate = this.getEndDateFromStartDate(date);\n    var daysCount = 0;\n    do {\n      if (this.parent.activeViewOptions.showWeekend || !this.parent.activeViewOptions.showWeekend && this.isAgendaWorkDay(currentDate)) {\n        var filterData = this.appointmentFiltering(currentDate);\n        if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n          daysCount++;\n        }\n      }\n      currentDate = util.addDays(currentDate, type === 'next' ? 1 : -1);\n      if (currentDate < firstDate || currentDate > lastDate) {\n        break;\n      }\n    } while (daysCount !== this.parent.agendaDaysCount);\n    var endDate = util.addDays(currentDate, type === 'next' ? -1 : 1);\n    return type === 'next' ? {\n      start: date,\n      end: util.addDays(endDate, 1)\n    } : {\n      start: endDate,\n      end: util.addDays(date, 1)\n    };\n  };\n  Agenda.prototype.appointmentFiltering = function (startDate, endDate) {\n    var dateStart;\n    var dateEnd;\n    if (!isNullOrUndefined(startDate) && isNullOrUndefined(endDate)) {\n      dateStart = util.resetTime(new Date(startDate.getTime()));\n      dateEnd = util.setTime(new Date(dateStart.getTime()), util.MS_PER_DAY);\n    } else {\n      dateStart = new Date(startDate.getTime());\n      dateEnd = new Date(endDate.getTime());\n    }\n    var filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n    if (filterData.length === 0) {\n      this.refreshEvent(startDate);\n      filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n    }\n    return filterData;\n  };\n  Agenda.prototype.getStartDateFromEndDate = function (endDate) {\n    var filterDate;\n    var fields = this.parent.eventFields;\n    if (this.parent.eventsProcessed.length > 0) {\n      var firstDate = Math.min.apply(Math, this.parent.eventsProcessed.map(function (a) {\n        return a[fields.startTime].getTime();\n      }));\n      filterDate = this.parent.hideEmptyAgendaDays ? new Date(firstDate) : this.parent.minDate;\n    } else {\n      filterDate = this.parent.hideEmptyAgendaDays ? util.addMonths(endDate, -1) : this.parent.minDate;\n    }\n    return util.resetTime(filterDate);\n  };\n  Agenda.prototype.getEndDateFromStartDate = function (startDate) {\n    var filterDate;\n    var fieldMapping = this.parent.eventFields;\n    if (this.parent.eventsProcessed.length > 0) {\n      var lastDate = Math.max.apply(Math, this.parent.eventsProcessed.map(function (a) {\n        return a[fieldMapping.endTime].getTime();\n      }));\n      filterDate = this.parent.hideEmptyAgendaDays ? new Date(lastDate) : this.parent.maxDate;\n    } else {\n      filterDate = this.parent.hideEmptyAgendaDays ? util.addMonths(startDate, 1) : this.parent.maxDate;\n    }\n    return util.resetTime(util.addDays(filterDate, 1));\n  };\n  Agenda.prototype.getNextPreviousDate = function (type) {\n    var noOfDays = type === 'next' ? 1 : -1;\n    return util.addDays(this.parent.selectedDate, noOfDays);\n  };\n  Agenda.prototype.startDate = function () {\n    return util.resetTime(this.parent.selectedDate);\n  };\n  Agenda.prototype.endDate = function () {\n    if (this.parent.activeViewOptions.allowVirtualScrolling) {\n      return this.getEndDateFromStartDate(this.startDate());\n    } else {\n      return util.addDays(this.startDate(), this.parent.agendaDaysCount);\n    }\n  };\n  Agenda.prototype.getDateRangeText = function (date) {\n    var formatDate = this.parent.activeViewOptions.dateFormat ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n    if (this.parent.activeViewOptions.allowVirtualScrolling || this.parent.isAdaptive) {\n      var currentDate = isNullOrUndefined(date) ? this.parent.selectedDate : date;\n      return util.capitalizeFirstWord(this.parent.globalize.formatDate(currentDate, {\n        format: formatDate,\n        calendar: this.parent.getCalendarMode()\n      }), 'multiple');\n    } else {\n      var startDate = this.parent.selectedDate;\n      var endDate = util.addDays(startDate, this.parent.agendaDaysCount - 1);\n      return this.formatDateRange(startDate, endDate);\n    }\n  };\n  Agenda.prototype.dayNavigationClick = function (e) {\n    var element = closest(e.currentTarget, '.' + cls.AGENDA_CELLS_CLASS);\n    var date = this.parent.getDateFromElement(element);\n    if (!isNullOrUndefined(date) && !this.parent.isAdaptive && this.parent.isMinMaxDate(date)) {\n      this.parent.setProperties({\n        selectedDate: date\n      }, true);\n      this.parent.changeView('Day', e);\n    }\n  };\n  Agenda.prototype.wireEvents = function () {\n    EventHandler.add(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), event.scroll, this.agendaScrolling, this);\n  };\n  Agenda.prototype.unWireEvents = function () {\n    EventHandler.remove(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), event.scroll, this.agendaScrolling);\n    var dateHeaderElement = [].slice.call(this.element.querySelectorAll('.e-m-date'));\n    for (var _i = 0, dateHeaderElement_1 = dateHeaderElement; _i < dateHeaderElement_1.length; _i++) {\n      var element = dateHeaderElement_1[_i];\n      EventHandler.remove(element, 'click', this.dayNavigationClick);\n    }\n  };\n  Agenda.prototype.addEventListener = function () {\n    this.parent.on(event.scrollUiUpdate, this.onAgendaScrollUiUpdate, this);\n    this.parent.on(event.dataReady, this.eventLoad, this);\n  };\n  Agenda.prototype.removeEventListener = function () {\n    if (this.parent) {\n      this.parent.off(event.scrollUiUpdate, this.onAgendaScrollUiUpdate);\n      this.parent.off(event.dataReady, this.eventLoad);\n    }\n  };\n  Agenda.prototype.onAgendaScrollUiUpdate = function () {\n    var headerHeight = this.getHeaderBarHeight();\n    if (this.parent.headerModule) {\n      if (this.parent.activeViewOptions.allowVirtualScrolling) {\n        this.parent.headerModule.updateHeaderItems('add');\n      } else {\n        this.parent.headerModule.updateHeaderItems('remove');\n      }\n    }\n    var contentArea = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    if (this.parent.height !== 'auto') {\n      contentArea.style.height = formatUnit(this.parent.element.offsetHeight - headerHeight);\n    }\n  };\n  Agenda.prototype.scrollToDate = function (scrollDate) {\n    var date = new Date(+util.resetTime(scrollDate));\n    if (this.parent.activeViewOptions.allowVirtualScrolling) {\n      if (!this.parent.hideEmptyAgendaDays || this.parent.getEvents(date, util.addDays(date, 1), true).length > 0) {\n        this.parent.changeDate(date);\n      }\n    } else {\n      var dateElement = this.element.querySelector('.' + cls.AGENDA_CELLS_CLASS + '[data-date=\"' + date.getTime() + '\"]');\n      if (dateElement) {\n        this.getContentAreaElement().scrollTop = dateElement.offsetTop;\n      }\n    }\n  };\n  Agenda.prototype.destroy = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n    if (this.element) {\n      this.unWireEvents();\n      if (this.parent.resourceBase) {\n        this.parent.resourceBase.destroy();\n      }\n      if (this.parent.headerModule && this.parent.activeViewOptions.allowVirtualScrolling) {\n        this.parent.headerModule.updateHeaderItems('remove');\n      }\n      _super.prototype.destroy.call(this);\n    }\n  };\n  return Agenda;\n}(AgendaBase);\nexport { Agenda };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","formatUnit","isNullOrUndefined","closest","extend","append","prepend","remove","createElement","addClass","EventHandler","AgendaBase","util","event","cls","Agenda","_super","parent","_this","call","viewClass","isInverseTableSelect","agendaDates","virtualScrollTop","getModuleName","renderLayout","element","className","TABLE_WRAP_CLASS","appendChild","createTableLayout","OUTER_TABLE_CLASS","querySelector","setAttribute","TABLE_CONTAINER_CLASS","eTr","workTd","wrap","CONTENT_WRAP_CLASS","tbl","CONTENT_TABLE_CLASS","setAriaAttributes","tBody","agendaDate","resetTime","selectedDate","renderEmptyContent","wireEvents","resourceBase","generateResourceLevels","renderDates","activeView","uiStateValues","isGroupAdaptive","RESOURCE_TOOLBAR_CONTAINER","renderResourceMobileLayout","notify","contentReady","eventLoad","args","dataSource","eventsData","_i","_a","length","event_1","generatedDates","eventCollection","activeViewOptions","allowVirtualScrolling","processedData","eventsProcessed","resource","lastResourceLevel","groupIndex","eventBase","filterEventsByResource","processAgendaEvents","removeChildren","renderInitialContent","wireEventActions","contentArea","scrollTop","eventsLoaded","retainScrollPosition","refreshEvent","refreshDate","fields","eventFields","data","recurrenceID","recurrenceRule","end","concat","generateOccurrence","refreshHeader","group","byDate","firstElementChild","emptyTBody","firstDate","Date","getTime","lastDate","hideEmptyAgendaDays","getEndDateFromStartDate","addDays","agendaDaysCount","renderContent","slice","childNodes","getContentAreaElement","contentChild","offsetWidth","clientWidth","isAdaptive","offsetHeight","clientHeight","emptyTBody_1","minDate","fieldMapping","isObject","appointmentFiltering","showWeekend","isAgendaWorkDay","startTime","isObject_1","event_2","setHours","updateHeaderText","endDate","resources","date","headerModule","updateDateRange","updateHeaderItems","calculateResourceTableElement","day","nTr","createTableRowElement","virtualContent","dataset","rowIndex","dTd","children","aTd","filterData","elementType","createDateHeaderElement","cTd","createAgendaContentElement","querySelectorAll","isCurrentDate","AGENDA_CURRENT_DAY_CLASS","MS_PER_DAY","start","isWorkDay","workDays","agendaScrolling","quickPopup","quickPopupHide","virtualScrolling","setPersistence","target","scrollHeight","totalHeight","direction","topElement","getElementFromScrollerPosition","scrollDate","getDateFromElement","filterDate","getPreviousNextDate","s","parseInt","toString","getAttribute","scrollToValue","offsetTop","selectedElements","getSelectedAppointments","focus","filterElement","liCollection","li","liDetails","AGENDA_CELLS_CLASS","a","length_1","getBoundingClientRect","top","showHeaderBar","type","currentDate","getStartDateFromEndDate","daysCount","startDate","dateStart","dateEnd","setTime","filterEvents","Math","min","apply","map","addMonths","max","endTime","maxDate","getNextPreviousDate","noOfDays","getDateRangeText","formatDate","dateFormat","capitalizeFirstWord","globalize","format","calendar","getCalendarMode","formatDateRange","dayNavigationClick","e","currentTarget","isMinMaxDate","setProperties","changeView","add","scroll","unWireEvents","dateHeaderElement","dateHeaderElement_1","addEventListener","on","scrollUiUpdate","onAgendaScrollUiUpdate","dataReady","removeEventListener","off","headerHeight","getHeaderBarHeight","height","style","scrollToDate","getEvents","changeDate","dateElement","destroy","isDestroyed"],"sources":["/Users/anjalichaturvedi/GitHub/brew-bridge-dashboard/website/node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/agenda.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { formatUnit, isNullOrUndefined, closest, extend, append, prepend, remove } from '@syncfusion/ej2-base';\nimport { createElement, addClass, EventHandler } from '@syncfusion/ej2-base';\nimport { AgendaBase } from '../event-renderer/agenda-base';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * agenda view\n */\nvar Agenda = /** @class */ (function (_super) {\n    __extends(Agenda, _super);\n    function Agenda(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-agenda-view';\n        _this.isInverseTableSelect = false;\n        _this.agendaDates = {};\n        _this.virtualScrollTop = 1;\n        return _this;\n    }\n    Agenda.prototype.getModuleName = function () {\n        return 'agenda';\n    };\n    Agenda.prototype.renderLayout = function () {\n        this.agendaDates = {};\n        this.element = createElement('div', { className: cls.TABLE_WRAP_CLASS });\n        addClass([this.element], this.viewClass);\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(this.element);\n        var eTr = createElement('tr');\n        this.element.querySelector('tbody').appendChild(eTr);\n        var workTd = createElement('td');\n        eTr.appendChild(workTd);\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        workTd.appendChild(wrap);\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        this.setAriaAttributes(tbl);\n        wrap.appendChild(tbl);\n        var tBody = tbl.querySelector('tbody');\n        var agendaDate = util.resetTime(this.parent.selectedDate);\n        this.renderEmptyContent(tBody, agendaDate);\n        this.wireEvents();\n        if (this.parent.resourceBase) {\n            this.parent.resourceBase.generateResourceLevels([{ renderDates: this.parent.activeView.renderDates }]);\n        }\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n    };\n    Agenda.prototype.eventLoad = function (args) {\n        this.dataSource = extend([], this.parent.eventsData, null, true);\n        for (var _i = 0, _a = this.parent.eventsData; _i < _a.length; _i++) {\n            var event_1 = _a[_i];\n            delete event_1.generatedDates;\n        }\n        var eventCollection = this.parent.activeViewOptions.allowVirtualScrolling ?\n            args.processedData : this.parent.eventsProcessed;\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n            this.dataSource = this.parent.eventBase.filterEventsByResource(resource, this.dataSource);\n            eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n        }\n        this.parent.eventsProcessed = this.processAgendaEvents(eventCollection);\n        var agendaDate = util.resetTime(this.parent.selectedDate);\n        var tBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n        util.removeChildren(tBody);\n        this.renderInitialContent(tBody, agendaDate);\n        this.wireEventActions();\n        var contentArea = closest(tBody, '.' + cls.CONTENT_WRAP_CLASS);\n        contentArea.scrollTop = 1;\n        this.parent.notify(event.eventsLoaded, {});\n        if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.retainScrollPosition();\n        }\n    };\n    Agenda.prototype.refreshEvent = function (refreshDate) {\n        var processedData = [];\n        var fields = this.parent.eventFields;\n        for (var _i = 0, _a = this.dataSource; _i < _a.length; _i++) {\n            var data = _a[_i];\n            if (isNullOrUndefined(data[fields.recurrenceID]) && !isNullOrUndefined(data[fields.recurrenceRule]) &&\n                !isNullOrUndefined(data.generatedDates) && refreshDate >= data.generatedDates.end) {\n                processedData = processedData.concat(this.parent.eventBase.generateOccurrence(data, refreshDate));\n            }\n        }\n        this.parent.eventsProcessed = this.parent.eventsProcessed.concat(this.processAgendaEvents(processedData));\n    };\n    Agenda.prototype.refreshHeader = function () {\n        var tBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n        if (this.parent.activeViewOptions.group.byDate) {\n            util.removeChildren(tBody);\n        }\n        else {\n            remove(tBody.firstElementChild);\n        }\n        var agendaDate = util.resetTime(this.parent.selectedDate);\n        var emptyTBody = createElement('tbody');\n        var firstDate = new Date(agendaDate.getTime());\n        var lastDate = (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) ?\n            this.getEndDateFromStartDate(firstDate) : util.addDays(firstDate, this.parent.agendaDaysCount);\n        this.renderContent(emptyTBody, firstDate, lastDate);\n        append([].slice.call(emptyTBody.childNodes), tBody);\n    };\n    Agenda.prototype.renderInitialContent = function (tBody, agendaDate) {\n        var emptyTBody = createElement('tbody');\n        var firstDate = new Date(agendaDate.getTime());\n        var lastDate = (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) ?\n            this.getEndDateFromStartDate(firstDate) : util.addDays(firstDate, this.parent.agendaDaysCount);\n        this.renderContent(emptyTBody, firstDate, lastDate);\n        append([].slice.call(emptyTBody.childNodes), tBody);\n        // Initial rendering, to load previous date events upto scroll bar enable\n        if (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays && this.parent.eventsData.length > 0) {\n            var contentArea = this.getContentAreaElement();\n            var contentChild = contentArea.querySelector('.e-content-table');\n            while (contentArea.offsetWidth <= contentArea.clientWidth) {\n                if (this.parent.isAdaptive && contentChild.offsetHeight >= contentArea.clientHeight) {\n                    break;\n                }\n                var emptyTBody_1 = createElement('tbody');\n                lastDate = firstDate;\n                firstDate = util.addDays(lastDate, -this.parent.agendaDaysCount);\n                this.renderContent(emptyTBody_1, firstDate, lastDate);\n                prepend([].slice.call(emptyTBody_1.childNodes), tBody);\n                if (firstDate <= this.parent.minDate) {\n                    break;\n                }\n            }\n        }\n        if (tBody.childNodes.length <= 0) {\n            this.renderEmptyContent(tBody, agendaDate);\n        }\n    };\n    Agenda.prototype.renderContent = function (tBody, agendaDate, lastDate) {\n        var fieldMapping = this.parent.eventFields;\n        var firstDate = new Date(agendaDate.getTime());\n        var isObject = this.appointmentFiltering(firstDate, lastDate);\n        if (isObject.length > 0 && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) {\n            if (!this.parent.activeViewOptions.showWeekend && !this.isAgendaWorkDay(isObject[0][fieldMapping.startTime])) {\n                for (var _i = 0, isObject_1 = isObject; _i < isObject_1.length; _i++) {\n                    var event_2 = isObject_1[_i];\n                    if (this.isAgendaWorkDay(event_2[fieldMapping.startTime])) {\n                        agendaDate = new Date(new Date(event_2[fieldMapping.startTime].getTime()).setHours(0, 0, 0, 0));\n                        this.updateHeaderText(event_2[fieldMapping.startTime]);\n                        break;\n                    }\n                }\n            }\n            else {\n                agendaDate = new Date(new Date(isObject[0][fieldMapping.startTime].getTime()).setHours(0, 0, 0, 0));\n                this.updateHeaderText(isObject[0][fieldMapping.startTime]);\n            }\n        }\n        var endDate;\n        if (!this.parent.hideEmptyAgendaDays || (this.parent.agendaDaysCount > 0 && isObject.length > 0)) {\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                var date = agendaDate;\n                if (!this.parent.activeViewOptions.group.byDate) {\n                    this.parent.activeViewOptions.allowVirtualScrolling = false;\n                    date = firstDate;\n                    if (this.parent.headerModule) {\n                        this.parent.headerModule.updateDateRange();\n                        this.parent.headerModule.updateHeaderItems('remove');\n                    }\n                }\n                this.calculateResourceTableElement(tBody, this.parent.agendaDaysCount, date, lastDate);\n            }\n            else {\n                for (var day = 0; day < this.parent.agendaDaysCount; day++) {\n                    var nTr = this.createTableRowElement(agendaDate, 'data');\n                    var virtualContent = this.element.querySelector('tr[data-row-index=\"' + (+(nTr.dataset.rowIndex)) + '\"]');\n                    if (virtualContent || !this.parent.activeViewOptions.showWeekend && !this.isAgendaWorkDay(agendaDate)) {\n                        agendaDate = util.addDays(agendaDate, 1);\n                        if (!virtualContent && this.parent.activeViewOptions.allowVirtualScrolling) {\n                            day--;\n                        }\n                        if (agendaDate.getTime() > lastDate.getTime()) {\n                            break;\n                        }\n                        continue;\n                    }\n                    var dTd = nTr.children[0];\n                    var aTd = nTr.children[1];\n                    var filterData = this.appointmentFiltering(agendaDate);\n                    if (filterData.length > 0 || (!this.parent.hideEmptyAgendaDays && filterData.length === 0)) {\n                        var elementType = (!this.parent.hideEmptyAgendaDays && filterData.length === 0) ? 'noEvents' : 'data';\n                        dTd.appendChild(this.createDateHeaderElement(agendaDate));\n                        nTr.appendChild(dTd);\n                        var cTd = this.createAgendaContentElement(elementType, filterData, aTd);\n                        nTr.appendChild(cTd);\n                        if (cTd.querySelectorAll('li').length > 0) {\n                            tBody.appendChild(nTr);\n                        }\n                    }\n                    else if (this.parent.activeViewOptions.allowVirtualScrolling) {\n                        day--;\n                    }\n                    if (this.isCurrentDate(new Date(agendaDate.getTime()))) {\n                        addClass(dTd.childNodes, cls.AGENDA_CURRENT_DAY_CLASS);\n                    }\n                    agendaDate = util.addDays(agendaDate, 1);\n                    if (agendaDate.getTime() > lastDate.getTime()) {\n                        break;\n                    }\n                }\n            }\n            endDate = new Date(agendaDate.getTime() - util.MS_PER_DAY);\n        }\n        this.agendaDates = { start: firstDate, end: endDate };\n    };\n    Agenda.prototype.isAgendaWorkDay = function (date) {\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.group.byDate) {\n            return this.isWorkDay(date, this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].workDays);\n        }\n        else {\n            return this.isWorkDay(date);\n        }\n    };\n    Agenda.prototype.agendaScrolling = function (event) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.virtualScrolling(event);\n        }\n        if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.setPersistence();\n        }\n    };\n    Agenda.prototype.virtualScrolling = function (event) {\n        var target = event.target;\n        var scrollTop = target.scrollTop;\n        var scrollHeight = target.scrollHeight;\n        var offsetHeight = target.clientHeight;\n        var totalHeight = scrollTop + offsetHeight;\n        var direction = (this.virtualScrollTop < scrollTop) ? 'next' : 'previous';\n        var tBody = target.querySelector('tbody');\n        var emptyTBody = createElement('tbody');\n        var topElement = this.getElementFromScrollerPosition(event);\n        var scrollDate = this.parent.getDateFromElement(topElement);\n        var filterDate;\n        var filterData;\n        if (scrollTop === 0) {\n            filterDate = this.getPreviousNextDate(util.addDays(scrollDate, -1), direction);\n            filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n                prepend([].slice.call(emptyTBody.childNodes), tBody);\n                this.wireEventActions();\n                for (var s = 0, element = tBody.children; s < element.length; s++) {\n                    if (element[parseInt(s.toString(), 10)].getAttribute('data-row-index') === topElement.getAttribute('data-column-index')) {\n                        var scrollToValue = element[parseInt(s.toString(), 10)].offsetTop -\n                            this.element.querySelector('.e-agenda-item').offsetHeight;\n                        target.scrollTop = scrollToValue;\n                        break;\n                    }\n                }\n                this.updateHeaderText(scrollDate);\n            }\n        }\n        else if (totalHeight >= (scrollHeight - 5)) {\n            filterDate = this.getPreviousNextDate(util.addDays(scrollDate, 1), direction);\n            filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n                append([].slice.call(emptyTBody.childNodes), tBody);\n                this.wireEventActions();\n                this.updateHeaderText(scrollDate);\n            }\n        }\n        else {\n            this.updateHeaderText(scrollDate);\n        }\n        this.virtualScrollTop = scrollTop;\n        var selectedElements = this.parent.eventBase.getSelectedAppointments();\n        if (selectedElements.length > 0) {\n            selectedElements[selectedElements.length - 1].focus();\n        }\n    };\n    Agenda.prototype.getElementFromScrollerPosition = function (event) {\n        var filterElement;\n        var target = event.target;\n        var scrollTop = target.scrollTop;\n        var scrollHeight = target.scrollHeight;\n        var offsetHeight = target.clientHeight;\n        var totalHeight = scrollTop + offsetHeight;\n        var liCollection = [].slice.call(target.querySelectorAll('.e-agenda-item'));\n        var li;\n        var liDetails;\n        if (liCollection.length > 0) {\n            if (scrollTop === 0) {\n                li = liCollection[0];\n                filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n            }\n            else if (totalHeight === scrollHeight) {\n                li = liCollection[liCollection.length - 1];\n                filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n            }\n            else {\n                for (var a = 0, length_1 = liCollection.length; a < length_1; a++) {\n                    li = liCollection[parseInt(a.toString(), 10)];\n                    liDetails = li.getBoundingClientRect();\n                    if (liDetails.top >= 0) {\n                        filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n                        break;\n                    }\n                }\n            }\n        }\n        return filterElement;\n    };\n    Agenda.prototype.updateHeaderText = function (date) {\n        if (this.parent.showHeaderBar) {\n            this.parent.headerModule.updateDateRange(date);\n        }\n    };\n    Agenda.prototype.getPreviousNextDate = function (date, type) {\n        var currentDate = new Date(date.getTime());\n        var firstDate = this.getStartDateFromEndDate(date);\n        var lastDate = this.getEndDateFromStartDate(date);\n        var daysCount = 0;\n        do {\n            if (this.parent.activeViewOptions.showWeekend || !this.parent.activeViewOptions.showWeekend &&\n                this.isAgendaWorkDay(currentDate)) {\n                var filterData = this.appointmentFiltering(currentDate);\n                if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                    daysCount++;\n                }\n            }\n            currentDate = util.addDays(currentDate, (type === 'next') ? 1 : -1);\n            if (currentDate < firstDate || currentDate > lastDate) {\n                break;\n            }\n        } while (daysCount !== this.parent.agendaDaysCount);\n        var endDate = util.addDays(currentDate, (type === 'next') ? -1 : 1);\n        return (type === 'next') ? { start: date, end: util.addDays(endDate, 1) } : { start: endDate, end: util.addDays(date, 1) };\n    };\n    Agenda.prototype.appointmentFiltering = function (startDate, endDate) {\n        var dateStart;\n        var dateEnd;\n        if (!isNullOrUndefined(startDate) && isNullOrUndefined(endDate)) {\n            dateStart = util.resetTime(new Date(startDate.getTime()));\n            dateEnd = util.setTime(new Date(dateStart.getTime()), util.MS_PER_DAY);\n        }\n        else {\n            dateStart = new Date(startDate.getTime());\n            dateEnd = new Date(endDate.getTime());\n        }\n        var filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n        if (filterData.length === 0) {\n            this.refreshEvent(startDate);\n            filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n        }\n        return filterData;\n    };\n    Agenda.prototype.getStartDateFromEndDate = function (endDate) {\n        var filterDate;\n        var fields = this.parent.eventFields;\n        if (this.parent.eventsProcessed.length > 0) {\n            var firstDate = Math.min.apply(Math, this.parent.eventsProcessed.map(function (a) {\n                return a[fields.startTime].getTime();\n            }));\n            filterDate = this.parent.hideEmptyAgendaDays ? new Date(firstDate) : this.parent.minDate;\n        }\n        else {\n            filterDate = this.parent.hideEmptyAgendaDays ? util.addMonths(endDate, -1) : this.parent.minDate;\n        }\n        return util.resetTime(filterDate);\n    };\n    Agenda.prototype.getEndDateFromStartDate = function (startDate) {\n        var filterDate;\n        var fieldMapping = this.parent.eventFields;\n        if (this.parent.eventsProcessed.length > 0) {\n            var lastDate = Math.max.apply(Math, this.parent.eventsProcessed.map(function (a) {\n                return a[fieldMapping.endTime].getTime();\n            }));\n            filterDate = this.parent.hideEmptyAgendaDays ? new Date(lastDate) : this.parent.maxDate;\n        }\n        else {\n            filterDate = this.parent.hideEmptyAgendaDays ? util.addMonths(startDate, 1) : this.parent.maxDate;\n        }\n        return util.resetTime(util.addDays(filterDate, 1));\n    };\n    Agenda.prototype.getNextPreviousDate = function (type) {\n        var noOfDays = (type === 'next') ? 1 : -1;\n        return util.addDays(this.parent.selectedDate, noOfDays);\n    };\n    Agenda.prototype.startDate = function () {\n        return util.resetTime(this.parent.selectedDate);\n    };\n    Agenda.prototype.endDate = function () {\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            return this.getEndDateFromStartDate(this.startDate());\n        }\n        else {\n            return util.addDays(this.startDate(), this.parent.agendaDaysCount);\n        }\n    };\n    Agenda.prototype.getDateRangeText = function (date) {\n        var formatDate = (this.parent.activeViewOptions.dateFormat) ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n        if (this.parent.activeViewOptions.allowVirtualScrolling || this.parent.isAdaptive) {\n            var currentDate = isNullOrUndefined(date) ? this.parent.selectedDate : date;\n            return util.capitalizeFirstWord(this.parent.globalize.formatDate(currentDate, { format: formatDate, calendar: this.parent.getCalendarMode() }), 'multiple');\n        }\n        else {\n            var startDate = this.parent.selectedDate;\n            var endDate = util.addDays(startDate, this.parent.agendaDaysCount - 1);\n            return this.formatDateRange(startDate, endDate);\n        }\n    };\n    Agenda.prototype.dayNavigationClick = function (e) {\n        var element = closest(e.currentTarget, '.' + cls.AGENDA_CELLS_CLASS);\n        var date = this.parent.getDateFromElement(element);\n        if (!isNullOrUndefined(date) && !this.parent.isAdaptive && this.parent.isMinMaxDate(date)) {\n            this.parent.setProperties({ selectedDate: date }, true);\n            this.parent.changeView('Day', e);\n        }\n    };\n    Agenda.prototype.wireEvents = function () {\n        EventHandler.add(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), event.scroll, this.agendaScrolling, this);\n    };\n    Agenda.prototype.unWireEvents = function () {\n        EventHandler.remove(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), event.scroll, this.agendaScrolling);\n        var dateHeaderElement = [].slice.call(this.element.querySelectorAll('.e-m-date'));\n        for (var _i = 0, dateHeaderElement_1 = dateHeaderElement; _i < dateHeaderElement_1.length; _i++) {\n            var element = dateHeaderElement_1[_i];\n            EventHandler.remove(element, 'click', this.dayNavigationClick);\n        }\n    };\n    Agenda.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.onAgendaScrollUiUpdate, this);\n        this.parent.on(event.dataReady, this.eventLoad, this);\n    };\n    Agenda.prototype.removeEventListener = function () {\n        if (this.parent) {\n            this.parent.off(event.scrollUiUpdate, this.onAgendaScrollUiUpdate);\n            this.parent.off(event.dataReady, this.eventLoad);\n        }\n    };\n    Agenda.prototype.onAgendaScrollUiUpdate = function () {\n        var headerHeight = this.getHeaderBarHeight();\n        if (this.parent.headerModule) {\n            if (this.parent.activeViewOptions.allowVirtualScrolling) {\n                this.parent.headerModule.updateHeaderItems('add');\n            }\n            else {\n                this.parent.headerModule.updateHeaderItems('remove');\n            }\n        }\n        var contentArea = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (this.parent.height !== 'auto') {\n            contentArea.style.height = formatUnit(this.parent.element.offsetHeight - headerHeight);\n        }\n    };\n    Agenda.prototype.scrollToDate = function (scrollDate) {\n        var date = new Date(+util.resetTime(scrollDate));\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            if (!this.parent.hideEmptyAgendaDays || this.parent.getEvents(date, util.addDays(date, 1), true).length > 0) {\n                this.parent.changeDate(date);\n            }\n        }\n        else {\n            var dateElement = this.element.querySelector('.' + cls.AGENDA_CELLS_CLASS + '[data-date=\"' + date.getTime() + '\"]');\n            if (dateElement) {\n                this.getContentAreaElement().scrollTop = dateElement.offsetTop;\n            }\n        }\n    };\n    Agenda.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            this.unWireEvents();\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            if (this.parent.headerModule && this.parent.activeViewOptions.allowVirtualScrolling) {\n                this.parent.headerModule.updateHeaderItems('remove');\n            }\n            _super.prototype.destroy.call(this);\n        }\n    };\n    return Agenda;\n}(AgendaBase));\nexport { Agenda };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { createElement, closest, Draggable, extend, formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { addClass, remove, removeClass, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { ActionBase } from '../actions/action-base';\nimport { MonthEvent } from '../event-renderer/month';\nimport { TimelineEvent } from '../event-renderer/timeline-view';\nimport { YearEvent } from '../event-renderer/year';\nimport { VerticalEvent } from '../event-renderer/vertical-view';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nvar MINUTES_PER_DAY = 1440;\n/**\n * Schedule events drag actions\n */\nvar DragAndDrop = /** @class */function (_super) {\n  __extends(DragAndDrop, _super);\n  function DragAndDrop() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.widthUptoCursorPoint = 0;\n    _this.heightUptoCursorPoint = 0;\n    _this.cursorPointIndex = 0;\n    _this.isHeaderRows = false;\n    _this.isTimelineDayProcess = false;\n    _this.widthPerMinute = 0;\n    _this.heightPerMinute = 0;\n    _this.minDiff = 0;\n    _this.isStepDragging = false;\n    _this.isMorePopupOpened = false;\n    _this.isAllDayDrag = false;\n    _this.isMultiSelect = false;\n    _this.multiData = [];\n    _this.updatedData = [];\n    _this.swagData = [];\n    _this.startTime = 0;\n    _this.isAllDayTarget = false;\n    _this.targetTd = null;\n    _this.isCursorAhead = false;\n    return _this;\n  }\n  DragAndDrop.prototype.wireDragEvent = function (element) {\n    new Draggable(element, {\n      abort: '.' + cls.EVENT_RESIZE_CLASS,\n      clone: true,\n      isDragScroll: true,\n      enableTailMode: this.parent.eventDragArea ? true : false,\n      cursorAt: this.parent.eventDragArea ? {\n        left: -20,\n        top: -20\n      } : {\n        left: 0,\n        top: 0\n      },\n      dragArea: this.dragArea,\n      dragStart: this.dragStart.bind(this),\n      drag: this.drag.bind(this),\n      dragStop: this.dragStop.bind(this),\n      enableAutoScroll: false,\n      helper: this.dragHelper.bind(this),\n      queryPositionInfo: this.dragPosition.bind(this)\n    });\n  };\n  DragAndDrop.prototype.setDragArea = function () {\n    var dragElement = document.querySelector(this.parent.eventDragArea);\n    this.dragArea = this.parent.eventDragArea && dragElement ? dragElement : this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n  };\n  DragAndDrop.prototype.dragHelper = function (e) {\n    var _this = this;\n    if (e.sender && e.sender.type === 'touchmove' && (!this.parent.uiStateValues.isTapHold || !e.element.classList.contains(cls.APPOINTMENT_BORDER))) {\n      return null;\n    }\n    this.setDragActionDefaultValues();\n    this.actionObj.element = e.element;\n    this.actionObj.action = 'drag';\n    var elements = [];\n    if (!this.parent.allowMultiDrag || isNullOrUndefined(this.parent.selectedElements) || this.parent.selectedElements.length === 0 || this.parent.selectedElements.length > 0 && this.parent.selectedElements.indexOf(this.actionObj.element) === -1) {\n      elements = [e.element];\n    } else {\n      elements = this.parent.selectedElements;\n      this.isMultiSelect = true;\n    }\n    elements.forEach(function (ele) {\n      var cloneElement = _this.createCloneElement(ele);\n      if (ele.getAttribute('data-guid') === _this.actionObj.element.getAttribute('data-guid')) {\n        _this.actionObj.clone = cloneElement;\n        if (!_this.parent.eventDragArea && _this.parent.currentView !== 'Month' && _this.parent.activeViewOptions.timeScale.enable && !_this.parent.activeView.isTimelineView() && !_this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n          setStyleAttribute(_this.actionObj.clone, {\n            cursor: 'move',\n            left: '0%',\n            right: '0%',\n            width: '100%'\n          });\n        }\n        _this.actionObj.clone.style.top = formatUnit(_this.actionObj.element.offsetTop);\n      }\n      _this.actionObj.cloneElement.push(cloneElement);\n      _this.actionObj.originalElement.push(ele);\n    });\n    return this.actionObj.clone;\n  };\n  DragAndDrop.prototype.dragPosition = function (e) {\n    if (this.parent.eventDragArea) {\n      return {\n        left: e.left,\n        top: e.top\n      };\n    }\n    var cellHeight = this.actionObj.cellHeight / this.actionObj.slotInterval * this.actionObj.interval;\n    var leftValue = formatUnit(0);\n    if (this.parent.currentView === 'Month') {\n      leftValue = e.left;\n    }\n    var cloneRight;\n    if (this.isStepDragging) {\n      cloneRight = Math.ceil(this.actionObj.clone.getBoundingClientRect().right) + this.actionObj.interval;\n    } else {\n      cloneRight = this.actionObj.clone.getBoundingClientRect().right;\n    }\n    var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var contentWrapRight = dragArea.getBoundingClientRect().right;\n    if (this.parent.activeView.isTimelineView() && this.parent.currentView !== 'TimelineYear' && !this.parent.enableRtl && this.actionObj.pageX > cloneRight && !this.isMorePopupOpened && !(this.actionObj.pageX > contentWrapRight)) {\n      this.isCursorAhead = true;\n    }\n    if (this.parent.activeView.isTimelineView()) {\n      leftValue = formatUnit(this.actionObj.clone.offsetLeft);\n    }\n    var topValue;\n    if (this.parent.activeView.isTimelineView() || !this.parent.timeScale.enable || !isNullOrUndefined(this.actionObj.clone.offsetParent) && this.actionObj.clone.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS)) {\n      topValue = formatUnit(this.actionObj.clone.offsetTop);\n    } else if (this.parent.currentView === 'Month') {\n      topValue = formatUnit(0);\n    } else if (this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n      topValue = formatUnit(this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).offsetTop);\n      setStyleAttribute(this.actionObj.clone, {\n        width: formatUnit(Math.ceil(this.actionObj.clone.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth),\n        right: this.parent.enableRtl && formatUnit(0)\n      });\n    } else {\n      if (this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) && !this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n        setStyleAttribute(this.actionObj.clone, {\n          height: formatUnit(this.actionObj.cellHeight),\n          width: formatUnit(this.actionObj.cellWidth - 1),\n          pointerEvents: 'none'\n        });\n      }\n      var top_1 = parseInt(e.top, 10);\n      top_1 = top_1 < 0 ? 0 : top_1;\n      topValue = formatUnit(Math.ceil(top_1 / cellHeight) * cellHeight);\n      var scrollHeight = this.parent.element.querySelector('.e-content-wrap').scrollHeight;\n      var cloneBottom = parseInt(topValue, 10) + this.actionObj.clone.offsetHeight;\n      if (cloneBottom > scrollHeight) {\n        topValue = parseInt(topValue, 10) - (cloneBottom - scrollHeight) + 'px';\n      }\n    }\n    return {\n      left: leftValue,\n      top: topValue\n    };\n  };\n  DragAndDrop.prototype.setDragActionDefaultValues = function () {\n    this.actionObj.action = 'drag';\n    this.actionObj.isAllDay = null;\n    this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n    this.actionObj.interval = this.actionObj.slotInterval;\n    var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n    this.actionObj.cellWidth = workCell.offsetWidth;\n    this.actionObj.cellHeight = workCell.offsetHeight;\n  };\n  DragAndDrop.prototype.dragStart = function (e) {\n    var _this = this;\n    var eventGuid = this.actionObj.element.getAttribute('data-guid');\n    this.actionObj.event = this.parent.eventBase.getEventByGuid(eventGuid);\n    var eventObj = extend({}, this.actionObj.event, null, true);\n    if (!isNullOrUndefined(eventObj)) {\n      this.startTime = eventObj[this.parent.eventFields.startTime].getTime();\n    }\n    var dragArgs = {\n      cancel: false,\n      data: eventObj,\n      selectedData: this.getSelectedData(),\n      event: e,\n      excludeSelectors: null,\n      element: this.actionObj.element,\n      interval: this.actionObj.interval,\n      navigation: {\n        enable: false,\n        timeDelay: 2000\n      },\n      scroll: {\n        enable: true,\n        scrollBy: 30,\n        timeDelay: 100\n      }\n    };\n    this.parent.trigger(events.dragStart, dragArgs, function (dragEventArgs) {\n      if (dragEventArgs.cancel || !isNullOrUndefined(_this.actionObj.element) && isNullOrUndefined(_this.actionObj.element.parentElement)) {\n        var dragObj = _this.actionObj.element.ej2_instances[0];\n        if (!isNullOrUndefined(dragObj)) {\n          dragObj.intDestroy(e.event);\n        }\n        _this.actionObj.action = '';\n        _this.removeCloneElementClasses();\n        _this.removeCloneElement();\n        return;\n      }\n      _this.actionClass('addClass');\n      _this.parent.uiStateValues.action = true;\n      _this.actionObj.start = eventObj[_this.parent.eventFields.startTime];\n      _this.actionObj.end = eventObj[_this.parent.eventFields.endTime];\n      _this.actionObj.groupIndex = parseInt(_this.actionObj.element.getAttribute('data-group-index') || '0', 10);\n      _this.actionObj.interval = dragEventArgs.interval;\n      _this.actionObj.navigation = dragEventArgs.navigation;\n      _this.actionObj.scroll = dragEventArgs.scroll;\n      _this.actionObj.excludeSelectors = dragEventArgs.excludeSelectors;\n      var viewElement = _this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n      _this.scrollArgs = {\n        element: viewElement,\n        width: viewElement.scrollWidth,\n        height: viewElement.scrollHeight\n      };\n      _this.widthPerMinute = _this.actionObj.cellWidth / _this.actionObj.slotInterval * _this.actionObj.interval;\n      _this.heightPerMinute = _this.actionObj.cellHeight / _this.actionObj.slotInterval * _this.actionObj.interval;\n      _this.widthUptoCursorPoint = 0;\n      _this.heightUptoCursorPoint = 0;\n      _this.cursorPointIndex = -1;\n      _this.isHeaderRows = false;\n      _this.isTimelineDayProcess = false;\n      _this.minDiff = 0;\n      _this.isMorePopupOpened = false;\n      _this.daysVariation = -1;\n      _this.isAllDayTarget = _this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS);\n      if ((_this.parent.activeView.isTimelineView() || !_this.parent.timeScale.enable) && _this.parent.currentView !== 'TimelineYear') {\n        if (!isNullOrUndefined(_this.actionObj.clone.offsetParent) && _this.actionObj.clone.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS)) {\n          _this.isMorePopupOpened = true;\n        }\n        _this.actionObj.pageX = e.event.pageX;\n        var rows = _this.parent.activeViewOptions.headerRows;\n        _this.isHeaderRows = rows.length > 0 && rows[rows.length - 1].option !== 'Hour' && rows[rows.length - 1].option !== 'Date';\n        _this.isTimelineDayProcess = !_this.parent.activeViewOptions.timeScale.enable || _this.isHeaderRows || _this.parent.currentView === 'TimelineMonth' || rows.length > 0 && rows[rows.length - 1].option === 'Date';\n        _this.isStepDragging = !_this.isTimelineDayProcess && _this.actionObj.slotInterval !== _this.actionObj.interval;\n        if (_this.isTimelineDayProcess) {\n          _this.timelineEventModule = new TimelineEvent(_this.parent, 'day');\n        } else {\n          _this.timelineEventModule = new TimelineEvent(_this.parent, 'hour');\n        }\n      }\n      if (_this.parent.currentView === 'TimelineYear') {\n        _this.yearEvent = new YearEvent(_this.parent);\n      }\n      if (_this.parent.currentView === 'Month') {\n        _this.startTime = util.resetTime(new Date(_this.startTime)).getTime();\n        _this.updateOriginalElement(_this.actionObj.clone);\n        _this.monthEvent = new MonthEvent(_this.parent);\n      }\n      if (_this.parent.currentView === 'Day' || _this.parent.currentView === 'Week' || _this.parent.currentView === 'WorkWeek') {\n        _this.verticalEvent = new VerticalEvent(_this.parent);\n        _this.verticalEvent.initializeValues();\n        var splitEvents = _this.splitEvent(_this.actionObj.event);\n        splitEvents.forEach(function (event) {\n          var query = \".e-day-wrapper[data-date=\\\"\" + util.resetTime(event[_this.parent.eventFields.startTime]).getTime() + \"\\\"]\";\n          if (_this.parent.activeViewOptions.group.resources.length > 0) {\n            query = query.concat('[data-group-index = \"' + _this.actionObj.groupIndex + '\"]');\n          }\n          var appWrap = _this.parent.element.querySelector(query);\n          if (appWrap) {\n            var appEle = appWrap.querySelector('[data-id=\"' + _this.actionObj.clone.getAttribute('data-id') + '\"]');\n            if (appEle) {\n              addClass([appEle], cls.EVENT_ACTION_CLASS);\n            }\n          }\n        });\n      }\n    });\n  };\n  DragAndDrop.prototype.getSelectedData = function () {\n    if (this.isMultiSelect && this.multiData.length === 0 && this.parent.selectedElements.length > 0) {\n      for (var _i = 0, _a = this.parent.selectedElements; _i < _a.length; _i++) {\n        var element = _a[_i];\n        var eventGuid = element.getAttribute('data-guid');\n        var data = this.parent.eventBase.getEventByGuid(eventGuid);\n        this.multiData.push(extend({}, data, null, true));\n      }\n    }\n    return this.multiData;\n  };\n  DragAndDrop.prototype.drag = function (e) {\n    if (e.event && e.event.type === 'touchmove') {\n      e.event.preventDefault();\n    }\n    if (this.parent.quickPopup) {\n      this.parent.quickPopup.quickPopupHide(true);\n    }\n    if (!isNullOrUndefined(e.target) && e.target.classList && e.target.classList.contains(cls.DISABLE_DATES)) {\n      return;\n    }\n    var eventObj = extend({}, this.actionObj.event, null, true);\n    var eventArgs = this.parent.eventBase.getPageCoordinates(e);\n    this.actionObj.Y = this.actionObj.pageY = eventArgs.pageY;\n    this.actionObj.X = this.actionObj.pageX = eventArgs.pageX;\n    this.actionObj.target = e.target;\n    this.widthUptoCursorPoint = this.widthUptoCursorPoint === 0 ? Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().left - this.actionObj.X) / this.widthPerMinute) * this.widthPerMinute : this.widthUptoCursorPoint;\n    this.widthUptoCursorPoint = this.isMorePopupOpened ? this.actionObj.cellWidth : this.widthUptoCursorPoint;\n    this.heightUptoCursorPoint = this.heightUptoCursorPoint === 0 ? Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().top - this.actionObj.Y) / this.heightPerMinute) * this.heightPerMinute : this.heightUptoCursorPoint;\n    this.isAllDayDrag = this.parent.activeViewOptions.timeScale.enable ? this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) : this.actionObj.event[this.parent.eventFields.isAllDay];\n    if (this.isStepDragging && this.minDiff === 0) {\n      this.calculateMinutesDiff(eventObj);\n    }\n    if ((this.parent.currentView === 'Month' || this.isAllDayDrag) && this.daysVariation < 0) {\n      var date = this.parent.getDateFromElement(this.actionObj.target);\n      if (!isNullOrUndefined(date)) {\n        var currentDate = util.resetTime(date);\n        var startDate = util.resetTime(new Date(eventObj[this.parent.eventFields.startTime].getTime()));\n        this.daysVariation = (currentDate.getTime() - startDate.getTime()) / util.MS_PER_DAY;\n      } else {\n        this.daysVariation = 0;\n      }\n    } else {\n      this.daysVariation = 0;\n    }\n    if (this.parent.eventDragArea) {\n      var targetElement = eventArgs.target;\n      this.actionObj.clone.style.top = formatUnit(targetElement.offsetTop);\n      this.actionObj.clone.style.left = formatUnit(targetElement.offsetLeft);\n      var currentTarget = closest(targetElement, '.' + cls.ROOT);\n      if (!currentTarget) {\n        this.actionObj.clone.style.height = '';\n        this.actionObj.clone.style.width = '';\n      } else {\n        if (!(this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'Day')) {\n          this.actionObj.clone.style.width = formatUnit(this.actionObj.element.offsetWidth);\n        }\n      }\n    }\n    this.updateScrollPosition(e);\n    this.updateNavigatingPosition(e);\n    this.updateDraggingDateTime(e);\n    var dragArgs = {\n      data: eventObj,\n      event: e,\n      element: this.actionObj.element,\n      startTime: this.actionObj.start,\n      endTime: this.actionObj.end,\n      selectedData: this.updatedData\n    };\n    if (this.parent.group.resources.length > 0) {\n      dragArgs.groupIndex = this.actionObj.groupIndex;\n    }\n    this.parent.trigger(events.drag, dragArgs);\n  };\n  DragAndDrop.prototype.calculateMinutesDiff = function (eventObj) {\n    if (this.parent.enableRtl) {\n      this.minDiff = (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint) / this.widthPerMinute * this.actionObj.interval;\n    } else {\n      this.minDiff = this.widthUptoCursorPoint / this.widthPerMinute * this.actionObj.interval;\n    }\n    var startDate = eventObj[this.parent.eventFields.startTime];\n    var startTime = this.parent.activeView.renderDates[0];\n    var startEndHours = util.getStartEndHours(startTime, this.parent.activeView.getStartHour(), this.parent.activeView.getEndHour());\n    if (startEndHours.startHour.getTime() > startDate.getTime()) {\n      this.minDiff = this.minDiff + (startEndHours.startHour.getTime() - startDate.getTime()) / util.MS_PER_MINUTE;\n    }\n  };\n  DragAndDrop.prototype.dragStop = function (e) {\n    var _this = this;\n    this.isCursorAhead = false;\n    this.removeCloneElementClasses();\n    this.removeCloneElement();\n    clearInterval(this.actionObj.navigationInterval);\n    this.actionObj.navigationInterval = null;\n    clearInterval(this.actionObj.scrollInterval);\n    this.actionObj.scrollInterval = null;\n    this.actionClass('removeClass');\n    this.parent.uiStateValues.action = this.parent.uiStateValues.isTapHold = false;\n    if (this.isAllowDrop(e)) {\n      return;\n    }\n    var target = e.target.classList && !e.target.classList.contains('e-work-cells') && this.parent.cellTemplate ? closest(e.target, '.e-work-cells') : e.target;\n    var dragArgs = {\n      cancel: false,\n      data: this.getChangedData(this.updatedData),\n      selectedData: this.updatedData,\n      event: e,\n      element: this.actionObj.element,\n      target: target\n    };\n    this.actionObj.action = null;\n    this.parent.trigger(events.dragStop, dragArgs, function (dragEventArgs) {\n      if (dragEventArgs.cancel) {\n        return;\n      }\n      if (_this.parent.isSpecificResourceEvents()) {\n        _this.parent.crudModule.crudObj.isCrudAction = true;\n        _this.parent.crudModule.crudObj.sourceEvent = [_this.parent.resourceBase.lastResourceLevel[parseInt(dragArgs.element.getAttribute('data-group-index'), 10)]];\n        var currentGroupIndex = parseInt(dragArgs.target.getAttribute('data-group-index'), 10) || _this.actionObj.groupIndex;\n        _this.parent.crudModule.crudObj.targetEvent = [_this.parent.resourceBase.lastResourceLevel[parseInt(currentGroupIndex.toString(), 10)]];\n      }\n      _this.saveChangedData(dragEventArgs, _this.isMultiSelect);\n    });\n    this.updatedData = [];\n    this.multiData = [];\n    this.isMultiSelect = false;\n    this.parent.selectedElements = [];\n  };\n  DragAndDrop.prototype.updateNavigatingPosition = function (e) {\n    var _this = this;\n    if (this.actionObj.navigation.enable) {\n      var currentDate_1 = this.parent.getCurrentTime();\n      if (isNullOrUndefined(this.actionObj.navigationInterval)) {\n        this.actionObj.navigationInterval = window.setInterval(function () {\n          if (currentDate_1) {\n            var crtDate = _this.parent.getCurrentTime();\n            var end = crtDate.getSeconds();\n            var start = currentDate_1.getSeconds() + _this.actionObj.navigation.timeDelay / 1000;\n            start = start >= 60 ? start - 60 : start;\n            if (start === end) {\n              currentDate_1 = _this.parent.getCurrentTime();\n              _this.viewNavigation(e);\n              _this.updateDraggingDateTime(e);\n            }\n          }\n        }, this.actionObj.navigation.timeDelay);\n      }\n    }\n  };\n  DragAndDrop.prototype.updateDraggingDateTime = function (e) {\n    if (!isNullOrUndefined(this.actionObj.clone.offsetParent) && this.actionObj.clone.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS)) {\n      this.morePopupEventDragging(e);\n    } else if (this.parent.activeView.isTimelineView() && this.parent.currentView !== 'TimelineYear') {\n      this.timelineEventModule.dateRender = this.parent.activeView.renderDates;\n      this.timelineEventModule.cellWidth = this.actionObj.cellWidth;\n      this.timelineEventModule.getSlotDates();\n      this.actionObj.cellWidth = this.isHeaderRows ? this.timelineEventModule.cellWidth : util.getElementWidth(this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS));\n      this.calculateTimelineTime(e);\n    } else {\n      if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n        this.calculateVerticalDate(e);\n      } else {\n        this.calculateVerticalTime(e);\n      }\n    }\n  };\n  DragAndDrop.prototype.navigationWrapper = function () {\n    if (!this.parent.activeView.isTimelineView()) {\n      if (this.parent.currentView === 'Month' || !this.parent.timeScale.enable) {\n        var outerWrapperCls = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n        this.actionObj.index = this.parent.activeView.renderDates.length < this.actionObj.index ? this.parent.activeView.renderDates.length - 1 : this.actionObj.index;\n        var targetWrapper = outerWrapperCls[this.actionObj.index].querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n        if (!targetWrapper) {\n          targetWrapper = createElement('div', {\n            className: cls.APPOINTMENT_WRAPPER_CLASS\n          });\n          outerWrapperCls[this.actionObj.index].appendChild(targetWrapper);\n        }\n        targetWrapper.appendChild(this.actionObj.clone);\n      } else {\n        var wrapperClass = this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) ? '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS : '.' + cls.APPOINTMENT_WRAPPER_CLASS;\n        this.parent.element.querySelectorAll(wrapperClass).item(this.actionObj.index).appendChild(this.actionObj.clone);\n        if (wrapperClass === '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS) {\n          var elementHeight = this.getAllDayEventHeight();\n          var event_2 = [].slice.call(this.parent.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS + ':first-child'));\n          if (event_2[0].offsetHeight < elementHeight) {\n            for (var _i = 0, event_1 = event_2; _i < event_1.length; _i++) {\n              var e = event_1[_i];\n              e.style.height = (elementHeight + 2) / 12 + 'em';\n            }\n          }\n          this.actionObj.clone.style.height = formatUnit(elementHeight);\n        }\n        this.actionObj.height = parseInt(this.actionObj.clone.style.height, 10);\n      }\n    } else {\n      var outWrapper = void 0;\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        outWrapper = this.parent.element.querySelectorAll('.e-appointment-container:not(.e-hidden)').item(this.actionObj.index);\n      } else {\n        outWrapper = this.parent.element.querySelector('.' + cls.APPOINTMENT_CONTAINER_CLASS);\n      }\n      if (!isNullOrUndefined(outWrapper)) {\n        var tarWrapper_1 = outWrapper.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n        if (!tarWrapper_1) {\n          tarWrapper_1 = createElement('div', {\n            className: cls.APPOINTMENT_WRAPPER_CLASS\n          });\n          outWrapper.appendChild(tarWrapper_1);\n        }\n        this.actionObj.cloneElement.forEach(function (ele) {\n          tarWrapper_1.appendChild(ele);\n        });\n      }\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  DragAndDrop.prototype.viewNavigation = function (e) {\n    var navigationType;\n    var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    if (dragArea && (!this.scrollEdges.top && !this.scrollEdges.bottom || closest(this.actionObj.clone, '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS))) {\n      if (dragArea.scrollLeft === 0 && Math.round(this.actionObj.X) <= Math.round(dragArea.getBoundingClientRect().left + this.actionObj.cellWidth + window.pageXOffset)) {\n        navigationType = this.parent.enableRtl ? 'next' : 'previous';\n      } else if (Math.round(dragArea.scrollLeft) + dragArea.clientWidth === dragArea.scrollWidth && Math.round(this.actionObj.X) >= Math.round(dragArea.getBoundingClientRect().right - this.actionObj.cellWidth + window.pageXOffset)) {\n        navigationType = this.parent.enableRtl ? 'previous' : 'next';\n      }\n      if (navigationType) {\n        this.parent.changeDate(this.parent.activeView.getNextPreviousDate(navigationType));\n      }\n    }\n  };\n  DragAndDrop.prototype.morePopupEventDragging = function (e) {\n    if (isNullOrUndefined(e.target) || e.target && isNullOrUndefined(closest(e.target, 'td'))) {\n      return;\n    }\n    var eventObj = extend({}, this.actionObj.event, null, true);\n    var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() - eventObj[this.parent.eventFields.startTime].getTime();\n    var td = closest(e.target, 'td');\n    if (this.parent.currentView === 'TimelineYear' && (!td.classList.contains(cls.WORK_CELLS_CLASS) || td.classList.contains(cls.OTHERMONTH_CLASS))) {\n      return;\n    }\n    var dragStart = this.parent.getDateFromElement(td);\n    var dragEnd = new Date(dragStart.getTime());\n    dragEnd.setMilliseconds(eventDuration);\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n    }\n    this.actionObj.start = new Date(dragStart.getTime());\n    this.actionObj.end = new Date(dragEnd.getTime());\n    this.actionObj.clone.style.top = formatUnit(td.offsetParent.offsetTop);\n    this.actionObj.clone.style.left = formatUnit(td.offsetLeft);\n    this.actionObj.clone.style.width = formatUnit(td.offsetWidth);\n    var eventContainer = td;\n    var eventWrapper;\n    if (this.parent.activeView.isTimelineView()) {\n      var rowIndex = closest(td, 'tr').rowIndex;\n      eventContainer = this.parent.element.querySelectorAll('.e-appointment-container').item(rowIndex);\n    }\n    eventWrapper = eventContainer.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n    if (!eventWrapper) {\n      eventWrapper = createElement('div', {\n        className: cls.APPOINTMENT_WRAPPER_CLASS\n      });\n      eventContainer.appendChild(eventWrapper);\n    }\n    this.appendCloneElement(eventWrapper);\n  };\n  DragAndDrop.prototype.calculateVerticalTime = function (e) {\n    var _this = this;\n    if (isNullOrUndefined(this.actionObj.target) || this.actionObj.target && isNullOrUndefined(closest(this.actionObj.target, 'tr')) || !isNullOrUndefined(closest(this.actionObj.target, 'td')) && !closest(this.actionObj.target, 'td').classList.contains(cls.WORK_CELLS_CLASS) && !closest(this.actionObj.target, 'td').classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n      return;\n    }\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      this.swapDragging(e);\n    }\n    var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var eventObj = extend({}, this.actionObj.event, null, true);\n    var eventStart = eventObj[this.parent.eventFields.startTime];\n    var eventEnd = eventObj[this.parent.eventFields.endTime];\n    var eventDuration = util.getUniversalTime(eventEnd) - util.getUniversalTime(eventStart);\n    var offsetTop = Math.floor(parseInt(this.actionObj.clone.style.top, 10) / this.actionObj.cellHeight) * this.actionObj.cellHeight;\n    offsetTop = offsetTop < 0 ? 0 : offsetTop;\n    if (this.scrollEdges.top || this.scrollEdges.bottom) {\n      offsetTop = this.scrollEdges.top ? dragArea.scrollTop - this.heightUptoCursorPoint + this.actionObj.cellHeight + window.pageYOffset : dragArea.scrollTop + dragArea.offsetHeight - this.actionObj.clone.offsetHeight + window.pageYOffset + (this.actionObj.clone.offsetHeight - this.heightUptoCursorPoint);\n      offsetTop = Math.round(offsetTop / this.actionObj.cellHeight) * this.actionObj.cellHeight;\n      if (dragArea.scrollTop > 0) {\n        this.actionObj.clone.style.top = formatUnit(offsetTop);\n      }\n    }\n    var rowIndex = this.parent.activeViewOptions.timeScale.enable ? offsetTop / this.actionObj.cellHeight : 0;\n    var heightPerMinute = this.actionObj.cellHeight / this.actionObj.slotInterval;\n    var diffInMinutes = parseInt(this.actionObj.clone.style.top, 10) - offsetTop;\n    var tr;\n    if (this.isAllDayDrag) {\n      tr = this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS);\n    } else {\n      var trCollections = [].slice.call(this.parent.getContentTable().querySelectorAll('tr'));\n      tr = trCollections[parseInt(rowIndex.toString(), 10)];\n    }\n    var index;\n    if (!isNullOrUndefined(closest(this.actionObj.target, 'td')) && (closest(this.actionObj.target, 'td').classList.contains(cls.WORK_CELLS_CLASS) || closest(this.actionObj.target, 'td').classList.contains(cls.ALLDAY_CELLS_CLASS))) {\n      index = closest(this.actionObj.target, 'td').cellIndex;\n    }\n    var colIndex = isNullOrUndefined(index) ? closest(this.actionObj.clone, 'td').cellIndex : index;\n    this.actionObj.index = colIndex;\n    if (isNullOrUndefined(tr)) {\n      return;\n    }\n    var td = tr.children[parseInt(colIndex.toString(), 10)];\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n    }\n    var dragStart;\n    var dragEnd;\n    if (this.parent.activeViewOptions.timeScale.enable && !this.isAllDayDrag) {\n      this.appendCloneElement(this.getEventWrapper(colIndex));\n      dragStart = this.parent.getDateFromElement(td);\n      dragStart.setMinutes(dragStart.getMinutes() + diffInMinutes / heightPerMinute);\n      dragEnd = new Date(dragStart.getTime());\n      if (this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n        dragEnd.setMinutes(dragEnd.getMinutes() + this.actionObj.slotInterval);\n      } else {\n        dragEnd.setMilliseconds(eventDuration);\n      }\n    } else {\n      dragStart = this.parent.getDateFromElement(td);\n      dragStart.setDate(dragStart.getDate() - this.daysVariation);\n      dragStart.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());\n      dragEnd = new Date(dragStart.getTime());\n      dragEnd.setMilliseconds(eventDuration);\n      if (!this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) && this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n        dragEnd = util.addDays(util.resetTime(dragEnd), 1);\n      }\n      var index_1 = this.parent.activeViewOptions.group.byDate || this.parent.virtualScrollModule && !this.parent.activeViewOptions.timeScale.enable ? colIndex : undefined;\n      this.updateAllDayEvents(dragStart, dragEnd, index_1);\n    }\n    this.actionObj.start = new Date(+dragStart);\n    this.actionObj.end = new Date(+dragEnd);\n    var event = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n    var dynamicWrappers = [].slice.call(this.parent.element.querySelectorAll('.e-dynamic-clone'));\n    for (var _i = 0, dynamicWrappers_1 = dynamicWrappers; _i < dynamicWrappers_1.length; _i++) {\n      var wrapper = dynamicWrappers_1[_i];\n      remove(wrapper);\n    }\n    if (this.multiData.length > 0) {\n      if (this.isAllDayTarget && this.isAllDayDrag && !isNullOrUndefined(this.actionObj.isAllDay) && !this.actionObj.isAllDay) {\n        var targetCellTime_1 = parseInt(closest(this.actionObj.target, 'td').getAttribute('data-date'), 10);\n        this.multiData.forEach(function (data) {\n          _this.swagData.push(extend({}, data, null, true));\n          if (data[_this.parent.eventFields.isAllDay]) {\n            data[_this.parent.eventFields.startTime] = new Date(data[_this.parent.eventFields.startTime].getTime() + (targetCellTime_1 - _this.startTime));\n            var startTime = new Date(data[_this.parent.eventFields.startTime]);\n            var endTime = new Date(startTime.setMinutes(startTime.getMinutes() + _this.actionObj.slotInterval));\n            data[_this.parent.eventFields.endTime] = endTime;\n            data[_this.parent.eventFields.isAllDay] = false;\n          }\n        });\n        this.startTime = targetCellTime_1;\n      }\n      if (this.isAllDayTarget && this.isAllDayDrag && !isNullOrUndefined(this.actionObj.isAllDay) && this.actionObj.isAllDay && this.swagData.length > 0) {\n        this.multiData = this.swagData;\n        this.swagData = [];\n        var eventObj_1 = extend({}, this.actionObj.event, null, true);\n        this.startTime = eventObj_1[this.parent.eventFields.startTime].getTime();\n      }\n      var startTimeDiff = event[this.parent.eventFields.startTime].getTime() - this.startTime;\n      for (var index_2 = 0; index_2 < this.multiData.length; index_2++) {\n        this.updatedData[parseInt(index_2.toString(), 10)] = this.updateMultipleData(this.multiData[parseInt(index_2.toString(), 10)], startTimeDiff);\n        var dayIndex = this.getDayIndex(this.updatedData[parseInt(index_2.toString(), 10)]);\n        if (dayIndex >= 0) {\n          var wrapper = this.getEventWrapper(dayIndex, this.updatedData[parseInt(index_2.toString(), 10)][this.parent.eventFields.isAllDay]);\n          this.appendCloneElement(wrapper, this.actionObj.cloneElement[parseInt(index_2.toString(), 10)]);\n          this.updateEventHeight(this.updatedData[parseInt(index_2.toString(), 10)], index_2, dayIndex);\n        } else {\n          if (!isNullOrUndefined(this.actionObj.cloneElement[parseInt(index_2.toString(), 10)].parentNode)) {\n            remove(this.actionObj.cloneElement[parseInt(index_2.toString(), 10)]);\n          }\n        }\n      }\n    } else {\n      this.updateEventHeight(event);\n    }\n    this.updateTimePosition(this.actionObj.start, this.updatedData);\n  };\n  DragAndDrop.prototype.splitEvent = function (event) {\n    var eventFields = this.parent.eventFields;\n    var eventData = [];\n    var startTime = event[eventFields.startTime];\n    var endTime = event[eventFields.endTime];\n    if (util.resetTime(new Date(startTime.getTime())) < util.resetTime(new Date(endTime.getTime()))) {\n      var startReferenceDate = util.resetTime(new Date(startTime.getTime()));\n      var endReferenceDate = new Date(startReferenceDate.getTime());\n      for (var i = 0; startReferenceDate < new Date(endTime.getTime()); i++) {\n        endReferenceDate = new Date(endReferenceDate.setDate(startReferenceDate.getDate() + 1));\n        var eventObj = extend({}, event, null, true);\n        eventObj[eventFields.startTime] = new Date(startReferenceDate);\n        eventObj[eventFields.endTime] = new Date(endReferenceDate);\n        startReferenceDate = new Date(startReferenceDate.setDate(startReferenceDate.getDate() + 1));\n        eventData.push(eventObj);\n      }\n      var index = eventData.length - 1;\n      eventData[0][eventFields.startTime] = startTime;\n      eventData[parseInt(index.toString(), 10)][eventFields.endTime] = endTime;\n    } else {\n      eventData.push(event);\n    }\n    return eventData;\n  };\n  DragAndDrop.prototype.updateMultipleData = function (data, timeDifference) {\n    var eventObj = extend({}, data, null, true);\n    if (!isNullOrUndefined(this.actionObj.isAllDay) && this.parent.activeViewOptions.timeScale.enable && (this.isAllDayTarget && eventObj[this.parent.eventFields.isAllDay] || !this.isAllDayTarget && !eventObj[this.parent.eventFields.isAllDay])) {\n      eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n    }\n    var endTimeDiff = eventObj[this.parent.eventFields.endTime].getTime() - eventObj[this.parent.eventFields.startTime].getTime();\n    if (eventObj[this.parent.eventFields.isAllDay]) {\n      var differInDays = Math.ceil(timeDifference / (1000 * 3600 * 24));\n      var day = Math.ceil(endTimeDiff / (1000 * 3600 * 24));\n      var startTime = new Date(eventObj[this.parent.eventFields.startTime]);\n      eventObj[this.parent.eventFields.startTime] = util.resetTime(new Date(startTime.setDate(startTime.getDate() + differInDays)));\n      eventObj[this.parent.eventFields.endTime] = util.addDays(eventObj[this.parent.eventFields.startTime], day);\n    } else {\n      eventObj[this.parent.eventFields.startTime] = new Date(eventObj[this.parent.eventFields.startTime].getTime() + timeDifference);\n      eventObj[this.parent.eventFields.endTime] = new Date(eventObj[this.parent.eventFields.startTime].getTime() + endTimeDiff);\n    }\n    return eventObj;\n  };\n  DragAndDrop.prototype.getDayIndex = function (event) {\n    var eventObj = extend({}, event, null, true);\n    var startDate = util.resetTime(eventObj[this.parent.eventFields.startTime]);\n    if (this.parent.activeViewOptions.timeScale.enable && !eventObj[this.parent.eventFields.isAllDay]) {\n      var startHour = this.parent.activeView.getStartHour();\n      startDate.setMilliseconds(startHour.getTime() - util.resetTime(startHour).getTime());\n    }\n    var startTime = startDate.getTime();\n    var query = '';\n    var wrapper = cls.DAY_WRAPPER_CLASS;\n    if (this.parent.activeViewOptions.timeScale.enable && eventObj[this.parent.eventFields.isAllDay]) {\n      wrapper = cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS;\n    } else {\n      wrapper = cls.WORK_CELLS_CLASS;\n    }\n    query = '.' + wrapper + '[data-date=\"' + startTime + '\"]';\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      query = query + '[data-group-index=\"' + this.actionObj.groupIndex + '\"]';\n    }\n    this.targetTd = this.parent.element.querySelector(query);\n    if (isNullOrUndefined(this.targetTd)) {\n      return -1;\n    }\n    return this.targetTd.cellIndex;\n  };\n  DragAndDrop.prototype.updateEventHeight = function (event, index, colIndex) {\n    this.verticalEvent.initializeValues();\n    var datesCount = this.verticalEvent.getStartCount();\n    if (!this.parent.uiStateValues.isGroupAdaptive) {\n      for (var i = 0; i < this.actionObj.groupIndex; i++) {\n        if (this.verticalEvent.dateRender[parseInt(i.toString(), 10)]) {\n          datesCount = datesCount + this.verticalEvent.dateRender[parseInt(i.toString(), 10)].length;\n        }\n      }\n    }\n    var indexGroup = this.parent.uiStateValues.isGroupAdaptive ? datesCount : this.actionObj.groupIndex;\n    var target = this.parent.activeViewOptions.group.byDate && !isNullOrUndefined(this.parent.getDateFromElement(this.actionObj.target)) ? true : false;\n    if (target || !this.parent.activeViewOptions.group.byDate) {\n      var dynamicIndex = -1;\n      var dayIndex = !this.parent.activeViewOptions.group.byDate ? isNullOrUndefined(index) ? this.actionObj.index - datesCount : colIndex - datesCount : this.parent.getIndexOfDate(this.verticalEvent.dateRender[parseInt(indexGroup.toString(), 10)], util.resetTime(\n      // eslint-disable-next-line max-len\n      this.parent.getDateFromElement(isNullOrUndefined(index) ? this.actionObj.target : this.targetTd)));\n      var splitEvents = this.splitEvent(event);\n      var events_1 = this.parent.eventBase.isAllDayAppointment(event) || splitEvents.length > 2 || this.parent.eventSettings.spannedEventPlacement !== 'TimeSlot' ? [event] : splitEvents;\n      for (var i = 0; i < events_1.length; i++) {\n        if (i > 0) {\n          var filterQuery = \".e-day-wrapper[data-date=\\\"\" + util.resetTime(events_1[parseInt(i.toString(), 10)][this.parent.eventFields.startTime]).getTime() + \"\\\"]\";\n          if (this.parent.activeViewOptions.group.resources.length > 0) {\n            filterQuery = filterQuery.concat('[data-group-index = \"' + this.actionObj.groupIndex + '\"]');\n          }\n          var appWrap = this.parent.element.querySelector(filterQuery);\n          if (appWrap) {\n            dayIndex = dayIndex + 1;\n            dynamicIndex = appWrap.cellIndex;\n          } else {\n            dayIndex = -1;\n          }\n        }\n        if (dayIndex >= 0) {\n          var record = this.verticalEvent.isSpannedEvent(events_1[parseInt(i.toString(), 10)], dayIndex, indexGroup);\n          var eStart = record[this.verticalEvent.fields.startTime];\n          var eEnd = record[this.verticalEvent.fields.endTime];\n          var appHeight = this.parent.activeViewOptions.timeScale.enable ? this.verticalEvent.getHeight(eStart, eEnd) : this.actionObj.element.offsetHeight;\n          var topValue = this.parent.activeViewOptions.timeScale.enable ? this.verticalEvent.getTopValue(eStart, dayIndex, indexGroup) : this.actionObj.element.offsetTop;\n          if (isNullOrUndefined(index)) {\n            if (i === 0) {\n              this.actionObj.clone.style.top = formatUnit(topValue);\n              this.actionObj.clone.style.height = formatUnit(appHeight);\n            } else {\n              this.renderSpannedEvents(record, dynamicIndex, topValue, appHeight);\n            }\n          } else {\n            var appWidth = this.actionObj.cellWidth;\n            if (event[this.parent.eventFields.isAllDay]) {\n              topValue = this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).offsetTop;\n              appHeight = this.getAllDayEventHeight();\n              var timeDiff = event[this.parent.eventFields.endTime].getTime() - event[this.parent.eventFields.startTime].getTime();\n              var allDayDifference = Math.ceil(timeDiff / (1000 * 3600 * 24));\n              if (allDayDifference >= 0) {\n                appWidth = allDayDifference * this.actionObj.cellWidth;\n              }\n            }\n            if (this.actionObj.cloneElement[parseInt(index.toString(), 10)]) {\n              if (i === 0) {\n                this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.top = formatUnit(topValue);\n                this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.height = formatUnit(appHeight);\n                this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.width = formatUnit(appWidth);\n                this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.left = formatUnit(0);\n              } else {\n                this.renderSpannedEvents(record, dynamicIndex, topValue, appHeight);\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  DragAndDrop.prototype.renderSpannedEvents = function (record, index, top, height) {\n    var startTime = record[this.parent.eventFields.startTime].getTime();\n    var endTime = record[this.parent.eventFields.endTime].getTime();\n    if (startTime !== endTime) {\n      var appointmentElement = this.verticalEvent.createAppointmentElement(record, false, record.isSpanned, this.actionObj.groupIndex);\n      addClass([appointmentElement], [cls.CLONE_ELEMENT_CLASS, 'e-dynamic-clone']);\n      setStyleAttribute(appointmentElement, {\n        'width': '100%',\n        'height': height + 'px',\n        'top': top + 'px',\n        'border': '0px'\n      });\n      var appointmentWrap = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_WRAPPER_CLASS));\n      appointmentWrap[parseInt(index.toString(), 10)].appendChild(appointmentElement);\n    }\n  };\n  DragAndDrop.prototype.getRenderedDates = function () {\n    var _this = this;\n    var _a, _b;\n    var renderDates = this.parent.activeView.renderDates;\n    (_a = this.parent.eventBase.slots).push.apply(_a, this.parent.activeView.renderDates.map(function (date) {\n      return +date;\n    }));\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      this.parent.eventBase.slots = [];\n      var resources = this.parent.resourceBase.lastResourceLevel.filter(function (res) {\n        return res.groupIndex === _this.actionObj.groupIndex;\n      });\n      renderDates = resources[0].renderDates;\n      (_b = this.parent.eventBase.slots).push.apply(_b, renderDates.map(function (date) {\n        return +date;\n      }));\n    }\n    return renderDates;\n  };\n  DragAndDrop.prototype.updateAllDayEvents = function (startDate, endDate, colIndex) {\n    this.parent.eventBase.slots = [];\n    var event = this.getUpdatedEvent(startDate, endDate, this.actionObj.event);\n    var renderDates = this.getRenderedDates();\n    var events = this.parent.eventBase.splitEvent(event, renderDates);\n    var query = \".e-all-day-cells[data-date=\\\"\" + events[0][this.parent.eventFields.startTime].getTime() + \"\\\"]\";\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      query = query.concat('[data-group-index = \"' + this.actionObj.groupIndex + '\"]');\n    }\n    var cell = [].slice.call(this.parent.element.querySelectorAll(query));\n    if (cell.length > 0 || !isNullOrUndefined(colIndex)) {\n      var cellIndex = !isNullOrUndefined(colIndex) ? colIndex : cell[0].cellIndex;\n      this.appendCloneElement(this.getEventWrapper(cellIndex));\n      // eslint-disable-next-line max-len\n      this.actionObj.clone.style.width = formatUnit(events[0].data.count * this.actionObj.cellWidth);\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  DragAndDrop.prototype.swapDragging = function (e) {\n    var colIndex = !isNullOrUndefined(closest(this.actionObj.target, 'td')) && closest(this.actionObj.target, 'td').cellIndex;\n    if (closest(this.actionObj.target, '.' + cls.DATE_HEADER_WRAP_CLASS) && !closest(this.actionObj.clone, '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS)) {\n      addClass([this.actionObj.clone], cls.ALLDAY_APPOINTMENT_CLASS);\n      this.appendCloneElement(this.getEventWrapper(colIndex));\n      this.actionObj.isAllDay = true;\n      var eventHeight = this.getAllDayEventHeight();\n      var allDayElement = [].slice.call(this.parent.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS + ':first-child'));\n      if (allDayElement[0].offsetHeight < eventHeight) {\n        for (var _i = 0, allDayElement_1 = allDayElement; _i < allDayElement_1.length; _i++) {\n          var element = allDayElement_1[_i];\n          element.style.height = (eventHeight + 2) / 12 + 'em';\n        }\n      }\n      setStyleAttribute(this.actionObj.clone, {\n        width: formatUnit(this.actionObj.cellWidth),\n        height: formatUnit(eventHeight),\n        top: formatUnit(this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).offsetTop)\n      });\n    }\n    if (closest(this.actionObj.target, '.' + cls.WORK_CELLS_CLASS) && !closest(this.actionObj.clone, '.' + cls.DAY_WRAPPER_CLASS)) {\n      removeClass([this.actionObj.clone], cls.ALLDAY_APPOINTMENT_CLASS);\n      this.appendCloneElement(this.getEventWrapper(colIndex));\n      this.actionObj.isAllDay = false;\n      // eslint-disable-next-line max-len\n      var height = this.actionObj.element.offsetHeight === 0 ? this.actionObj.height : this.actionObj.element.offsetHeight;\n      setStyleAttribute(this.actionObj.clone, {\n        left: formatUnit(0),\n        height: formatUnit(height),\n        width: formatUnit(this.actionObj.cellWidth)\n      });\n    }\n  };\n  DragAndDrop.prototype.calculateVerticalDate = function (e) {\n    if (isNullOrUndefined(e.target) || e.target && isNullOrUndefined(closest(e.target, 'tr')) || e.target && e.target.tagName === 'DIV') {\n      return;\n    }\n    var eventObj = extend({}, this.actionObj.event, null, true);\n    if (isNullOrUndefined(this.parent.eventDragArea)) {\n      this.removeCloneElement();\n    }\n    var eventDuration = util.getUniversalTime(eventObj[this.parent.eventFields.endTime]) - util.getUniversalTime(eventObj[this.parent.eventFields.startTime]);\n    var td = closest(this.actionObj.target, 'td');\n    if (!isNullOrUndefined(td)) {\n      var tr = td.parentElement;\n      this.actionObj.index = tr.rowIndex * tr.children.length + td.cellIndex;\n      var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n      td = workCells[this.actionObj.index];\n      var currentDate = this.parent.getDateFromElement(td);\n      if (!isNullOrUndefined(currentDate)) {\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n          this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n        }\n        var timeString = new Date(currentDate.setDate(currentDate.getDate() - this.daysVariation));\n        var dragStart = new Date(timeString.getTime());\n        var startTimeDiff = util.getUniversalTime(eventObj[this.parent.eventFields.startTime]) - util.getUniversalTime(util.resetTime(new Date(+eventObj[this.parent.eventFields.startTime])));\n        dragStart.setMilliseconds(startTimeDiff);\n        var dragEnd = new Date(dragStart.getTime());\n        dragEnd.setMilliseconds(eventDuration);\n        this.actionObj.start = new Date(dragStart.getTime());\n        this.actionObj.end = new Date(dragEnd.getTime());\n      }\n    }\n    var event = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n    if (isNullOrUndefined(this.parent.eventDragArea)) {\n      var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n      for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n        var wrapper = eventWrappers_1[_i];\n        remove(wrapper);\n      }\n    }\n    if (this.multiData && this.multiData.length > 0) {\n      var startTime = util.resetTime(new Date(event[this.parent.eventFields.startTime]));\n      var startTimeDiff = startTime.getTime() - this.startTime;\n      if (this.parent.currentView === 'TimelineYear' && this.parent.group.resources.length > 0) {\n        startTimeDiff = (startTime.getFullYear() - new Date(this.startTime).getFullYear()) * 12;\n        startTimeDiff -= new Date(this.startTime).getMonth();\n        startTimeDiff += startTime.getMonth();\n      }\n      for (var index = 0; index < this.multiData.length; index++) {\n        this.updatedData[parseInt(index.toString(), 10)] = this.updateMultipleVerticalDate(this.multiData[parseInt(index.toString(), 10)], startTimeDiff);\n        if (this.parent.currentView === 'TimelineYear') {\n          this.dynamicYearlyEventsRendering(this.updatedData[parseInt(index.toString(), 10)]);\n        } else {\n          this.dynamicEventsRendering(this.updatedData[parseInt(index.toString(), 10)]);\n        }\n      }\n    } else {\n      if (this.parent.currentView === 'TimelineYear') {\n        this.dynamicYearlyEventsRendering(event);\n      } else {\n        this.dynamicEventsRendering(event);\n      }\n    }\n  };\n  DragAndDrop.prototype.updateMultipleVerticalDate = function (data, timeDifference) {\n    var eventObj = extend({}, data, null, true);\n    var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() - eventObj[this.parent.eventFields.startTime].getTime();\n    var startDate = new Date(eventObj[this.parent.eventFields.startTime]);\n    if (this.parent.currentView === 'TimelineYear' && this.parent.group.resources.length > 0) {\n      eventObj[this.parent.eventFields.startTime] = new Date(startDate.setMonth(startDate.getMonth() + timeDifference));\n    } else {\n      var differInDays = Math.ceil(timeDifference / util.MS_PER_DAY);\n      eventObj[this.parent.eventFields.startTime] = new Date(startDate.setDate(startDate.getDate() + differInDays));\n    }\n    eventObj[this.parent.eventFields.endTime] = new Date(eventObj[this.parent.eventFields.startTime].getTime() + eventDuration);\n    return eventObj;\n  };\n  DragAndDrop.prototype.calculateTimelineTime = function (e) {\n    var eventObj = extend({}, this.actionObj.event, null, true);\n    var eventDuration = util.getUniversalTime(eventObj[this.parent.eventFields.endTime]) - util.getUniversalTime(eventObj[this.parent.eventFields.startTime]);\n    var offsetLeft = this.parent.enableRtl ? Math.abs(this.actionObj.clone.offsetLeft) - this.actionObj.clone.offsetWidth : parseInt(this.actionObj.clone.style.left, 10);\n    offsetLeft = Math.floor(offsetLeft / Math.trunc(this.actionObj.cellWidth)) * this.actionObj.cellWidth;\n    var rightOffset;\n    if (this.parent.enableRtl) {\n      rightOffset = Math.abs(parseInt(this.actionObj.clone.style.right, 10));\n      this.actionObj.clone.style.right = formatUnit(rightOffset);\n    }\n    offsetLeft = this.getOffsetValue(offsetLeft, rightOffset);\n    var colIndex = this.getColumnIndex(offsetLeft);\n    var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var contentWrapRight = dragArea.getBoundingClientRect().right;\n    var cursorDrag = this.parent.activeView.isTimelineView() && !this.parent.enableRtl && this.actionObj.pageX > this.actionObj.clone.getBoundingClientRect().right && !this.isMorePopupOpened && !(this.actionObj.pageX > contentWrapRight);\n    var leftVal = this.parent.eventDragArea ? dragArea.scrollLeft - dragArea.offsetLeft : 0;\n    if ((this.isCursorAhead || cursorDrag) && !this.isStepDragging) {\n      this.isCursorAhead = true;\n    }\n    var cloneIndex = Math.floor((this.actionObj.pageX - this.actionObj.clone.getBoundingClientRect().left + leftVal) / this.actionObj.cellWidth);\n    if (this.parent.enableRtl) {\n      cloneIndex = Math.abs(Math.floor((this.actionObj.pageX - this.actionObj.clone.getBoundingClientRect().right) / this.actionObj.cellWidth)) - 1;\n    }\n    if (this.cursorPointIndex < 0) {\n      this.cursorIndex(e, eventObj, offsetLeft, cloneIndex);\n    }\n    var tr = this.parent.getContentTable().querySelector('tr');\n    var index = this.getCursorCurrentIndex(colIndex, cloneIndex, tr);\n    index = index < 0 ? 0 : index;\n    var eventStart = this.isHeaderRows ? new Date(this.timelineEventModule.dateRender[parseInt(index.toString(), 10)].getTime()) : this.parent.getDateFromElement(tr.children[parseInt(index.toString(), 10)]);\n    if (this.isStepDragging) {\n      var widthDiff = this.getWidthDiff(tr, index);\n      if (widthDiff !== 0) {\n        var timeDiff = Math.ceil(widthDiff / this.widthPerMinute);\n        eventStart.setMinutes(eventStart.getMinutes() + timeDiff * this.actionObj.interval);\n        if (this.isCursorAhead || cursorDrag) {\n          eventStart.setMilliseconds(-eventDuration);\n        } else {\n          eventStart.setMinutes(eventStart.getMinutes() - this.minDiff);\n          var intervalInMS = this.actionObj.interval * util.MS_PER_MINUTE;\n          timeDiff = Math.abs(eventStart.getTime() - this.actionObj.start.getTime()) / intervalInMS;\n          var roundTimeDiff = Math.trunc(timeDiff);\n          if (roundTimeDiff !== timeDiff) {\n            timeDiff = roundTimeDiff * intervalInMS * (eventStart > this.actionObj.start ? 1 : -1);\n            eventStart = new Date(this.actionObj.start.getTime() + timeDiff);\n          }\n        }\n      } else {\n        eventStart = this.actionObj.start;\n      }\n    } else {\n      if (this.isCursorAhead || cursorDrag) {\n        var minutes = this.isTimelineDayProcess ? MINUTES_PER_DAY : this.actionObj.slotInterval;\n        eventStart.setMinutes(eventStart.getMinutes() + minutes);\n        eventStart.setMilliseconds(-eventDuration);\n        if (eventStart.getTime() === util.resetTime(eventStart).getTime() && eventStart.getMinutes() === 0 && eventDuration === 0) {\n          eventStart.setMinutes(-minutes);\n        }\n      } else {\n        eventStart.setMinutes(eventStart.getMinutes() - this.cursorPointIndex * (this.isTimelineDayProcess ? MINUTES_PER_DAY : this.actionObj.slotInterval));\n      }\n    }\n    if (!this.isStepDragging) {\n      eventStart = this.calculateIntervalTime(eventStart);\n    }\n    if (this.isTimelineDayProcess) {\n      var eventSrt = eventObj[this.parent.eventFields.startTime];\n      eventStart.setHours(eventSrt.getHours(), eventSrt.getMinutes(), eventSrt.getSeconds());\n    }\n    if (this.parent.eventDragArea) {\n      var targetDate = this.parent.getDateFromElement(e.target);\n      if (!isNullOrUndefined(targetDate)) {\n        if (!this.parent.activeViewOptions.timeScale.enable || this.parent.currentView === 'TimelineMonth') {\n          var eventSrt = eventObj[this.parent.eventFields.startTime];\n          eventStart = new Date(targetDate.setHours(eventSrt.getHours(), eventSrt.getMinutes(), eventSrt.getSeconds()));\n        } else {\n          eventStart = targetDate;\n        }\n      }\n    }\n    var eventEnd = new Date(eventStart.getTime());\n    eventEnd.setMilliseconds(eventDuration);\n    var eventsData = [this.getUpdatedEvent(eventStart, eventEnd, this.actionObj.event)];\n    if (this.multiData.length > 0) {\n      var startTimeDiff = eventsData[0][this.parent.eventFields.startTime].getTime() - this.startTime;\n      for (var i = 0; i < this.multiData.length; i++) {\n        this.updatedData[parseInt(i.toString(), 10)] = this.updateMultipleData(this.multiData[parseInt(i.toString(), 10)], startTimeDiff);\n      }\n      eventsData = this.updatedData;\n    }\n    for (var dataIndex = 0; dataIndex < eventsData.length; dataIndex++) {\n      var cloneElement = this.multiData.length > 0 ? this.actionObj.cloneElement[parseInt(dataIndex.toString(), 10)] : this.actionObj.clone;\n      if (isNullOrUndefined(this.parent.eventDragArea)) {\n        var events_2 = this.timelineEventModule.splitEvent(eventsData[parseInt(dataIndex.toString(), 10)], this.timelineEventModule.dateRender);\n        var eventData = events_2[0].data;\n        var startTime = this.timelineEventModule.getStartTime(events_2[0], eventData);\n        var endTime = this.timelineEventModule.getEndTime(events_2[0], eventData);\n        // eslint-disable-next-line max-len\n        var width = this.timelineEventModule.getEventWidth(startTime, endTime, eventObj[this.parent.eventFields.isAllDay], eventData.count);\n        // eslint-disable-next-line max-len\n        var day = this.parent.getIndexOfDate(this.timelineEventModule.dateRender, util.resetTime(new Date(startTime.getTime())));\n        day = day < 0 ? 0 : day;\n        var left = this.timelineEventModule.getPosition(startTime, endTime, eventObj[this.parent.eventFields.isAllDay], day);\n        if (this.parent.enableRtl) {\n          cloneElement.style.right = formatUnit(left);\n        } else {\n          cloneElement.style.left = formatUnit(left);\n        }\n        if (!this.isMorePopupOpened) {\n          cloneElement.style.width = formatUnit(width);\n        }\n      }\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        this.calculateResourceGroupingPosition(e, cloneElement);\n      }\n      this.actionObj.start = new Date(eventStart.getTime());\n      this.actionObj.end = new Date(eventEnd.getTime());\n      this.updateTimePosition(this.actionObj.start, this.updatedData);\n    }\n  };\n  DragAndDrop.prototype.getOffsetValue = function (offsetLeft, rightOffset) {\n    if (this.scrollEdges.left || this.scrollEdges.right) {\n      var viewEle = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n      if (this.parent.enableRtl) {\n        rightOffset = viewEle.offsetWidth - viewEle.scrollLeft;\n        if (this.scrollEdges.right) {\n          rightOffset = rightOffset - viewEle.offsetWidth + this.actionObj.clone.offsetWidth - (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint);\n        } else {\n          rightOffset = rightOffset + this.widthUptoCursorPoint;\n          if (rightOffset - this.widthUptoCursorPoint >= viewEle.scrollWidth) {\n            this.actionObj.clone.style.width = formatUnit(this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint + this.actionObj.cellWidth);\n            rightOffset = viewEle.scrollLeft - viewEle.scrollWidth;\n          }\n        }\n        if (isNullOrUndefined(this.parent.eventDragArea)) {\n          this.actionObj.clone.style.left = formatUnit(rightOffset);\n        }\n      } else {\n        if (this.scrollEdges.left) {\n          offsetLeft = viewEle.scrollLeft - this.widthUptoCursorPoint + this.actionObj.cellWidth;\n          if (viewEle.scrollLeft + viewEle.offsetWidth >= viewEle.offsetWidth) {\n            viewEle.scrollLeft = viewEle.scrollLeft - 1;\n          } else if (this.actionObj.clone.offsetLeft === 0) {\n            offsetLeft = viewEle.scrollLeft;\n          }\n        } else {\n          offsetLeft = viewEle.scrollLeft + viewEle.offsetWidth - this.actionObj.clone.offsetWidth + (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint);\n        }\n        offsetLeft = offsetLeft < 0 ? 0 : offsetLeft;\n        if (isNullOrUndefined(this.parent.eventDragArea)) {\n          this.actionObj.clone.style.left = formatUnit(offsetLeft);\n        }\n      }\n    }\n    return offsetLeft;\n  };\n  DragAndDrop.prototype.getWidthDiff = function (tr, index) {\n    var pages = this.scrollArgs.element.getBoundingClientRect();\n    if (pages.left <= this.actionObj.pageX && pages.right >= this.actionObj.pageX) {\n      var targetLeft = tr.children[parseInt(index.toString(), 10)].offsetLeft;\n      var pageX = this.actionObj.pageX - pages.left;\n      if (this.parent.enableRtl) {\n        return targetLeft + this.actionObj.cellWidth - (this.scrollArgs.element.scrollLeft + pageX);\n      } else {\n        return this.scrollArgs.element.scrollLeft + pageX - targetLeft;\n      }\n    }\n    return 0;\n  };\n  DragAndDrop.prototype.getColumnIndex = function (offsetLeft) {\n    var index = Math.floor(offsetLeft / Math.trunc(this.actionObj.cellWidth));\n    if (this.isHeaderRows) {\n      return index;\n    }\n    return this.getIndex(index);\n  };\n  DragAndDrop.prototype.getCursorCurrentIndex = function (colIndex, cloneIndex, tr) {\n    var index = colIndex + cloneIndex;\n    if (this.isHeaderRows) {\n      var dateLength = Math.floor(tr.offsetWidth / this.actionObj.cellWidth);\n      return index > dateLength - 1 ? dateLength - 1 : index;\n    }\n    return index > tr.children.length - 1 ? tr.children.length - 1 : index;\n  };\n  DragAndDrop.prototype.cursorIndex = function (e, event, left, index) {\n    var td = closest(e.target, '.e-work-cells');\n    if (!isNullOrUndefined(td) && !this.isMorePopupOpened) {\n      var targetDate = this.parent.getDateFromElement(td);\n      if (this.isHeaderRows) {\n        var currentIndex = Math.floor(left / this.actionObj.cellWidth);\n        targetDate = new Date(this.timelineEventModule.dateRender[currentIndex + index].getTime());\n      }\n      var timeDiff = targetDate.getTime() - event[this.parent.eventFields.startTime].getTime();\n      if (this.isTimelineDayProcess) {\n        this.cursorPointIndex = Math.abs(Math.ceil(timeDiff / util.MS_PER_DAY));\n      } else {\n        var widthDiff = Math.floor(timeDiff / util.MS_PER_MINUTE / (this.actionObj.slotInterval / this.actionObj.cellWidth));\n        this.cursorPointIndex = Math.floor(widthDiff / this.actionObj.cellWidth);\n        this.cursorPointIndex = this.cursorPointIndex < 0 ? 0 : this.cursorPointIndex;\n      }\n    } else {\n      this.cursorPointIndex = 0;\n    }\n  };\n  DragAndDrop.prototype.calculateResourceGroupingPosition = function (e, cloneElement) {\n    var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var trCollection = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap .e-content-table tr:not(.e-hidden)'));\n    var translateY = util.getTranslateY(dragArea.querySelector('table'));\n    translateY = isNullOrUndefined(translateY) ? 0 : translateY;\n    var rowHeight = this.parent.rowAutoHeight ? ~~(dragArea.querySelector('table').offsetHeight / trCollection.length) : this.actionObj.cellHeight;\n    var rowIndex = Math.floor(Math.floor(this.actionObj.Y + (dragArea.scrollTop - translateY - (window.scrollY || window.pageYOffset)) - util.getElementTop(dragArea)) / rowHeight);\n    rowIndex = rowIndex < 0 ? 0 : rowIndex > trCollection.length - 1 ? trCollection.length - 1 : rowIndex;\n    this.actionObj.index = rowIndex;\n    var eventContainer = this.parent.element.querySelectorAll('.e-appointment-container:not(.e-hidden)').item(rowIndex);\n    var eventWrapper = eventContainer.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n    if (!eventWrapper) {\n      eventWrapper = createElement('div', {\n        className: cls.APPOINTMENT_WRAPPER_CLASS\n      });\n      eventContainer.appendChild(eventWrapper);\n    }\n    this.appendCloneElement(eventWrapper, cloneElement);\n    var td = closest(this.actionObj.target, 'td');\n    this.actionObj.groupIndex = td && !isNaN(parseInt(td.getAttribute('data-group-index'), 10)) ? parseInt(td.getAttribute('data-group-index'), 10) : this.actionObj.groupIndex;\n    if (!isNullOrUndefined(this.parent.eventDragArea)) {\n      return;\n    }\n    var top = util.getElementHeight(trCollection[parseInt(rowIndex.toString(), 10)]) * rowIndex;\n    if (this.parent.rowAutoHeight) {\n      var cursorElement = this.getCursorElement(e);\n      if (cursorElement) {\n        top = cursorElement.classList.contains(cls.WORK_CELLS_CLASS) ? cursorElement.offsetTop : cursorElement.offsetParent && cursorElement.offsetParent.classList.contains(cls.APPOINTMENT_CLASS) ? cursorElement.offsetParent.offsetTop : top;\n      }\n    }\n    cloneElement.style.top = formatUnit(top);\n  };\n  DragAndDrop.prototype.appendCloneElement = function (element, cloneElement) {\n    if (cloneElement === void 0) {\n      cloneElement = null;\n    }\n    cloneElement = isNullOrUndefined(cloneElement) ? this.actionObj.clone : cloneElement;\n    var dragElement = document.querySelector(this.parent.eventDragArea);\n    if (this.parent.eventDragArea && dragElement) {\n      dragElement.appendChild(cloneElement);\n    } else {\n      element.appendChild(cloneElement);\n    }\n  };\n  DragAndDrop.prototype.getEventWrapper = function (index, isAllDayDrag) {\n    var eventWrapper;\n    if (isNullOrUndefined(isAllDayDrag)) {\n      isAllDayDrag = this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS);\n    }\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      var wrapperClass = isAllDayDrag ? '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS : '.' + cls.APPOINTMENT_WRAPPER_CLASS;\n      eventWrapper = this.parent.element.querySelectorAll(wrapperClass).item(index);\n    } else {\n      var targetWrapper = this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS).item(index);\n      eventWrapper = targetWrapper.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n      if (!eventWrapper) {\n        eventWrapper = createElement('div', {\n          className: cls.APPOINTMENT_WRAPPER_CLASS\n        });\n        targetWrapper.appendChild(eventWrapper);\n      }\n    }\n    return eventWrapper;\n  };\n  DragAndDrop.prototype.getAllDayEventHeight = function () {\n    var eventWrapper = createElement('div', {\n      className: cls.APPOINTMENT_CLASS\n    });\n    this.parent.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS).appendChild(eventWrapper);\n    var eventHeight = eventWrapper.offsetHeight;\n    remove(eventWrapper);\n    return eventHeight;\n  };\n  DragAndDrop.prototype.isAllowDrop = function (e) {\n    if (!this.actionObj.excludeSelectors) {\n      return false;\n    }\n    var dropSelectors = this.actionObj.excludeSelectors.split(',');\n    var isAllowDrop = false;\n    for (var _i = 0, dropSelectors_1 = dropSelectors; _i < dropSelectors_1.length; _i++) {\n      var selector = dropSelectors_1[_i];\n      if (e.target.classList.contains(selector)) {\n        isAllowDrop = true;\n        break;\n      }\n    }\n    return isAllowDrop;\n  };\n  /**\n   * Get module name.\n   *\n   * @returns {string} Returns the module name\n   */\n  DragAndDrop.prototype.getModuleName = function () {\n    return 'dragAndDrop';\n  };\n  return DragAndDrop;\n}(ActionBase);\nexport { DragAndDrop };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","createElement","closest","Draggable","extend","formatUnit","isNullOrUndefined","addClass","remove","removeClass","setStyleAttribute","ActionBase","MonthEvent","TimelineEvent","YearEvent","VerticalEvent","cls","events","util","MINUTES_PER_DAY","DragAndDrop","_super","_this","apply","arguments","widthUptoCursorPoint","heightUptoCursorPoint","cursorPointIndex","isHeaderRows","isTimelineDayProcess","widthPerMinute","heightPerMinute","minDiff","isStepDragging","isMorePopupOpened","isAllDayDrag","isMultiSelect","multiData","updatedData","swagData","startTime","isAllDayTarget","targetTd","isCursorAhead","wireDragEvent","element","abort","EVENT_RESIZE_CLASS","clone","isDragScroll","enableTailMode","parent","eventDragArea","cursorAt","left","top","dragArea","dragStart","bind","drag","dragStop","enableAutoScroll","helper","dragHelper","queryPositionInfo","dragPosition","setDragArea","dragElement","document","querySelector","CONTENT_TABLE_CLASS","e","sender","type","uiStateValues","isTapHold","classList","contains","APPOINTMENT_BORDER","setDragActionDefaultValues","actionObj","action","elements","allowMultiDrag","selectedElements","length","indexOf","forEach","ele","cloneElement","createCloneElement","getAttribute","currentView","activeViewOptions","timeScale","enable","activeView","isTimelineView","ALLDAY_APPOINTMENT_CLASS","cursor","right","width","style","offsetTop","push","originalElement","cellHeight","slotInterval","interval","leftValue","cloneRight","Math","ceil","getBoundingClientRect","CONTENT_WRAP_CLASS","contentWrapRight","enableRtl","pageX","offsetLeft","topValue","offsetParent","MORE_EVENT_POPUP_CLASS","ALLDAY_ROW_CLASS","offsetWidth","cellWidth","height","pointerEvents","top_1","parseInt","scrollHeight","cloneBottom","offsetHeight","isAllDay","slotCount","workCell","WORK_CELLS_CLASS","eventGuid","event","eventBase","getEventByGuid","eventObj","eventFields","getTime","dragArgs","cancel","data","selectedData","getSelectedData","excludeSelectors","navigation","timeDelay","scroll","scrollBy","trigger","dragEventArgs","parentElement","dragObj","ej2_instances","intDestroy","removeCloneElementClasses","removeCloneElement","actionClass","start","end","endTime","groupIndex","viewElement","scrollArgs","scrollWidth","daysVariation","rows","headerRows","option","timelineEventModule","yearEvent","resetTime","Date","updateOriginalElement","monthEvent","verticalEvent","initializeValues","splitEvents","splitEvent","query","group","resources","concat","appWrap","appEle","EVENT_ACTION_CLASS","_i","_a","preventDefault","quickPopup","quickPopupHide","target","DISABLE_DATES","eventArgs","getPageCoordinates","Y","pageY","X","abs","calculateMinutesDiff","date","getDateFromElement","currentDate","startDate","MS_PER_DAY","targetElement","currentTarget","ROOT","updateScrollPosition","updateNavigatingPosition","updateDraggingDateTime","renderDates","startEndHours","getStartEndHours","getStartHour","getEndHour","startHour","MS_PER_MINUTE","clearInterval","navigationInterval","scrollInterval","isAllowDrop","cellTemplate","getChangedData","isSpecificResourceEvents","crudModule","crudObj","isCrudAction","sourceEvent","resourceBase","lastResourceLevel","currentGroupIndex","targetEvent","toString","saveChangedData","currentDate_1","getCurrentTime","window","setInterval","crtDate","getSeconds","viewNavigation","morePopupEventDragging","dateRender","getSlotDates","getElementWidth","calculateTimelineTime","calculateVerticalDate","calculateVerticalTime","navigationWrapper","outerWrapperCls","slice","call","querySelectorAll","index","targetWrapper","APPOINTMENT_WRAPPER_CLASS","className","appendChild","wrapperClass","ALLDAY_APPOINTMENT_WRAPPER_CLASS","item","elementHeight","getAllDayEventHeight","event_2","ALLDAY_CELLS_CLASS","event_1","outWrapper","APPOINTMENT_CONTAINER_CLASS","tarWrapper_1","navigationType","scrollEdges","bottom","scrollLeft","round","pageXOffset","clientWidth","changeDate","getNextPreviousDate","eventDuration","td","OTHERMONTH_CLASS","dragEnd","setMilliseconds","eventContainer","eventWrapper","rowIndex","appendCloneElement","swapDragging","eventStart","eventEnd","getUniversalTime","floor","scrollTop","pageYOffset","diffInMinutes","tr","trCollections","getContentTable","cellIndex","colIndex","children","isGroupAdaptive","getEventWrapper","setMinutes","getMinutes","setDate","getDate","setHours","getHours","addDays","index_1","byDate","virtualScrollModule","undefined","updateAllDayEvents","getUpdatedEvent","dynamicWrappers","dynamicWrappers_1","wrapper","targetCellTime_1","eventObj_1","startTimeDiff","index_2","updateMultipleData","dayIndex","getDayIndex","updateEventHeight","parentNode","updateTimePosition","eventData","startReferenceDate","endReferenceDate","i","timeDifference","endTimeDiff","differInDays","day","DAY_WRAPPER_CLASS","datesCount","getStartCount","indexGroup","dynamicIndex","getIndexOfDate","events_1","isAllDayAppointment","eventSettings","spannedEventPlacement","filterQuery","record","isSpannedEvent","eStart","fields","eEnd","appHeight","getHeight","getTopValue","renderSpannedEvents","appWidth","timeDiff","allDayDifference","appointmentElement","createAppointmentElement","isSpanned","CLONE_ELEMENT_CLASS","appointmentWrap","getRenderedDates","_b","slots","map","filter","res","endDate","cell","count","DATE_HEADER_WRAP_CLASS","eventHeight","allDayElement","allDayElement_1","tagName","workCells","timeString","eventWrappers","eventWrappers_1","getFullYear","getMonth","updateMultipleVerticalDate","dynamicYearlyEventsRendering","dynamicEventsRendering","setMonth","trunc","rightOffset","getOffsetValue","getColumnIndex","cursorDrag","leftVal","cloneIndex","cursorIndex","getCursorCurrentIndex","widthDiff","getWidthDiff","intervalInMS","roundTimeDiff","minutes","calculateIntervalTime","eventSrt","targetDate","eventsData","dataIndex","events_2","getStartTime","getEndTime","getEventWidth","getPosition","calculateResourceGroupingPosition","viewEle","pages","targetLeft","getIndex","dateLength","currentIndex","trCollection","translateY","getTranslateY","rowHeight","rowAutoHeight","scrollY","getElementTop","isNaN","getElementHeight","cursorElement","getCursorElement","APPOINTMENT_CLASS","dropSelectors","split","dropSelectors_1","selector","getModuleName"],"sources":["/Users/anjalichaturvedi/GitHub/brew-bridge-dashboard/website/node_modules/@syncfusion/ej2-schedule/src/schedule/actions/drag.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { createElement, closest, Draggable, extend, formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { addClass, remove, removeClass, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { ActionBase } from '../actions/action-base';\nimport { MonthEvent } from '../event-renderer/month';\nimport { TimelineEvent } from '../event-renderer/timeline-view';\nimport { YearEvent } from '../event-renderer/year';\nimport { VerticalEvent } from '../event-renderer/vertical-view';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nvar MINUTES_PER_DAY = 1440;\n/**\n * Schedule events drag actions\n */\nvar DragAndDrop = /** @class */ (function (_super) {\n    __extends(DragAndDrop, _super);\n    function DragAndDrop() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.widthUptoCursorPoint = 0;\n        _this.heightUptoCursorPoint = 0;\n        _this.cursorPointIndex = 0;\n        _this.isHeaderRows = false;\n        _this.isTimelineDayProcess = false;\n        _this.widthPerMinute = 0;\n        _this.heightPerMinute = 0;\n        _this.minDiff = 0;\n        _this.isStepDragging = false;\n        _this.isMorePopupOpened = false;\n        _this.isAllDayDrag = false;\n        _this.isMultiSelect = false;\n        _this.multiData = [];\n        _this.updatedData = [];\n        _this.swagData = [];\n        _this.startTime = 0;\n        _this.isAllDayTarget = false;\n        _this.targetTd = null;\n        _this.isCursorAhead = false;\n        return _this;\n    }\n    DragAndDrop.prototype.wireDragEvent = function (element) {\n        new Draggable(element, {\n            abort: '.' + cls.EVENT_RESIZE_CLASS,\n            clone: true,\n            isDragScroll: true,\n            enableTailMode: (this.parent.eventDragArea) ? true : false,\n            cursorAt: (this.parent.eventDragArea) ? { left: -20, top: -20 } : { left: 0, top: 0 },\n            dragArea: this.dragArea,\n            dragStart: this.dragStart.bind(this),\n            drag: this.drag.bind(this),\n            dragStop: this.dragStop.bind(this),\n            enableAutoScroll: false,\n            helper: this.dragHelper.bind(this),\n            queryPositionInfo: this.dragPosition.bind(this)\n        });\n    };\n    DragAndDrop.prototype.setDragArea = function () {\n        var dragElement = document.querySelector(this.parent.eventDragArea);\n        this.dragArea = this.parent.eventDragArea && dragElement ? dragElement :\n            this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n    };\n    DragAndDrop.prototype.dragHelper = function (e) {\n        var _this = this;\n        if (e.sender && e.sender.type === 'touchmove' && (!this.parent.uiStateValues.isTapHold ||\n            !e.element.classList.contains(cls.APPOINTMENT_BORDER))) {\n            return null;\n        }\n        this.setDragActionDefaultValues();\n        this.actionObj.element = e.element;\n        this.actionObj.action = 'drag';\n        var elements = [];\n        if (!this.parent.allowMultiDrag || isNullOrUndefined(this.parent.selectedElements) || this.parent.selectedElements.length === 0 ||\n            (this.parent.selectedElements.length > 0 && this.parent.selectedElements.indexOf(this.actionObj.element) === -1)) {\n            elements = [e.element];\n        }\n        else {\n            elements = this.parent.selectedElements;\n            this.isMultiSelect = true;\n        }\n        elements.forEach(function (ele) {\n            var cloneElement = _this.createCloneElement(ele);\n            if (ele.getAttribute('data-guid') === _this.actionObj.element.getAttribute('data-guid')) {\n                _this.actionObj.clone = cloneElement;\n                if (!_this.parent.eventDragArea && _this.parent.currentView !== 'Month' &&\n                    _this.parent.activeViewOptions.timeScale.enable && !_this.parent.activeView.isTimelineView() &&\n                    !_this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                    setStyleAttribute(_this.actionObj.clone, { cursor: 'move', left: '0%', right: '0%', width: '100%' });\n                }\n                _this.actionObj.clone.style.top = formatUnit(_this.actionObj.element.offsetTop);\n            }\n            _this.actionObj.cloneElement.push(cloneElement);\n            _this.actionObj.originalElement.push(ele);\n        });\n        return this.actionObj.clone;\n    };\n    DragAndDrop.prototype.dragPosition = function (e) {\n        if (this.parent.eventDragArea) {\n            return { left: e.left, top: e.top };\n        }\n        var cellHeight = (this.actionObj.cellHeight / this.actionObj.slotInterval) * this.actionObj.interval;\n        var leftValue = formatUnit(0);\n        if (this.parent.currentView === 'Month') {\n            leftValue = e.left;\n        }\n        var cloneRight;\n        if (this.isStepDragging) {\n            cloneRight = Math.ceil(this.actionObj.clone.getBoundingClientRect().right) + this.actionObj.interval;\n        }\n        else {\n            cloneRight = this.actionObj.clone.getBoundingClientRect().right;\n        }\n        var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var contentWrapRight = dragArea.getBoundingClientRect().right;\n        if (this.parent.activeView.isTimelineView() && this.parent.currentView !== 'TimelineYear' && !this.parent.enableRtl &&\n            this.actionObj.pageX > cloneRight && !this.isMorePopupOpened && !(this.actionObj.pageX > contentWrapRight)) {\n            this.isCursorAhead = true;\n        }\n        if (this.parent.activeView.isTimelineView()) {\n            leftValue = formatUnit(this.actionObj.clone.offsetLeft);\n        }\n        var topValue;\n        if ((this.parent.activeView.isTimelineView() || !this.parent.timeScale.enable ||\n            (!isNullOrUndefined(this.actionObj.clone.offsetParent) &&\n                this.actionObj.clone.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS)))) {\n            topValue = formatUnit(this.actionObj.clone.offsetTop);\n        }\n        else if (this.parent.currentView === 'Month') {\n            topValue = formatUnit(0);\n        }\n        else if (this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n            topValue = formatUnit(this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).offsetTop);\n            setStyleAttribute(this.actionObj.clone, {\n                width: formatUnit(Math.ceil(this.actionObj.clone.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth),\n                right: this.parent.enableRtl && formatUnit(0)\n            });\n        }\n        else {\n            if (this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) &&\n                !this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                setStyleAttribute(this.actionObj.clone, {\n                    height: formatUnit(this.actionObj.cellHeight),\n                    width: formatUnit(this.actionObj.cellWidth - 1),\n                    pointerEvents: 'none'\n                });\n            }\n            var top_1 = parseInt(e.top, 10);\n            top_1 = top_1 < 0 ? 0 : top_1;\n            topValue = formatUnit(Math.ceil(top_1 / cellHeight) * cellHeight);\n            var scrollHeight = this.parent.element.querySelector('.e-content-wrap').scrollHeight;\n            var cloneBottom = parseInt(topValue, 10) + this.actionObj.clone.offsetHeight;\n            if (cloneBottom > scrollHeight) {\n                topValue = (parseInt(topValue, 10) - (cloneBottom - scrollHeight)) + 'px';\n            }\n        }\n        return { left: leftValue, top: topValue };\n    };\n    DragAndDrop.prototype.setDragActionDefaultValues = function () {\n        this.actionObj.action = 'drag';\n        this.actionObj.isAllDay = null;\n        this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n        this.actionObj.interval = this.actionObj.slotInterval;\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n        this.actionObj.cellWidth = workCell.offsetWidth;\n        this.actionObj.cellHeight = workCell.offsetHeight;\n    };\n    DragAndDrop.prototype.dragStart = function (e) {\n        var _this = this;\n        var eventGuid = this.actionObj.element.getAttribute('data-guid');\n        this.actionObj.event = this.parent.eventBase.getEventByGuid(eventGuid);\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        if (!isNullOrUndefined(eventObj)) {\n            this.startTime = eventObj[this.parent.eventFields.startTime].getTime();\n        }\n        var dragArgs = {\n            cancel: false,\n            data: eventObj,\n            selectedData: this.getSelectedData(),\n            event: e,\n            excludeSelectors: null,\n            element: this.actionObj.element,\n            interval: this.actionObj.interval,\n            navigation: { enable: false, timeDelay: 2000 },\n            scroll: { enable: true, scrollBy: 30, timeDelay: 100 }\n        };\n        this.parent.trigger(events.dragStart, dragArgs, function (dragEventArgs) {\n            if (dragEventArgs.cancel || (!isNullOrUndefined(_this.actionObj.element) &&\n                isNullOrUndefined(_this.actionObj.element.parentElement))) {\n                var dragObj = _this.actionObj.element.ej2_instances[0];\n                if (!isNullOrUndefined(dragObj)) {\n                    dragObj.intDestroy(e.event);\n                }\n                _this.actionObj.action = '';\n                _this.removeCloneElementClasses();\n                _this.removeCloneElement();\n                return;\n            }\n            _this.actionClass('addClass');\n            _this.parent.uiStateValues.action = true;\n            _this.actionObj.start = eventObj[_this.parent.eventFields.startTime];\n            _this.actionObj.end = eventObj[_this.parent.eventFields.endTime];\n            _this.actionObj.groupIndex = parseInt(_this.actionObj.element.getAttribute('data-group-index') || '0', 10);\n            _this.actionObj.interval = dragEventArgs.interval;\n            _this.actionObj.navigation = dragEventArgs.navigation;\n            _this.actionObj.scroll = dragEventArgs.scroll;\n            _this.actionObj.excludeSelectors = dragEventArgs.excludeSelectors;\n            var viewElement = _this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            _this.scrollArgs = { element: viewElement, width: viewElement.scrollWidth, height: viewElement.scrollHeight };\n            _this.widthPerMinute = (_this.actionObj.cellWidth / _this.actionObj.slotInterval) * _this.actionObj.interval;\n            _this.heightPerMinute = (_this.actionObj.cellHeight / _this.actionObj.slotInterval) * _this.actionObj.interval;\n            _this.widthUptoCursorPoint = 0;\n            _this.heightUptoCursorPoint = 0;\n            _this.cursorPointIndex = -1;\n            _this.isHeaderRows = false;\n            _this.isTimelineDayProcess = false;\n            _this.minDiff = 0;\n            _this.isMorePopupOpened = false;\n            _this.daysVariation = -1;\n            _this.isAllDayTarget = _this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS);\n            if ((_this.parent.activeView.isTimelineView() || !_this.parent.timeScale.enable) && _this.parent.currentView !== 'TimelineYear') {\n                if (!isNullOrUndefined(_this.actionObj.clone.offsetParent) &&\n                    _this.actionObj.clone.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS)) {\n                    _this.isMorePopupOpened = true;\n                }\n                _this.actionObj.pageX = e.event.pageX;\n                var rows = _this.parent.activeViewOptions.headerRows;\n                _this.isHeaderRows = rows.length > 0 && rows[rows.length - 1].option !== 'Hour' &&\n                    rows[rows.length - 1].option !== 'Date';\n                _this.isTimelineDayProcess = !_this.parent.activeViewOptions.timeScale.enable || _this.isHeaderRows ||\n                    _this.parent.currentView === 'TimelineMonth' || (rows.length > 0 && rows[rows.length - 1].option === 'Date');\n                _this.isStepDragging = !_this.isTimelineDayProcess && (_this.actionObj.slotInterval !== _this.actionObj.interval);\n                if (_this.isTimelineDayProcess) {\n                    _this.timelineEventModule = new TimelineEvent(_this.parent, 'day');\n                }\n                else {\n                    _this.timelineEventModule = new TimelineEvent(_this.parent, 'hour');\n                }\n            }\n            if (_this.parent.currentView === 'TimelineYear') {\n                _this.yearEvent = new YearEvent(_this.parent);\n            }\n            if (_this.parent.currentView === 'Month') {\n                _this.startTime = util.resetTime(new Date(_this.startTime)).getTime();\n                _this.updateOriginalElement(_this.actionObj.clone);\n                _this.monthEvent = new MonthEvent(_this.parent);\n            }\n            if (_this.parent.currentView === 'Day' || _this.parent.currentView === 'Week' || _this.parent.currentView === 'WorkWeek') {\n                _this.verticalEvent = new VerticalEvent(_this.parent);\n                _this.verticalEvent.initializeValues();\n                var splitEvents = _this.splitEvent(_this.actionObj.event);\n                splitEvents.forEach(function (event) {\n                    var query = \".e-day-wrapper[data-date=\\\"\" + util.resetTime(event[_this.parent.eventFields.startTime]).getTime() + \"\\\"]\";\n                    if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                        query = query.concat('[data-group-index = \"' + _this.actionObj.groupIndex + '\"]');\n                    }\n                    var appWrap = _this.parent.element.querySelector(query);\n                    if (appWrap) {\n                        var appEle = appWrap.querySelector('[data-id=\"' + _this.actionObj.clone.getAttribute('data-id') + '\"]');\n                        if (appEle) {\n                            addClass([appEle], cls.EVENT_ACTION_CLASS);\n                        }\n                    }\n                });\n            }\n        });\n    };\n    DragAndDrop.prototype.getSelectedData = function () {\n        if (this.isMultiSelect && this.multiData.length === 0 && this.parent.selectedElements.length > 0) {\n            for (var _i = 0, _a = this.parent.selectedElements; _i < _a.length; _i++) {\n                var element = _a[_i];\n                var eventGuid = element.getAttribute('data-guid');\n                var data = this.parent.eventBase.getEventByGuid(eventGuid);\n                this.multiData.push(extend({}, data, null, true));\n            }\n        }\n        return this.multiData;\n    };\n    DragAndDrop.prototype.drag = function (e) {\n        if (e.event && e.event.type === 'touchmove') {\n            e.event.preventDefault();\n        }\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide(true);\n        }\n        if ((!isNullOrUndefined(e.target)) && e.target.classList &&\n            e.target.classList.contains(cls.DISABLE_DATES)) {\n            return;\n        }\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventArgs = this.parent.eventBase.getPageCoordinates(e);\n        this.actionObj.Y = this.actionObj.pageY = eventArgs.pageY;\n        this.actionObj.X = this.actionObj.pageX = eventArgs.pageX;\n        this.actionObj.target = e.target;\n        this.widthUptoCursorPoint = (this.widthUptoCursorPoint === 0) ?\n            Math.ceil((Math.abs(this.actionObj.clone.getBoundingClientRect().left - this.actionObj.X) / this.widthPerMinute)) *\n                this.widthPerMinute : this.widthUptoCursorPoint;\n        this.widthUptoCursorPoint = this.isMorePopupOpened ? this.actionObj.cellWidth : this.widthUptoCursorPoint;\n        this.heightUptoCursorPoint = (this.heightUptoCursorPoint === 0) ?\n            Math.ceil((Math.abs(this.actionObj.clone.getBoundingClientRect().top - this.actionObj.Y) / this.heightPerMinute)) *\n                this.heightPerMinute : this.heightUptoCursorPoint;\n        this.isAllDayDrag = (this.parent.activeViewOptions.timeScale.enable) ?\n            this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) :\n            this.actionObj.event[this.parent.eventFields.isAllDay];\n        if (this.isStepDragging && this.minDiff === 0) {\n            this.calculateMinutesDiff(eventObj);\n        }\n        if ((this.parent.currentView === 'Month' || this.isAllDayDrag) && this.daysVariation < 0) {\n            var date = this.parent.getDateFromElement(this.actionObj.target);\n            if (!isNullOrUndefined(date)) {\n                var currentDate = util.resetTime(date);\n                var startDate = util.resetTime(new Date(eventObj[this.parent.eventFields.startTime].getTime()));\n                this.daysVariation = (currentDate.getTime() - startDate.getTime()) / util.MS_PER_DAY;\n            }\n            else {\n                this.daysVariation = 0;\n            }\n        }\n        else {\n            this.daysVariation = 0;\n        }\n        if (this.parent.eventDragArea) {\n            var targetElement = eventArgs.target;\n            this.actionObj.clone.style.top = formatUnit(targetElement.offsetTop);\n            this.actionObj.clone.style.left = formatUnit(targetElement.offsetLeft);\n            var currentTarget = closest(targetElement, '.' + cls.ROOT);\n            if (!currentTarget) {\n                this.actionObj.clone.style.height = '';\n                this.actionObj.clone.style.width = '';\n            }\n            else {\n                if (!(this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'Day')) {\n                    this.actionObj.clone.style.width = formatUnit(this.actionObj.element.offsetWidth);\n                }\n            }\n        }\n        this.updateScrollPosition(e);\n        this.updateNavigatingPosition(e);\n        this.updateDraggingDateTime(e);\n        var dragArgs = {\n            data: eventObj, event: e, element: this.actionObj.element, startTime: this.actionObj.start,\n            endTime: this.actionObj.end, selectedData: this.updatedData\n        };\n        if (this.parent.group.resources.length > 0) {\n            dragArgs.groupIndex = this.actionObj.groupIndex;\n        }\n        this.parent.trigger(events.drag, dragArgs);\n    };\n    DragAndDrop.prototype.calculateMinutesDiff = function (eventObj) {\n        if (this.parent.enableRtl) {\n            this.minDiff =\n                ((this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint) / this.widthPerMinute) * this.actionObj.interval;\n        }\n        else {\n            this.minDiff = (this.widthUptoCursorPoint / this.widthPerMinute) * this.actionObj.interval;\n        }\n        var startDate = eventObj[this.parent.eventFields.startTime];\n        var startTime = this.parent.activeView.renderDates[0];\n        var startEndHours = util.getStartEndHours(startTime, this.parent.activeView.getStartHour(), this.parent.activeView.getEndHour());\n        if (startEndHours.startHour.getTime() > startDate.getTime()) {\n            this.minDiff = this.minDiff + ((startEndHours.startHour.getTime() - startDate.getTime()) / util.MS_PER_MINUTE);\n        }\n    };\n    DragAndDrop.prototype.dragStop = function (e) {\n        var _this = this;\n        this.isCursorAhead = false;\n        this.removeCloneElementClasses();\n        this.removeCloneElement();\n        clearInterval(this.actionObj.navigationInterval);\n        this.actionObj.navigationInterval = null;\n        clearInterval(this.actionObj.scrollInterval);\n        this.actionObj.scrollInterval = null;\n        this.actionClass('removeClass');\n        this.parent.uiStateValues.action = this.parent.uiStateValues.isTapHold = false;\n        if (this.isAllowDrop(e)) {\n            return;\n        }\n        var target = (e.target.classList && (!e.target.classList.contains('e-work-cells') && this.parent.cellTemplate) ?\n            closest(e.target, '.e-work-cells') : e.target);\n        var dragArgs = {\n            cancel: false, data: this.getChangedData(this.updatedData), selectedData: this.updatedData,\n            event: e, element: this.actionObj.element, target: target\n        };\n        this.actionObj.action = null;\n        this.parent.trigger(events.dragStop, dragArgs, function (dragEventArgs) {\n            if (dragEventArgs.cancel) {\n                return;\n            }\n            if (_this.parent.isSpecificResourceEvents()) {\n                _this.parent.crudModule.crudObj.isCrudAction = true;\n                _this.parent.crudModule.crudObj.sourceEvent =\n                    [_this.parent.resourceBase.lastResourceLevel[parseInt(dragArgs.element.getAttribute('data-group-index'), 10)]];\n                var currentGroupIndex = parseInt(dragArgs.target.getAttribute('data-group-index'), 10) || _this.actionObj.groupIndex;\n                _this.parent.crudModule.crudObj.targetEvent =\n                    [_this.parent.resourceBase.lastResourceLevel[parseInt(currentGroupIndex.toString(), 10)]];\n            }\n            _this.saveChangedData(dragEventArgs, _this.isMultiSelect);\n        });\n        this.updatedData = [];\n        this.multiData = [];\n        this.isMultiSelect = false;\n        this.parent.selectedElements = [];\n    };\n    DragAndDrop.prototype.updateNavigatingPosition = function (e) {\n        var _this = this;\n        if (this.actionObj.navigation.enable) {\n            var currentDate_1 = this.parent.getCurrentTime();\n            if (isNullOrUndefined(this.actionObj.navigationInterval)) {\n                this.actionObj.navigationInterval = window.setInterval(function () {\n                    if (currentDate_1) {\n                        var crtDate = _this.parent.getCurrentTime();\n                        var end = crtDate.getSeconds();\n                        var start = currentDate_1.getSeconds() + (_this.actionObj.navigation.timeDelay / 1000);\n                        start = (start >= 60) ? start - 60 : start;\n                        if (start === end) {\n                            currentDate_1 = _this.parent.getCurrentTime();\n                            _this.viewNavigation(e);\n                            _this.updateDraggingDateTime(e);\n                        }\n                    }\n                }, this.actionObj.navigation.timeDelay);\n            }\n        }\n    };\n    DragAndDrop.prototype.updateDraggingDateTime = function (e) {\n        if (!isNullOrUndefined(this.actionObj.clone.offsetParent) &&\n            this.actionObj.clone.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS)) {\n            this.morePopupEventDragging(e);\n        }\n        else if (this.parent.activeView.isTimelineView() && this.parent.currentView !== 'TimelineYear') {\n            this.timelineEventModule.dateRender = this.parent.activeView.renderDates;\n            this.timelineEventModule.cellWidth = this.actionObj.cellWidth;\n            this.timelineEventModule.getSlotDates();\n            this.actionObj.cellWidth = this.isHeaderRows ? this.timelineEventModule.cellWidth :\n                util.getElementWidth(this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS));\n            this.calculateTimelineTime(e);\n        }\n        else {\n            if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n                this.calculateVerticalDate(e);\n            }\n            else {\n                this.calculateVerticalTime(e);\n            }\n        }\n    };\n    DragAndDrop.prototype.navigationWrapper = function () {\n        if (!this.parent.activeView.isTimelineView()) {\n            if (this.parent.currentView === 'Month' || !this.parent.timeScale.enable) {\n                var outerWrapperCls = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n                this.actionObj.index = (this.parent.activeView.renderDates.length < this.actionObj.index) ?\n                    this.parent.activeView.renderDates.length - 1 : this.actionObj.index;\n                var targetWrapper = outerWrapperCls[this.actionObj.index].querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n                if (!targetWrapper) {\n                    targetWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                    outerWrapperCls[this.actionObj.index].appendChild(targetWrapper);\n                }\n                targetWrapper.appendChild(this.actionObj.clone);\n            }\n            else {\n                var wrapperClass = this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) ?\n                    '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS : '.' + cls.APPOINTMENT_WRAPPER_CLASS;\n                this.parent.element.querySelectorAll(wrapperClass)\n                    .item(this.actionObj.index).appendChild(this.actionObj.clone);\n                if (wrapperClass === '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS) {\n                    var elementHeight = this.getAllDayEventHeight();\n                    var event_2 = [].slice.call(this.parent.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS + ':first-child'));\n                    if (event_2[0].offsetHeight < elementHeight) {\n                        for (var _i = 0, event_1 = event_2; _i < event_1.length; _i++) {\n                            var e = event_1[_i];\n                            e.style.height = ((elementHeight + 2) / 12) + 'em';\n                        }\n                    }\n                    this.actionObj.clone.style.height = formatUnit(elementHeight);\n                }\n                this.actionObj.height = parseInt(this.actionObj.clone.style.height, 10);\n            }\n        }\n        else {\n            var outWrapper = void 0;\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                outWrapper = this.parent.element.querySelectorAll('.e-appointment-container:not(.e-hidden)').item(this.actionObj.index);\n            }\n            else {\n                outWrapper = this.parent.element.querySelector('.' + cls.APPOINTMENT_CONTAINER_CLASS);\n            }\n            if (!isNullOrUndefined(outWrapper)) {\n                var tarWrapper_1 = outWrapper.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n                if (!tarWrapper_1) {\n                    tarWrapper_1 = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                    outWrapper.appendChild(tarWrapper_1);\n                }\n                this.actionObj.cloneElement.forEach(function (ele) {\n                    tarWrapper_1.appendChild(ele);\n                });\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DragAndDrop.prototype.viewNavigation = function (e) {\n        var navigationType;\n        var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (dragArea && ((!this.scrollEdges.top && !this.scrollEdges.bottom) ||\n            closest(this.actionObj.clone, '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS))) {\n            if ((dragArea.scrollLeft === 0) &&\n                (Math.round(this.actionObj.X) <=\n                    Math.round(dragArea.getBoundingClientRect().left + this.actionObj.cellWidth + window.pageXOffset))) {\n                navigationType = this.parent.enableRtl ? 'next' : 'previous';\n            }\n            else if ((Math.round(dragArea.scrollLeft) + dragArea.clientWidth === dragArea.scrollWidth) &&\n                (Math.round(this.actionObj.X) >=\n                    Math.round(dragArea.getBoundingClientRect().right - this.actionObj.cellWidth + window.pageXOffset))) {\n                navigationType = this.parent.enableRtl ? 'previous' : 'next';\n            }\n            if (navigationType) {\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate(navigationType));\n            }\n        }\n    };\n    DragAndDrop.prototype.morePopupEventDragging = function (e) {\n        if (isNullOrUndefined(e.target) || (e.target && isNullOrUndefined(closest(e.target, 'td')))) {\n            return;\n        }\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        var td = closest(e.target, 'td');\n        if (this.parent.currentView === 'TimelineYear' && (!td.classList.contains(cls.WORK_CELLS_CLASS) || td.classList.contains(cls.OTHERMONTH_CLASS))) {\n            return;\n        }\n        var dragStart = this.parent.getDateFromElement(td);\n        var dragEnd = new Date(dragStart.getTime());\n        dragEnd.setMilliseconds(eventDuration);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n        }\n        this.actionObj.start = new Date(dragStart.getTime());\n        this.actionObj.end = new Date(dragEnd.getTime());\n        this.actionObj.clone.style.top = formatUnit(td.offsetParent.offsetTop);\n        this.actionObj.clone.style.left = formatUnit(td.offsetLeft);\n        this.actionObj.clone.style.width = formatUnit(td.offsetWidth);\n        var eventContainer = td;\n        var eventWrapper;\n        if (this.parent.activeView.isTimelineView()) {\n            var rowIndex = closest(td, 'tr').rowIndex;\n            eventContainer = this.parent.element.querySelectorAll('.e-appointment-container').item(rowIndex);\n        }\n        eventWrapper = eventContainer.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n        if (!eventWrapper) {\n            eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            eventContainer.appendChild(eventWrapper);\n        }\n        this.appendCloneElement(eventWrapper);\n    };\n    DragAndDrop.prototype.calculateVerticalTime = function (e) {\n        var _this = this;\n        if (isNullOrUndefined(this.actionObj.target) ||\n            (this.actionObj.target && isNullOrUndefined(closest(this.actionObj.target, 'tr'))) ||\n            (!isNullOrUndefined(closest(this.actionObj.target, 'td')) && !(closest(this.actionObj.target, 'td').classList.contains(cls.WORK_CELLS_CLASS)) &&\n                !(closest(this.actionObj.target, 'td').classList.contains(cls.ALLDAY_CELLS_CLASS)))) {\n            return;\n        }\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            this.swapDragging(e);\n        }\n        var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventStart = eventObj[this.parent.eventFields.startTime];\n        var eventEnd = eventObj[this.parent.eventFields.endTime];\n        var eventDuration = util.getUniversalTime(eventEnd) - util.getUniversalTime(eventStart);\n        var offsetTop = Math.floor(parseInt(this.actionObj.clone.style.top, 10) / this.actionObj.cellHeight)\n            * this.actionObj.cellHeight;\n        offsetTop = offsetTop < 0 ? 0 : offsetTop;\n        if (this.scrollEdges.top || this.scrollEdges.bottom) {\n            offsetTop = this.scrollEdges.top ? dragArea.scrollTop - this.heightUptoCursorPoint +\n                this.actionObj.cellHeight + window.pageYOffset :\n                (dragArea.scrollTop + dragArea.offsetHeight - this.actionObj.clone.offsetHeight + window.pageYOffset) +\n                    (this.actionObj.clone.offsetHeight - this.heightUptoCursorPoint);\n            offsetTop = Math.round(offsetTop / this.actionObj.cellHeight) * this.actionObj.cellHeight;\n            if (dragArea.scrollTop > 0) {\n                this.actionObj.clone.style.top = formatUnit(offsetTop);\n            }\n        }\n        var rowIndex = (this.parent.activeViewOptions.timeScale.enable) ? (offsetTop / this.actionObj.cellHeight) : 0;\n        var heightPerMinute = this.actionObj.cellHeight / this.actionObj.slotInterval;\n        var diffInMinutes = parseInt(this.actionObj.clone.style.top, 10) - offsetTop;\n        var tr;\n        if (this.isAllDayDrag) {\n            tr = this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS);\n        }\n        else {\n            var trCollections = [].slice.call(this.parent.getContentTable().querySelectorAll('tr'));\n            tr = trCollections[parseInt(rowIndex.toString(), 10)];\n        }\n        var index;\n        if (!isNullOrUndefined(closest(this.actionObj.target, 'td')) && (closest(this.actionObj.target, 'td').classList.contains(cls.WORK_CELLS_CLASS) ||\n            closest(this.actionObj.target, 'td').classList.contains(cls.ALLDAY_CELLS_CLASS))) {\n            index = closest(this.actionObj.target, 'td').cellIndex;\n        }\n        var colIndex = isNullOrUndefined(index) ? closest(this.actionObj.clone, 'td').cellIndex : index;\n        this.actionObj.index = colIndex;\n        if (isNullOrUndefined(tr)) {\n            return;\n        }\n        var td = tr.children[parseInt(colIndex.toString(), 10)];\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n        }\n        var dragStart;\n        var dragEnd;\n        if (this.parent.activeViewOptions.timeScale.enable && !this.isAllDayDrag) {\n            this.appendCloneElement(this.getEventWrapper(colIndex));\n            dragStart = this.parent.getDateFromElement(td);\n            dragStart.setMinutes(dragStart.getMinutes() + (diffInMinutes / heightPerMinute));\n            dragEnd = new Date(dragStart.getTime());\n            if (this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                dragEnd.setMinutes(dragEnd.getMinutes() + this.actionObj.slotInterval);\n            }\n            else {\n                dragEnd.setMilliseconds(eventDuration);\n            }\n        }\n        else {\n            dragStart = this.parent.getDateFromElement(td);\n            dragStart.setDate(dragStart.getDate() - this.daysVariation);\n            dragStart.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());\n            dragEnd = new Date(dragStart.getTime());\n            dragEnd.setMilliseconds(eventDuration);\n            if (!this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) &&\n                this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                dragEnd = util.addDays(util.resetTime(dragEnd), 1);\n            }\n            var index_1 = this.parent.activeViewOptions.group.byDate || (this.parent.virtualScrollModule &&\n                !this.parent.activeViewOptions.timeScale.enable) ? colIndex : undefined;\n            this.updateAllDayEvents(dragStart, dragEnd, index_1);\n        }\n        this.actionObj.start = new Date(+dragStart);\n        this.actionObj.end = new Date(+dragEnd);\n        var event = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n        var dynamicWrappers = [].slice.call(this.parent.element.querySelectorAll('.e-dynamic-clone'));\n        for (var _i = 0, dynamicWrappers_1 = dynamicWrappers; _i < dynamicWrappers_1.length; _i++) {\n            var wrapper = dynamicWrappers_1[_i];\n            remove(wrapper);\n        }\n        if (this.multiData.length > 0) {\n            if (this.isAllDayTarget && this.isAllDayDrag && !isNullOrUndefined(this.actionObj.isAllDay) && !this.actionObj.isAllDay) {\n                var targetCellTime_1 = parseInt((closest(this.actionObj.target, 'td')).getAttribute('data-date'), 10);\n                this.multiData.forEach(function (data) {\n                    _this.swagData.push(extend({}, data, null, true));\n                    if (data[_this.parent.eventFields.isAllDay]) {\n                        data[_this.parent.eventFields.startTime] =\n                            new Date(data[_this.parent.eventFields.startTime].getTime() + (targetCellTime_1 - _this.startTime));\n                        var startTime = new Date(data[_this.parent.eventFields.startTime]);\n                        var endTime = new Date(startTime.setMinutes(startTime.getMinutes() + _this.actionObj.slotInterval));\n                        data[_this.parent.eventFields.endTime] = endTime;\n                        data[_this.parent.eventFields.isAllDay] = false;\n                    }\n                });\n                this.startTime = targetCellTime_1;\n            }\n            if (this.isAllDayTarget && this.isAllDayDrag &&\n                !isNullOrUndefined(this.actionObj.isAllDay) && this.actionObj.isAllDay && this.swagData.length > 0) {\n                this.multiData = this.swagData;\n                this.swagData = [];\n                var eventObj_1 = extend({}, this.actionObj.event, null, true);\n                this.startTime = eventObj_1[this.parent.eventFields.startTime].getTime();\n            }\n            var startTimeDiff = event[this.parent.eventFields.startTime].getTime() - this.startTime;\n            for (var index_2 = 0; index_2 < this.multiData.length; index_2++) {\n                this.updatedData[parseInt(index_2.toString(), 10)] =\n                    this.updateMultipleData(this.multiData[parseInt(index_2.toString(), 10)], startTimeDiff);\n                var dayIndex = this.getDayIndex(this.updatedData[parseInt(index_2.toString(), 10)]);\n                if (dayIndex >= 0) {\n                    var wrapper = this.getEventWrapper(dayIndex, this.updatedData[parseInt(index_2.toString(), 10)][this.parent.eventFields.isAllDay]);\n                    this.appendCloneElement(wrapper, this.actionObj.cloneElement[parseInt(index_2.toString(), 10)]);\n                    this.updateEventHeight(this.updatedData[parseInt(index_2.toString(), 10)], index_2, dayIndex);\n                }\n                else {\n                    if (!isNullOrUndefined(this.actionObj.cloneElement[parseInt(index_2.toString(), 10)].parentNode)) {\n                        remove(this.actionObj.cloneElement[parseInt(index_2.toString(), 10)]);\n                    }\n                }\n            }\n        }\n        else {\n            this.updateEventHeight(event);\n        }\n        this.updateTimePosition(this.actionObj.start, this.updatedData);\n    };\n    DragAndDrop.prototype.splitEvent = function (event) {\n        var eventFields = this.parent.eventFields;\n        var eventData = [];\n        var startTime = event[eventFields.startTime];\n        var endTime = event[eventFields.endTime];\n        if (util.resetTime(new Date(startTime.getTime())) < util.resetTime(new Date(endTime.getTime()))) {\n            var startReferenceDate = util.resetTime(new Date(startTime.getTime()));\n            var endReferenceDate = new Date(startReferenceDate.getTime());\n            for (var i = 0; startReferenceDate < new Date(endTime.getTime()); i++) {\n                endReferenceDate = new Date(endReferenceDate.setDate(startReferenceDate.getDate() + 1));\n                var eventObj = extend({}, event, null, true);\n                eventObj[eventFields.startTime] = new Date(startReferenceDate);\n                eventObj[eventFields.endTime] = new Date(endReferenceDate);\n                startReferenceDate = new Date(startReferenceDate.setDate(startReferenceDate.getDate() + 1));\n                eventData.push(eventObj);\n            }\n            var index = eventData.length - 1;\n            eventData[0][eventFields.startTime] = startTime;\n            eventData[parseInt(index.toString(), 10)][eventFields.endTime] = endTime;\n        }\n        else {\n            eventData.push(event);\n        }\n        return eventData;\n    };\n    DragAndDrop.prototype.updateMultipleData = function (data, timeDifference) {\n        var eventObj = extend({}, data, null, true);\n        if (!isNullOrUndefined(this.actionObj.isAllDay) && this.parent.activeViewOptions.timeScale.enable &&\n            ((this.isAllDayTarget && eventObj[this.parent.eventFields.isAllDay]) ||\n                (!this.isAllDayTarget && !eventObj[this.parent.eventFields.isAllDay]))) {\n            eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n        }\n        var endTimeDiff = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        if (eventObj[this.parent.eventFields.isAllDay]) {\n            var differInDays = Math.ceil(timeDifference / (1000 * 3600 * 24));\n            var day = Math.ceil(endTimeDiff / (1000 * 3600 * 24));\n            var startTime = new Date(eventObj[this.parent.eventFields.startTime]);\n            eventObj[this.parent.eventFields.startTime] = util.resetTime(new Date(startTime.setDate(startTime.getDate() + differInDays)));\n            eventObj[this.parent.eventFields.endTime] = util.addDays(eventObj[this.parent.eventFields.startTime], day);\n        }\n        else {\n            eventObj[this.parent.eventFields.startTime] =\n                new Date(eventObj[this.parent.eventFields.startTime].getTime() + timeDifference);\n            eventObj[this.parent.eventFields.endTime] =\n                new Date(eventObj[this.parent.eventFields.startTime].getTime() + endTimeDiff);\n        }\n        return eventObj;\n    };\n    DragAndDrop.prototype.getDayIndex = function (event) {\n        var eventObj = extend({}, event, null, true);\n        var startDate = util.resetTime(eventObj[this.parent.eventFields.startTime]);\n        if (this.parent.activeViewOptions.timeScale.enable && !eventObj[this.parent.eventFields.isAllDay]) {\n            var startHour = this.parent.activeView.getStartHour();\n            startDate.setMilliseconds(startHour.getTime() - util.resetTime(startHour).getTime());\n        }\n        var startTime = startDate.getTime();\n        var query = '';\n        var wrapper = cls.DAY_WRAPPER_CLASS;\n        if (this.parent.activeViewOptions.timeScale.enable && (eventObj[this.parent.eventFields.isAllDay])) {\n            wrapper = cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS;\n        }\n        else {\n            wrapper = cls.WORK_CELLS_CLASS;\n        }\n        query = '.' + wrapper + '[data-date=\"' + startTime + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            query = query + '[data-group-index=\"' + this.actionObj.groupIndex + '\"]';\n        }\n        this.targetTd = this.parent.element.querySelector(query);\n        if (isNullOrUndefined(this.targetTd)) {\n            return -1;\n        }\n        return this.targetTd.cellIndex;\n    };\n    DragAndDrop.prototype.updateEventHeight = function (event, index, colIndex) {\n        this.verticalEvent.initializeValues();\n        var datesCount = this.verticalEvent.getStartCount();\n        if (!this.parent.uiStateValues.isGroupAdaptive) {\n            for (var i = 0; i < this.actionObj.groupIndex; i++) {\n                if (this.verticalEvent.dateRender[parseInt(i.toString(), 10)]) {\n                    datesCount = datesCount + this.verticalEvent.dateRender[parseInt(i.toString(), 10)].length;\n                }\n            }\n        }\n        var indexGroup = this.parent.uiStateValues.isGroupAdaptive ? datesCount : this.actionObj.groupIndex;\n        var target = (this.parent.activeViewOptions.group.byDate &&\n            !isNullOrUndefined(this.parent.getDateFromElement(this.actionObj.target))) ? true : false;\n        if (target || !this.parent.activeViewOptions.group.byDate) {\n            var dynamicIndex = -1;\n            var dayIndex = !this.parent.activeViewOptions.group.byDate ?\n                isNullOrUndefined(index) ? this.actionObj.index - datesCount : colIndex - datesCount\n                : this.parent.getIndexOfDate(this.verticalEvent.dateRender[parseInt(indexGroup.toString(), 10)], util.resetTime(\n                // eslint-disable-next-line max-len\n                this.parent.getDateFromElement(isNullOrUndefined(index) ? this.actionObj.target : this.targetTd)));\n            var splitEvents = this.splitEvent(event);\n            var events_1 = this.parent.eventBase.isAllDayAppointment(event) || splitEvents.length > 2 ||\n                this.parent.eventSettings.spannedEventPlacement !== 'TimeSlot' ? [event] : splitEvents;\n            for (var i = 0; i < events_1.length; i++) {\n                if (i > 0) {\n                    var filterQuery = \".e-day-wrapper[data-date=\\\"\" + util.resetTime(events_1[parseInt(i.toString(), 10)][this.parent.eventFields.startTime]).getTime() + \"\\\"]\";\n                    if (this.parent.activeViewOptions.group.resources.length > 0) {\n                        filterQuery = filterQuery.concat('[data-group-index = \"' + this.actionObj.groupIndex + '\"]');\n                    }\n                    var appWrap = this.parent.element.querySelector(filterQuery);\n                    if (appWrap) {\n                        dayIndex = dayIndex + 1;\n                        dynamicIndex = appWrap.cellIndex;\n                    }\n                    else {\n                        dayIndex = -1;\n                    }\n                }\n                if (dayIndex >= 0) {\n                    var record = this.verticalEvent.isSpannedEvent(events_1[parseInt(i.toString(), 10)], dayIndex, indexGroup);\n                    var eStart = record[this.verticalEvent.fields.startTime];\n                    var eEnd = record[this.verticalEvent.fields.endTime];\n                    var appHeight = this.parent.activeViewOptions.timeScale.enable ? this.verticalEvent.getHeight(eStart, eEnd) :\n                        this.actionObj.element.offsetHeight;\n                    var topValue = this.parent.activeViewOptions.timeScale.enable ?\n                        this.verticalEvent.getTopValue(eStart, dayIndex, indexGroup) : this.actionObj.element.offsetTop;\n                    if (isNullOrUndefined(index)) {\n                        if (i === 0) {\n                            this.actionObj.clone.style.top = formatUnit(topValue);\n                            this.actionObj.clone.style.height = formatUnit(appHeight);\n                        }\n                        else {\n                            this.renderSpannedEvents(record, dynamicIndex, topValue, appHeight);\n                        }\n                    }\n                    else {\n                        var appWidth = this.actionObj.cellWidth;\n                        if (event[this.parent.eventFields.isAllDay]) {\n                            topValue = this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).offsetTop;\n                            appHeight = this.getAllDayEventHeight();\n                            var timeDiff = event[this.parent.eventFields.endTime].getTime() -\n                                event[this.parent.eventFields.startTime].getTime();\n                            var allDayDifference = Math.ceil(timeDiff / (1000 * 3600 * 24));\n                            if (allDayDifference >= 0) {\n                                appWidth = (allDayDifference * this.actionObj.cellWidth);\n                            }\n                        }\n                        if (this.actionObj.cloneElement[parseInt(index.toString(), 10)]) {\n                            if (i === 0) {\n                                this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.top = formatUnit(topValue);\n                                this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.height = formatUnit(appHeight);\n                                this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.width = formatUnit(appWidth);\n                                this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.left = formatUnit(0);\n                            }\n                            else {\n                                this.renderSpannedEvents(record, dynamicIndex, topValue, appHeight);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    DragAndDrop.prototype.renderSpannedEvents = function (record, index, top, height) {\n        var startTime = record[this.parent.eventFields.startTime].getTime();\n        var endTime = record[this.parent.eventFields.endTime].getTime();\n        if (startTime !== endTime) {\n            var appointmentElement = this.verticalEvent.\n                createAppointmentElement(record, false, record.isSpanned, this.actionObj.groupIndex);\n            addClass([appointmentElement], [cls.CLONE_ELEMENT_CLASS, 'e-dynamic-clone']);\n            setStyleAttribute(appointmentElement, {\n                'width': '100%',\n                'height': height + 'px',\n                'top': top + 'px',\n                'border': '0px'\n            });\n            var appointmentWrap = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_WRAPPER_CLASS));\n            appointmentWrap[parseInt(index.toString(), 10)].appendChild(appointmentElement);\n        }\n    };\n    DragAndDrop.prototype.getRenderedDates = function () {\n        var _this = this;\n        var _a, _b;\n        var renderDates = this.parent.activeView.renderDates;\n        (_a = this.parent.eventBase.slots).push.apply(_a, this.parent.activeView.renderDates.map(function (date) { return +date; }));\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.eventBase.slots = [];\n            var resources = this.parent.resourceBase.lastResourceLevel.\n                filter(function (res) { return res.groupIndex === _this.actionObj.groupIndex; });\n            renderDates = resources[0].renderDates;\n            (_b = this.parent.eventBase.slots).push.apply(_b, renderDates.map(function (date) { return +date; }));\n        }\n        return renderDates;\n    };\n    DragAndDrop.prototype.updateAllDayEvents = function (startDate, endDate, colIndex) {\n        this.parent.eventBase.slots = [];\n        var event = this.getUpdatedEvent(startDate, endDate, this.actionObj.event);\n        var renderDates = this.getRenderedDates();\n        var events = this.parent.eventBase.splitEvent(event, renderDates);\n        var query = \".e-all-day-cells[data-date=\\\"\" + events[0][this.parent.eventFields.startTime].getTime() + \"\\\"]\";\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            query = query.concat('[data-group-index = \"' + this.actionObj.groupIndex + '\"]');\n        }\n        var cell = [].slice.call(this.parent.element.querySelectorAll(query));\n        if (cell.length > 0 || !isNullOrUndefined(colIndex)) {\n            var cellIndex = !isNullOrUndefined(colIndex) ? colIndex : cell[0].cellIndex;\n            this.appendCloneElement(this.getEventWrapper(cellIndex));\n            // eslint-disable-next-line max-len\n            this.actionObj.clone.style.width = formatUnit(events[0].data.count * this.actionObj.cellWidth);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DragAndDrop.prototype.swapDragging = function (e) {\n        var colIndex = !isNullOrUndefined(closest(this.actionObj.target, 'td')) && closest(this.actionObj.target, 'td').cellIndex;\n        if (closest(this.actionObj.target, '.' + cls.DATE_HEADER_WRAP_CLASS) &&\n            !closest(this.actionObj.clone, '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS)) {\n            addClass([this.actionObj.clone], cls.ALLDAY_APPOINTMENT_CLASS);\n            this.appendCloneElement(this.getEventWrapper(colIndex));\n            this.actionObj.isAllDay = true;\n            var eventHeight = this.getAllDayEventHeight();\n            var allDayElement = [].slice.call(this.parent.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS + ':first-child'));\n            if (allDayElement[0].offsetHeight < eventHeight) {\n                for (var _i = 0, allDayElement_1 = allDayElement; _i < allDayElement_1.length; _i++) {\n                    var element = allDayElement_1[_i];\n                    element.style.height = ((eventHeight + 2) / 12) + 'em';\n                }\n            }\n            setStyleAttribute(this.actionObj.clone, {\n                width: formatUnit(this.actionObj.cellWidth),\n                height: formatUnit(eventHeight),\n                top: formatUnit(this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).offsetTop)\n            });\n        }\n        if (closest(this.actionObj.target, '.' + cls.WORK_CELLS_CLASS) &&\n            !closest(this.actionObj.clone, '.' + cls.DAY_WRAPPER_CLASS)) {\n            removeClass([this.actionObj.clone], cls.ALLDAY_APPOINTMENT_CLASS);\n            this.appendCloneElement(this.getEventWrapper(colIndex));\n            this.actionObj.isAllDay = false;\n            // eslint-disable-next-line max-len\n            var height = (this.actionObj.element.offsetHeight === 0) ? this.actionObj.height : this.actionObj.element.offsetHeight;\n            setStyleAttribute(this.actionObj.clone, {\n                left: formatUnit(0),\n                height: formatUnit(height),\n                width: formatUnit(this.actionObj.cellWidth)\n            });\n        }\n    };\n    DragAndDrop.prototype.calculateVerticalDate = function (e) {\n        if (isNullOrUndefined(e.target) || (e.target && isNullOrUndefined(closest(e.target, 'tr'))) ||\n            (e.target && e.target.tagName === 'DIV')) {\n            return;\n        }\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        if (isNullOrUndefined(this.parent.eventDragArea)) {\n            this.removeCloneElement();\n        }\n        var eventDuration = util.getUniversalTime(eventObj[this.parent.eventFields.endTime]) -\n            util.getUniversalTime(eventObj[this.parent.eventFields.startTime]);\n        var td = closest(this.actionObj.target, 'td');\n        if (!isNullOrUndefined(td)) {\n            var tr = td.parentElement;\n            this.actionObj.index = (tr.rowIndex * tr.children.length) + td.cellIndex;\n            var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n            td = workCells[this.actionObj.index];\n            var currentDate = this.parent.getDateFromElement(td);\n            if (!isNullOrUndefined(currentDate)) {\n                if (this.parent.activeViewOptions.group.resources.length > 0) {\n                    this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n                }\n                var timeString = new Date(currentDate.setDate(currentDate.getDate() - this.daysVariation));\n                var dragStart = new Date(timeString.getTime());\n                var startTimeDiff = util.getUniversalTime(eventObj[this.parent.eventFields.startTime]) -\n                    util.getUniversalTime(util.resetTime(new Date(+eventObj[this.parent.eventFields.startTime])));\n                dragStart.setMilliseconds(startTimeDiff);\n                var dragEnd = new Date(dragStart.getTime());\n                dragEnd.setMilliseconds(eventDuration);\n                this.actionObj.start = new Date(dragStart.getTime());\n                this.actionObj.end = new Date(dragEnd.getTime());\n            }\n        }\n        var event = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n        if (isNullOrUndefined(this.parent.eventDragArea)) {\n            var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n            for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n                var wrapper = eventWrappers_1[_i];\n                remove(wrapper);\n            }\n        }\n        if (this.multiData && this.multiData.length > 0) {\n            var startTime = util.resetTime(new Date(event[this.parent.eventFields.startTime]));\n            var startTimeDiff = startTime.getTime() - this.startTime;\n            if (this.parent.currentView === 'TimelineYear' && this.parent.group.resources.length > 0) {\n                startTimeDiff = (startTime.getFullYear() - new Date(this.startTime).getFullYear()) * 12;\n                startTimeDiff -= new Date(this.startTime).getMonth();\n                startTimeDiff += startTime.getMonth();\n            }\n            for (var index = 0; index < this.multiData.length; index++) {\n                this.updatedData[parseInt(index.toString(), 10)] =\n                    this.updateMultipleVerticalDate(this.multiData[parseInt(index.toString(), 10)], startTimeDiff);\n                if (this.parent.currentView === 'TimelineYear') {\n                    this.dynamicYearlyEventsRendering(this.updatedData[parseInt(index.toString(), 10)]);\n                }\n                else {\n                    this.dynamicEventsRendering(this.updatedData[parseInt(index.toString(), 10)]);\n                }\n            }\n        }\n        else {\n            if (this.parent.currentView === 'TimelineYear') {\n                this.dynamicYearlyEventsRendering(event);\n            }\n            else {\n                this.dynamicEventsRendering(event);\n            }\n        }\n    };\n    DragAndDrop.prototype.updateMultipleVerticalDate = function (data, timeDifference) {\n        var eventObj = extend({}, data, null, true);\n        var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        var startDate = new Date(eventObj[this.parent.eventFields.startTime]);\n        if (this.parent.currentView === 'TimelineYear' && this.parent.group.resources.length > 0) {\n            eventObj[this.parent.eventFields.startTime] = new Date(startDate.setMonth(startDate.getMonth() + timeDifference));\n        }\n        else {\n            var differInDays = Math.ceil(timeDifference / util.MS_PER_DAY);\n            eventObj[this.parent.eventFields.startTime] = new Date(startDate.setDate(startDate.getDate() + differInDays));\n        }\n        eventObj[this.parent.eventFields.endTime] =\n            new Date(eventObj[this.parent.eventFields.startTime].getTime() + eventDuration);\n        return eventObj;\n    };\n    DragAndDrop.prototype.calculateTimelineTime = function (e) {\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventDuration = util.getUniversalTime(eventObj[this.parent.eventFields.endTime]) -\n            util.getUniversalTime(eventObj[this.parent.eventFields.startTime]);\n        var offsetLeft = this.parent.enableRtl ? Math.abs(this.actionObj.clone.offsetLeft) - this.actionObj.clone.offsetWidth :\n            parseInt(this.actionObj.clone.style.left, 10);\n        offsetLeft = Math.floor(offsetLeft / Math.trunc(this.actionObj.cellWidth)) * this.actionObj.cellWidth;\n        var rightOffset;\n        if (this.parent.enableRtl) {\n            rightOffset = Math.abs(parseInt(this.actionObj.clone.style.right, 10));\n            this.actionObj.clone.style.right = formatUnit(rightOffset);\n        }\n        offsetLeft = this.getOffsetValue(offsetLeft, rightOffset);\n        var colIndex = this.getColumnIndex(offsetLeft);\n        var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var contentWrapRight = dragArea.getBoundingClientRect().right;\n        var cursorDrag = this.parent.activeView.isTimelineView() && !this.parent.enableRtl &&\n            this.actionObj.pageX > this.actionObj.clone.getBoundingClientRect().right &&\n            !this.isMorePopupOpened && !(this.actionObj.pageX > contentWrapRight);\n        var leftVal = (this.parent.eventDragArea) ? dragArea.scrollLeft - dragArea.offsetLeft : 0;\n        if ((this.isCursorAhead || cursorDrag) && !this.isStepDragging) {\n            this.isCursorAhead = true;\n        }\n        var cloneIndex = Math.floor((this.actionObj.pageX - this.actionObj.clone.getBoundingClientRect().left + leftVal) / this.actionObj.cellWidth);\n        if (this.parent.enableRtl) {\n            cloneIndex = Math.abs(Math.floor((this.actionObj.pageX - this.actionObj.clone.getBoundingClientRect().right) /\n                this.actionObj.cellWidth)) - 1;\n        }\n        if (this.cursorPointIndex < 0) {\n            this.cursorIndex(e, eventObj, offsetLeft, cloneIndex);\n        }\n        var tr = this.parent.getContentTable().querySelector('tr');\n        var index = this.getCursorCurrentIndex(colIndex, cloneIndex, tr);\n        index = index < 0 ? 0 : index;\n        var eventStart = this.isHeaderRows ? new Date(this.timelineEventModule.dateRender[parseInt(index.toString(), 10)].getTime()) :\n            this.parent.getDateFromElement(tr.children[parseInt(index.toString(), 10)]);\n        if (this.isStepDragging) {\n            var widthDiff = this.getWidthDiff(tr, index);\n            if (widthDiff !== 0) {\n                var timeDiff = Math.ceil(widthDiff / this.widthPerMinute);\n                eventStart.setMinutes(eventStart.getMinutes() + (timeDiff * this.actionObj.interval));\n                if (this.isCursorAhead || cursorDrag) {\n                    eventStart.setMilliseconds(-(eventDuration));\n                }\n                else {\n                    eventStart.setMinutes(eventStart.getMinutes() - this.minDiff);\n                    var intervalInMS = this.actionObj.interval * util.MS_PER_MINUTE;\n                    timeDiff = Math.abs(eventStart.getTime() - this.actionObj.start.getTime()) / intervalInMS;\n                    var roundTimeDiff = Math.trunc(timeDiff);\n                    if (roundTimeDiff !== timeDiff) {\n                        timeDiff = (roundTimeDiff * intervalInMS) * (eventStart > this.actionObj.start ? 1 : -1);\n                        eventStart = new Date(this.actionObj.start.getTime() + timeDiff);\n                    }\n                }\n            }\n            else {\n                eventStart = this.actionObj.start;\n            }\n        }\n        else {\n            if (this.isCursorAhead || cursorDrag) {\n                var minutes = this.isTimelineDayProcess ? MINUTES_PER_DAY : this.actionObj.slotInterval;\n                eventStart.setMinutes(eventStart.getMinutes() + minutes);\n                eventStart.setMilliseconds(-(eventDuration));\n                if (eventStart.getTime() === util.resetTime(eventStart).getTime() && eventStart.getMinutes() === 0 && eventDuration === 0) {\n                    eventStart.setMinutes(-minutes);\n                }\n            }\n            else {\n                eventStart.setMinutes(eventStart.getMinutes() -\n                    (this.cursorPointIndex * (this.isTimelineDayProcess ? MINUTES_PER_DAY : this.actionObj.slotInterval)));\n            }\n        }\n        if (!this.isStepDragging) {\n            eventStart = this.calculateIntervalTime(eventStart);\n        }\n        if (this.isTimelineDayProcess) {\n            var eventSrt = eventObj[this.parent.eventFields.startTime];\n            eventStart.setHours(eventSrt.getHours(), eventSrt.getMinutes(), eventSrt.getSeconds());\n        }\n        if (this.parent.eventDragArea) {\n            var targetDate = this.parent.getDateFromElement(e.target);\n            if (!isNullOrUndefined(targetDate)) {\n                if (!this.parent.activeViewOptions.timeScale.enable || (this.parent.currentView === 'TimelineMonth')) {\n                    var eventSrt = eventObj[this.parent.eventFields.startTime];\n                    eventStart = new Date(targetDate.setHours(eventSrt.getHours(), eventSrt.getMinutes(), eventSrt.getSeconds()));\n                }\n                else {\n                    eventStart = targetDate;\n                }\n            }\n        }\n        var eventEnd = new Date(eventStart.getTime());\n        eventEnd.setMilliseconds(eventDuration);\n        var eventsData = [this.getUpdatedEvent(eventStart, eventEnd, this.actionObj.event)];\n        if (this.multiData.length > 0) {\n            var startTimeDiff = eventsData[0][this.parent.eventFields.startTime].getTime() - this.startTime;\n            for (var i = 0; i < this.multiData.length; i++) {\n                this.updatedData[parseInt(i.toString(), 10)] =\n                    this.updateMultipleData(this.multiData[parseInt(i.toString(), 10)], startTimeDiff);\n            }\n            eventsData = this.updatedData;\n        }\n        for (var dataIndex = 0; dataIndex < eventsData.length; dataIndex++) {\n            var cloneElement = this.multiData.length > 0 ? this.actionObj.cloneElement[parseInt(dataIndex.toString(), 10)] : this.actionObj.clone;\n            if (isNullOrUndefined(this.parent.eventDragArea)) {\n                var events_2 = this.timelineEventModule.splitEvent(eventsData[parseInt(dataIndex.toString(), 10)], this.timelineEventModule.dateRender);\n                var eventData = events_2[0].data;\n                var startTime = this.timelineEventModule.getStartTime(events_2[0], eventData);\n                var endTime = this.timelineEventModule.getEndTime(events_2[0], eventData);\n                // eslint-disable-next-line max-len\n                var width = this.timelineEventModule.getEventWidth(startTime, endTime, eventObj[this.parent.eventFields.isAllDay], eventData.count);\n                // eslint-disable-next-line max-len\n                var day = this.parent.getIndexOfDate(this.timelineEventModule.dateRender, util.resetTime(new Date(startTime.getTime())));\n                day = day < 0 ? 0 : day;\n                var left = this.timelineEventModule.getPosition(startTime, endTime, eventObj[this.parent.eventFields.isAllDay], day);\n                if (this.parent.enableRtl) {\n                    cloneElement.style.right = formatUnit(left);\n                }\n                else {\n                    cloneElement.style.left = formatUnit(left);\n                }\n                if (!this.isMorePopupOpened) {\n                    cloneElement.style.width = formatUnit(width);\n                }\n            }\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                this.calculateResourceGroupingPosition(e, cloneElement);\n            }\n            this.actionObj.start = new Date(eventStart.getTime());\n            this.actionObj.end = new Date(eventEnd.getTime());\n            this.updateTimePosition(this.actionObj.start, this.updatedData);\n        }\n    };\n    DragAndDrop.prototype.getOffsetValue = function (offsetLeft, rightOffset) {\n        if (this.scrollEdges.left || this.scrollEdges.right) {\n            var viewEle = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            if (this.parent.enableRtl) {\n                rightOffset = viewEle.offsetWidth - viewEle.scrollLeft;\n                if (this.scrollEdges.right) {\n                    rightOffset = (rightOffset - viewEle.offsetWidth + this.actionObj.clone.offsetWidth) -\n                        (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint);\n                }\n                else {\n                    rightOffset = rightOffset + this.widthUptoCursorPoint;\n                    if (rightOffset - this.widthUptoCursorPoint >= viewEle.scrollWidth) {\n                        this.actionObj.clone.style.width =\n                            formatUnit(this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint + this.actionObj.cellWidth);\n                        rightOffset = (viewEle.scrollLeft - viewEle.scrollWidth);\n                    }\n                }\n                if (isNullOrUndefined(this.parent.eventDragArea)) {\n                    this.actionObj.clone.style.left = formatUnit(rightOffset);\n                }\n            }\n            else {\n                if (this.scrollEdges.left) {\n                    offsetLeft = viewEle.scrollLeft - this.widthUptoCursorPoint + this.actionObj.cellWidth;\n                    if (viewEle.scrollLeft + viewEle.offsetWidth >= viewEle.offsetWidth) {\n                        viewEle.scrollLeft = viewEle.scrollLeft - 1;\n                    }\n                    else if (this.actionObj.clone.offsetLeft === 0) {\n                        offsetLeft = viewEle.scrollLeft;\n                    }\n                }\n                else {\n                    offsetLeft = (viewEle.scrollLeft + viewEle.offsetWidth -\n                        this.actionObj.clone.offsetWidth) + (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint);\n                }\n                offsetLeft = offsetLeft < 0 ? 0 : offsetLeft;\n                if (isNullOrUndefined(this.parent.eventDragArea)) {\n                    this.actionObj.clone.style.left = formatUnit(offsetLeft);\n                }\n            }\n        }\n        return offsetLeft;\n    };\n    DragAndDrop.prototype.getWidthDiff = function (tr, index) {\n        var pages = this.scrollArgs.element.getBoundingClientRect();\n        if (pages.left <= this.actionObj.pageX && pages.right >= this.actionObj.pageX) {\n            var targetLeft = tr.children[parseInt(index.toString(), 10)].offsetLeft;\n            var pageX = this.actionObj.pageX - pages.left;\n            if (this.parent.enableRtl) {\n                return (targetLeft + this.actionObj.cellWidth) - (this.scrollArgs.element.scrollLeft + pageX);\n            }\n            else {\n                return (this.scrollArgs.element.scrollLeft + pageX) - targetLeft;\n            }\n        }\n        return 0;\n    };\n    DragAndDrop.prototype.getColumnIndex = function (offsetLeft) {\n        var index = Math.floor(offsetLeft / Math.trunc(this.actionObj.cellWidth));\n        if (this.isHeaderRows) {\n            return index;\n        }\n        return this.getIndex(index);\n    };\n    DragAndDrop.prototype.getCursorCurrentIndex = function (colIndex, cloneIndex, tr) {\n        var index = colIndex + cloneIndex;\n        if (this.isHeaderRows) {\n            var dateLength = Math.floor(tr.offsetWidth / this.actionObj.cellWidth);\n            return (index > dateLength - 1) ? dateLength - 1 : index;\n        }\n        return (index > tr.children.length - 1) ? tr.children.length - 1 : index;\n    };\n    DragAndDrop.prototype.cursorIndex = function (e, event, left, index) {\n        var td = closest(e.target, '.e-work-cells');\n        if (!isNullOrUndefined(td) && !this.isMorePopupOpened) {\n            var targetDate = this.parent.getDateFromElement(td);\n            if (this.isHeaderRows) {\n                var currentIndex = Math.floor(left / this.actionObj.cellWidth);\n                targetDate = new Date(this.timelineEventModule.dateRender[currentIndex + index].getTime());\n            }\n            var timeDiff = targetDate.getTime() - event[this.parent.eventFields.startTime].getTime();\n            if (this.isTimelineDayProcess) {\n                this.cursorPointIndex = Math.abs(Math.ceil(timeDiff / (util.MS_PER_DAY)));\n            }\n            else {\n                var widthDiff = Math.floor((timeDiff / util.MS_PER_MINUTE) / (this.actionObj.slotInterval / this.actionObj.cellWidth));\n                this.cursorPointIndex = Math.floor(widthDiff / this.actionObj.cellWidth);\n                this.cursorPointIndex = this.cursorPointIndex < 0 ? 0 : this.cursorPointIndex;\n            }\n        }\n        else {\n            this.cursorPointIndex = 0;\n        }\n    };\n    DragAndDrop.prototype.calculateResourceGroupingPosition = function (e, cloneElement) {\n        var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var trCollection = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap .e-content-table tr:not(.e-hidden)'));\n        var translateY = util.getTranslateY(dragArea.querySelector('table'));\n        translateY = (isNullOrUndefined(translateY)) ? 0 : translateY;\n        var rowHeight = (this.parent.rowAutoHeight) ?\n            ~~(dragArea.querySelector('table').offsetHeight / trCollection.length) : this.actionObj.cellHeight;\n        var rowIndex = Math.floor(Math.floor((this.actionObj.Y +\n            (dragArea.scrollTop - translateY - (window.scrollY || window.pageYOffset))) -\n            util.getElementTop(dragArea)) / rowHeight);\n        rowIndex = (rowIndex < 0) ? 0 : (rowIndex > trCollection.length - 1) ? trCollection.length - 1 : rowIndex;\n        this.actionObj.index = rowIndex;\n        var eventContainer = this.parent.element.querySelectorAll('.e-appointment-container:not(.e-hidden)').item(rowIndex);\n        var eventWrapper = eventContainer.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n        if (!eventWrapper) {\n            eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            eventContainer.appendChild(eventWrapper);\n        }\n        this.appendCloneElement(eventWrapper, cloneElement);\n        var td = closest(this.actionObj.target, 'td');\n        this.actionObj.groupIndex = (td && !isNaN(parseInt(td.getAttribute('data-group-index'), 10)))\n            ? parseInt(td.getAttribute('data-group-index'), 10) : this.actionObj.groupIndex;\n        if (!isNullOrUndefined(this.parent.eventDragArea)) {\n            return;\n        }\n        var top = util.getElementHeight(trCollection[parseInt(rowIndex.toString(), 10)]) * rowIndex;\n        if (this.parent.rowAutoHeight) {\n            var cursorElement = this.getCursorElement(e);\n            if (cursorElement) {\n                top = cursorElement.classList.contains(cls.WORK_CELLS_CLASS) ? cursorElement.offsetTop :\n                    (cursorElement.offsetParent && cursorElement.offsetParent.classList.contains(cls.APPOINTMENT_CLASS)) ?\n                        cursorElement.offsetParent.offsetTop : top;\n            }\n        }\n        cloneElement.style.top = formatUnit(top);\n    };\n    DragAndDrop.prototype.appendCloneElement = function (element, cloneElement) {\n        if (cloneElement === void 0) { cloneElement = null; }\n        cloneElement = isNullOrUndefined(cloneElement) ? this.actionObj.clone : cloneElement;\n        var dragElement = document.querySelector(this.parent.eventDragArea);\n        if (this.parent.eventDragArea && dragElement) {\n            dragElement.appendChild(cloneElement);\n        }\n        else {\n            element.appendChild(cloneElement);\n        }\n    };\n    DragAndDrop.prototype.getEventWrapper = function (index, isAllDayDrag) {\n        var eventWrapper;\n        if (isNullOrUndefined(isAllDayDrag)) {\n            isAllDayDrag = this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS);\n        }\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var wrapperClass = isAllDayDrag ? '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS : '.' + cls.APPOINTMENT_WRAPPER_CLASS;\n            eventWrapper = this.parent.element.querySelectorAll(wrapperClass).item(index);\n        }\n        else {\n            var targetWrapper = this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS).item(index);\n            eventWrapper = targetWrapper.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n            if (!eventWrapper) {\n                eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                targetWrapper.appendChild(eventWrapper);\n            }\n        }\n        return eventWrapper;\n    };\n    DragAndDrop.prototype.getAllDayEventHeight = function () {\n        var eventWrapper = createElement('div', { className: cls.APPOINTMENT_CLASS });\n        this.parent.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS).appendChild(eventWrapper);\n        var eventHeight = eventWrapper.offsetHeight;\n        remove(eventWrapper);\n        return eventHeight;\n    };\n    DragAndDrop.prototype.isAllowDrop = function (e) {\n        if (!this.actionObj.excludeSelectors) {\n            return false;\n        }\n        var dropSelectors = this.actionObj.excludeSelectors.split(',');\n        var isAllowDrop = false;\n        for (var _i = 0, dropSelectors_1 = dropSelectors; _i < dropSelectors_1.length; _i++) {\n            var selector = dropSelectors_1[_i];\n            if (e.target.classList.contains(selector)) {\n                isAllowDrop = true;\n                break;\n            }\n        }\n        return isAllowDrop;\n    };\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name\n     */\n    DragAndDrop.prototype.getModuleName = function () {\n        return 'dragAndDrop';\n    };\n    return DragAndDrop;\n}(ActionBase));\nexport { DragAndDrop };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}